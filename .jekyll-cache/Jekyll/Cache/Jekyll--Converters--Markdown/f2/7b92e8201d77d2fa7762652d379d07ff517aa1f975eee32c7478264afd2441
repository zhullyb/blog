I"•-<ul id="markdown-toc">
  <li><a href="#01-ä»‹ç»" id="markdown-toc-01-ä»‹ç»">0.1 ä»‹ç»</a>    <ul>
      <li><a href="#è®¾å¤‡æœ€ä½è¦æ±‚" id="markdown-toc-è®¾å¤‡æœ€ä½è¦æ±‚">è®¾å¤‡æœ€ä½è¦æ±‚</a></li>
      <li><a href="#æ“ä½œç³»ç»Ÿ" id="markdown-toc-æ“ä½œç³»ç»Ÿ">æ“ä½œç³»ç»Ÿ</a></li>
    </ul>
  </li>
  <li><a href="#02-å®‰è£…ä¾èµ–" id="markdown-toc-02-å®‰è£…ä¾èµ–">0.2 å®‰è£…ä¾èµ–</a></li>
  <li><a href="#03å®‰è£…repoæºç åŒæ­¥å·¥å…·" id="markdown-toc-03å®‰è£…repoæºç åŒæ­¥å·¥å…·">0.3å®‰è£…repoæºç åŒæ­¥å·¥å…·</a></li>
  <li><a href="#05-ä¸‹è½½æºç " id="markdown-toc-05-ä¸‹è½½æºç ">0.5 ä¸‹è½½æºç </a></li>
  <li><a href="#06-åŒæ­¥è®¾å¤‡æºç " id="markdown-toc-06-åŒæ­¥è®¾å¤‡æºç ">0.6 åŒæ­¥è®¾å¤‡æºç </a></li>
  <li><a href="#å¤„ç†ç›¸å…³é…ç½®æ–‡ä»¶" id="markdown-toc-å¤„ç†ç›¸å…³é…ç½®æ–‡ä»¶">å¤„ç†ç›¸å…³é…ç½®æ–‡ä»¶</a></li>
  <li><a href="#ç¼–è¯‘" id="markdown-toc-ç¼–è¯‘">ç¼–è¯‘</a>    <ul>
      <li><a href="#10-bring-up" id="markdown-toc-10-bring-up">1.0 bring up</a></li>
      <li><a href="#11-å¼€å§‹ç¼–è¯‘" id="markdown-toc-11-å¼€å§‹ç¼–è¯‘">1.1 å¼€å§‹ç¼–è¯‘</a></li>
      <li><a href="#12-ç¼–è¯‘å®Œæˆ" id="markdown-toc-12-ç¼–è¯‘å®Œæˆ">1.2 ç¼–è¯‘å®Œæˆ</a></li>
      <li><a href="#13-make-clean" id="markdown-toc-13-make-clean">1.3 Make Clean</a></li>
    </ul>
  </li>
</ul>

<h2 id="01-ä»‹ç»">0.1 ä»‹ç»</h2>
<p>åœ¨ Ubuntu 18.04 ä¸‹ç¼–è¯‘ LineageOS/CM ç­‰ AOSP æºç å¯èƒ½ä¼šè¸©åˆ°å¾ˆå¤šå‘ã€‚ä¸‹é¢å°±è·Ÿæˆ‘ä¸€èµ·æ¥é…ç½®é¿å…å…¥å‘å§ã€‚Ubuntu 18.04 LTS è¯·é€‰æ‹© 64 ä½çš„ã€‚</p>
<h3 id="è®¾å¤‡æœ€ä½è¦æ±‚">è®¾å¤‡æœ€ä½è¦æ±‚</h3>
<p>CPU: Core i3 530 åŠä»¥ä¸Šçš„ CPUï¼ˆæ¨è Intel Core i7 6 ä»£ä»¥ä¸Šæˆ– AMD Ryzen ç³»åˆ— CPU)</p>

<p>RAM: 12GB åŠä»¥ä¸Šçš„ RAMï¼ˆæ¨è 16GB åŠä»¥ä¸Š)</p>

<p>HDD: HDD 210GB åŠä»¥ä¸Šå‰©ä½™å­˜å‚¨ç©ºé—´ï¼ˆæ¨è SSD 256GB åŠä»¥ä¸Šï¼‰</p>

<p>å½“ç„¶ CPU å·®ç‚¹æ²¡äº‹ï¼Œåªä¸è¿‡æ˜¯æµªè´¹æ—¶é—´ä¸ç”µè´¹è€Œå·²ã€‚æºç æ‰€åœ¨ç›®å½•æœ€ä½å‰©ä½™ç©ºé—´ä¸è¦å°äº 200GBã€‚</p>

<h3 id="æ“ä½œç³»ç»Ÿ">æ“ä½œç³»ç»Ÿ</h3>
<p>Ubuntu 18.04 LTS 64bit</p>
<h2 id="02-å®‰è£…ä¾èµ–">0.2 å®‰è£…ä¾èµ–</h2>
<p>è¿™ä¸€æ­¥å®‰è£…ä¹‹å‰ä½ å¯ä»¥å…ˆç»™Ubuntuæ¢æºï¼Œå…·ä½“çš„æ•™ç¨‹å¯ä»¥ç™¾åº¦ï¼Œæˆ‘ä¸ªäººæ¨èæ¸…åçš„æºã€‚</p>
<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt <span class="nb">install</span> <span class="nt">-y</span> bc bison build-essential ccache curl flex g++-multilib gcc-multilib git gnupg gperf lib32ncurses5-dev lib32readline-dev lib32z1-dev liblz4-tool libncurses5-dev libsdl1.2-dev libssl-dev libwxgtk3.0-dev libxml2 libxml2-utils lzop pngcrush rsync schedtool squashfs-tools xsltproc zip zlib1g-dev imagemagick libbz2-dev libssl-dev lzma ncftp bash-completion m4 openjdk-8-jdk python clang jq
</code></pre></div></div>
<h2 id="03å®‰è£…repoæºç åŒæ­¥å·¥å…·">0.3å®‰è£…repoæºç åŒæ­¥å·¥å…·</h2>
<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">mkdir</span> ~/.bin
<span class="nv">PATH</span><span class="o">=</span>~/.bin:<span class="nv">$PATH</span>
curl https://raw.githubusercontent.com/MoKee/git-repo/stable/repo <span class="o">&gt;</span> ~/.bin/repo
<span class="nb">chmod </span>a+x ~/.bin/repo
</code></pre></div></div>
<p>## 0.4 è®¾ç½®git</p>
<ol>
  <li>è®¾ç½® git ç”¨æˆ·åå’Œé‚®ç®±
 ç¤ºä¾‹å¦‚ä¸‹ï¼š
    <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git config <span class="nt">--global</span> user.email <span class="s2">"you@example.com"</span>
git config <span class="nt">--global</span> user.name <span class="s2">"Your Name"</span>
</code></pre></div>    </div>
    <p>åŒå¼•å·ä¸­çš„ â€œyou@example.comâ€ å¡«å†™æ‚¨çš„ github æ‰€ä½¿ç”¨çš„é‚®ç®±ã€‚æ³¨æ„æ ¼å¼ï¼Œä¸è¦æŠŠåŒå¼•å·å»æ‰ã€‚
åŒå¼•å·ä¸­çš„ â€œYour Nameâ€ å¡«å†™æ‚¨çš„ github ç”¨æˆ·åï¼Œä¸è¦æŠŠåŒå¼•å·å»æ‰ã€‚</p>
  </li>
  <li>ç”Ÿæˆ ssh å¹¶æ·»åŠ åˆ° githubï¼š</li>
</ol>

<p>æ‚¨å¯ä»¥å‚è€ƒå®˜æ–¹çš„<a href="https://help.github.com/articles/connecting-to-github-with-ssh/">æ–‡æ¡£</a></p>

<p>å¦‚æœæ‚¨ä¸å°† ssh æ·»åŠ åˆ° github çš„è¯ï¼Œæ‚¨å¯èƒ½ä¼šé­é‡ä¸‹è½½å—é™ï¼Œä»è€Œå¯¼è‡´æ¥ä¸‹æ¥çš„åŒæ­¥æºç å¤±è´¥ã€‚</p>
<h2 id="05-ä¸‹è½½æºç ">0.5 ä¸‹è½½æºç </h2>
<p>æ³¨ï¼šåƒä¸‡ä¸è¦ä½¿ç”¨ä¸­æ–‡è·¯å¾„ï¼åƒä¸‡ä¸è¦åŒ…å«ç©ºæ ¼æˆ–ä¸€äº›ç‰¹æ®Šå­—ç¬¦ï¼ä¸è¦å°†ä½¿ç”¨ Windows çš„åä¹ æƒ¯å¸¦å…¥åˆ° Linux ä¸­æ¥ï¼</p>
<ol>
  <li>æ–°å»ºæºç ç›®å½•ï¼š
    <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">mkdir </span>lineage-17.1
<span class="nb">cd </span>lineage-17.1
</code></pre></div>    </div>
  </li>
  <li>åˆå§‹åŒ–æºç 
    <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>repo init <span class="nt">-u</span> https://mirrors.tuna.tsinghua.edu.cn/git/lineageOS/LineageOS/android.git <span class="nt">-b</span> lineage-17.1
</code></pre></div>    </div>
  </li>
  <li>ä½¿ç”¨æ¸…åæºåŒæ­¥LineageOSæºç 
æ‰“å¼€.repo/manifest.xmlï¼Œ \</li>
</ol>

<p>æŠŠ</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  &lt;remote  name="github"
           fetch=".."
           review="review.lineageos.org" /&gt;
</code></pre></div></div>
<p>æ”¹æˆ</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  &lt;remote  name="github"
           fetch="https://github.com/" /&gt;

  &lt;remote  name="lineage"
           fetch="https://mirrors.tuna.tsinghua.edu.cn/git/lineageOS/"
           review="review.lineageos.org" /&gt;
</code></pre></div></div>
<p>å°†</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  &lt;remote  name="aosp"
           fetch="https://android.googlesource.com"
</code></pre></div></div>
<p>æ”¹æˆ</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  &lt;remote  name="aosp"
           fetch="https://aosp.tuna.tsinghua.edu.cn"
</code></pre></div></div>
<p>å°†</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  &lt;default revision="..."
           remote="github"
</code></pre></div></div>
<p>æ”¹æˆ</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  &lt;default revision="..."
           remote="lineage"
</code></pre></div></div>
<ol>
  <li>æ­£å¼åŒæ­¥æºç 
    <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>repo <span class="nb">sync</span>  <span class="nt">--force-sync</span> <span class="nt">--current-branch</span> <span class="nt">--no-tags</span> <span class="nt">--no-clone-bundle</span> <span class="nt">--optimized-fetch</span> <span class="nt">--prune</span> <span class="nt">-j</span><span class="si">$(</span><span class="nb">nproc</span> <span class="nt">--all</span><span class="si">)</span>
</code></pre></div>    </div>
    <p>æºç å¤§æ¦‚è¦15Gå¤§å°å·¦å³ï¼Œåšå¥½å¿ƒç†å‡†å¤‡ï¼Œè¦ä¸‹å¾ˆä¹…
å½“åŒæ­¥æºç æ¥è¿‘å®Œæ¯•åï¼Œä¼šæç¤º Syncing work treeã€‚</p>
    <h2 id="06-åŒæ­¥è®¾å¤‡æºç ">0.6 åŒæ­¥è®¾å¤‡æºç </h2>
    <p>è¿™é‡Œæˆ‘ä»¬ç›´æ¥å¯»æ‰¾è‡ªå·±è®¾å¤‡çš„æºç å³å¯
ä½¿ç”¨git cloneå‘½ä»¤æ¥ä¸‹è½½æºç </p>
    <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git clone https://github.com/xxx/xxx.git &lt;å¯¹åº”è·¯å¾„&gt;
</code></pre></div>    </div>
    <p>æ¯”å¦‚æˆ‘çš„å°ç±³8å°±æ˜¯</p>
    <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git clone https://github.com/Bamice/android_device_xiaomi_dipper.git <span class="nt">-b</span> ten <span class="nt">--depth</span><span class="o">=</span>1 <span class="nt">-j4</span> device/xiaomi/dipper
git clone https://github.com/Bamice/android_device_xiaomi_sdm845-common.git <span class="nt">-b</span> ten <span class="nt">--depth</span><span class="o">=</span>1 <span class="nt">-j4</span> device/xiaomi/sdm845-common
git clone https://github.com/LineageOS/android_kernel_xiaomi_sdm845.git <span class="nt">--depth</span><span class="o">=</span>1 <span class="nt">-j4</span> kernel/xiaomi/sdm845
git clone https://github.com/Bamice/proprietary_vendor_xiaomi-dipper.git <span class="nt">-b</span> ten <span class="nt">--depth</span><span class="o">=</span>1 <span class="nt">-j4</span> vendor/xiaomi
</code></pre></div>    </div>
    <p>Ps:  <br />
<code class="language-plaintext highlighter-rouge">--depth=1</code>è¡¨ç¤ºåªä¿ç•™ä¸€æ¬¡æäº¤è®°å½•ï¼Œå‡å°‘ä¸‹è½½é‡  <br />
<code class="language-plaintext highlighter-rouge">-j4</code>è¡¨ç¤ºä½¿ç”¨4çº¿ç¨‹<code class="language-plaintext highlighter-rouge">clone</code>å¯¹åº”ä»“åº“ <br />
<code class="language-plaintext highlighter-rouge">-b ten</code>è¡¨ç¤ºcloneçš„æ˜¯<code class="language-plaintext highlighter-rouge">ten</code>åˆ†æ”¯</p>
    <h2 id="å¤„ç†ç›¸å…³é…ç½®æ–‡ä»¶">å¤„ç†ç›¸å…³é…ç½®æ–‡ä»¶</h2>
    <p>å°†ç»ˆç«¯è¯­è¨€è°ƒä¸ºè‹±è¯­é˜²æ­¢æŠ¥é”™</p>
    <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">echo</span> <span class="s2">"export LANG=C"</span> <span class="o">&gt;&gt;</span> ~/.bashrc
<span class="nb">source</span> ~/.bashrc
</code></pre></div>    </div>
    <h1 id="ç¼–è¯‘">ç¼–è¯‘</h1>
    <h2 id="10-bring-up">1.0 bring up</h2>
    <p>å°±è®²è®²æˆ‘é‚£å¥—å°ç±³8çš„æºç å§
æ‰“å¼€<code class="language-plaintext highlighter-rouge">device/xiaomi/dipper</code>
ä¿®æ”¹<code class="language-plaintext highlighter-rouge">AndroidProducts.mk</code>é‡Œçš„<code class="language-plaintext highlighter-rouge">aosp_dipper.mk</code>ä¸º<code class="language-plaintext highlighter-rouge">lineage_dipper.mk</code>
é‡å‘½å<code class="language-plaintext highlighter-rouge">aosp_dipper.mk</code>ä¸º<code class="language-plaintext highlighter-rouge">lineage_dipper.mk</code>
ä¿®æ”¹<code class="language-plaintext highlighter-rouge">lineage_dipper.mk</code>ä¸­çš„<code class="language-plaintext highlighter-rouge">vendor/aosp/config/common_full_phone.mk</code>ä¸º<code class="language-plaintext highlighter-rouge">vendor/lineage/config/common_full_phone.mk</code>ï¼Œ<code class="language-plaintext highlighter-rouge">aosp_dipper</code>ä¸º<code class="language-plaintext highlighter-rouge">lineage_dipper</code></p>
    <h2 id="11-å¼€å§‹ç¼–è¯‘">1.1 å¼€å§‹ç¼–è¯‘</h2>
  </li>
  <li>è®¾ç½®ç¼–è¯‘å˜é‡
    <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">.</span> build/envsetup.sh
</code></pre></div>    </div>
  </li>
  <li>ç¼–è¯‘
    <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>croot
brunch lineage_dipper-userdebug 2&gt;&amp;1 | <span class="nb">tee </span>build.log
</code></pre></div>    </div>
    <p>æ­¤æ—¶ï¼Œç¼–è¯‘æ—¥å¿—ä¼šè‡ªåŠ¨å­˜åœ¨build.logä¸‹ï¼Œä»¥ä¾¿åç»­æŸ¥çœ‹</p>
    <h2 id="12-ç¼–è¯‘å®Œæˆ">1.2 ç¼–è¯‘å®Œæˆ</h2>
    <p>ç¼–è¯‘å®Œæˆåï¼Œä¼šåœ¨ æºç ç›®å½•<code class="language-plaintext highlighter-rouge">/out/target/product/æ‚¨çš„æœºå‹</code> æ–‡ä»¶å¤¹ç”Ÿæˆå¯¹åº”çš„åˆ·æœºåŒ…ã€é•œåƒå’Œä¸€äº›ç¼–è¯‘å‡ºæ¥çš„æ–‡ä»¶ã€‚</p>
  </li>
</ol>

<p>å‡å¦‚åœ¨ç¼–è¯‘è¿‡ç¨‹ä¸­é‡åˆ°æŠ¥é”™ï¼Œå°è¯• Google å¯¹åº”çš„æŠ¥é”™å†…å®¹ï¼Œä¸å»ºè®®ä½¿ç”¨å›½å†…æœç´¢å¼•æ“ã€‚</p>
<h2 id="13-make-clean">1.3 Make Clean</h2>
<p>ç¼–è¯‘å®Œæˆåï¼Œå¯æ‰§è¡Œæ¸…ç†æ­¥éª¤ï¼š</p>
<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>make clean
</code></pre></div></div>
:ET