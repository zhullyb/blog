<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>Advanced Linux Sound Architecture (Русский) - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.35.0">
<meta name="robots" content="noindex,follow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="http://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Advanced_Linux_Sound_Architecture_Русский rootpage-Advanced_Linux_Sound_Architecture_Русский skin-vector action-view skin-vector-legacy">
<div id="content" class="mw-body" role="main" style="margin: 0">
	<a id="top"></a>
	<div id="siteNotice" class="mw-body-content"></div>
	<div class="mw-indicators mw-body-content">
	</div>
	<h1 id="firstHeading" class="firstHeading" lang="en">Advanced Linux Sound Architecture (Русский)</h1>
	<div id="bodyContent" class="mw-body-content">
		<div id="siteSub" class="noprint">From ArchWiki</div>
		<div id="contentSub"></div>
		<div id="contentSub2"></div>
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="#searchInput">Jump to search</a>
		<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr">
<div class="warningbox">The printable version is no longer supported and may have rendering errors. Please update your browser bookmarks and please use the default browser print function instead.</div>
<div class="mw-parser-output">
<div class="archwiki-template-meta-related-articles-start">
<p>Ссылки по теме</p>
<ul>
<li><a href="../en/Advanced_Linux_Sound_Architecture/Configuration_examples.html" class="mw-redirect" title="ALSA configuration examples">ALSA configuration examples</a></li>
<li><a href="../en/Advanced_Linux_Sound_Architecture/Troubleshooting.html" class="mw-redirect" title="ALSA troubleshooting">ALSA troubleshooting</a></li>
<li><a href="../ru/Sound_system.html" class="mw-redirect" title="Звуковая система">Звуковая система</a></li>
<li><a href="../ru/PC_speaker.html" class="mw-redirect" title="Динамик ПК">Динамик ПК</a></li>
<li><a href="../ru/PulseAudio.html" title="PulseAudio (Русский)">PulseAudio (Русский)</a></li>
<li><a href="../en/Open_Sound_System.html" title="Open Sound System">Open Sound System</a></li>
</ul>
</div>
<div class="noprint archwiki-template-message">
<p><a href="../File:Tango-preferences-desktop-locale.png" class="image"><img alt="Tango-preferences-desktop-locale.png" src="../File:Tango-preferences-desktop-locale.png" decoding="async" width="48" height="48"></a><b>Эта статья или раздел нуждается в <a href="../ru/ArchWiki:Contributing.html#%D0%9F%D0%B5%D1%80%D0%B5%D0%B2%D0%BE%D0%B4" title="ArchWiki:Contributing (Русский)">переводе</a></b><a href="../File:Tango-preferences-desktop-locale.png" class="image"><img alt="Tango-preferences-desktop-locale.png" src="../File:Tango-preferences-desktop-locale.png" decoding="async" width="48" height="48"></a></p>
<div>
<b>Примечания:</b> Перевод устарел. (обсуждение: <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php/Talk:Advanced_Linux_Sound_Architecture_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9)">Talk:Advanced Linux Sound Architecture (Русский)#</a>)</div>
</div>
<p><a href="https://en.wikipedia.org/wiki/Advanced_Linux_Sound_Architecture" class="extiw" title="wikipedia:Advanced Linux Sound Architecture">Advanced Linux Sound Architecture</a> (<b>ALSA</b>) — компонент ядра Linux, который заменил оригинальную Open Sound System (OSSv3) в обеспечении драверов для звуковых карт. В отличие от драйверов звуковых карт, <b>ALSA</b> также содержит пользовательские библиотеки для разработчиков приложений, которые хотят использовать возможности драйвера для высокоуровневых API, что напрямую связаны с драйверами ядра.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> Для альтернативного звукового окружения, обратитесь к статье <a href="../en/Open_Sound_System.html" title="Open Sound System">Open Sound System</a>.</div>
<p>Этот документ описывает процесс <b>настройки ALSA</b>, в частности, для ядра версии 2.6.
</p>
<div id="toc" class="toc" role="navigation" aria-labelledby="mw-toc-heading">
<input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none"><div class="toctitle" lang="en" dir="ltr">
<h2 id="mw-toc-heading">Contents</h2>
<span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span>
</div>
<ul>
<li class="toclevel-1 tocsection-1">
<a href="#%D0%A3%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BA%D0%B0"><span class="tocnumber">1</span> <span class="toctext">Установка</span></a>
<ul>
<li class="toclevel-2 tocsection-2"><a href="#%D0%9F%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D1%82%D0%B5%D0%BB%D1%8C%D1%81%D0%BA%D0%B8%D0%B5_%D1%83%D1%82%D0%B8%D0%BB%D0%B8%D1%82%D1%8B"><span class="tocnumber">1.1</span> <span class="toctext">Пользовательские утилиты</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-3"><a href="#%D0%92%D0%BA%D0%BB%D1%8E%D1%87%D0%B8%D1%82%D1%8C_%D0%B7%D0%B2%D1%83%D0%BA_%D0%BA%D0%B0%D0%BD%D0%B0%D0%BB%D0%BE%D0%B2"><span class="tocnumber">2</span> <span class="toctext">Включить звук каналов</span></a></li>
<li class="toclevel-1 tocsection-4">
<a href="#%D0%9D%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B0"><span class="tocnumber">3</span> <span class="toctext">Настройка</span></a>
<ul>
<li class="toclevel-2 tocsection-5">
<a href="#%D0%9E%D1%81%D0%BD%D0%BE%D0%B2%D1%8B_%D1%81%D0%B8%D0%BD%D1%82%D0%B0%D0%BA%D1%81%D0%B8%D1%81%D0%B0"><span class="tocnumber">3.1</span> <span class="toctext">Основы синтаксиса</span></a>
<ul>
<li class="toclevel-3 tocsection-6"><a href="#%D0%9D%D0%B0%D0%B7%D0%BD%D0%B0%D1%87%D0%B5%D0%BD%D0%B8%D1%8F_%D0%B8_%D0%A0%D0%B0%D0%B7%D0%B4%D0%B5%D0%BB%D0%B8%D1%82%D0%B5%D0%BB%D0%B8"><span class="tocnumber">3.1.1</span> <span class="toctext">Назначения и Разделители</span></a></li>
<li class="toclevel-3 tocsection-7"><a href="#%D0%A2%D0%B8%D0%BF%D1%8B_%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85"><span class="tocnumber">3.1.2</span> <span class="toctext">Типы данных</span></a></li>
<li class="toclevel-3 tocsection-8">
<a href="#%D0%A0%D0%B5%D0%B6%D0%B8%D0%BC%D1%8B_%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D1%8B"><span class="tocnumber">3.1.3</span> <span class="toctext">Режимы работы</span></a>
<ul>
<li class="toclevel-4 tocsection-9"><a href="#%D0%9F%D1%80%D0%B8%D0%BC%D0%B5%D1%80_%D1%83%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BE%D0%BA_%D0%BE%D1%81%D0%BD%D0%BE%D0%B2%D0%BD%D0%BE%D0%B3%D0%BE_%D1%83%D1%81%D1%82%D1%80%D0%BE%D0%B9%D1%81%D1%82%D0%B2%D0%B0_%D0%B8%D1%81%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D1%83%D1%8E%D1%89%D0%B5%D0%B3%D0%BE_%D1%83%D0%B7%D0%B5%D0%BB_%22defaults%22"><span class="tocnumber">3.1.3.1</span> <span class="toctext">Пример установок основного устройства использующего узел "defaults"</span></a></li>
</ul>
</li>
<li class="toclevel-3 tocsection-10"><a href="#%D0%93%D0%BD%D0%B5%D0%B7%D0%B4%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5"><span class="tocnumber">3.1.4</span> <span class="toctext">Гнездование</span></a></li>
<li class="toclevel-3 tocsection-11"><a href="#Including_configuration_files"><span class="tocnumber">3.1.5</span> <span class="toctext">Including configuration files</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-12">
<a href="#%D0%A3%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BA%D0%B0_%D0%B7%D0%B2%D1%83%D0%BA%D0%BE%D0%B2%D0%BE%D0%B9_%D0%BA%D0%B0%D1%80%D1%82%D1%8B_%D0%BF%D0%BE_%D1%83%D0%BC%D0%BE%D0%BB%D1%87%D0%B0%D0%BD%D0%B8%D1%8E"><span class="tocnumber">3.2</span> <span class="toctext">Установка звуковой карты по умолчанию</span></a>
<ul>
<li class="toclevel-3 tocsection-13"><a href="#%D0%92%D1%8B%D0%B1%D0%BE%D1%80_%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D0%BD%D0%BE%D0%B9_PCM_%D1%81_%D0%BF%D0%BE%D0%BC%D0%BE%D1%89%D1%8C%D1%8E_%D0%BF%D0%B5%D1%80%D0%B5%D0%BC%D0%B5%D0%BD%D0%BD%D0%BE%D0%B9_%D0%BE%D0%BA%D1%80%D1%83%D0%B6%D0%B5%D0%BD%D0%B8%D1%8F"><span class="tocnumber">3.2.1</span> <span class="toctext">Выбор стандартной PCM с помощью переменной окружения</span></a></li>
<li class="toclevel-3 tocsection-14"><a href="#%D0%94%D1%80%D1%83%D0%B3%D0%BE%D0%B9_%D1%81%D0%BF%D0%BE%D1%81%D0%BE%D0%B1"><span class="tocnumber">3.2.2</span> <span class="toctext">Другой способ</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-15"><a href="#%D0%9F%D1%80%D0%BE%D0%B2%D0%B5%D1%80%D0%BA%D0%B0_%D0%BD%D0%B0_%D0%BF%D1%80%D0%B0%D0%B2%D0%B8%D0%BB%D1%8C%D0%BD%D0%BE%D1%81%D1%82%D1%8C_%D0%B7%D0%B0%D0%B3%D1%80%D1%83%D0%B6%D0%B5%D0%BD%D0%BD%D1%8B%D1%85_%D0%BC%D0%BE%D0%B4%D1%83%D0%BB%D0%B5%D0%B9"><span class="tocnumber">3.3</span> <span class="toctext">Проверка на правильность загруженных модулей</span></a></li>
<li class="toclevel-2 tocsection-16"><a href="#Getting_S/PDIF_output"><span class="tocnumber">3.4</span> <span class="toctext">Getting S/PDIF output</span></a></li>
<li class="toclevel-2 tocsection-17">
<a href="#System-wide_equalizer"><span class="tocnumber">3.5</span> <span class="toctext">System-wide equalizer</span></a>
<ul>
<li class="toclevel-3 tocsection-18">
<a href="#Using_ALSAEqual_(provides_UI)"><span class="tocnumber">3.5.1</span> <span class="toctext">Using ALSAEqual (provides UI)</span></a>
<ul>
<li class="toclevel-4 tocsection-19"><a href="#Managing_ALSAEqual_states"><span class="tocnumber">3.5.1.1</span> <span class="toctext">Managing ALSAEqual states</span></a></li>
</ul>
</li>
<li class="toclevel-3 tocsection-20"><a href="#Using_mbeq"><span class="tocnumber">3.5.2</span> <span class="toctext">Using mbeq</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1 tocsection-21">
<a href="#%D0%A1%D1%82%D0%B0%D1%80%D1%8B%D0%B5_%D0%BC%D0%B5%D1%82%D0%BE%D0%B4%D1%8B_%D0%BD%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B8"><span class="tocnumber">4</span> <span class="toctext">Старые методы настройки</span></a>
<ul>
<li class="toclevel-2 tocsection-22"><a href="#%D0%9F%D1%80%D0%BE%D0%B2%D0%B5%D1%80%D0%BA%D0%B0_%D0%B7%D0%B0%D0%B3%D1%80%D1%83%D0%B6%D0%B5%D0%BD%D0%BD%D1%8B%D1%85_%D0%BC%D0%BE%D0%B4%D1%83%D0%BB%D0%B5%D0%B9"><span class="tocnumber">4.1</span> <span class="toctext">Проверка загруженных модулей</span></a></li>
<li class="toclevel-2 tocsection-23"><a href="#%D0%92%D1%8B%D1%81%D1%82%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D0%B7%D0%B2%D1%83%D0%BA%D0%B0_%D0%BD%D0%B0_%D0%BA%D0%B0%D0%BD%D0%B0%D0%BB%D0%B0%D1%85_%D0%B8_%D0%BF%D1%80%D0%BE%D0%B2%D0%B5%D1%80%D0%BA%D0%B0_%D0%B7%D0%B2%D1%83%D0%BA%D0%BE%D0%B2%D0%BE%D0%B9_%D0%BA%D0%B0%D1%80%D1%82%D1%8B"><span class="tocnumber">4.2</span> <span class="toctext">Выставление звука на каналах и проверка звуковой карты</span></a></li>
<li class="toclevel-2 tocsection-24"><a href="#%D0%9D%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B0_%D0%BF%D1%80%D0%B0%D0%B2"><span class="tocnumber">4.3</span> <span class="toctext">Настройка прав</span></a></li>
<li class="toclevel-2 tocsection-25"><a href="#%D0%92%D0%BE%D1%81%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D0%B7%D0%B2%D1%83%D0%BA%D0%BE%D0%B2%D1%8B%D1%85_%D0%BD%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B5%D0%BA_%D0%BF%D1%80%D0%B8_%D0%B7%D0%B0%D0%B3%D1%80%D1%83%D0%B7%D0%BA%D0%B5"><span class="tocnumber">4.4</span> <span class="toctext">Восстановление звуковых настроек при загрузке</span></a></li>
<li class="toclevel-2 tocsection-26"><a href="#%D0%9D%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B0_%D0%B2%D1%8B%D0%B2%D0%BE%D0%B4%D0%B0_%D1%87%D0%B5%D1%80%D0%B5%D0%B7_SPDIF"><span class="tocnumber">4.5</span> <span class="toctext">Настройка вывода через SPDIF</span></a></li>
<li class="toclevel-2 tocsection-27"><a href="#KDE"><span class="tocnumber">4.6</span> <span class="toctext">KDE</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-28"><a href="#%D0%92%D1%8B%D1%81%D0%BE%D0%BA%D0%BE%D0%B5_%D0%BA%D0%B0%D1%87%D0%B5%D1%81%D1%82%D0%B2%D0%BE_%D0%BF%D0%B5%D1%80%D0%B5%D0%B4%D0%B8%D1%81%D0%BA%D1%80%D0%B5%D1%82%D0%B8%D0%B7%D0%B0%D1%86%D0%B8%D0%B8"><span class="tocnumber">5</span> <span class="toctext">Высокое качество передискретизации</span></a></li>
<li class="toclevel-1 tocsection-29">
<a href="#%D0%A0%D0%B0%D0%B7%D0%BB%D0%BE%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5/%D1%81%D0%B2%D0%B5%D0%B4%D0%B5%D0%BD%D0%B8%D0%B5_%D0%BA%D0%B0%D0%BD%D0%B0%D0%BB%D0%BE%D0%B2"><span class="tocnumber">6</span> <span class="toctext">Разложение/сведение каналов</span></a>
<ul>
<li class="toclevel-2 tocsection-30"><a href="#%D0%A0%D0%B0%D0%B7%D0%BB%D0%BE%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5_%D0%BA%D0%B0%D0%BD%D0%B0%D0%BB%D0%BE%D0%B2"><span class="tocnumber">6.1</span> <span class="toctext">Разложение каналов</span></a></li>
<li class="toclevel-2 tocsection-31"><a href="#%D0%A1%D0%B2%D0%B5%D0%B4%D0%B5%D0%BD%D0%B8%D0%B5_%D0%BA%D0%B0%D0%BD%D0%B0%D0%BB%D0%BE%D0%B2"><span class="tocnumber">6.2</span> <span class="toctext">Сведение каналов</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-32">
<a href="#%D0%9F%D1%80%D0%BE%D0%B1%D0%BB%D0%B5%D0%BC%D1%8B"><span class="tocnumber">7</span> <span class="toctext">Проблемы</span></a>
<ul>
<li class="toclevel-2 tocsection-33"><a href="#%D0%AD%D0%BC%D1%83%D0%BB%D1%8F%D1%86%D0%B8%D1%8F_%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D1%8B_OSS_%D0%B4%D1%80%D0%B0%D0%B9%D0%B2%D0%B5%D1%80%D0%B0_%D0%B4%D0%BB%D1%8F_ALSA"><span class="tocnumber">7.1</span> <span class="toctext">Эмуляция работы OSS драйвера для ALSA</span></a></li>
<li class="toclevel-2 tocsection-34"><a href="#%D0%95%D1%81%D0%BB%D0%B8_%D1%83_%D0%B2%D0%B0%D1%81_%D0%B2%D1%81%D1%91_%D0%B5%D1%89%D1%91_%D0%BD%D0%B5%D1%82_%D0%B7%D0%B2%D1%83%D0%BA%D0%B0"><span class="tocnumber">7.2</span> <span class="toctext">Если у вас всё ещё нет звука</span></a></li>
<li class="toclevel-2 tocsection-35"><a href="#%D0%9F%D0%BB%D0%BE%D1%85%D0%BE%D0%B5_%D0%BA%D0%B0%D1%87%D0%B5%D1%81%D1%82%D0%B2%D0%BE_%D0%B7%D0%B2%D1%83%D0%BA%D0%B0"><span class="tocnumber">7.3</span> <span class="toctext">Плохое качество звука</span></a></li>
<li class="toclevel-2 tocsection-36"><a href="#%D0%9D%D0%B5%D1%82_%D0%B7%D0%B2%D1%83%D0%BA%D0%B0_%D0%BD%D0%B0_%D1%83%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BB%D0%B5%D0%BD%D0%BD%D0%BE%D0%B9_S/PDIF_%D0%B2%D0%B8%D0%B4%D0%B5%D0%BE%D0%BA%D0%B0%D1%80%D1%82%D0%B5"><span class="tocnumber">7.4</span> <span class="toctext">Нет звука на установленной S/PDIF видеокарте</span></a></li>
</ul>
</li>
</ul>
</div>

<h2>
<span id=".D0.A3.D1.81.D1.82.D0.B0.D0.BD.D0.BE.D0.B2.D0.BA.D0.B0"></span><span class="mw-headline" id="Установка">Установка</span>
</h2>
<p>ALSA включена в стандартную сборку ядра Arch Linux (<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=linux">linux</a></span>) в качестве набора модулей, поэтому ручная установка не требуется. Если вы компилируете ядро самостоятельно, не забудьте включить ALSA модуль, который вам нужен.
</p>
<p><a href="../ru/Udev.html" title="Udev (Русский)">udev</a> автоматически определит ваше железо при загрузке, загрузив соответсвующий модуль ядра для вашей звуковой карты. Никакой особой настройки не требуется, если вы не используете ISA карты. Итак, ваш звук уже работает, но заглушён (по умолчанию).
</p>
<p>Пользователи вошедшие в систему (в виртуальном терминале или менеджере рабочего стола) имеют права на проигрывание звука и изменение уровней микшера. Для разрешения таких прав удалённому пользователю, оный должен быть <a href="../ru/Users_and_groups.html#%D0%A3%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D0%B3%D1%80%D1%83%D0%BF%D0%BF%D0%B0%D0%BC%D0%B8" title="Users and groups (Русский)">заключён</a> в группу <code>audio</code>. Членство в группе <code>audio</code> также дает непосредственный доступ к устройствам и позволяет исключительный захват устройства вывода. Это может вывести из строя програмное микширование или быстрое переключение пользователей на многопользовательских системах. Поэтому добавление пользователя в группу <code>audio</code> строго <b>не</b> рекомендуется, если на то нет особых причин <a rel="nofollow" class="external autonumber" href="https://wiki.ubuntu.com/Audio/TheAudioGroup">[1]</a>.
</p>
<p>Никогда не используйте <i>alsaconf</i>, если у вас PCI или ISAPNP звуковая карта: строчки, добавленные в <code>modprobe.conf</code>, могут сломать автоопределение <a href="../ru/Udev.html" title="Udev (Русский)">udev</a>.
</p>
<h3>
<span id=".D0.9F.D0.BE.D0.BB.D1.8C.D0.B7.D0.BE.D0.B2.D0.B0.D1.82.D0.B5.D0.BB.D1.8C.D1.81.D0.BA.D0.B8.D0.B5_.D1.83.D1.82.D0.B8.D0.BB.D0.B8.D1.82.D1.8B"></span><span class="mw-headline" id="Пользовательские_утилиты">Пользовательские утилиты</span>
</h3>
<p><a href="../ru/Help:Reading.html#%D0%A3%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BA%D0%B0_%D0%BF%D0%B0%D0%BA%D0%B5%D1%82%D0%BE%D0%B2" class="mw-redirect" title="Установите">Установите</a> пакет <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=alsa-utils">alsa-utils</a></span> из <a href="../ru/Official_repositories.html" title="Official repositories (Русский)">официального репозитория</a>, который (помимо других утилит) содержит программу <code>alsamixer</code> и <code>amixer</code>. 
</p>
<pre> # pacman -S alsa-lib alsa-utils
</pre>
<p><i>alsamixer</i> предлагает основанный на <a href="https://en.wikipedia.org/wiki/Ncurses" class="extiw" title="wikipedia:Ncurses">ncurses</a> интерфейс для консольной настройки звуковых устройств. Так же установите пакет <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=alsa-plugins">alsa-plugins</a></span> если желаете <a href="#%D0%92%D1%8B%D1%81%D0%BE%D0%BA%D0%BE%D0%B5_%D0%BA%D0%B0%D1%87%D0%B5%D1%81%D1%82%D0%B2%D0%BE_%D0%BF%D0%B5%D1%80%D0%B5%D0%B4%D0%B8%D1%81%D0%BA%D1%80%D0%B5%D1%82%D0%B8%D0%B7%D0%B0%D1%86%D0%B8%D0%B8">высокое качество передискретизации</a>, возможность <a href="#%D0%A0%D0%B0%D0%B7%D0%BB%D0%BE%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5/%D1%81%D0%B2%D0%B5%D0%B4%D0%B5%D0%BD%D0%B8%D0%B5_%D0%BA%D0%B0%D0%BD%D0%B0%D0%BB%D0%BE%D0%B2">разложения/сведения каналов</a> и другие возможности.
</p>
<p>Если вы желаете что бы приложения <a href="../en/Open_Sound_System.html" class="mw-redirect" title="OSS">OSS</a> работали с <a href="#Dmix">dmix</a><sup>[<a href="../en/Help:Procedures.html#Fix_broken_section_links" title="Help:Procedures">ссылка недействительна</a>: раздел не найден]</sup> установите так же пакет <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=alsa-oss">alsa-oss</a></span>. 
</p>
<pre> # pacman -S alsa-oss
</pre>
<p>Загрузите <a href="../ru/Kernel_module.html" class="mw-redirect" title="Kernel modules (Русский)">модули ядра</a> <code>snd_seq_oss</code>, <code>snd_pcm_oss</code> и <code>snd_mixer_oss</code> для эмуляции OSS.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> Начиная с udev&gt;=171, OSS-модули, по-умолчанию, автоматически не загружаются. При необходимости загрузите вручную: sudo modprobe snd-mixer-oss и добавьте в /etc/rc.conf, в секцию модулей: MODULES=(... snd-mixer-oss). Например, TVtime использует snd-mixer-oss для программного управления звуком</div>
<p>У всех alsa программ в качестве зависимости есть alsa-lib.
</p>
<h2>
<span id=".D0.92.D0.BA.D0.BB.D1.8E.D1.87.D0.B8.D1.82.D1.8C_.D0.B7.D0.B2.D1.83.D0.BA_.D0.BA.D0.B0.D0.BD.D0.B0.D0.BB.D0.BE.D0.B2"></span><span class="mw-headline" id="Включить_звук_каналов">Включить звук каналов</span>
</h2>
<p>В ALSA по умолчанию отключены все каналы, и они все должны быть включены вручную. Этого можно добиться при помощи <i>amixer</i>:
</p>
<pre>$ amixer sset Master unmute
</pre>
<p>Так же есть возможность сделать то же самое с <i>alsamixer</i>:
</p>
<pre>$ alsamixer
</pre>
<p>Знак <code>MM</code> снизу канала показывает что канал отключён (<i>muted</i>), а <code>00</code> показывает что открыт (<i>open</i>).
</p>
<p>Пролистайте до каналов <code>Master</code> и <code>PCM</code>при помощи клавиш <code>←</code> и <code>→</code> и включите звук на них, нажав клавишу <code>m</code>. Используйте клавишу <code>↑</code> для увеличения звука и достижения уровня в <code>0</code> dB (Децибел). Уровень может быть найден в верхнем левом поле, следующим за <code>Item:</code>.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> Если уровень выставить более 0 dB может быть слышен хрип из колонок.</div>
<p>Что бы получить полноценный 5.1 или 7.1 <i>surround sound</i> вам скорее всего понадобится включить каналы <code>Front</code>, <code>Surround</code>, <code>Center</code>, <code>LFE</code> (сабвуфер) и <code>Side</code> (это названия каналов, характерные для Intel HD Audio, они могут отличатся на различных устройствах). Стоит отметить, что это не даёт автоматического разложения на каналы стерео звука (каким является большинство музыки). Что бы задействовать такие возможности, смотрите <a href="#%D0%A0%D0%B0%D0%B7%D0%BB%D0%BE%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5/%D1%81%D0%B2%D0%B5%D0%B4%D0%B5%D0%BD%D0%B8%D0%B5_%D0%BA%D0%B0%D0%BD%D0%B0%D0%BB%D0%BE%D0%B2">Разложение/сведение каналов</a>.
</p>
<p>Для включения микрофона, переключитесь на вкладку Capture (Устройства захвата) нажав <code>F4</code> и включите канал, нажав <code>Пробел</code>.
</p>
<p>Для выхода из <i>alsamixer</i>, нажмите <code>Esc</code>.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> 
<ul>
<li>На некоторых картах нужно заглушить цифровой выход, что бы слышать аналоговый звук. Для Soundblaster Audigy LS заглушите канал, подписанный <code>IEC958</code>.</li>
<li>На некоторых машинах, (как Thinkpad T61), есть канал <code>Speaker</code>, который должен быть включён и на нём поднят уровень.</li>
<li>На некоторых машинах, (как Dell E6400) так же потребуется включить и настроить каналы <code>Front</code> и <code>Headphone</code>.</li>
<li>Если ваши настройки звука пропадают после перезагрузки, попробуйте запустить alsamixer от суперпользователя.</li>
</ul>
</div>
<p>Далее, проверим работу звука:
</p>
<pre>$ speaker-test -c 2
</pre>
<p>Измените <code>-c</code> по количеству колонок. Используйте <code>-c 8</code> для 7.1, например:
</p>
<pre>$ speaker-test -c 8
</pre>
<p>Если звук выходит через не то устройство, попробуйте в ручную указать их с аргументом <code>-D</code>. 
</p>
<pre>$ speaker-test -D default -c 8
</pre>
<p><code>-D</code> принимает названия каналов PCM, которые могут быть получены при запуске:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ aplay -L | grep :CARD</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">default:CARD=PCH  # 'default' это название канала PCM
sysdefault:CARD=PCH
front:CARD=PCH,DEV=0
surround21:CARD=PCH,DEV=0
surround40:CARD=PCH,DEV=0
surround41:CARD=PCH,DEV=0
surround50:CARD=PCH,DEV=0
surround51:CARD=PCH,DEV=0
surround71:CARD=PCH,DEV=0</pre>
<p>Если это не сработало, посмотрите разделы <a href="#%D0%9D%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B0">Настройка</a> и <a href="#%D0%9F%D1%80%D0%BE%D0%B1%D0%BB%D0%B5%D0%BC%D1%8B">Проблемы</a>.
</p>
<p>Пакет <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=alsa-utils">alsa-utils</a></span> включает конфигурационные файлы <a href="../ru/Systemd.html" title="Systemd (Русский)">systemd</a> <code>alsa-restore.service</code> и <code>alsa-store.service</code>, которые запускаются при старте системы и перед выключением, соответственно. Их не нужно вручную активировать через <code>systemctl</code>.
Напоминаем, ALSA хранит свои настройки в <code>/var/lib/alsa/asound.state</code>.
</p>
<h2>
<span id=".D0.9D.D0.B0.D1.81.D1.82.D1.80.D0.BE.D0.B9.D0.BA.D0.B0"></span><span class="mw-headline" id="Настройка">Настройка</span>
</h2>
<h3>
<span id=".D0.9E.D1.81.D0.BD.D0.BE.D0.B2.D1.8B_.D1.81.D0.B8.D0.BD.D1.82.D0.B0.D0.BA.D1.81.D0.B8.D1.81.D0.B0"></span><span class="mw-headline" id="Основы_синтаксиса">Основы синтаксиса</span>
</h3>
<p>Файлы настройки ALSA следуют простому синтаксису, из иерархично расположенных значений для назначенных параметров (ключей). Ниже приведены (изменённые) отрывки из asoundrc.txt, который обычно находится в пакете <code>alsa-lib</code>, но может быть взят и <a rel="nofollow" class="external text" href="http://www.alsa-project.org/alsa-doc/alsa-lib/conf.html">тут</a>.
</p>
<h4>
<span id=".D0.9D.D0.B0.D0.B7.D0.BD.D0.B0.D1.87.D0.B5.D0.BD.D0.B8.D1.8F_.D0.B8_.D0.A0.D0.B0.D0.B7.D0.B4.D0.B5.D0.BB.D0.B8.D1.82.D0.B5.D0.BB.D0.B8"></span><span class="mw-headline" id="Назначения_и_Разделители">Назначения и Разделители</span>
</h4>
<p>Назначения определяют значение данного ключа. Достуаны различные стили и типы назначений.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">Simple assignment</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;"># Это комментарий. Всё после символа '#' до конца строки игнорируется ALSA.
key = value # Знак равно, как правило, опускают, поскольку пробел также может быть использован в качестве разделителя.

key value # Эквивалентно примеру выше.</pre>
<p>Разделители используются для определения начала и конца назначений, использование запятых и пробелов также возможно.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">Seperators</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;"># Следующие три назначения одинаковы.
key value0; key valueN;
key value0, key valueN,
key value0 key valueN

key
value0
	key
valueN</pre>
<p>Сложные назначения используют фигурные скобки в качестве разделителя.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">Compound assignment</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">key {	subkey0 value0;
	subkeyN valueN;	}

key.subkey0 value0; # Эквивалентно примеру выше.
key.subkeyN valueN;</pre>
<p>Для лёгкого понимания, рекомендуется использовать первый стиль в определениях, содержащих более трех значений.
</p>
<p>Массив определений использует квадратные скобки в качестве разделителя.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">Single array</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">key [	"value0";
	"valueN";	]

key.0 "value0"; # Эквивалентно примеру выше.
key.N "valueN";</pre>
<p>Зависит от предпочтений пользователя,как оформлять настройки в различных стилях, главное не смешивать различные способы. Более полная информация базовых настроек можно найти <a rel="nofollow" class="external text" href="http://www.volkerschatz.com/noise/alsa.html#basicconf">тут</a>.
</p>
<h4>
<span id=".D0.A2.D0.B8.D0.BF.D1.8B_.D0.B4.D0.B0.D0.BD.D0.BD.D1.8B.D1.85"></span><span class="mw-headline" id="Типы_данных">Типы данных</span>
</h4>
<p>ALSA использует различные типы данных для значений параметров, которые устанавливаются в пользовательских файлах настроек. Некоторые ключи принимают множественные типы данных, но многие - нет. Список опций настроек и их соответствующих аргументов для плагина PCM можно найти <a rel="nofollow" class="external text" href="http://www.alsa-project.org/alsa-doc/alsa-lib/pcm_plugins.html">тут</a>
</p>
<h4>
<span id=".D0.A0.D0.B5.D0.B6.D0.B8.D0.BC.D1.8B_.D1.80.D0.B0.D0.B1.D0.BE.D1.82.D1.8B"></span><span class="mw-headline" id="Режимы_работы">Режимы работы</span>
</h4>
<p>Есть несколько различных режимов работы для парсинга узлов, основные режимы соеденить и создать. Если режим работы один из соединить/создать или соединить делается проверка типов. Только данные одного типа могут быть соединены, так что строки не могут быть соединены с числовыми значениями. Попытка определить простое значение в основном режиме работы с соединением (и наоборот) также не работает.
</p>
<p>Префиксы для режимов работы:
</p>
<ul>
<li>"+" -- соединить и создать</li>
<li>"-" -- соединить</li>
<li>"?" -- не замещать</li>
<li>"!" -- заместить</li>
</ul>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">Operation modes</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;"># Соединить/создать - Если узел не существует, он будет создан. Если он создан и типы совпадают,
# subkeyN присоединится в ключ.
key.subkeyN valueN;

# Соединить/создать - эквивалентно примеру выше
key.+subkeyN valueN;

# Соединить - Узел key.subkeyN должен уже существовать и быть того же типа данных
key.-subkeyN valueN;

# Не замещать - Игнорировать новое присвоение, если узел key.subkeyN уже существует
key.?subkeyN valueN;

# Замещение - Удаляет subkeyN и все ключи ниже, затем создаёт узел key.subkeyN
key.!subkeyN valueN;</pre>
<p>Использование режима замещения, если все сделано правильно, как правило, безопасно, однако следует иметь в виду, возможно, для правильного функционирования, следует указать и другие необходимые ключи в узле.
</p>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Важно:</strong>  Замещение узла pcm само по себе делает работу alsa нестабильной, поскольку определения всех плагинов будут удалены. Так что <b>не используйте !pcm.key</b> пока создаёте настройки на боевой машине.</div>
<h5>
<span id=".D0.9F.D1.80.D0.B8.D0.BC.D0.B5.D1.80_.D1.83.D1.81.D1.82.D0.B0.D0.BD.D0.BE.D0.B2.D0.BE.D0.BA_.D0.BE.D1.81.D0.BD.D0.BE.D0.B2.D0.BD.D0.BE.D0.B3.D0.BE_.D1.83.D1.81.D1.82.D1.80.D0.BE.D0.B9.D1.81.D1.82.D0.B2.D0.B0_.D0.B8.D1.81.D0.BF.D0.BE.D0.BB.D1.8C.D0.B7.D1.83.D1.8E.D1.89.D0.B5.D0.B3.D0.BE_.D1.83.D0.B7.D0.B5.D0.BB_.22defaults.22"></span><span class="mw-headline" id='Пример_установок_основного_устройства_использующего_узел_"defaults"'>Пример установок основного устройства использующего узел "defaults"</span>
</h5>
<p>Подразумевая что узел "defaults" прописан в /usr/share/alsa/alsa.conf, где defaults.pcm.card и его ctl дубликат имеет прописанные значения "0" (тип integer), пользователь желает прописать основным pcm и управляющим устройством карту "2" или "SB" на звуковой карте Azalia.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">Defaults node</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">defaults.ctl.card 2; # Установит основное устройство и отдаст контроль третьей карте (счёт начинается с 0).
defaults.pcm.card 2; # Это не меняет тип данных.

defaults.ctl.+card 2; # Эквивалентно написанному выше.
defaults.pcm.+card 2;

defaults.ctl.-card 2; # Такой же эффект, как от настроек по умолчанию, но если узел defaults был удалён или
defaults.pcm.-card 2; # тип был изменён через операцию слияния не получить результата.

defaults.pcm.?card 2; # Это не сделает ничего, поскольку данное назначение уже существует.
defaults.ctl.?card 2;

defaults.pcm.!card "SB"; # Операция перезаписи нужна, поскольку тут
defaults.ctl.!card "SB"; # различные типы значений.</pre>
<p>Использование двойных кавычек тут автоматически устанавливает значения данных в "строку (string)", так в примере выше установка defaults.pcm.!card "2" приведёт к результату удерживания последнего устройства по умолчанию, в данном случае карты 0. Использование двойных кавычек для строк не обязательно, пока не используются спецсимволы,что в идеале никогда не должно произойти. Это может быть недействительным для других назначений.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong>  С точки зрения настройки, не равнозначна установка связи устройства "default" pcm, поскольку большинство пользователей так же указывают тип адресации тут, что почти тоже самое, но назначение само по себе отличается. Так же defaults.pcm.card упоминается много раз в файлах настройки alsa, обычно как резервное назначение, где различные переменные окружения имеют приоритет.</div>
<h4>
<span id=".D0.93.D0.BD.D0.B5.D0.B7.D0.B4.D0.BE.D0.B2.D0.B0.D0.BD.D0.B8.D0.B5"></span><span class="mw-headline" id="Гнездование">Гнездование</span>
</h4>
<p>Иногда полезно и даже легче прочитать об использовании гнездования в настройках.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">Гнездование плагинов PCM</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">pcm.azalia {	type hw; card 0	}
pcm.!default {	type plug; slave.pcm "azalia"	}

# что равнозначно

pcm.!default {	type plug; slave.pcm {	type hw; card 0;	}	}

# что так же равнозначно

pcm.!default.type plug;
pcm.default.slave.pcm.type hw;
pcm.default.slave.pcm.card 0;</pre>
<h4><span class="mw-headline" id="Including_configuration_files">Including configuration files</span></h4>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">Include other configuration files</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">&lt;/path/to/configuration-file&gt; # Include a configuration file
&lt;confdir:/path/to/configuration-file&gt; # Reference to a global configuration directory</pre>
<h3>
<span id=".D0.A3.D1.81.D1.82.D0.B0.D0.BD.D0.BE.D0.B2.D0.BA.D0.B0_.D0.B7.D0.B2.D1.83.D0.BA.D0.BE.D0.B2.D0.BE.D0.B9_.D0.BA.D0.B0.D1.80.D1.82.D1.8B_.D0.BF.D0.BE_.D1.83.D0.BC.D0.BE.D0.BB.D1.87.D0.B0.D0.BD.D0.B8.D1.8E"></span><span class="mw-headline" id="Установка_звуковой_карты_по_умолчанию">Установка звуковой карты по умолчанию</span>
</h3>
<div class="noprint archwiki-template-message">
<p><a href="../File:Tango-preferences-desktop-locale.png" class="image"><img alt="Tango-preferences-desktop-locale.png" src="../File:Tango-preferences-desktop-locale.png" decoding="async" width="48" height="48"></a><b>Эта статья или раздел нуждается в <a href="../ru/ArchWiki:Contributing.html#%D0%9F%D0%B5%D1%80%D0%B5%D0%B2%D0%BE%D0%B4" title="ArchWiki:Contributing (Русский)">переводе</a></b><a href="../File:Tango-preferences-desktop-locale.png" class="image"><img alt="Tango-preferences-desktop-locale.png" src="../File:Tango-preferences-desktop-locale.png" decoding="async" width="48" height="48"></a></p>
<div>
<b>Примечания:</b> Объяснить разницу между "card" и "device." <code>amixer --help</code> предполагает, что они не являются синонимами (обсуждение: <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php/Talk:Advanced_Linux_Sound_Architecture_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9)">Talk:Advanced Linux Sound Architecture (Русский)#</a>)</div>
</div>
<p>Если ваша звуковая карта меняет порядок при загрузке, вы можете указать их порядок в любом файле, который заканчивается на <code>.conf</code> в <code>/etc/modprobe.d</code> (<code>/etc/modprobe.d/alsa-base.conf</code> предложенный).
Например, если вы хотите, чтобы ваша звуковая карта Mia была #0:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/modprobe.d/alsa-base.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">options snd_mia index=0
options snd_hda_intel index=1</pre>
<p>Используйте <code>$ cat /proc/asound/modules</code> чтобы получить загруженные звуковые модули и их порядок. Этот список, в большинсте случев, все, что вам нужно для загрузки порядка. Используйте <code>$ lsmod | grep snd</code> чтобы получить список устройств и модулей. Эта конфигурация предполагает, что у вас есть одна звуковая карта Mia, которая использует  <code>snd_mia</code> и одна (напр. встроенная) карта использующая <code>snd_hda_intel</code>.
</p>
<p>Вы также можете задать индекс  <code>-2</code>, чтобы заставить ALSA никогда не использовать звуковую карту, как первичную. Дистрибутивы, такие как Linux Mint и Ubuntu используют следующие настройки, чтобы USB и другие "неправильные" драйвера не получили индекс <code>0</code>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/modprobe.d/alsa-base.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">options bt87x index=-2
options cx88_alsa index=-2
options saa7134-alsa index=-2
options snd-atiixp-modem index=-2
options snd-intel8x0m index=-2
options snd-via82xx-modem index=-2
options snd-usb-audio index=-2
options snd-usb-caiaq index=-2
options snd-usb-ua101 index=-2
options snd-usb-us122l index=-2
options snd-usb-usx2y index=-2
options snd-pcsp index=-2
options snd-usb-audio index=-2</pre>
<p>Эти изменения требуют перезагрузки системы.
</p>
<p>Смотрите также <a rel="nofollow" class="external autonumber" href="https://bbs.archlinux.org/viewtopic.php?pid=1446773#p1446773">[2]</a>
</p>
<h4>
<span id=".D0.92.D1.8B.D0.B1.D0.BE.D1.80_.D1.81.D1.82.D0.B0.D0.BD.D0.B4.D0.B0.D1.80.D1.82.D0.BD.D0.BE.D0.B9_PCM_.D1.81_.D0.BF.D0.BE.D0.BC.D0.BE.D1.89.D1.8C.D1.8E_.D0.BF.D0.B5.D1.80.D0.B5.D0.BC.D0.B5.D0.BD.D0.BD.D0.BE.D0.B9_.D0.BE.D0.BA.D1.80.D1.83.D0.B6.D0.B5.D0.BD.D0.B8.D1.8F"></span><span class="mw-headline" id="Выбор_стандартной_PCM_с_помощью_переменной_окружения">Выбор стандартной PCM с помощью переменной окружения</span>
</h4>
<p>В вашем файле конфигурации, предпочитается общий, добавьте:
</p>
<pre>pcm.!default {
    type plug
    slave.pcm {
        @func getenv
        vars [ ALSAPCM ]
        default "hw:Audigy2"
    }
}</pre>
<p>Вам необходимо заменить линию по умолчанию с именем вашей карты (в примере <code>Audigy2</code>). Вы можете получить имена, используя <code>aplay -l</code> или вы можете также использовать PCM. Но если вам нужно использовать микрофон, будет хорошей идеей выбрать полный дуплекс PCM по умолчанию.
</p>
<p>Теперь вы можете запускать программы с выбором звуковой карты, изменяя только переменную окружения <code>ALSAPCM</code>. Это работает для всех програм, которые не позволяют выбрать карту, для других убедитесь, что вы используете карту по умолчанию. 
Например, при условии, что вы напишете понижающее микширование PCM, которе будет иметь название <code>mix51to20</code> вы можете использовать его с <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=mplayer">mplayer</a></span> используя командную строку <code>ALSAPCM=mix51to20 mplayer example_6_channel.wav</code>
</p>
<p>Вместо использования новых переменных, вы можете установить одну из упомянутых в общей конфигурации по умолчанию.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/usr/share/alsa/alsa.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Variable name # Definition
ALSA_CARD # pcm.default pcm.hw pcm.plughw ctl.sysdefault ctl.hw rawmidi.default rawmidi.hw hwdep.hw
ALSA_CTL_CARD # ctl.sysdefault ctl.hw
ALSA_HWDEP_CARD # hwdep.default hwdep.hw
ALSA_HWDEP_DEVICE # hwdep.default hwdep.hw
ALSA_PCM_CARD # pcm.default pcm.hw pcm.plughw
ALSA_PCM_DEVICE # pcm.hw pcm.plughw
ALSA_RAWMIDI_CARD # rawmidi.default rawmidi.hw
ALSA_RAWMIDI_DEVICE # rawmidi.default rawmidi.hw</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> Обратите внимание на тип адресации по умолчанию.</div>
<h4>
<span id=".D0.94.D1.80.D1.83.D0.B3.D0.BE.D0.B9_.D1.81.D0.BF.D0.BE.D1.81.D0.BE.D0.B1"></span><span class="mw-headline" id="Другой_способ">Другой способ</span>
</h4>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Совет:</strong> Этот процесс может быть частично автоматизирован с использованием <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=asoundconf">asoundconf</a></span> из <a href="../ru/Arch_User_Repository.html" class="mw-redirect" title="AUR (Русский)">Arch User Repository</a>.</div>
<p>Сперва Вам нужно найти карту и id устройства, которое Вы хотите установить по-умолчанию:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ aplay -l</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">**** List of PLAYBACK Hardware Devices ****
card 0: Intel [HDA Intel], device 0: CONEXANT Analog [CONEXANT Analog]
  Subdevices: 1/1
  Subdevice #0: subdevice #0
card 0: Intel [HDA Intel], device 1: Conexant Digital [Conexant Digital]
  Subdevices: 1/1
  Subdevice #0: subdevice #0
card 1: JamLab [JamLab], device 0: USB Audio [USB Audio]
  Subdevices: 1/1
  Subdevice #0: subdevice #0
card 2: Audio [Altec Lansing XT1 - USB Audio], device 0: USB Audio [USB Audio]
  Subdevices: 1/1
  Subdevice #0: subdevice #0</pre>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Важно:</strong> Simply setting a <code>type hw</code> as default card is equivalent to addressing hardware directly, which leaves the device unavailable to other applications. This method is only recommended if it is a part of a more sophisticated setup <code>~/.asoundrc</code> or if user deliberately wants to address sound card directly (digital output through <code>eic958</code> or dedicated music server for example).</div>
<p>For example, the last entry in this list has the card ID 2 and the device ID 0. To set this card as the default, you can either use the system-wide file <code>/etc/asound.conf</code> or the user-specific file <code>~/.asoundrc</code>. You may have to create the file if it does not exist. Then insert the following options with the corresponding card.
</p>
<pre>pcm.!default {
    type hw
    card 2
}

ctl.!default {
    type hw
    card 2
}
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> For the Asus U32U serie it seems that card should be set to 1 for both pcm and ctl.</div>
<p>In most cases it is recommended to use sound card names instead of number references, which also solves boot order problem. Therefore the following would be correct for the above example.
</p>
<pre>pcm.!default {
    type hw
    card Audio
}

ctl.!default {
    type hw
    card Audio
}
</pre>
<p>To get valid ALSA card names, use <i>aplay</i>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ aplay -l | awk -F \: '/,/{print $2}' | awk '{print $1}' | uniq</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">PCH
</pre>
<p>Alternatively use <i>cat</i>, which might return unused devices:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ cat /proc/asound/card*/id</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">PCH
ThinkPadEC
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> This method could be problematic if your system has several cards of the same (ALSA)name.</div>
<p>The 'pcm' options affect which card and device will be used for audio playback while the 'ctl' option affects which card is used by control utilities like alsamixer .
</p>
<p>The changes should take effect as soon as you (re-)start an application (MPlayer etc.). You can also test with a command like <i>aplay</i>.
</p>
<pre>$ aplay -D default <i>your_favourite_sound.wav</i>
</pre>
<p>If you receive an error regarding your asound configuration, check the <a rel="nofollow" class="external text" href="http://www.alsa-project.org/main/index.php/Asoundrc#The_default_plugin">upstream documentation</a> for possible changes to the config file format.
</p>
<h3>
<span id=".D0.9F.D1.80.D0.BE.D0.B2.D0.B5.D1.80.D0.BA.D0.B0_.D0.BD.D0.B0_.D0.BF.D1.80.D0.B0.D0.B2.D0.B8.D0.BB.D1.8C.D0.BD.D0.BE.D1.81.D1.82.D1.8C_.D0.B7.D0.B0.D0.B3.D1.80.D1.83.D0.B6.D0.B5.D0.BD.D0.BD.D1.8B.D1.85_.D0.BC.D0.BE.D0.B4.D1.83.D0.BB.D0.B5.D0.B9"></span><span class="mw-headline" id="Проверка_на_правильность_загруженных_модулей">Проверка на правильность загруженных модулей</span>
</h3>
<p>Вы можете предполагать, что udev определил ваш звук правильно.
Проверить это можно, используя командную строку.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ lsmod | grep '^snd' | column -t</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">snd_hda_codec_hdmi     22378   4
snd_hda_codec_realtek  294191  1
snd_hda_intel          21738   1
snd_hda_codec          73739   3  snd_hda_codec_hdmi,snd_hda_codec_realtek,snd_hda_intel
snd_hwdep              6134    1  snd_hda_codec
snd_pcm                71032   3  snd_hda_codec_hdmi,snd_hda_intel,snd_hda_codec
snd_timer              18992   1  snd_pcm
snd                    55132   9  snd_hda_codec_hdmi,snd_hda_codec_realtek,snd_hda_intel,snd_hda_codec,snd_hwdep,snd_pcm,snd_timer
snd_page_alloc         7017    2  snd_hda_intel,snd_pcm</pre>
<p>Если вывод выглядит похожим, ваш звуковой драйвер был успешно автоопределен.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> Начиная с <code>udev&gt;=171</code>, модули эмуляции OSS (<code>snd_seq_oss, snd_pcm_oss, snd_mixer_oss</code>) не загружаются по умолчанию: <a href="../ru/Kernel_module.html#Loading" class="mw-redirect" title="Kernel modules (Русский)">Загрузите их вручную</a><sup>[<a href="../en/Help:Procedures.html#Fix_broken_section_links" title="Help:Procedures">ссылка недействительна</a>: раздел не найден]</sup> если это требуется.</div>
<p>Вы также можете проверить директорию  <code>/dev/snd/</code> на правильность файлов устройств:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ ls -l /dev/snd</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">total 0
crw-rw----  1 root audio 116,  0 Apr  8 14:17 controlC0
crw-rw----  1 root audio 116, 32 Apr  8 14:17 controlC1
crw-rw----  1 root audio 116, 24 Apr  8 14:17 pcmC0D0c
crw-rw----  1 root audio 116, 16 Apr  8 14:17 pcmC0D0p
crw-rw----  1 root audio 116, 25 Apr  8 14:17 pcmC0D1c
crw-rw----  1 root audio 116, 56 Apr  8 14:17 pcmC1D0c
crw-rw----  1 root audio 116, 48 Apr  8 14:17 pcmC1D0p
crw-rw----  1 root audio 116,  1 Apr  8 14:17 seq
crw-rw----  1 root audio 116, 33 Apr  8 14:17 timer</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> Если нужна помощь в IRC или на форуме, пожалуйста отправляйте вывод выше указанных команд, если попросят.</div>
<p>Если вы имеете устройства <b>controlC0</b> и <b>pcmC0D0p</b> или аналогичные, тогда ваш звуковой модуль был обнаружен и загружен правильно.
</p>
<p>Если этого не случилось, ваш звуковой модуль был обнаружен не правильно. Чтобы это исправить, вы можете попытаться загрузить модуль самостоятельно:
</p>
<ul>
<li>Найдите модуль вашей звуковой карты: <a rel="nofollow" class="external text" href="http://www.alsa-project.org/main/index.php/Matrix:Main">ALSA Soundcard Matrix</a> Модуль будет с префиксом 'snd-' (например: <code>snd-via82xx</code>).</li>
<li>
<a href="../ru/Kernel_module.html#Loading" class="mw-redirect" title="Kernel modules (Русский)">Загрузите модуль</a><sup>[<a href="../en/Help:Procedures.html#Fix_broken_section_links" title="Help:Procedures">ссылка недействительна</a>: раздел не найден]</sup>.</li>
<li>Проверьте файлы устройства в <code>/dev/snd</code> (см. выше) и/или проверьте имеет ли <code>alsamixer</code> или <code>amixer</code> допустимый вывод.</li>
<li>Настройте <code>snd-NAME-OF-MODULE</code> и <code>snd-pcm-oss</code> на <a href="../en/Kernel_module.html#Loading" class="mw-redirect" title="Kernel modules">загрузку при старте</a><sup>[<a href="../en/Help:Procedures.html#Fix_broken_section_links" title="Help:Procedures">ссылка недействительна</a>: раздел не найден]</sup>.</li>
</ul>
<h3>
<span id="Getting_S.2FPDIF_output"></span><span class="mw-headline" id="Getting_S/PDIF_output">Getting S/PDIF output</span>
</h3>
<p><a href="https://en.wikipedia.org/wiki/S/PDIF" class="extiw" title="wikipedia:S/PDIF">S/PDIF</a> is a digital audio interface often used to connect a computer to a digital amplifier (such as a home theatre with 5.1/7.1 surround sound). 
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> With some soundcards this disables analog sound output  (eg. Audigy2).</div>
<p>Depending on what <a href="../en/Command-line_shell.html" class="mw-redirect" title="Shell">shell</a> you use, add the following line to your shell's configuration file:
</p>
<pre>amixer -c 0 cset name='IEC958 Playback Switch' on
</pre>
<p>You can see the name of your card's digital output with:
</p>
<pre>$ amixer scontrols
</pre>
<h3><span class="mw-headline" id="System-wide_equalizer">System-wide equalizer</span></h3>
<h4>
<span id="Using_ALSAEqual_.28provides_UI.29"></span><span class="mw-headline" id="Using_ALSAEqual_(provides_UI)">Using ALSAEqual (provides UI)</span>
</h4>
<p>Install the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/alsaequal/">alsaequal</a></span><sup><small>AUR</small></sup> package from the <a href="../en/Arch_User_Repository.html" title="Arch User Repository">Arch User Repository</a>.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> If you have a x86_64-system and are using a 32bit-flashplugin the sound in flash will not work. You have to disable alsaequal or build alsaequal for 32bit.</div>
<p>After installing the package, add the following to your ALSA configuration file:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/asound.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">ctl.equal {
    type equal;
}

pcm.plugequal {
    type equal;
    # Modify the line below if you do not
    # want to use sound card 0.
    #slave.pcm "plughw:0,0";
    # by default we want to play from more sources at time:
    slave.pcm "plug:dmix";
}

# pcm.equal {
# If you do not want the equalizer to be your
# default soundcard comment the following
# line and uncomment the above line. (You can
# choose it as the output device by addressing
# it with specific apps,eg mpg123 -a equal 06.Back_In_Black.mp3)
pcm.!default {
    type plug;
    slave.pcm plugequal;
}</pre>
<p>And you are ready to change your equalizer using command
</p>
<pre>$ alsamixer -D equal
</pre>
<p>Note that configuration file is different for each user (until not specified else) it is saved in <code>~/.alsaequal.bin</code>.
so if you want to use ALSAEqual with <a href="../en/Music_Player_Daemon.html" class="mw-redirect" title="Mpd">mpd</a> or another software running under different user, you can configure it using
</p>
<pre>$ su mpd -c 'alsamixer -D equal'
</pre>
<p>or for example, you can make a symlink to your <code>.alsaequal.bin</code> in his home...
</p>
<h5><span class="mw-headline" id="Managing_ALSAEqual_states">Managing ALSAEqual states</span></h5>
<p>Install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/alsaequal-mgr/">alsaequal-mgr</a></span><sup><small>AUR</small></sup> from the <a href="../en/Arch_User_Repository.html" title="Arch User Repository">Arch User Repository</a>.
</p>
<p>Configure the equalizer as usual with
</p>
<pre>$ alsamixer -D equal
</pre>
<p>When you are satisfied with the state, you may give it a name ("foo" in this example) and save it:
</p>
<pre>$ alsaequal-mgr save foo
</pre>
<p>The state "foo" can then be restored at a later time with
</p>
<pre>$ alsaequal-mgr load foo
</pre>
<p>You can thus create different equalizer states for games, movies, music genres, VoIP apps, etc. and reload them as necessary.
</p>
<p>See the <a rel="nofollow" class="external text" href="http://xyne.archlinux.ca/projects/alsaequal-mgr/">project page</a> and the help message for more options.
</p>
<h4><span class="mw-headline" id="Using_mbeq">Using mbeq</span></h4>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> This method requires the use of a <a href="https://en.wikipedia.org/wiki/LADSPA" class="extiw" title="wikipedia:LADSPA">LADSPA</a> plugin which might be CPU intensive during playback. In addition, this was made with stereophonic sound (e.g. headphones) in mind.</div>
<p>Install the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=alsa-plugins">alsa-plugins</a></span>, <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=ladspa">ladspa</a></span> and <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=swh-plugins">swh-plugins</a></span> packages if you do not already have them.
</p>
<p>If you have not already created either an <code>~/.asoundrc</code> or a <code>/etc/asound.conf</code> file, then create either one and insert the following:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/asound.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">pcm.eq {
    type ladspa

    # The output from the EQ can either go direct to a hardware device
    # (if you have a hardware mixer, e.g. SBLive/Audigy) or it can go
    # to the software mixer shown here.
    #slave.pcm "plughw:0,0"
    slave.pcm "plug:dmix"

    # Sometimes you may need to specify the path to the plugins,
    # especially if you have just installed them.  Once you have logged
    # out/restarted this should not be necessary, but if you get errors
    # about being unable to find plugins, try uncommenting this.
    #path "/usr/lib/ladspa"

    plugins [
    {
        label mbeq
        id 1197
        input {
            # The following setting is just an example, edit to your own taste:
            # bands: 50hz, 100hz, 156hz, 220hz, 311hz, 440hz, 622hz, 880hz, 1250hz, 1750hz, 25000hz,
            # 50000hz, 10000hz, 20000hz
            controls [ -5 -5 -5 -5 -5 -10 -20 -15 -10 -10 -10 -10 -10 -3 -2 ]
            }
        }
    ]
}

# Redirect the default device to go via the EQ - you may want to do
# this last, once you are sure everything is working.  Otherwise all
# your audio programs will break/crash if something has gone wrong.
pcm.!default {
    type plug
    slave.pcm "eq"
}

# Redirect the OSS emulation through the EQ too (when programs are running through "aoss")
pcm.dsp0 {
    type plug
    slave.pcm "eq"
}</pre>
<h2>
<span id=".D0.A1.D1.82.D0.B0.D1.80.D1.8B.D0.B5_.D0.BC.D0.B5.D1.82.D0.BE.D0.B4.D1.8B_.D0.BD.D0.B0.D1.81.D1.82.D1.80.D0.BE.D0.B9.D0.BA.D0.B8"></span><span class="mw-headline" id="Старые_методы_настройки">Старые методы настройки</span>
</h2>
<h3>
<span id=".D0.9F.D1.80.D0.BE.D0.B2.D0.B5.D1.80.D0.BA.D0.B0_.D0.B7.D0.B0.D0.B3.D1.80.D1.83.D0.B6.D0.B5.D0.BD.D0.BD.D1.8B.D1.85_.D0.BC.D0.BE.D0.B4.D1.83.D0.BB.D0.B5.D0.B9"></span><span class="mw-headline" id="Проверка_загруженных_модулей">Проверка загруженных модулей</span>
</h3>
<p>Вы можете рассчитывать, что udev автоматически найдёт вашу звуковую карту, включая модули совместимости OSS. Вы можете проверить это с помощью следующей команды:
</p>
<pre>$ lsmod|grep 'snd'
snd_usb_audio          69696  0 
snd_usb_lib            13504  1 snd_usb_audio
snd_rawmidi            20064  1 snd_usb_lib
snd_hwdep               7044  1 snd_usb_audio
snd_seq_oss            29412  0 
snd_seq_midi_event      6080  1 snd_seq_oss
snd_seq                46220  4 snd_seq_oss,snd_seq_midi_event
snd_seq_device          6796  3 snd_rawmidi,snd_seq_oss,snd_seq
snd_pcm_oss            45216  0 
snd_mixer_oss          15232  1 snd_pcm_oss
snd_intel8x0           27932  0 
snd_ac97_codec         87648  1 snd_intel8x0
snd_ac97_bus            1792  1 snd_ac97_codec
snd_pcm                76296  4 snd_usb_audio,snd_pcm_oss,snd_intel8x0,snd_ac97_codec
snd_timer              19780  2 snd_seq,snd_pcm
snd                    43776  12 snd_usb_audio,snd_rawmidi,snd_hwdep,snd_seq_oss,snd_seq,snd_seq_device,snd_pcm_oss,snd_mixer_oss,snd_intel8x0,snd_ac97_codec,snd_pcm,snd_timer
snd_page_alloc          7944  2 snd_intel8x0,snd_pcm
</pre>
<p>Если вывод имеет похожий вид, то ваши звуковые модули успешно обнаружились (обратите внимание, что в этом случае, snd_intel8x0 и snd_usb_audio являются драйверами для устройств). Вы также можете проверить каталог <b>/dev/snd</b> на правильные права:
</p>
<pre>$ ls -l /dev/snd/
total 0
crw-rw----  1 root audio 116,  0 Apr  8 14:17 controlC0
crw-rw----  1 root audio 116, 32 Apr  8 14:17 controlC1
crw-rw----  1 root audio 116, 24 Apr  8 14:17 pcmC0D0c
crw-rw----  1 root audio 116, 16 Apr  8 14:17 pcmC0D0p
crw-rw----  1 root audio 116, 25 Apr  8 14:17 pcmC0D1c
crw-rw----  1 root audio 116, 56 Apr  8 14:17 pcmC1D0c
crw-rw----  1 root audio 116, 48 Apr  8 14:17 pcmC1D0p
crw-rw----  1 root audio 116,  1 Apr  8 14:17 seq
crw-rw----  1 root audio 116, 33 Apr  8 14:17 timer
</pre>
<p>Если у вас есть хотя бы <b>controlC0</b> и <b>pcmC0D0p</b> или что-то похожее, то ваши звуковые модули обнаружились и загрузились правильно.
</p>
<p>Если это не так, то ваши модули не были обнаружены. <b>Если вы хотите получить помощь на форумах или IRC, пожалуйста, введите вывод команд, использовавшихся выше.</b> Для решения этой ситуации вы можете попробовать загрузить модули вручную:
</p>
<ul>
<li>Узнайте имя модуля для вашей звуковой карты: <a rel="nofollow" class="external free" href="http://www.alsa-project.org/alsa-doc/">http://www.alsa-project.org/alsa-doc/</a><sup>[<a href="https://en.wikipedia.org/wiki/Wikipedia:Link_rot" class="extiw" title="wikipedia:Wikipedia:Link rot">устаревшая ссылка</a> 2020-08-02]</sup> Модуль будет иметь префикс 'snd-' (например, 'snd-via82xx').</li>
<li>Загрузите модули:</li>
</ul>
<pre> # modprobe snd-NAME-OF-MODULE
 # modprobe snd-pcm-oss
</pre>
<ul>
<li>Проверьте файлы в <b>/dev/snd</b> (смотрите выше) и/или что <b>alsamixer</b> или <b>amixer</b> достаточный уровень звука.</li>
<li>Добавьте  <b>snd-NAME-OF-MODULE</b> и <b>snd-pcm-oss</b> в список MODULES в <b>/etc/rc.conf</b>, чтобы они загрузились в следующий раз (удостоверьтесь, что <b>snd-NAME-OF-MODULE</b> находится перед <b>snd-pcm-oss</b>).</li>
</ul>
<h3>
<span id=".D0.92.D1.8B.D1.81.D1.82.D0.B0.D0.B2.D0.BB.D0.B5.D0.BD.D0.B8.D0.B5_.D0.B7.D0.B2.D1.83.D0.BA.D0.B0_.D0.BD.D0.B0_.D0.BA.D0.B0.D0.BD.D0.B0.D0.BB.D0.B0.D1.85_.D0.B8_.D0.BF.D1.80.D0.BE.D0.B2.D0.B5.D1.80.D0.BA.D0.B0_.D0.B7.D0.B2.D1.83.D0.BA.D0.BE.D0.B2.D0.BE.D0.B9_.D0.BA.D0.B0.D1.80.D1.82.D1.8B"></span><span class="mw-headline" id="Выставление_звука_на_каналах_и_проверка_звуковой_карты">Выставление звука на каналах и проверка звуковой карты</span>
</h3>
<p>В этом разделе мы подразумеваем, что вы выполняете команды от суперпользователя. Если вы хотите выполнять эти шаги от пользователя, то перейдите сначала к следующей секции, <i>Настройка прав доступа</i>.
</p>
<ul><li>Включение звука</li></ul>
<p>Рекомендуется использовать 'alsamixer' для настройки вашего микшера и включения звука на каналах.<br>
<b>ОБРАТИТЕ ВНИМАНИЕ:</b> когда вы используете <b>alsamixer</b>, включите звук нажатием <b>M</b>, а не только повысьте уровень звука.
<b>ОБРАТИТЕ ВНИМАНИЕ:</b> при использовании amixer для выставления уровня громкости следует использовать знак процента %. <b>amixer</b> понимает знак процента (%), а не числа. 
</p>
<pre> # amixer set Master 90% unmute
 # amixer set PCM 85% unmute
</pre>
<ul><li>Попробуйте проиграть wav-файл:</li></ul>
<pre> # aplay mywav.wav
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong>  на некоторых карточках (как минимум, на Soundblaster Audigy LS) требуется отключить или заглушить цифровой выход, чтобы слушать аналоговый звук.</div>
<h3>
<span id=".D0.9D.D0.B0.D1.81.D1.82.D1.80.D0.BE.D0.B9.D0.BA.D0.B0_.D0.BF.D1.80.D0.B0.D0.B2"></span><span class="mw-headline" id="Настройка_прав">Настройка прав</span>
</h3>
<p>Для того чтобы можно было пользоваться звуковой картой пользователем, проделайте следующие шаги:
</p>
<ul><li>Добавьте пользователя в группу audio:</li></ul>
<pre># gpasswd -a USERNAME audio
</pre>
<ul><li>Выйдите пользователем из системы и войдите заново.</li></ul>
<h3>
<span id=".D0.92.D0.BE.D1.81.D1.81.D1.82.D0.B0.D0.BD.D0.BE.D0.B2.D0.BB.D0.B5.D0.BD.D0.B8.D0.B5_.D0.B7.D0.B2.D1.83.D0.BA.D0.BE.D0.B2.D1.8B.D1.85_.D0.BD.D0.B0.D1.81.D1.82.D1.80.D0.BE.D0.B5.D0.BA_.D0.BF.D1.80.D0.B8_.D0.B7.D0.B0.D0.B3.D1.80.D1.83.D0.B7.D0.BA.D0.B5"></span><span class="mw-headline" id="Восстановление_звуковых_настроек_при_загрузке">Восстановление звуковых настроек при загрузке</span>
</h3>
<ul><li>Запустите 'alsactl' один раз, чтобы создать '/etc/asound.state':</li></ul>
<pre>alsactl store
</pre>
<ul><li>Отредактируйте '/etc/rc.conf' и добавьте 'alsa' в список демонов, загружающихся при старте системы. Это позволит сохранять настройки микшера при каждом выключении системы и восстанавливать их при загрузке.</li></ul>
<h3>
<span id=".D0.9D.D0.B0.D1.81.D1.82.D1.80.D0.BE.D0.B9.D0.BA.D0.B0_.D0.B2.D1.8B.D0.B2.D0.BE.D0.B4.D0.B0_.D1.87.D0.B5.D1.80.D0.B5.D0.B7_SPDIF"></span><span class="mw-headline" id="Настройка_вывода_через_SPDIF">Настройка вывода через SPDIF</span>
</h3>
<p>(от <b>gralves</b> с форумов <i>Gentoo</i>)
</p>
<ul>
<li>В GNOME Volume Control, во вкладке Options, измените IEC958 на PCM. Эта опция может быть включена в настройках.</li>
<li>Если у вас не установлен GNOME Volume Control:
<ul>
<li>Отредактируйте файл /etc/asound.state. В нём хранятся alsasound хранит настройки вашего микшера.</li>
<li>Найдите строчку вида: 'IEC958 Playback Switch'. Рядом с ней вы найдёте строчку типа <code>value:false</code>. Измените её на <code>value:true</code>.</li>
<li>Теперь найдите строчку 'IEC958 Playback AC97-SPSA' и измените её значение на 0.</li>
<li>Перезапустите alsa.</li>
</ul>
</li>
</ul>
<p>Есть другой способ включить вывод через SPDIF автоматически при загрузке системы (проверено на SoundBlaster Audigy):
</p>
<ul><li>добавьте следующие  строчки в /etc/rc.local:</li></ul>
<pre> # Use COAX-digital output
 amixer set 'IEC958 Optical' 100 unmute
 amixer set 'Audigy Analog/Digital Output Jack' on
</pre>
<p>Вы можете увидеть имя цифрового выхода вашей карты с помощью:
</p>
<pre> amixer scontrols
</pre>
<h3><span class="mw-headline" id="KDE">KDE</span></h3>
<ul><li>Запустите KDE:</li></ul>
<pre>$ startx
</pre>
<ul><li>Установите предпочитаемый уровень звука (у каждого пользователя сои настройки):</li></ul>
<pre>$ alsamixer
</pre>
<ul><li>
<b>KDE 3.5</b>. Зайдите в K Menu -&gt; Multimedia -&gt; KMix
<ul>
<li>Выберите Settings &gt; Configure KMix...</li>
<li>Выключите опцию "Restore volumes on login"</li>
<li>Нажмите OK. Теперь ваш уровень звука будет одинаковым как в командной строке, так и в KDE.</li>
</ul>
</li></ul>
<h2>
<span id=".D0.92.D1.8B.D1.81.D0.BE.D0.BA.D0.BE.D0.B5_.D0.BA.D0.B0.D1.87.D0.B5.D1.81.D1.82.D0.B2.D0.BE_.D0.BF.D0.B5.D1.80.D0.B5.D0.B4.D0.B8.D1.81.D0.BA.D1.80.D0.B5.D1.82.D0.B8.D0.B7.D0.B0.D1.86.D0.B8.D0.B8"></span><span class="mw-headline" id="Высокое_качество_передискретизации">Высокое качество передискретизации</span>
</h2>
<p>Когда включено програмное микширование, ALSA вынуждена предесритезировать всё на единой частоте (48 kHz по умолчанию, если поддерживается). По умолчанию, она попытается использовать для этого конвертер <i>speexrate</i>, и откатится к низкому качеству линейной интерполяции, если не получится<a rel="nofollow" class="external autonumber" href="http://git.alsa-project.org/?p=alsa-lib.git;a=blob;f=src/pcm/pcm_rate.c;h=2eb4b1b33933dec878d0f25ad118869adac95767;hb=HEAD#l1278">[3]</a>.
Таким образом, если вы получили некачественный звук из-за плохой передискретизации, проблема может быть решена путем простой установки <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=alsa-plugins">alsa-plugins</a></span>.
Для еще более высокого качества передискретизации, вы можете изменить преобразователь частот по умолчанию на <code>speexrate_medium</code> или <code>speexrate_best</code>. Оба работают достаточно хорошо, что не имеет практического значения, какой вы выберите, и использование лучшего конвертера не стоит тех циклов процессора, которые он тратит.
</p>
<p>Для смены преобразователя частот по умолчанию введите следующие строки в ваши <code>~/.asoundrc</code> или <code>/etc/asound.conf</code>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/asound.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">defaults.pcm.rate_converter "speexrate_medium"
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> Так же возможно использовать конвертер <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=libsamplerate">libsamplerate</a></span>, который в два раза медленее конвертеров <i>speexrate</i>, но даёт небольшой прирост в качестве. Смотрите <a href="../en/Talk:Advanced_Linux_Sound_Architecture.html#On_high_quality_resampling" title="Talk:Advanced Linux Sound Architecture">обсуждение</a>.</div>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> Некоторые приложения (как MPlayer и его ответвления) настроены по умолчанию на собственную передискретизацию. Поскольку некоторые драйвера ALSA неправильно сообщают задержки, когда передискретизация включена (что ведет к рассинхронизации AV), изменение данных настроек не возымеет эффекта, пока вы не настроете их использовать передискретизацию от ALSA.</div>
<h2>
<span id=".D0.A0.D0.B0.D0.B7.D0.BB.D0.BE.D0.B6.D0.B5.D0.BD.D0.B8.D0.B5.2F.D1.81.D0.B2.D0.B5.D0.B4.D0.B5.D0.BD.D0.B8.D0.B5_.D0.BA.D0.B0.D0.BD.D0.B0.D0.BB.D0.BE.D0.B2"></span><span class="mw-headline" id="Разложение/сведение_каналов">Разложение/сведение каналов</span>
</h2>
<h3>
<span id=".D0.A0.D0.B0.D0.B7.D0.BB.D0.BE.D0.B6.D0.B5.D0.BD.D0.B8.D0.B5_.D0.BA.D0.B0.D0.BD.D0.B0.D0.BB.D0.BE.D0.B2"></span><span class="mw-headline" id="Разложение_каналов">Разложение каналов</span>
</h3>
<p>В случае, если вы желаете выпустить стерео звуки, например музыку, через 5.1 или 7.1 системы, вам нужно использовать разложение каналов. В стародавние времена это было сложно, баговано и крючкотворно, но в нашем светлом настоящем достаточно установить плагин, который позаботится об этом. Мы используем плагин <code>upmix</code>, входящий в сотав <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=alsa-plugins">alsa-plugins</a></span>.
</p>
<p>Затем добавим следующие строки в ваши настройки ALSA (на выбор: <code>/etc/asound.conf</code> или <code>~/.asoundrc</code>):
</p>
<pre>pcm.upmix71 {
    type upmix
    slave.pcm "surround71"
    delay 15
    channels 8
}
</pre>
<p>Вы можете легко менять данный пример разложения на 7.1 для 5.1 (surround51) или 4.0 (surround40).
</p>
<p>В данном примере добавляется новый канал PCM, который можно использовать для разложения. Если вы желаете направлять все источники звуков через данный канал, добавьте его в качестве основного, указав ниже предыдущего примера:
</p>
<pre>pcm.!default "plug:upmix71"
</pre>
<p>Плагин автоматически дозволяет множественным ресурсам проигрывать посредством себя без лишних проблем, так что установка его в качестве основного безопасна.
Если данная настройка не работает, вам нужно установить собственный dmixer для разложения каналов PCM, как указано далее:
</p>
<pre>pcm.dmix6 {
    type asym
    playback.pcm {
        type dmix
        ipc_key 567829
        slave {
            pcm "hw:0,0"
            channels 6
        }
    }
}</pre>
<p>и использовать "dmix6" вместо "surround71".
Если вы слышите проглатывание или искажение звуков, попробуйте увеличить размер буфера buffer_size (до 32768, например) или использовать <a href="#%D0%92%D1%8B%D1%81%D0%BE%D0%BA%D0%BE%D0%B5_%D0%BA%D0%B0%D1%87%D0%B5%D1%81%D1%82%D0%B2%D0%BE_%D0%BF%D0%B5%D1%80%D0%B5%D0%B4%D0%B8%D1%81%D0%BA%D1%80%D0%B5%D1%82%D0%B8%D0%B7%D0%B0%D1%86%D0%B8%D0%B8">высококачественную передискретизацию</a>.
</p>
<h3>
<span id=".D0.A1.D0.B2.D0.B5.D0.B4.D0.B5.D0.BD.D0.B8.D0.B5_.D0.BA.D0.B0.D0.BD.D0.B0.D0.BB.D0.BE.D0.B2"></span><span class="mw-headline" id="Сведение_каналов">Сведение каналов</span>
</h3>
<p>Если вы желаете сводить каналы в стерео звук, потому что вам, например, захотелось смотреть фильм со звуком 5.1 на стерео-системе: используйте плагин <code>vdownmix</code>, входящий в <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=alsa-plugins">alsa-plugins</a></span>.
</p>
<p>И далее, в ваши файлы настроек добавьте:
</p>
<pre>pcm.!surround51 {
    type vdownmix
    slave.pcm "default"
}
pcm.!surround40 {
    type vdownmix
    slave.pcm "default"
}</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> Этого может быть не достаточно для работы сведения каналов, смотри <a rel="nofollow" class="external text" href="http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=541786">баг</a>. Так что, вам может потребоваться добавить <code>pcm.!default "plug:surround51"</code> или <code>pcm.!default "plug:surround40"</code>. Только одно подключение <code>vdownmix</code> может быть использовано; если у вас 7.1-канальная система, вам потребуется использовать <code>surround71</code> вместо настроек, указанных выше. Хороший пример, показывающий работающие настройки для <code>vdownmix</code> и <code>dmix</code>, может быть найден <a rel="nofollow" class="external text" href="https://bbs.archlinux.org/viewtopic.php?id=167275">тут</a>.</div>
<p>Пример конфига взятого <a rel="nofollow" class="external text" href="https://bbs.archlinux.org/viewtopic.php?id=167275">отсюда</a>, но с включенным сведением и поддержкой внутрисистемного микшера alsaequal.
</p>
<pre>defaults.pcm.rate_converter "samplerate_best"

pcm.snd_card {
        type hw
        card 0
}

pcm.aout {
        type dmix
        ipc_key 1
        ipc_key_add_uid false
        ipc_perm 0660
        slave {
                pcm "snd_card"
                channels 2
        }
}

# Audio in
pcm.ain {
        type dsnoop
        ipc_key 2
        ipc_key_add_uid false
        ipc_perm 0660
        slave {
                pcm "snd_card"
                channels 2
        }
}

pcm.!surround71 {
        type vdownmix
        slave.pcm "aout"
}

pcm.asymed {
        type asym
        playback.pcm "surround71"
        capture.pcm  "ain"
        slave.pcm "equal"
}

ctl.equal {
    type equal;
}

pcm.plugequal {
    type equal;
    slave.pcm "plug:dmix";
}

pcm.!default {
        type plug
        slave.pcm "plugequal"
}</pre>
<h2>
<span id=".D0.9F.D1.80.D0.BE.D0.B1.D0.BB.D0.B5.D0.BC.D1.8B"></span><span class="mw-headline" id="Проблемы">Проблемы</span>
</h2>
<h3>
<span id=".D0.AD.D0.BC.D1.83.D0.BB.D1.8F.D1.86.D0.B8.D1.8F_.D1.80.D0.B0.D0.B1.D0.BE.D1.82.D1.8B_OSS_.D0.B4.D1.80.D0.B0.D0.B9.D0.B2.D0.B5.D1.80.D0.B0_.D0.B4.D0.BB.D1.8F_ALSA"></span><span class="mw-headline" id="Эмуляция_работы_OSS_драйвера_для_ALSA">Эмуляция работы OSS драйвера для ALSA</span>
</h3>
<p>Скачайте и распакуйте <a rel="nofollow" class="external text" href="http://www.kote.ninja/news@1/2015-05-10/gorky18/">архив с этой страницы</a><sup>[<a href="https://en.wikipedia.org/wiki/Wikipedia:Link_rot" class="extiw" title="wikipedia:Wikipedia:Link rot">устаревшая ссылка</a> 2020-08-02]</sup>. Установите его командами
</p>
<pre>make
</pre>
<p>затем
</p>
<pre>sudo make install
</pre>
<p>Затем запустите демон
</p>
<pre>sudo /usr/local/sbin/osspd
</pre>
<p>и дайте права появившимся устройствам. Затем запускайте любое OSS приложение.
</p>
<h3>
<span id=".D0.95.D1.81.D0.BB.D0.B8_.D1.83_.D0.B2.D0.B0.D1.81_.D0.B2.D1.81.D1.91_.D0.B5.D1.89.D1.91_.D0.BD.D0.B5.D1.82_.D0.B7.D0.B2.D1.83.D0.BA.D0.B0"></span><span class="mw-headline" id="Если_у_вас_всё_ещё_нет_звука">Если у вас всё ещё нет звука</span>
</h3>
<p>Даже если ваши драйвера установлены корректно, выставлен правильный уровень звука, ничего не выключено, вы можете ничего не слышать! Добавление следующей строчки к <code>/etc/modprobe.d/modprobe.conf</code> решает эту проблемы (по крайней мере для модуля <code>via82xx</code>):
</p>
<pre>options snd-NAME-OF-MODULE ac97_quirk=0
</pre>
<h3>
<span id=".D0.9F.D0.BB.D0.BE.D1.85.D0.BE.D0.B5_.D0.BA.D0.B0.D1.87.D0.B5.D1.81.D1.82.D0.B2.D0.BE_.D0.B7.D0.B2.D1.83.D0.BA.D0.B0"></span><span class="mw-headline" id="Плохое_качество_звука">Плохое качество звука</span>
</h3>
<p>Если качество звука у вас плохое, можете попробовать выставить такой уровень PCM (в alsamixer), чтобы gain был равен 0.
</p>
<h3>
<span id=".D0.9D.D0.B5.D1.82_.D0.B7.D0.B2.D1.83.D0.BA.D0.B0_.D0.BD.D0.B0_.D1.83.D1.81.D1.82.D0.B0.D0.BD.D0.BE.D0.B2.D0.BB.D0.B5.D0.BD.D0.BD.D0.BE.D0.B9_S.2FPDIF_.D0.B2.D0.B8.D0.B4.D0.B5.D0.BE.D0.BA.D0.B0.D1.80.D1.82.D0.B5"></span><span class="mw-headline" id="Нет_звука_на_установленной_S/PDIF_видеокарте">Нет звука на установленной S/PDIF видеокарте</span>
</h3>
<p>Посмотрите доступные модули и их порядок:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ cat /proc/asound/modules</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;"> 0 snd_hda_intel
 1 snd_ca0106
</pre>
<p>Отключите нежелательный аудиокодек видеокарты в <code>/etc/modprobe.d/modprobe.conf</code>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/modprobe.d/modprobe.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">install snd_hda_intel /bin/false
</pre>
<p>Если оба устройства используют одинаковый модуль, можно включить параметр <code>enable</code> в модуле snd_hda_intel; это массив логических значений что разрешают/запрещают работу желаемой звуковой карты.
</p>
<pre>options snd_hda_intel enable=1,0
</pre>
<p>Будьте внимательны к названию вашего устройства <i>snd<b>_</b>hda<b>_</b>intel</i> (подчеркивание) или <i>snd<b>-</b>hda<b>-</b>intel</i> (тире).
</p>
</div>
</div>
<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../ru/Category:Sound.html" title="Category:Sound (Русский)">Sound (Русский)</a></li></ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden categories: <ul>
<li><a href="../ru/Category:Pages_or_sections_flagged_with_Template:Translateme.html" title="Category:Pages or sections flagged with Template:Translateme (Русский)">Pages or sections flagged with Template:Translateme (Русский)</a></li>
<li><a href="../en/Category:Pages_with_broken_section_links.html" title="Category:Pages with broken section links">Pages with broken section links</a></li>
</ul>
</div>
</div>
	</div>
</div>

<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
		<li>Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Advanced_Linux_Sound_Architecture_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9)&amp;oldid=644953">https://wiki.archlinux.org/index.php?title=Advanced_Linux_Sound_Architecture_(Русский)&amp;oldid=644953</a>"</li>
		<li id="footer-info-lastmod"> This page was last edited on 13 December 2020, at 10:00.</li>
		<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
	<br>
</ul>
	<ul id="footer-places">
		<li id="footer-places-privacy"><a href="../en/ArchWiki:Privacy_policy.html" title="ArchWiki:Privacy policy">Privacy policy</a></li>
		<li id="footer-places-about"><a href="../en/ArchWiki:About.html" title="ArchWiki:About">About ArchWiki</a></li>
		<li id="footer-places-disclaimer"><a href="../en/ArchWiki:General_disclaimer.html" title="ArchWiki:General disclaimer">Disclaimers</a></li>
	</ul>
	<ul id="footer-icons" class="noprint">
		<li id="footer-copyrightico">
	</ul>
	<div style="clear: both;"></div>
</footer>



</body>
</html>
