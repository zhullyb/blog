<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>Zsh (Русский) - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.35.0">
<meta name="robots" content="noindex,follow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="http://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Zsh_Русский rootpage-Zsh_Русский skin-vector action-view skin-vector-legacy">
<div id="content" class="mw-body" role="main" style="margin: 0">
	<a id="top"></a>
	<div id="siteNotice" class="mw-body-content"></div>
	<div class="mw-indicators mw-body-content">
	</div>
	<h1 id="firstHeading" class="firstHeading" lang="en">Zsh (Русский)</h1>
	<div id="bodyContent" class="mw-body-content">
		<div id="siteSub" class="noprint">From ArchWiki</div>
		<div id="contentSub"></div>
		<div id="contentSub2"></div>
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="#searchInput">Jump to search</a>
		<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr">
<div class="warningbox">The printable version is no longer supported and may have rendering errors. Please update your browser bookmarks and please use the default browser print function instead.</div>
<div class="mw-parser-output">
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Состояние перевода:</strong> На этой странице представлен перевод статьи <a href="../en/Zsh.html" title="Zsh">Zsh</a>. Дата последней синхронизации: 7 февраля 2016. Вы можете <a href="../ru/ArchWiki:Translation_Team.html" title="ArchWiki:Translation Team (Русский)">помочь</a> синхронизировать перевод, если в английской версии произошли <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php?title=Zsh&amp;diff=0&amp;oldid=419352">изменения</a>.</div>
<p><a rel="nofollow" class="external text" href="http://zsh.sourceforge.net/Intro/intro_1.html">Zsh</a> является мощной современной оболочкой, которая работает как в интерактивном режиме, так и в качестве интерпретатора языка сценариев. Он совместим с <a href="../ru/Bash.html" title="Bash (Русский)">bash</a> (не по умолчанию, только в режиме <code>emulate sh</code>), но имеет преимущества, такие как улучшенное <a rel="nofollow" class="external text" href="http://zsh.sourceforge.net/Guide/zshguide06.html">завершение</a> и <a rel="nofollow" class="external text" href="http://zsh.sourceforge.net/Doc/Release/Expansion.html">подстановка</a>.
</p>
<p>Еще больше причин, по которым стоит использовать Zsh, перечислено в <a rel="nofollow" class="external text" href="http://zsh.sourceforge.net/FAQ/zshfaq01.html#l4">Zsh FAQ EN</a>.
</p>
<div id="toc" class="toc" role="navigation" aria-labelledby="mw-toc-heading">
<input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none"><div class="toctitle" lang="en" dir="ltr">
<h2 id="mw-toc-heading">Contents</h2>
<span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span>
</div>
<ul>
<li class="toclevel-1 tocsection-1">
<a href="#%D0%A3%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BA%D0%B0"><span class="tocnumber">1</span> <span class="toctext">Установка</span></a>
<ul>
<li class="toclevel-2 tocsection-2"><a href="#%D0%9F%D0%B5%D1%80%D0%B2%D0%BE%D0%BD%D0%B0%D1%87%D0%B0%D0%BB%D1%8C%D0%BD%D0%B0%D1%8F_%D0%BD%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B0"><span class="tocnumber">1.1</span> <span class="toctext">Первоначальная настройка</span></a></li>
<li class="toclevel-2 tocsection-3"><a href="#%D0%A3%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BA%D0%B0_Zsh_%D0%B2_%D0%BA%D0%B0%D1%87%D0%B5%D1%81%D1%82%D0%B2%D0%B5_%D0%BE%D0%B1%D0%BE%D0%BB%D0%BE%D1%87%D0%BA%D0%B8_%D0%BF%D0%BE_%D1%83%D0%BC%D0%BE%D0%BB%D1%87%D0%B0%D0%BD%D0%B8%D1%8E"><span class="tocnumber">1.2</span> <span class="toctext">Установка Zsh в качестве оболочки по умолчанию</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-4"><a href="#%D0%A4%D0%B0%D0%B9%D0%BB%D1%8B_%D0%97%D0%B0%D0%BF%D1%83%D1%81%D0%BA%D0%B0/%D0%97%D0%B0%D0%B2%D0%B5%D1%80%D1%88%D0%B5%D0%BD%D0%B8%D1%8F"><span class="tocnumber">2</span> <span class="toctext">Файлы Запуска/Завершения</span></a></li>
<li class="toclevel-1 tocsection-5">
<a href="#%D0%9D%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B0_Zsh"><span class="tocnumber">3</span> <span class="toctext">Настройка Zsh</span></a>
<ul>
<li class="toclevel-2 tocsection-6"><a href="#%D0%9F%D1%80%D0%BE%D1%81%D1%82%D0%BE%D0%B9_.zshrc"><span class="tocnumber">3.1</span> <span class="toctext">Простой .zshrc</span></a></li>
<li class="toclevel-2 tocsection-7"><a href="#%D0%9D%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B0_%D0%BF%D0%B5%D1%80%D0%B5%D0%BC%D0%B5%D0%BD%D0%BD%D0%BE%D0%B9_%24PATH"><span class="tocnumber">3.2</span> <span class="toctext">Настройка переменной $PATH</span></a></li>
<li class="toclevel-2 tocsection-8"><a href="#%D0%90%D0%B2%D1%82%D0%BE%D0%B7%D0%B0%D0%B2%D0%B5%D1%80%D1%88%D0%B5%D0%BD%D0%B8%D0%B5_%D0%BA%D0%BE%D0%BC%D0%B0%D0%BD%D0%B4"><span class="tocnumber">3.3</span> <span class="toctext">Автозавершение команд</span></a></li>
<li class="toclevel-2 tocsection-9"><a href="#%D0%9E%D0%B1%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D1%87%D0%B8%D0%BA_%D0%BD%D0%B5%D0%B8%D0%B7%D0%B2%D0%B5%D1%81%D1%82%D0%BD%D1%8B%D1%85_%D0%BA%D0%BE%D0%BC%D0%B0%D0%BD%D0%B4"><span class="tocnumber">3.4</span> <span class="toctext">Обработчик неизвестных команд</span></a></li>
<li class="toclevel-2 tocsection-10"><a href="#%D0%98%D0%B3%D0%BD%D0%BE%D1%80%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5_%D0%BF%D0%BE%D0%B2%D1%82%D0%BE%D1%80%D1%8F%D1%8E%D1%89%D0%B8%D1%85%D1%81%D1%8F_%D1%81%D1%82%D1%80%D0%BE%D0%BA_%D0%B2_%D0%B8%D1%81%D1%82%D0%BE%D1%80%D0%B8%D0%B8"><span class="tocnumber">3.5</span> <span class="toctext">Игнорирование повторяющихся строк в истории</span></a></li>
<li class="toclevel-2 tocsection-11"><a href="#%D0%9A%D0%BE%D0%BC%D0%B0%D0%BD%D0%B4%D0%B0_ttyctl"><span class="tocnumber">3.6</span> <span class="toctext">Команда ttyctl</span></a></li>
<li class="toclevel-2 tocsection-12">
<a href="#%D0%9D%D0%B0%D0%B7%D0%BD%D0%B0%D1%87%D0%B5%D0%BD%D0%B8%D0%B5_%D0%BA%D0%BB%D0%B0%D0%B2%D0%B8%D1%88"><span class="tocnumber">3.7</span> <span class="toctext">Назначение клавиш</span></a>
<ul>
<li class="toclevel-3 tocsection-13"><a href="#%D0%9D%D0%B0%D0%B7%D0%BD%D0%B0%D1%87%D0%B5%D0%BD%D0%B8%D0%B5_%D0%BA%D0%BB%D0%B0%D0%B2%D0%B8%D1%88_%D0%B2_%D0%BE%D0%B1%D0%BE%D0%BB%D0%BE%D1%87%D0%BA%D0%B5"><span class="tocnumber">3.7.1</span> <span class="toctext">Назначение клавиш в оболочке</span></a></li>
<li class="toclevel-3 tocsection-14"><a href="#%D0%9D%D0%B0%D0%B7%D0%BD%D0%B0%D1%87%D0%B5%D0%BD%D0%B8%D0%B5_%D0%BA%D0%BB%D0%B0%D0%B2%D0%B8%D1%88%D0%B8_%D0%B2_ncurses"><span class="tocnumber">3.7.2</span> <span class="toctext">Назначение клавиши в ncurses</span></a></li>
<li class="toclevel-3 tocsection-15"><a href="#%D0%90%D0%BB%D1%8C%D1%82%D0%B5%D1%80%D0%BD%D0%B0%D1%82%D0%B8%D0%B2%D0%BD%D1%8B%D0%B9_%D0%BF%D1%83%D1%82%D1%8C_%D0%BD%D0%B0%D0%B7%D0%BD%D0%B0%D1%87%D0%B5%D0%BD%D0%B8%D1%8F_%D0%BA%D0%BB%D0%B0%D0%B2%D0%B8%D1%88_%D0%B2_ncurses"><span class="tocnumber">3.7.3</span> <span class="toctext">Альтернативный путь назначения клавиш в ncurses</span></a></li>
<li class="toclevel-3 tocsection-16"><a href="#%D0%93%D0%BE%D1%80%D1%8F%D1%87%D0%B8%D0%B5_%D0%BA%D0%BB%D0%B0%D0%B2%D0%B8%D1%88%D0%B8_%D0%B2_%D1%84%D0%B0%D0%B9%D0%BB%D0%BE%D0%B2%D0%BE%D0%BC_%D0%BC%D0%B5%D0%BD%D0%B5%D0%B4%D0%B6%D0%B5%D1%80%D0%B5"><span class="tocnumber">3.7.4</span> <span class="toctext">Горячие клавиши в файловом менеджере</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-17"><a href="#%D0%98%D1%81%D1%82%D0%BE%D1%80%D0%B8%D1%8F_%D0%BF%D0%BE%D0%B8%D1%81%D0%BA%D0%B0"><span class="tocnumber">3.8</span> <span class="toctext">История поиска</span></a></li>
<li class="toclevel-2 tocsection-18"><a href="#%D0%9D%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B0_%D1%81%D1%82%D1%80%D0%BE%D0%BA%D0%B8_%D0%BF%D1%80%D0%B8%D0%B3%D0%BB%D0%B0%D1%88%D0%B5%D0%BD%D0%B8%D1%8F_(PROMPT)"><span class="tocnumber">3.9</span> <span class="toctext">Настройка строки приглашения (PROMPT)</span></a></li>
<li class="toclevel-2 tocsection-19">
<a href="#%D0%9D%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B0_%D0%BA%D0%BE%D0%BC%D0%B0%D0%BD%D0%B4%D0%BD%D0%BE%D0%B9_%D1%81%D1%82%D1%80%D0%BE%D0%BA%D0%B8_(PROMPT)"><span class="tocnumber">3.10</span> <span class="toctext">Настройка командной строки (PROMPT)</span></a>
<ul>
<li class="toclevel-3 tocsection-20"><a href="#%D0%A6%D0%B2%D0%B5%D1%82%D0%B0"><span class="tocnumber">3.10.1</span> <span class="toctext">Цвета</span></a></li>
<li class="toclevel-3 tocsection-21"><a href="#%D0%A6%D0%B2%D0%B5%D1%82%D0%BD%D0%BE%D0%B9_%D0%B2%D1%8B%D0%B2%D0%BE%D0%B4_%D0%BA%D0%BE%D0%BC%D0%B0%D0%BD%D0%B4"><span class="tocnumber">3.10.2</span> <span class="toctext">Цветной вывод команд</span></a></li>
<li class="toclevel-3 tocsection-22"><a href="#%D0%9F%D1%80%D0%B8%D0%BC%D0%B5%D1%80"><span class="tocnumber">3.10.3</span> <span class="toctext">Пример</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-23"><a href="#%D0%A1%D1%82%D0%B5%D0%BA_%D0%9A%D0%B0%D1%82%D0%B0%D0%BB%D0%BE%D0%B3%D0%BE%D0%B2"><span class="tocnumber">3.11</span> <span class="toctext">Стек Каталогов</span></a></li>
<li class="toclevel-2 tocsection-24"><a href="#%D0%9A%D0%BE%D0%BC%D0%B0%D0%BD%D0%B4%D0%B0_Help"><span class="tocnumber">3.12</span> <span class="toctext">Команда Help</span></a></li>
<li class="toclevel-2 tocsection-25"><a href="#%D0%9F%D0%BE%D0%B4%D1%81%D0%B2%D0%B5%D1%82%D0%BA%D0%B0_%D1%81%D0%B8%D0%BD%D1%82%D0%B0%D0%BA%D1%81%D0%B8%D1%81%D0%B0_%D0%BA%D0%B0%D0%BA_%D0%B2_Fish"><span class="tocnumber">3.13</span> <span class="toctext">Подсветка синтаксиса как в Fish</span></a></li>
<li class="toclevel-2 tocsection-26"><a href="#%D0%9F%D1%80%D0%B8%D0%BC%D0%B5%D1%80%D1%8B_%D1%84%D0%B0%D0%B9%D0%BB%D0%B0_.zshrc"><span class="tocnumber">3.14</span> <span class="toctext">Примеры файла .zshrc</span></a></li>
<li class="toclevel-2 tocsection-27"><a href="#%D0%A4%D1%80%D0%B5%D0%B9%D0%BC%D0%B2%D0%BE%D1%80%D0%BA%D0%B8_%D0%BD%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B5%D0%BA"><span class="tocnumber">3.15</span> <span class="toctext">Фреймворки настроек</span></a></li>
<li class="toclevel-2 tocsection-28"><a href="#%D0%90%D0%B2%D1%82%D0%BE%D0%B7%D0%B0%D0%BF%D1%83%D1%81%D0%BA_%D0%BF%D1%80%D0%B8%D0%BB%D0%BE%D0%B6%D0%B5%D0%BD%D0%B8%D0%B9"><span class="tocnumber">3.16</span> <span class="toctext">Автозапуск приложений</span></a></li>
<li class="toclevel-2 tocsection-29"><a href="#%D0%9F%D0%BE%D1%81%D1%82%D0%BE%D1%8F%D0%BD%D0%BD%D1%8B%D0%B9_rehash"><span class="tocnumber">3.17</span> <span class="toctext">Постоянный rehash</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-30">
<a href="#%D0%A4%D1%83%D0%BD%D0%BA%D1%86%D0%B8%D0%B8"><span class="tocnumber">4</span> <span class="toctext">Функции</span></a>
<ul>
<li class="toclevel-2 tocsection-31"><a href="#%D0%A0%D0%B0%D1%81%D0%BF%D0%B0%D0%BA%D0%BE%D0%B2%D0%BA%D0%B0_%D0%B0%D1%80%D1%85%D0%B8%D0%B2%D0%B0"><span class="tocnumber">4.1</span> <span class="toctext">Распаковка архива</span></a></li>
<li class="toclevel-2 tocsection-32"><a href="#%D0%A3%D0%BF%D0%B0%D0%BA%D0%BE%D0%B2%D0%BA%D0%B0_%D0%B2_%D0%B0%D1%80%D1%85%D0%B8%D0%B2"><span class="tocnumber">4.2</span> <span class="toctext">Упаковка в архив</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-33"><a href="#%D0%A3%D0%B4%D0%B0%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5"><span class="tocnumber">5</span> <span class="toctext">Удаление</span></a></li>
<li class="toclevel-1 tocsection-34"><a href="#%D0%A1%D0%BC%D0%BE%D1%82%D1%80%D0%B8%D1%82%D0%B5_%D1%82%D0%B0%D0%BA%D0%B6%D0%B5"><span class="tocnumber">6</span> <span class="toctext">Смотрите также</span></a></li>
</ul>
</div>

<h2>
<span id=".D0.A3.D1.81.D1.82.D0.B0.D0.BD.D0.BE.D0.B2.D0.BA.D0.B0"></span><span class="mw-headline" id="Установка">Установка</span>
</h2>
<p>Перед установкой вы можете посмотреть, какая оболочка используется в данный момент:
</p>
<pre>$ echo $SHELL
</pre>
<p><a href="../ru/Help:Reading.html#%D0%A3%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BA%D0%B0_%D0%BF%D0%B0%D0%BA%D0%B5%D1%82%D0%BE%D0%B2" class="mw-redirect" title="Установите">Установите</a> пакет <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=zsh">zsh</a></span>. Чтобы значительно расширить возможности автодополнения команд, установите также пакет <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=zsh-completions">zsh-completions</a></span>.
</p>
<h3>
<span id=".D0.9F.D0.B5.D1.80.D0.B2.D0.BE.D0.BD.D0.B0.D1.87.D0.B0.D0.BB.D1.8C.D0.BD.D0.B0.D1.8F_.D0.BD.D0.B0.D1.81.D1.82.D1.80.D0.BE.D0.B9.D0.BA.D0.B0"></span><span class="mw-headline" id="Первоначальная_настройка">Первоначальная настройка</span>
</h3>
<p>Убедитесь, что Zsh был установлен правильно, выполнив следующую команду в терминале:
</p>
<pre>$ zsh
</pre>
<p>После этого вы должны увидеть скрипт <i>zsh-newuser-install</i>, который проведет вас через некоторые основные настройки. Если вы хотите пропустить первичную настройку, нажмите <code>q</code>. Если скрипт не запустился, вы можете вызвать его вручную:
</p>
<pre>$ zsh /usr/share/zsh/functions/Newuser/zsh-newuser-install -f
</pre>
<h3>
<span id=".D0.A3.D1.81.D1.82.D0.B0.D0.BD.D0.BE.D0.B2.D0.BA.D0.B0_Zsh_.D0.B2_.D0.BA.D0.B0.D1.87.D0.B5.D1.81.D1.82.D0.B2.D0.B5_.D0.BE.D0.B1.D0.BE.D0.BB.D0.BE.D1.87.D0.BA.D0.B8_.D0.BF.D0.BE_.D1.83.D0.BC.D0.BE.D0.BB.D1.87.D0.B0.D0.BD.D0.B8.D1.8E"></span><span class="mw-headline" id="Установка_Zsh_в_качестве_оболочки_по_умолчанию">Установка Zsh в качестве оболочки по умолчанию</span>
</h3>
<p>Смотрите раздел <a href="../ru/Command-line_shell.html#%D0%92%D1%8B%D0%B1%D0%BE%D1%80_%D0%BE%D0%B1%D0%BE%D0%BB%D0%BE%D1%87%D0%BA%D0%B8_%D0%BF%D0%BE_%D1%83%D0%BC%D0%BE%D0%BB%D1%87%D0%B0%D0%BD%D0%B8%D1%8E" class="mw-redirect" title="Командная оболочка">Командная оболочка#Выбор оболочки по умолчанию</a>.
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Совет:</strong> При замене <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=bash">bash</a></span> пользователь может перенести некоторые участки кода из <code>~/.bashrc</code> в <code>~/.zshrc</code> (например, приглашение командной строки и <a href="../ru/Bash.html#%D0%9F%D1%81%D0%B5%D0%B2%D0%B4%D0%BE%D0%BD%D0%B8%D0%BC%D1%8B" title="Bash (Русский)">псевдонимы</a>), а также из <code>~/.bash_profile</code> в <code>~/.zprofile</code> (например, <a href="../ru/Xinit.html#%D0%90%D0%B2%D1%82%D0%BE%D0%B7%D0%B0%D0%BF%D1%83%D1%81%D0%BA_X_%D0%BF%D1%80%D0%B8_%D0%B2%D1%85%D0%BE%D0%B4%D0%B5_%D0%B2_%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D1%83" class="mw-redirect" title="Xinitrc (Русский)">код, который запускает оконную систему X</a>)</div>
<h2>
<span id=".D0.A4.D0.B0.D0.B9.D0.BB.D1.8B_.D0.97.D0.B0.D0.BF.D1.83.D1.81.D0.BA.D0.B0.2F.D0.97.D0.B0.D0.B2.D0.B5.D1.80.D1.88.D0.B5.D0.BD.D0.B8.D1.8F"></span><span class="mw-headline" id="Файлы_Запуска/Завершения">Файлы Запуска/Завершения</span>
</h2>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Совет:</strong> Смотрите <a rel="nofollow" class="external text" href="http://zsh.sourceforge.net/Guide/zshguide02.html">Руководство пользователя Z-Shell</a>, информацию о интерактивном входе в оболочку, и что включать в Ваш автозапуск.</div>
<p><br>
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> 
<ul>
<li>Если <code>$ZDOTDIR</code> не определена, используется <code>$HOME</code> по умолчанию.</li>
<li>Если опция <code>RCS</code> не установлена ни в одном из файлов, файлы конфигурации не будут получены после этого файла.</li>
<li>Если опция <code>GLOBAL_RCS</code> не задана ни в одном из файлов, после этого файла не будут найдены глобальные конфигурационные файлы (<code>/etc/zsh/*</code>).</li>
</ul>
</div>
<p>При запуске Zsh по умолчанию он будет загружать следующие файлы в этом порядке:
</p>
<dl>
<dt><code>/etc/zsh/zshenv</code></dt>
<dd>Используется для установки общесистемных переменных <a href="../ru/Environment_variables.html" title="Environment variables (Русский)">environment variables (Русский)</a>; Он не должен содержать команд, которые производят вывод, или предполагает, что shell подключен к tty. Этот файл <i><b>всегда</b></i> будет источником, это нельзя переопределить.</dd>
<dt><code>$ZDOTDIR/.zshenv</code></dt>
<dd>Используется для установки переменных среды пользователя; Он не должен содержать команд, которые производят вывод, или предполагает, что shell подключен к tty. Этот файл <i><b>всегда</b></i> будет источником.</dd>
<dt><code>/etc/zsh/zprofile</code></dt>
<dd>Используется для выполнения команд при запуске, будет вызван при запуске как <i><b>login shell</b></i>. Обратите внимание, что в Arch Linux по умолчанию в нем содержится <a rel="nofollow" class="external text" href="https://github.com/archlinux/svntogit-packages/blob/packages/zsh/trunk/zprofile">одна строка</a>, в которой источником является <code>/etc/profile</code>.
<dl>
<dt><code>/etc/profile</code></dt>
<dd>Этот файл должен быть загружен всеми Bourne-совместимыми оболочками при входе в систему: он устанавливает <code>$PATH</code> и другие переменные окружения и специфичные для приложения (<code>/etc/profile.d/*.sh</code>) при входе в систему.</dd>
</dl>
</dd>
</dl>
<dl>
<dt><code>$ZDOTDIR/.zprofile</code></dt>
<dd>Используется для выполнения пользовательских команд при запуске, будет вызван при запуске как <i><b>login shell</b></i>.</dd>
<dt><code>/etc/zsh/zshrc</code></dt>
<dd>Используется для настройки интерактивной конфигурации оболочки и выполнения команд, будет вызван при запуске как <i><b>interactive shell</b></i>.</dd>
<dt><code>$ZDOTDIR/.zshrc</code></dt>
<dd>Используется для настройки интерактивной конфигурации пользователя и выполнения команд, будет вызван при запуске как <i><b>interactive shell</b></i>.</dd>
<dt><code>/etc/zsh/zlogin</code></dt>
<dd>Используется для выполнения команд при завершении прогресса инициализации, будет вызван при запуске как <i><b>login shell</b></i>.</dd>
<dt><code>$ZDOTDIR/.zlogin</code></dt>
<dd>Используется для выполнения пользовательских команд при завершении начального прогресса, будет вызван при запуске как <i><b>login shell</b></i>.</dd>
<dt><code>$ZDOTDIR/.zlogout</code></dt>
<dd>Будет получен, когда <i><b>login shell</b></i> <b>завершится</b>.</dd>
<dt><code>/etc/zsh/zlogout</code></dt>
<dd>Будет получен, когда <i><b>login shell</b></i> <b>завершится</b>.</dd>
</dl>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> 
<ul>
<li>Пути, используемые в пакете Arch <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=zsh">zsh</a></span>, отличаются от используемых по умолчанию в <a href="../en/Man_page.html" title="Man page">man pages</a> (<a rel="nofollow" class="external text" href="https://bugs.archlinux.org/task/48992">FS#48992</a>).</li>
<li>
<code>/etc/profile</code> не является частью обычного списка запускаемых файлов Zsh, но поступает из <code>/etc/zsh/zprofile</code> в пакете <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=zsh">zsh</a></span>. Пользователи должны принять во внимание, что <code>/etc/profile</code> устанавливает переменную <code>$PATH</code> которая перезапишет любую переменную <code>$PATH</code> установленную в <code>$ZDOTDIR/.zshenv</code>. Чтобы это предотвратить, установите переменную <code>$PATH</code> в <code>$ZDOTDIR/.zprofile</code>.</li>
</ul>
</div>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Важно:</strong> Не рекомендуется заменять стандартную <a rel="nofollow" class="external text" href="https://github.com/archlinux/svntogit-packages/blob/packages/zsh/trunk/zprofile">одну строку</a> в <code>/etc/zsh/zprofile</code> с чем-то другим, это нарушит целостность других пакетов, которые предоставляют некоторые сценарии в <code>/etc/profile.d</code>.</div>
<h2>
<span id=".D0.9D.D0.B0.D1.81.D1.82.D1.80.D0.BE.D0.B9.D0.BA.D0.B0_Zsh"></span><span class="mw-headline" id="Настройка_Zsh">Настройка Zsh</span>
</h2>
<p>Хотя Zsh может использоваться “из коробки”, он настроен не так, как хотело бы большинство пользователей. Из-за наличия огромных возможностей настройки, доступных в Zsh, этот процесс может оказаться сложным и трудоемким.
</p>
<h3>
<span id=".D0.9F.D1.80.D0.BE.D1.81.D1.82.D0.BE.D0.B9_.zshrc"></span><span class="mw-headline" id="Простой_.zshrc">Простой .zshrc</span>
</h3>
<p>Ниже приведён пример файла настроек, который обеспечивает достойный набор опций по умолчанию, а также предоставляет примеры многих вариантов настройки Zsh. Для того, чтобы использовать этот пример, сохраните его в виде файла с именем <code>.zshrc</code>.  
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Совет:</strong> Чтобы применить изменения не завершая сеанс, выполните команду <code>source ~/.zshrc</code>
</div>
<p>Вот простой <code>.zshrc</code>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.zshrc</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">autoload -U compinit promptinit
compinit
promptinit

# Эта настройка установит тему walters для приглашения командной строки
prompt walters</pre>
<h3>
<span id=".D0.9D.D0.B0.D1.81.D1.82.D1.80.D0.BE.D0.B9.D0.BA.D0.B0_.D0.BF.D0.B5.D1.80.D0.B5.D0.BC.D0.B5.D0.BD.D0.BD.D0.BE.D0.B9_.24PATH"></span><span class="mw-headline" id="Настройка_переменной_$PATH">Настройка переменной $PATH</span>
</h3>
<p>Информацию о настройке в <i>zsh</i> системных путей отдельно для каждого пользователя можно найти <a rel="nofollow" class="external text" href="http://zsh.sourceforge.net/Guide/zshguide02.html#l24">на странице проекта</a>. Вкратце, добавьте в файл <code>~/.zshenv</code> следующие строки:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.zshenv</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">typeset -U path
path=(~/bin /other/things/in/path $path[@])</pre>
<p>Смотрите также примечание в разделе <a href="#%D0%A4%D1%80%D0%B5%D0%B9%D0%BC%D0%B2%D0%BE%D1%80%D0%BA%D0%B8_%D0%BD%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B5%D0%BA">#Фреймворки настроек</a>.
</p>
<h3>
<span id=".D0.90.D0.B2.D1.82.D0.BE.D0.B7.D0.B0.D0.B2.D0.B5.D1.80.D1.88.D0.B5.D0.BD.D0.B8.D0.B5_.D0.BA.D0.BE.D0.BC.D0.B0.D0.BD.D0.B4"></span><span class="mw-headline" id="Автозавершение_команд">Автозавершение команд</span>
</h3>
<p>Возможно, наиболее убедительной стороной Zsh является его передовые возможности автозавершения. Включите автозавершение в <code>.zshrc</code>. Добавив следующую строку в ваш <code>~/.zshrc</code>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.zshrc</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">autoload -U compinit
compinit
</pre>
<p>Настройки выше включают в себя также ssh/scp/sftp завершения хостов, но для того, чтобы эта функция работала, пользователи должны предотвратить SSH от хеширования хостов имён в <code>~/.ssh/known_hosts</code>.
</p>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Важно:</strong> Это делает компьютер уязвимым для<a rel="nofollow" class="external text" href="http://blog.rootshell.be/2010/11/03/bruteforcing-ssh-known_hosts-files/">"Island-hopping" атак</a>. В этом случае, закоментируйте следующую строку или установите значение
<pre><code>no</code>:
</pre>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/ssh/ssh_config</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">#HashKnownHosts yes</pre>
<p>И поместите <code>~/.ssh/known_hosts</code> где-то еще, так что ssh создаст новый с un-hashed хостами (ранее известные хосты, таким образом, будут утеряны). Для получения более подробной информации смотрите тут <a rel="nofollow" class="external text" href="http://nms.lcs.mit.edu/projects/ssh/README.hashed-hosts">кэшированные-хосты</a>.
</p>
</div>
<p>Для автозавершения с использованием клавиши-стрелки, добавьте следующие строки в:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.zshrc</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">zstyle ':completion:*' menu select</pre>
<dl><dd><i>Для активации меню нажмите TAB дважды.</i></dd></dl>
<p>Для автозавершения командной строки для алиасов (псевдонимов), добавьте следующее:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.zshrc</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">setopt completealiases</pre>
<p>Позволяем разворачивать сокращенный ввод, к примеру cd /u/sh в /usr/share
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.zshrc</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">autoload -U compinit &amp;&amp; compinit</pre>
<h3>
<span id=".D0.9E.D0.B1.D1.80.D0.B0.D0.B1.D0.BE.D1.82.D1.87.D0.B8.D0.BA_.D0.BD.D0.B5.D0.B8.D0.B7.D0.B2.D0.B5.D1.81.D1.82.D0.BD.D1.8B.D1.85_.D0.BA.D0.BE.D0.BC.D0.B0.D0.BD.D0.B4"></span><span class="mw-headline" id="Обработчик_неизвестных_команд">Обработчик неизвестных команд</span>
</h3>
<p>В утилиту <a href="../ru/Pkgfile.html" title="Pkgfile (Русский)">pkgfile</a> входит Zsh скрипт, содержащий функцию <code>command_not_found_handler</code>. При вводе неизвестной команды функция автоматически осуществляет поиск в официальных репозиториях.
</p>
<p>Чтобы включить хук, нужно его <a href="../ru/Help:Reading.html#Source" title="Help:Reading (Русский)">прочитать</a>. Например, добавьте с файл <code>.zshrc</code> следующую строку:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.zshrc</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">source /usr/share/doc/pkgfile/command-not-found.zsh</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> Чтобы это сработало, базу данных <i>pkgfile</i> нужно <a href="../ru/Pkgfile.html#%D0%A3%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BA%D0%B0" title="Pkgfile (Русский)">синхронизировать</a>.</div>
<h3>
<span id=".D0.98.D0.B3.D0.BD.D0.BE.D1.80.D0.B8.D1.80.D0.BE.D0.B2.D0.B0.D0.BD.D0.B8.D0.B5_.D0.BF.D0.BE.D0.B2.D1.82.D0.BE.D1.80.D1.8F.D1.8E.D1.89.D0.B8.D1.85.D1.81.D1.8F_.D1.81.D1.82.D1.80.D0.BE.D0.BA_.D0.B2_.D0.B8.D1.81.D1.82.D0.BE.D1.80.D0.B8.D0.B8"></span><span class="mw-headline" id="Игнорирование_повторяющихся_строк_в_истории">Игнорирование повторяющихся строк в истории</span>
</h3>
<p>Чтобы игнорировать повторяющиеся строки в истории, используйте следующее:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.zshrc</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">setopt HIST_IGNORE_DUPS</pre>
<p>Чтобы освободить историю от уже созданных дубликатов, запустите:
</p>
<pre>$ sort -t ";" -k 2 -u ~/.zsh_history | sort -o ~/.zsh_history
</pre>
<h3>
<span id=".D0.9A.D0.BE.D0.BC.D0.B0.D0.BD.D0.B4.D0.B0_ttyctl"></span><span class="mw-headline" id="Команда_ttyctl">Команда ttyctl</span>
</h3>
<p><a rel="nofollow" class="external autonumber" href="http://zsh.sourceforge.net/Doc/Release/Shell-Builtin-Commands.html#index-tty_002c-freezing">[1]</a> описывает <code>ttyctl</code> команды в Zsh.
Это можно применить для "замораживания / размораживания" терминала.
Многие программы изменяют состояние терминала, и часто не восстанавливают настройки терминала нормально при выходе.
Чтобы избежать необходимости вручную сбрасывать терминал, используйте следующее:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.zshrc</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">ttyctl -f</pre>
<h3>
<span id=".D0.9D.D0.B0.D0.B7.D0.BD.D0.B0.D1.87.D0.B5.D0.BD.D0.B8.D0.B5_.D0.BA.D0.BB.D0.B0.D0.B2.D0.B8.D1.88"></span><span class="mw-headline" id="Назначение_клавиш">Назначение клавиш</span>
</h3>
<p>Zsh не использует Readline, вместо этого он использует свой собственный и более мощный ZLE. Т.е. не читает <code>/etc/inputrc</code> или <code>~/.inputrc</code>.
Zle имеет <a href="../en/Emacs.html" title="Emacs">emacs</a> режим и <a href="../ru/Vim.html" title="Vim (Русский)">vi</a> режим. По умолчанию, он пытается взять клавиши emacs или vi из переменной среды <code>$EDITOR</code>. Если она пуста, то по умолчанию будет Emacs. Измните это <code>bindkey -e</code> или <code>bindkey -v</code> соответственно в режиме Emacs или режиме VI.
</p>
<p>Смотрите также <a rel="nofollow" class="external text" href="http://zshwiki.org/home/zle/bindkeys">zshwiki: bindkeys</a>.
</p>
<h4>
<span id=".D0.9D.D0.B0.D0.B7.D0.BD.D0.B0.D1.87.D0.B5.D0.BD.D0.B8.D0.B5_.D0.BA.D0.BB.D0.B0.D0.B2.D0.B8.D1.88_.D0.B2_.D0.BE.D0.B1.D0.BE.D0.BB.D0.BE.D1.87.D0.BA.D0.B5"></span><span class="mw-headline" id="Назначение_клавиш_в_оболочке">Назначение клавиш в оболочке</span>
</h4>
<p>Настраиваем нормальное поведение клавиш (не как в vi и emacs). Для этого в ~/.zshrc добавьте следующее:
</p>
<pre>[[ -n "${key[Home]}"     ]]  &amp;&amp; bindkey  "${key[Home]}"     beginning-of-line
[[ -n "${key[End]}"      ]]  &amp;&amp; bindkey  "${key[End]}"      end-of-line
[[ -n "${key[Insert]}"   ]]  &amp;&amp; bindkey  "${key[Insert]}"   overwrite-mode
[[ -n "${key[Delete]}"   ]]  &amp;&amp; bindkey  "${key[Delete]}"   delete-char
[[ -n "${key[Up]}"       ]]  &amp;&amp; bindkey  "${key[Up]}"       up-line-or-history
[[ -n "${key[Down]}"     ]]  &amp;&amp; bindkey  "${key[Down]}"     down-line-or-history
[[ -n "${key[Left]}"     ]]  &amp;&amp; bindkey  "${key[Left]}"     backward-char
[[ -n "${key[Right]}"    ]]  &amp;&amp; bindkey  "${key[Right]}"    forward-char
[[ -n "${key[PageUp]}"   ]]  &amp;&amp; bindkey  "${key[PageUp]}"   beginning-of-buffer-or-history
[[ -n "${key[PageDown]}" ]]  &amp;&amp; bindkey  "${key[PageDown]}" end-of-buffer-or-history
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong>   Рекомендуем сделать так, как указано в этом подразделе.</div>
<h4>
<span id=".D0.9D.D0.B0.D0.B7.D0.BD.D0.B0.D1.87.D0.B5.D0.BD.D0.B8.D0.B5_.D0.BA.D0.BB.D0.B0.D0.B2.D0.B8.D1.88.D0.B8_.D0.B2_ncurses"></span><span class="mw-headline" id="Назначение_клавиши_в_ncurses">Назначение клавиши в ncurses</span>
</h4>
<p>Bind a ncurses application to a keystoke, but it will not accept interaction. Use <code>BUFFER</code> variable to make it work. The following example lets users open ncmpcpp using <code>Alt+\</code>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.zshrc</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">ncmpcppShow() { BUFFER="ncmpcpp"; zle accept-line; }
zle -N ncmpcppShow
bindkey '^[\' ncmpcppShow</pre>
<h4>
<span id=".D0.90.D0.BB.D1.8C.D1.82.D0.B5.D1.80.D0.BD.D0.B0.D1.82.D0.B8.D0.B2.D0.BD.D1.8B.D0.B9_.D0.BF.D1.83.D1.82.D1.8C_.D0.BD.D0.B0.D0.B7.D0.BD.D0.B0.D1.87.D0.B5.D0.BD.D0.B8.D1.8F_.D0.BA.D0.BB.D0.B0.D0.B2.D0.B8.D1.88_.D0.B2_ncurses"></span><span class="mw-headline" id="Альтернативный_путь_назначения_клавиш_в_ncurses">Альтернативный путь назначения клавиш в ncurses</span>
</h4>
<p>Этот метод будет содержать всё, что вы ввели в строку перед вызовом приложения
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.zshrc</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">ncmpcppShow() { ncmpcpp &lt;$TTY; zle redisplay; }
zle -N ncmpcppShow
bindkey '^[\' ncmpcppShow</pre>
<h4>
<span id=".D0.93.D0.BE.D1.80.D1.8F.D1.87.D0.B8.D0.B5_.D0.BA.D0.BB.D0.B0.D0.B2.D0.B8.D1.88.D0.B8_.D0.B2_.D1.84.D0.B0.D0.B9.D0.BB.D0.BE.D0.B2.D0.BE.D0.BC_.D0.BC.D0.B5.D0.BD.D0.B5.D0.B4.D0.B6.D0.B5.D1.80.D0.B5"></span><span class="mw-headline" id="Горячие_клавиши_в_файловом_менеджере">Горячие клавиши в файловом менеджере</span>
</h4>
<p>Могут пригодится настройки клавиш использующиеся в графическом файловом менеджере. Первая комбинация показывает историю каталогов (Alt + Left), вторая позволяет пользователю перейти в родительский каталог (Alt + Up). Они также отображают содержимое каталогов.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.zshrc</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">cdUndoKey() {
  popd      &gt; /dev/null
  zle       reset-prompt
  echo
  ls
  echo
}

cdParentKey() {
  pushd .. &gt; /dev/null
  zle      reset-prompt
  echo
  ls
  echo
}

zle -N                 cdParentKey
zle -N                 cdUndoKey
bindkey '^[[1;3A'      cdParentKey
bindkey '^[[1;3D'      cdUndoKey
</pre>
<h3>
<span id=".D0.98.D1.81.D1.82.D0.BE.D1.80.D0.B8.D1.8F_.D0.BF.D0.BE.D0.B8.D1.81.D0.BA.D0.B0"></span><span class="mw-headline" id="История_поиска">История поиска</span>
</h3>
<p>Добавьте эти строки в .zshrc
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.zshrc</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[[ -n "${key[PageUp]}"   ]]  &amp;&amp; bindkey  "${key[PageUp]}"    history-beginning-search-backward
[[ -n "${key[PageDown]}" ]]  &amp;&amp; bindkey  "${key[PageDown]}"  history-beginning-search-forward
</pre>
<p>Doing this, only past commands beginning with the current input would have been shown.
</p>
<h3>
<span id=".D0.9D.D0.B0.D1.81.D1.82.D1.80.D0.BE.D0.B9.D0.BA.D0.B0_.D1.81.D1.82.D1.80.D0.BE.D0.BA.D0.B8_.D0.BF.D1.80.D0.B8.D0.B3.D0.BB.D0.B0.D1.88.D0.B5.D0.BD.D0.B8.D1.8F_.28PROMPT.29"></span><span class="mw-headline" id="Настройка_строки_приглашения_(PROMPT)">Настройка строки приглашения (PROMPT)</span>
</h3>
<p>Существует быстрый и легкий способ создать цветное приглашение в Zsh. Убедитесь что prompt установлен в autoload в файле <code>.zshrc</code>. Это может быть сделано путем добавления этих строк:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.zshrc</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">autoload -U promptinit
promptinit
</pre>
<p>Доступные цветовые схемы можно перечислить с помощью команды:
</p>
<pre>$ prompt -l
</pre>
<p>Для просмотра всех доступных тем (с примерами), используйте команду:
</p>
<pre>$ prompt -p
</pre>
<p>Например, чтобы использовать цветовую схему <code>bigfade</code>, введите:
</p>
<pre>$ prompt bigfade
</pre>
<p>Чтобы использовать цветовую схему с заданным цветом (если доступен в теме), введите:
</p>
<pre>$ prompt elite2 blue
</pre>
<h3>
<span id=".D0.9D.D0.B0.D1.81.D1.82.D1.80.D0.BE.D0.B9.D0.BA.D0.B0_.D0.BA.D0.BE.D0.BC.D0.B0.D0.BD.D0.B4.D0.BD.D0.BE.D0.B9_.D1.81.D1.82.D1.80.D0.BE.D0.BA.D0.B8_.28PROMPT.29"></span><span class="mw-headline" id="Настройка_командной_строки_(PROMPT)">Настройка командной строки (PROMPT)</span>
</h3>
<p>В отличие от bash zsh имеет два промта — левый и правый. Правый промт исчезает при вводе длинных команд, что делает его очень удобным для отображения не самой полезной информации, типа времени или текущего каталога. Промты настраиваются с помощью переменных PROMPT (левый) и RPROMPT (правый):
</p>
<p>export PROMPT='%n@%m&gt; '
export RPROMPT='[%~]'
</p>
<p>Некоторые из специальных последовательностей, которые можно в них использовать:
Последовательность - Описание 
%n - Имя пользователя
%m - Имя компьютера (до первой точки)
%M - Полное имя компьютера
%~ - Путь к текущему каталогу относительно домашнего
%d - Полный путь к текущей директории ($PWD)
%T - Время в формате HH:MM
%* - Время в формате HH:MM:SS
%D - Дата в формате YY-MM-DD
%B, %b - Начало и конец выделения жирным
</p>
<p>По материалам <a rel="nofollow" class="external text" href="http://eax.me/zsh/">этой статьи</a>
</p>
<h4>
<span id=".D0.A6.D0.B2.D0.B5.D1.82.D0.B0"></span><span class="mw-headline" id="Цвета">Цвета</span>
</h4>
<p>Zsh устанавливает цвета иначе, чем <a href="../ru/f57db4683ad37784c708fd6fcc6d62ab.html" title="Bash (Русский)/Prompt customization (Русский)">Bash</a>. Добавьте<code>autoload -U colors &amp;&amp; colors</code> до <code>PROMPT=</code> в <code>.zshrc</code> чтобы воспользоваться. Usually you will want to put these inside <code>%{ [...] %} </code> so the cursor does not move.
</p>
<p><code>$fg[color]</code> будет установлен цвет текста (значения, подставляемые вместо “color”, к примеру: red, green, blue, и т.д.. - по умолчанию установлены в любом формате до текста)
</p>
<table class="wikitable">
<tbody>
<tr>
<th>Команда</th>
<th>Описание
</th>
</tr>
<tr>
<td><code>%F{color} [...] %f</code></td>
<td>фактически то же самое, что и предыдущий, но с меньшим набором. Можно также вставить префикс с номером F.
</td>
</tr>
<tr>
<td><code>$fg_no_bold[color]</code></td>
<td>будет использоваться не толстый текст с заданным цветом.
</td>
</tr>
<tr>
<td><code>$fg_bold[color]</code></td>
<td>будет использоваться толстый текст с заданным цветом.
</td>
</tr>
<tr>
<td><code>$reset_color</code></td>
<td>сбросит цвет текста, на цвет по умолчанию. Не сбрасывает толщину текста. Используйте <code>%b</code> для отмены утолщения. Saves typing if it's just <code>%f</code> though.</td>
<td>
</td>
</tr>
<tr>
<td><code>%K{color} [...] %k</code></td>
<td>устанавливает цвет фона. Того же цвета, как цвет без текста полужирным. Prefixing with any single-digit number makes the bg black.
</td>
</tr>
</tbody>
</table>
<table class="wikitable">

<tbody>
<tr>
<th colspan="2">Возможные значения цвета
</th>
</tr>
<tr>
<td>
<code>black</code> или <code>0</code>
</td>
<td>
<code>red</code> или <code>1</code>
</td>
</tr>
<tr>
<td>
<code>green</code> или <code>2</code>
</td>
<td>
<code>yellow</code> или <code>3</code>
</td>
</tr>
<tr>
<td>
<code>blue</code> или <code>4</code>
</td>
<td>
<code>magenta</code> или <code>5</code>
</td>
</tr>
<tr>
<td>
<code>cyan</code> или <code>6</code>
</td>
<td>
<code>white</code> или <code>7</code>
</td>
</tr>
</tbody>
</table>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong>  Утолщённый текст не обязательно использовать тогоже цвета что и обычный. Например, <code>$fg['yellow']</code> выглядит коричневым или очень темно-желтым, в то время как
 <code>$fg_bold['yellow']</code> выглядит ярче или как обычный жёлтый.</div>
<h4>
<span id=".D0.A6.D0.B2.D0.B5.D1.82.D0.BD.D0.BE.D0.B9_.D0.B2.D1.8B.D0.B2.D0.BE.D0.B4_.D0.BA.D0.BE.D0.BC.D0.B0.D0.BD.D0.B4"></span><span class="mw-headline" id="Цветной_вывод_команд">Цветной вывод команд</span>
</h4>
<p>Раскрашивание вывода команд при помощи скрипта grc.  Поставьте пакет <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=grc">grc</a></span> (доступен для установки из репозитория [community])
И добавьте следующие строки в ваш <code>~/.zshrc</code>
</p>
<pre>if [ -f /usr/bin/grc ]; then
 alias gcc="grc --colour=auto gcc"
 alias irclog="grc --colour=auto irclog"
 alias log="grc --colour=auto log"
 alias netstat="grc --colour=auto netstat"
 alias ping="grc --colour=auto ping"
 alias proftpd="grc --colour=auto proftpd"
 alias traceroute="grc --colour=auto traceroute"
fi
</pre>
<h4>
<span id=".D0.9F.D1.80.D0.B8.D0.BC.D0.B5.D1.80"></span><span class="mw-headline" id="Пример">Пример</span>
</h4>
<p>Это пример двустороннего промта:
</p>
<pre>PROMPT="%{$fg[red]%}%n%{$reset_color%}@%{$fg[blue]%}%m %{$fg_no_bold[yellow]%}%1~ %{$reset_color%}%#"
RPROMPT="[%{$fg_no_bold[yellow]%}%?%{$reset_color%}]"
</pre>
<p>А вот как оно будет отображаться:
</p>
<pre>username@host ~ %                                                         [0]
</pre>
<h3>
<span id=".D0.A1.D1.82.D0.B5.D0.BA_.D0.9A.D0.B0.D1.82.D0.B0.D0.BB.D0.BE.D0.B3.D0.BE.D0.B2"></span><span class="mw-headline" id="Стек_Каталогов">Стек Каталогов</span>
</h3>
<p>Zsh можно настроить, чтобы он помнил DIRSTACKSIZE (последние посещённые каталоги). Это пригодится для более быстрой работы с <i>cd</i>. Вам нужно добавить несколько строк, в файл настройки:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">.zshrc</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">DIRSTACKFILE="$HOME/.cache/zsh/dirs"
if [[ -f $DIRSTACKFILE ]] &amp;&amp; [[ $#dirstack -eq 0 ]]; then
  dirstack=( ${(f)"$(&lt; $DIRSTACKFILE)"} )
  [[ -d $dirstack[1] ]] &amp;&amp; cd $dirstack[1]
fi
chpwd() {
  print -l $PWD ${(u)dirstack} &gt;$DIRSTACKFILE
}

DIRSTACKSIZE=20

setopt autopushd pushdsilent pushdtohome

## Удалить повторяющиеся записи
setopt pushdignoredups

## Это Отменяет +/- операторы.
setopt pushdminus
</pre>
<p>Теперь используйте
</p>
<pre>dirs -v
</pre>
<p>Для вывода стека директорий. Используйте <code>cd -&lt;NUM&gt;</code> чтобы вернуться к посещённому каталогу. Используйте автозавершение (нажав <code>TAB</code>) после тире.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> Это не будет работать, если у вас открыто более одной сессии <i>zsh</i>, и использование <code>cd</code>, приведёт к конфликту в обоих ссессиях пишущих в тот же файл.</div>
<h3>
<span id=".D0.9A.D0.BE.D0.BC.D0.B0.D0.BD.D0.B4.D0.B0_Help"></span><span class="mw-headline" id="Команда_Help">Команда Help</span>
</h3>
<p>В отличие от <a href="../ru/Bash.html" title="Bash (Русский)">bash</a>, <i>zsh</i> не позволяет использовать встроенный в <code>help</code> команду для автодополнения. Чтобы использовать <code>help</code> в zsh, добавьте следующие строки в ваш
</p>
<pre><code>zshrc</code>:
</pre>
<pre>autoload -U run-help
autoload run-help-git
autoload run-help-svn
autoload run-help-svk
unalias run-help
alias help=run-help</pre>
<h3>
<span id=".D0.9F.D0.BE.D0.B4.D1.81.D0.B2.D0.B5.D1.82.D0.BA.D0.B0_.D1.81.D0.B8.D0.BD.D1.82.D0.B0.D0.BA.D1.81.D0.B8.D1.81.D0.B0_.D0.BA.D0.B0.D0.BA_.D0.B2_Fish"></span><span class="mw-headline" id="Подсветка_синтаксиса_как_в_Fish">Подсветка синтаксиса как в Fish</span>
</h3>
<p><a href="../ru/Fish.html" title="Fish (Русский)">Fish</a> обеспечивает очень мощную подсветку синтаксиса. Для использования в zsh, вы можете установить <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=zsh-syntax-highlighting">zsh-syntax-highlighting</a></span> из официального репозитория и обязательно добавьте в ваш <code>~/.zshrc</code> строку:
</p>
<pre>source /usr/share/zsh/plugins/zsh-syntax-highlighting/zsh-syntax-highlighting.zsh</pre>
<h3>
<span id=".D0.9F.D1.80.D0.B8.D0.BC.D0.B5.D1.80.D1.8B_.D1.84.D0.B0.D0.B9.D0.BB.D0.B0_.zshrc"></span><span class="mw-headline" id="Примеры_файла_.zshrc">Примеры файла .zshrc</span>
</h3>
<ul>
<li>Пакет <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=grml-zsh-config">grml-zsh-config</a></span>, доступный в официальном репозитории взятый с <a rel="nofollow" class="external free" href="http://grml.org/zsh">http://grml.org/zsh</a> содержит zshrc файл, который включает в себя множество настроек для Zshell. Эта настройка используется по умолчанию для  <a rel="nofollow" class="external text" href="https://archlinux.org/download/">ежемесячного ISO релиза</a>.</li>
<li>Базовая настройка с динамической строкой приглашения (Prompt) и заголовком окна / Hardinfo =&gt; <a rel="nofollow" class="external free" href="https://github.com/MrElendig/dotfiles-alice/blob/master/.zshrc">https://github.com/MrElendig/dotfiles-alice/blob/master/.zshrc</a>;</li>
<li>
<a rel="nofollow" class="external free" href="https://github.com/slashbeast/things/blob/master/configs/DOTzshrc">https://github.com/slashbeast/things/blob/master/configs/DOTzshrc</a><sup>[<a href="https://en.wikipedia.org/wiki/Wikipedia:Link_rot" class="extiw" title="wikipedia:Wikipedia:Link rot">устаревшая ссылка</a> 2020-08-06]</sup> - zshrc с несколькими функциями, - смотрите комментарии в файле. Известные особенности: подтверждение выключения, если пользователь запустил poweroff, а также запрос подтверждения на reboot или hibernate, поддержка GIT в Prompt (сделано без vcsinfo), завершение по TAB с меню, вывод текущей выполняемой команды в заголовке окна, и многое другое.</li>
</ul>
<h3>
<span id=".D0.A4.D1.80.D0.B5.D0.B9.D0.BC.D0.B2.D0.BE.D1.80.D0.BA.D0.B8_.D0.BD.D0.B0.D1.81.D1.82.D1.80.D0.BE.D0.B5.D0.BA"></span><span class="mw-headline" id="Фреймворки_настроек">Фреймворки настроек</span>
</h3>
<ul>
<li>
<a rel="nofollow" class="external text" href="https://github.com/robbyrussell/oh-my-zsh">oh-my-zsh</a> управляемый сообществом, популярный фреймворк для настройки вашего Zsh. Он поставляется в комплекте с тонной полезных функций, помощников, плагинов, тем.</li>
<li>
<a rel="nofollow" class="external text" href="https://github.com/sorin-ionescu/prezto">Prezto - мгновенно прекрасный Zsh</a> (доступен в <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/prezto-git/">prezto-git</a></span><sup><small>AUR</small></sup>) настроенный фреймворк Zsh. Он поставляется с модулями, разумно расширяющих среду интерфейса командной строки (по умолчанию), псевдонимами (алиасами), функциями, атодополнением, и темами Prompt.</li>
<li>
<a rel="nofollow" class="external text" href="https://github.com/zsh-users/antigen">Antigen</a> (дступен в <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/antigen-git/">antigen-git</a></span><sup><small>AUR</small></sup>)  - менеджер плагинов для zsh, вдохновлённый oh-my-zsh и vundle.</li>
</ul>
<h3>
<span id=".D0.90.D0.B2.D1.82.D0.BE.D0.B7.D0.B0.D0.BF.D1.83.D1.81.D0.BA_.D0.BF.D1.80.D0.B8.D0.BB.D0.BE.D0.B6.D0.B5.D0.BD.D0.B8.D0.B9"></span><span class="mw-headline" id="Автозапуск_приложений">Автозапуск приложений</span>
</h3>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> <code>$ZDOTDIR</code> по умолчанию <code>$HOME</code>
</div>
<p>Zsh всегда выполняет <code>/etc/zsh/zshenv</code> и <code>$ZDOTDIR/.zshenv</code> так что не раздувайте эти файлы.
</p>
<p>При входе в оболочку, читаются команды из <code>/etc/profile</code> а потом <code>$ZDOTDIR/.zprofile</code>. Затем, если оболочка является интерактивной, команды читаются из <code>/etc/zsh/zshrc</code> а потом <code>$ZDOTDIR/.zshrc</code>. Наконец, если в оболочку выполнен вход, читаются <code>/etc/zsh/zlogin</code> и <code>$ZDOTDIR/.zlogin</code>.
</p>
<p>Смотрите также секцию <i>STARTUP/SHUTDOWN FILES</i> в <span class="plainlinks archwiki-template-man" title="$ man 1 zsh"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/zsh.1">zsh(1)</a></span>.
</p>
<h3>
<span id=".D0.9F.D0.BE.D1.81.D1.82.D0.BE.D1.8F.D0.BD.D0.BD.D1.8B.D0.B9_rehash"></span><span class="mw-headline" id="Постоянный_rehash">Постоянный rehash</span>
</h3>
<p>Обычно compinit не находит новые исполняемые файлы в $PATH. Например после установки нового пакета, файлы в /usr/bin не сразу будут включены в автодополнение. Чтобы включить их в работу, выполните:
</p>
<pre>$ rehash
</pre>
<p>'rehash' может выполняться автоматически. Включите его в вашем <code>zshrc</code>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.zshrc</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">zstyle ':completion:*' rehash true</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> Эта фишка была найдена в PR для Oh My Zsh <a rel="nofollow" class="external autonumber" href="https://github.com/robbyrussell/oh-my-zsh/issues/3440">[2]</a>
</div>
<h2>
<span id=".D0.A4.D1.83.D0.BD.D0.BA.D1.86.D0.B8.D0.B8"></span><span class="mw-headline" id="Функции">Функции</span>
</h2>
<p>Zsh позволяет пользователю определять собственные функции, которые могут выполняться точно также как и обычные программы. Функции выполняются в том же процессе, что и вызвавшая их программа. При вызове функции аргументы передаются как позиционные параметры.
</p>
<h3>
<span id=".D0.A0.D0.B0.D1.81.D0.BF.D0.B0.D0.BA.D0.BE.D0.B2.D0.BA.D0.B0_.D0.B0.D1.80.D1.85.D0.B8.D0.B2.D0.B0"></span><span class="mw-headline" id="Распаковка_архива">Распаковка архива</span>
</h3>
<p>Чтобы распаковать архив не указывая тип распаковщика и его аркументы, а выполнив всего лишь команду вида <code>ex имя_архива.bz2</code>
Добавьте следующий код в <code>~/.zshrc</code>
</p>
<pre>ex () {
 if [ -f $1 ] ; then
   case $1 in
     *.tar.bz2) tar xvjf $1   ;;
     *.tar.gz)  tar xvzf $1   ;;
     *.tar.xz)  tar xvfJ $1   ;;
     *.bz2)     bunzip2 $1    ;;
     *.rar)     unrar x $1    ;;
     *.gz)      gunzip $1     ;;
     *.tar)     tar xvf $1    ;;
     *.tbz2)    tar xvjf $1   ;;
     *.tgz)     tar xvzf $1   ;;
     *.zip)     unzip $1      ;;
     *.Z)       uncompress $1 ;;
     *.7z)      7z x $1       ;;
     *)         echo "'$1' Не может быть распакован при помощи &gt;ex&lt;" ;;
   esac
 else
   echo "'$1' не является допустимым файлом"
 fi
}
</pre>
<h3>
<span id=".D0.A3.D0.BF.D0.B0.D0.BA.D0.BE.D0.B2.D0.BA.D0.B0_.D0.B2_.D0.B0.D1.80.D1.85.D0.B8.D0.B2"></span><span class="mw-headline" id="Упаковка_в_архив">Упаковка в архив</span>
</h3>
<p>Упаковка в архив командой <code>pk 7z /что/мы/пакуем имя_файла.7z</code> - при этом архив будет в Домашней папке.
</p>
<pre>pk () {
if [ $1 ] ; then
case $1 in
tbz)       tar cjvf $2.tar.bz2 $2      ;;
tgz)       tar czvf $2.tar.gz  $2       ;;
tar)      tar cpvf $2.tar  $2       ;;
bz2)    bzip $2 ;;
gz)        gzip -c -9 -n $2 &gt; $2.gz ;;
zip)       zip -r $2.zip $2   ;;
7z)        7z a $2.7z $2    ;;
*)         echo "'$1' не может быть упакован с помощью pk()" ;;
esac
else
echo "'$1' не является допустимым файлом"
fi
}
</pre>
<h2>
<span id=".D0.A3.D0.B4.D0.B0.D0.BB.D0.B5.D0.BD.D0.B8.D0.B5"></span><span class="mw-headline" id="Удаление">Удаление</span>
</h2>
<p>Измените оболочку по умолчанию перед удалением пакета <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=zsh">zsh</a></span>.
</p>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Важно:</strong> Несоблюдение процедуры ниже, может привести пользователя к невозможности получить доступ к рабочей оболочке
.</div>
<p>Запустите следующую команду:
</p>
<pre>$ chsh -s /bin/bash <i>user</i>
</pre>
<p>Где <i>user</i> - имя пользователя.
</p>
<p>Используйте эту команду для каждого пользователя с установленной оболочкой  <i>zsh</i> (в том числе и root при необходимости). После, удалите пакет <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=zsh">zsh</a></span>.
</p>
<p>Кроме того, изменить оболочку по умолчанию обратно в Bash, можно редактируя <code>/etc/passwd</code> от root.
</p>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Важно:</strong>  Настоятельно рекомендуется использовать <code>vipw</code> когда редактируете <code>/etc/passwd</code> это помогает предотвратить неверные записи и/или ошибки синтаксиса.</div>
<p>Например, изменить следующие:
</p>
<pre><i>username</i>:x:1000:1000:<i>Full Name</i>,,,:/home/<i>username</i>:/bin/zsh
</pre>
<p>На:
</p>
<pre><i>username</i>:x:1000:1000:<i>Full Name</i>,,,:/home/<i>username</i>:/bin/<b>bash</b>
</pre>
<h2>
<span id=".D0.A1.D0.BC.D0.BE.D1.82.D1.80.D0.B8.D1.82.D0.B5_.D1.82.D0.B0.D0.BA.D0.B6.D0.B5"></span><span class="mw-headline" id="Смотрите_также">Смотрите также</span>
</h2>
<p>Рекомендуем обязательно обратится к следующим Русскоязычным статьям, для более полного и лучшего понимания.
</p>
<ul>
<li>
<a rel="nofollow" class="external text" href="http://dobroserver.ru/delaem-iz-zsh-morozhenku">Делаем из Zsh мороженку</a><sup>[<a href="https://en.wikipedia.org/wiki/Wikipedia:Link_rot" class="extiw" title="wikipedia:Wikipedia:Link rot">устаревшая ссылка</a> 2020-08-06]</sup>
</li>
<li><a rel="nofollow" class="external text" href="http://www.altlinux.org/DotFiles/Shells/Zsh/%D0%A1%D0%BE%D0%B2%D0%B5%D1%82%D1%8B#.D0.9D.D0.B0.D1.81.D1.82.D1.80.D0.BE.D0.B9.D0.BA.D0.B0_.D0.BF.D1.80.D0.B8.D0.B3.D0.BB.D0.B0.D1.88.D0.B5.D0.BD.D0.B8.D1.8F">Советы по настройке Zsh</a></li>
<li><a rel="nofollow" class="external text" href="http://alexott.net/ru/writings/zsh/zsh-refcard.pdf">Cправочная карта Zsh (PDF)</a></li>
</ul>
<p>Статьи на Английском:
</p>
<ul>
<li><a rel="nofollow" class="external text" href="http://zsh.sourceforge.net/Guide/zshguide.html">A User's Guide to ZSH</a></li>
<li>
<a rel="nofollow" class="external text" href="http://zsh.sourceforge.net/Doc/Release/index-frame.html">The Z Shell Manual</a> (different format available <a rel="nofollow" class="external text" href="http://zsh.sourceforge.net/Doc/">here</a>)</li>
<li><a rel="nofollow" class="external text" href="http://zsh.sourceforge.net/FAQ/zshfaq01.html">Zsh FAQ</a></li>
<li>
<a rel="nofollow" class="external text" href="http://grml.org/zsh/zsh-lovers.html">zsh-lovers(1)</a> (this is also available as <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=zsh-lovers">zsh-lovers</a></span> in offical repository)</li>
<li><a rel="nofollow" class="external text" href="http://zshwiki.org/home/">Zsh Wiki</a></li>
<li><a rel="nofollow" class="external text" href="https://wiki.gentoo.org/wiki/Zsh/HOWTO">Gentoo Wiki: Zsh/HOWTO</a></li>
<li><a rel="nofollow" class="external text" href="http://www.bash2zsh.com/zsh_refcard/refcard.pdf">Bash2Zsh Reference Card</a></li>
</ul>
</div>
</div>
<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../ru/Category:Command-line_shells.html" title="Category:Command-line shells (Русский)">Command-line shells (Русский)</a></li></ul>
</div></div>
	</div>
</div>

<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
		<li>Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Zsh_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9)&amp;oldid=647103">https://wiki.archlinux.org/index.php?title=Zsh_(Русский)&amp;oldid=647103</a>"</li>
		<li id="footer-info-lastmod"> This page was last edited on 26 December 2020, at 12:31.</li>
		<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
	<br>
</ul>
	<ul id="footer-places">
		<li id="footer-places-privacy"><a href="../en/ArchWiki:Privacy_policy.html" title="ArchWiki:Privacy policy">Privacy policy</a></li>
		<li id="footer-places-about"><a href="../en/ArchWiki:About.html" title="ArchWiki:About">About ArchWiki</a></li>
		<li id="footer-places-disclaimer"><a href="../en/ArchWiki:General_disclaimer.html" title="ArchWiki:General disclaimer">Disclaimers</a></li>
	</ul>
	<ul id="footer-icons" class="noprint">
		<li id="footer-copyrightico">
	</ul>
	<div style="clear: both;"></div>
</footer>



</body>
</html>
