<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>Users and groups (Русский) - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.35.0">
<meta name="robots" content="noindex,follow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="http://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Users_and_groups_Русский rootpage-Users_and_groups_Русский skin-vector action-view skin-vector-legacy">
<div id="content" class="mw-body" role="main" style="margin: 0">
	<a id="top"></a>
	<div id="siteNotice" class="mw-body-content"></div>
	<div class="mw-indicators mw-body-content">
	</div>
	<h1 id="firstHeading" class="firstHeading" lang="en">Users and groups (Русский)</h1>
	<div id="bodyContent" class="mw-body-content">
		<div id="siteSub" class="noprint">From ArchWiki</div>
		<div id="contentSub"></div>
		<div id="contentSub2"></div>
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="#searchInput">Jump to search</a>
		<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr">
<div class="warningbox">The printable version is no longer supported and may have rendering errors. Please update your browser bookmarks and please use the default browser print function instead.</div>
<div class="mw-parser-output">
<div class="archwiki-template-meta-related-articles-start">
<p>Ссылки по теме</p>
<ul>
<li><a href="../DeveloperWiki:UID_/_GID_Database.html" title="DeveloperWiki:UID / GID Database">DeveloperWiki:UID / GID Database</a></li>
<li><a href="../ru/Sudo.html" title="Sudo (Русский)">Sudo (Русский)</a></li>
<li><a href="../en/Polkit.html" title="Polkit">Polkit</a></li>
<li><a href="../en/File_permissions_and_attributes.html" class="mw-redirect" title="Права доступа и атрибуты файлов">Права доступа и атрибуты файлов</a></li>
<li><a href="../en/Systemd-homed.html" title="Systemd-homed">systemd-homed</a></li>
</ul>
</div>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Состояние перевода:</strong> На этой странице представлен перевод статьи <a href="../en/Users_and_groups.html" title="Users and groups">Users and groups</a>. Дата последней синхронизации: 2 октября 2020. Вы можете <a href="../ru/ArchWiki:Translation_Team.html" title="ArchWiki:Translation Team (Русский)">помочь</a> синхронизировать перевод, если в английской версии произошли <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php?title=Users_and_groups&amp;diff=0&amp;oldid=635081">изменения</a>.</div>
<p>Механизм пользвателей и групп используется в GNU/Linux для <a href="https://en.wikipedia.org/wiki/access_control#Computer_security" class="extiw" title="wikipedia:access control">управления доступом</a> к файлам, каталогам и периферийным устройствам. Базовый контроль доступа в Linux прост и не предлагает большого выбора настроек. Некоторые инструменты обеспечивают расширенный набор возможностей, подробнее см. <a href="../ru/Access_Control_Lists.html" title="Access Control Lists (Русский)">ACL</a>, <a href="../en/Capabilities.html" title="Capabilities">Capabilities</a> и <a href="../en/PAM.html#Configuration_How-Tos" title="PAM">PAM#Configuration How-Tos</a>.
</p>
<div id="toc" class="toc" role="navigation" aria-labelledby="mw-toc-heading">
<input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none"><div class="toctitle" lang="en" dir="ltr">
<h2 id="mw-toc-heading">Contents</h2>
<span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span>
</div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#%D0%9E%D0%B1%D0%B7%D0%BE%D1%80"><span class="tocnumber">1</span> <span class="toctext">Обзор</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#%D0%9F%D1%80%D0%B0%D0%B2%D0%B0_%D0%B8_%D0%B2%D0%BB%D0%B0%D0%B4%D0%B5%D0%BB%D1%8C%D1%86%D1%8B"><span class="tocnumber">2</span> <span class="toctext">Права и владельцы</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="#Shadow"><span class="tocnumber">3</span> <span class="toctext">Shadow</span></a></li>
<li class="toclevel-1 tocsection-4"><a href="#%D0%A1%D0%BF%D0%B8%D1%81%D0%BE%D0%BA_%D1%84%D0%B0%D0%B9%D0%BB%D0%BE%D0%B2"><span class="tocnumber">4</span> <span class="toctext">Список файлов</span></a></li>
<li class="toclevel-1 tocsection-5">
<a href="#%D0%A3%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D1%82%D0%B5%D0%BB%D1%8F%D0%BC%D0%B8"><span class="tocnumber">5</span> <span class="toctext">Управление пользователями</span></a>
<ul>
<li class="toclevel-2 tocsection-6"><a href="#%D0%9F%D1%80%D0%B8%D0%BC%D0%B5%D1%80_%D0%B4%D0%BE%D0%B1%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D1%8F_%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D1%82%D0%B5%D0%BB%D1%8F"><span class="tocnumber">5.1</span> <span class="toctext">Пример добавления пользователя</span></a></li>
<li class="toclevel-2 tocsection-7"><a href="#%D0%9F%D1%80%D0%B8%D0%BC%D0%B5%D1%80_%D0%B4%D0%BE%D0%B1%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D1%8F_%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D0%BD%D0%BE%D0%B3%D0%BE_%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D1%82%D0%B5%D0%BB%D1%8F"><span class="tocnumber">5.2</span> <span class="toctext">Пример добавления системного пользователя</span></a></li>
<li class="toclevel-2 tocsection-8"><a href="#%D0%A1%D0%BC%D0%B5%D0%BD%D0%B0_%D0%B8%D0%BC%D0%B5%D0%BD%D0%B8_%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D1%82%D0%B5%D0%BB%D1%8F_%D0%B8%D0%BB%D0%B8_%D0%B4%D0%BE%D0%BC%D0%B0%D1%88%D0%BD%D0%B5%D0%B3%D0%BE_%D0%BA%D0%B0%D1%82%D0%B0%D0%BB%D0%BE%D0%B3%D0%B0"><span class="tocnumber">5.3</span> <span class="toctext">Смена имени пользователя или домашнего каталога</span></a></li>
<li class="toclevel-2 tocsection-9"><a href="#%D0%94%D1%80%D1%83%D0%B3%D0%B8%D0%B5_%D0%BF%D1%80%D0%B8%D0%BC%D0%B5%D1%80%D1%8B_%D1%83%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D1%8F_%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D1%82%D0%B5%D0%BB%D1%8F%D0%BC%D0%B8"><span class="tocnumber">5.4</span> <span class="toctext">Другие примеры управления пользователями</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-10"><a href="#%D0%91%D0%B0%D0%B7%D0%B0_%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85_%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D1%82%D0%B5%D0%BB%D0%B5%D0%B9"><span class="tocnumber">6</span> <span class="toctext">База данных пользователей</span></a></li>
<li class="toclevel-1 tocsection-11"><a href="#%D0%A3%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D0%B3%D1%80%D1%83%D0%BF%D0%BF%D0%B0%D0%BC%D0%B8"><span class="tocnumber">7</span> <span class="toctext">Управление группами</span></a></li>
<li class="toclevel-1 tocsection-12">
<a href="#%D0%A1%D0%BF%D0%B8%D1%81%D0%BE%D0%BA_%D0%B3%D1%80%D1%83%D0%BF%D0%BF"><span class="tocnumber">8</span> <span class="toctext">Список групп</span></a>
<ul>
<li class="toclevel-2 tocsection-13"><a href="#%D0%9F%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D1%82%D0%B5%D0%BB%D1%8C%D1%81%D0%BA%D0%B8%D0%B5_%D0%B3%D1%80%D1%83%D0%BF%D0%BF%D1%8B"><span class="tocnumber">8.1</span> <span class="toctext">Пользовательские группы</span></a></li>
<li class="toclevel-2 tocsection-14"><a href="#%D0%A1%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D0%BD%D1%8B%D0%B5_%D0%B3%D1%80%D1%83%D0%BF%D0%BF%D1%8B"><span class="tocnumber">8.2</span> <span class="toctext">Системные группы</span></a></li>
<li class="toclevel-2 tocsection-15"><a href="#%D0%93%D1%80%D1%83%D0%BF%D0%BF%D1%8B,_%D1%81%D1%83%D1%89%D0%B5%D1%81%D1%82%D0%B2%D0%BE%D0%B2%D0%B0%D0%B2%D1%88%D0%B8%D0%B5_%D0%B4%D0%BE_%D0%BF%D0%B5%D1%80%D0%B5%D1%85%D0%BE%D0%B4%D0%B0_%D0%BD%D0%B0_systemd"><span class="tocnumber">8.3</span> <span class="toctext">Группы, существовавшие до перехода на systemd</span></a></li>
<li class="toclevel-2 tocsection-16"><a href="#%D0%9D%D0%B5%D0%B8%D1%81%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D1%83%D0%B5%D0%BC%D1%8B%D0%B5_%D0%B3%D1%80%D1%83%D0%BF%D0%BF%D1%8B"><span class="tocnumber">8.4</span> <span class="toctext">Неиспользуемые группы</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-17"><a href="#%D0%9F%D1%80%D0%BE%D1%87%D0%B8%D0%B5_%D0%B8%D0%BD%D1%81%D1%82%D1%80%D1%83%D0%BC%D0%B5%D0%BD%D1%82%D1%8B_%D0%B4%D0%BB%D1%8F_%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D1%8B_%D1%81_%D0%B1%D0%B0%D0%B7%D0%B0%D0%BC%D0%B8_%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85"><span class="tocnumber">9</span> <span class="toctext">Прочие инструменты для работы с базами данных</span></a></li>
</ul>
</div>

<h2>
<span id=".D0.9E.D0.B1.D0.B7.D0.BE.D1.80"></span><span class="mw-headline" id="Обзор">Обзор</span>
</h2>
<p>Под <i>пользователем</i> понимается любой, кто работает с компьютером. Как правило, для каждого пользователя в системе создаётся отдельный аккаунт, которому присваивается специальное имя. В качестве имени пользователя можно использовать как реальные имена, вроде Mary или Bill, так и псевдонимы — Dragonlady, Pirate  и т.п. С помощью имени пользователь получает доступ к своему аккаунту и, в конечном счёте, к системе. Некоторые системные службы запускаются либо привилегированными аккаунтами, либо строго определёнными аккаунтами пользователей.
</p>
<p>Механизм пользователей был разработан по соображениям безопасности, для ограничения доступа к различным частям системы. <a href="https://en.wikipedia.org/wiki/ru:root" class="extiw" title="wikipedia:ru:root">Суперпользователь</a> (root) имеет полный доступ к операционной системе и её настройкам. Этот аккаунт используется только для целей системного администрирования; обычные пользователи могут временно повысить уровень своих прав командами <a href="../en/Su.html" title="Su">su</a> и <a href="../ru/Sudo.html" title="Sudo (Русский)">sudo</a>.
</p>
<p>Один человек может создать несколько аккаунтов с разными именами. Некоторые специфические имена, вроде того же "root", зарезервированы и запрещены к использованию.
</p>
<p>Пользователи часто объединятся в "группы". Добавление пользователя в определённую группу обычно даёт ему дополнительные права, связанные с этой группой.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> Если у вас нет опыта работы с аккаунтами и правами, то используйте указанные в статье инструменты с осторожностью. Не пытайтесь что-либо сделать с <i>существующими</i> аккаутами пользователей, за исключением разве что своего собственного.
</div>
<h2>
<span id=".D0.9F.D1.80.D0.B0.D0.B2.D0.B0_.D0.B8_.D0.B2.D0.BB.D0.B0.D0.B4.D0.B5.D0.BB.D1.8C.D1.86.D1.8B"></span><span class="mw-headline" id="Права_и_владельцы">Права и владельцы</span>
</h2>
<p>Из статьи <a rel="nofollow" class="external text" href="http://ph7spot.com:80/musings/in-unix-everything-is-a-file">Всё в UNIX есть файл</a>:
</p>
<dl><dd>В операционной системе UNIX были сформулированы некоторые общие идеи и принципы, которые оказали в дальнейшем сильное влияние на её архитектуру, пользовательский интерфейс, культуру и развитие. В частности, один из основополагающих принципов выражается мантрой "всё есть файл", которую часто называют определяющим пунктом UNIX в целом.</dd></dl>
<dl><dd>Суть данного принципа заключается в создании унифицированного способа доступа к широкому диапазону ресурсов ввода/вывода: к документам, каталогам, жёстким дискам, дискам CD-ROM, модемам, клавиатурам, принтерам, мониторам, терминалам и даже межпроцессным и сетевым взаимодействиям. Цель — предоставление универсальной абстракции для каждого из этих объектов, названных отцами-оснвоателями UNIX общим термином "файл". Поскольку доступ к файлу осуществляется с помощью одного и того же API, стало возможно использовать одинаковый набор базовых команд для чтения и записи таких разнородных устройств, как диск, клавиатура, документ или сетевой интерфейс.</dd></dl>
<p>Из статьи <a rel="nofollow" class="external text" href="http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.597.4699&amp;rep=rep1&amp;type=pdf">Использование абстракции файла в UNIX для работы с сетью</a>:
</p>
<dl><dd>Абстракция файла, существующая в операционной системе UNIX и совместимых с ней системах, является основополагающей и всеобъемлющей. Любая системная служба и интерфейс устройства теперь могут реализовываться так, чтобы предоставлять другим приложениям метафору файла или файловой системы. Это открывает новые способы их использования и значительно расширяет возможности существующих приложений — простые инструменты, разработанные для решения узких задач, теперь, вооружившись абстракцией файла UNIX, могут использоваться совершенно по-новому. Небольшая утилита вроде cat, предназначенная для считываения одного или нескольких файлов и вывода их содержимого на стандартный поток вывода, теперь может выполнять чтение с устройств ввода-вывода с помощью специальных файлов устройств, как правило расположенных в каталоге <code>/dev</code>. С другой стороны, во многих системах запись и проигрываение звука теперь выполняется всего лишь командами "<code>cat /dev/audio &gt; myfile</code>" и "<code>cat myfile &gt; /dev/audio</code>" соответственно.</dd></dl>
<p>В GNU/Linux каждый файл принадлежит какому-то пользователю и группе. Существует три типа прав доступа — чтение, запись и исполнение. Права доступа задаются по отдельности для владельца-пользователя, владельца-группы, и для прочих пользователей, которые не входят в первые две категории. Владельцев файла и права доступа можно узнать с помощью "длинного" формата команды <a href="../en/Core_utilities.html#Essentials" class="mw-redirect" title="Ls">ls</a>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ ls -l /boot/</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">total 13740
drwxr-xr-x 2 root root    4096 Jan 12 00:33 grub
-rw-r--r-- 1 root root 8570335 Jan 12 00:33 initramfs-linux-fallback.img
-rw-r--r-- 1 root root 1821573 Jan 12 00:31 initramfs-linux.img
-rw-r--r-- 1 root root 1457315 Jan  8 08:19 System.map26
-rw-r--r-- 1 root root 2209920 Jan  8 08:19 vmlinuz-linux
</pre>
<p>Первая колонка содержит права доступа к файлу (например, правами файла <code>initramfs-linux.img</code> являются <code>-rw-r--r--</code>). Третья и четвёртая колонки содержат соответственно пользователя и группу, которым принадлежит файл. В этом примере все файлы принадлежат пользователю <i>root</i> и группе <i>root</i>.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ ls -l /media/</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">total 16
drwxrwx--- 1 root vboxsf 16384 Jan 29 11:02 sf_Shared
</pre>
<p>В этом примере каталог <code>sf_Shared</code> принадлежит пользователю <i>root</i> и группе <i>vboxsf</i>. Владельца и права доступа можно также определить утилитой <i>stat</i>.
</p>
<p>Пользователь-владелец:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ stat -c %U /media/sf_Shared/</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">root
</pre>
<p>Группа-владелец:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ stat -c %G /media/sf_Shared/</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">vboxsf
</pre>
<p>Права доступа:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ stat -c %A /media/sf_Shared/</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">drwxrwx---
</pre>
<p>Права доступа отображаются тремя группами символов, которые являются правами соответственно пользователя, группы и всех остальных. Например, строка <code>-rw-r--r--</code> говорит о том, что владелец файла имеет права на чтение и запись, но не на выполнение (<code>rw-</code>), а пользователи из группы-владельца и прочие пользователи имеют доступ только на чтение (<code>r--</code> и <code>r--</code>). С другой стороны, строка <code>drwxrwx---</code> говорит о том, что у пользователя и группы права на чтение, запись и исполнение (<code>rwx</code> и <code>rwx</code>), а все остальные доступа к файлу не имеют вовсе (<code>---</code>). Первый символ в строке означает тип файла.
</p>
<p>Вывести список всех файлов, принадлежащих пользователю или группе, можно с помощью утилиты <a href="../en/Core_utilities.html#Essentials" class="mw-redirect" title="Find">find</a>:
</p>
<pre># find / -group <i>имя_группы</i>
</pre>
<pre># find / -group <i>номер_группы</i>
</pre>
<pre># find / -user <i>имя_пользователя</i>
</pre>
<p>Изменить владельцев файла можно командой <a href="../en/File_permissions_and_attributes.html#Changing_ownership" class="mw-redirect" title="Chown">chown</a>, а права доступа меняются командой <a href="../en/File_permissions_and_attributes.html#Changing_permissions" class="mw-redirect" title="Chmod">chmod</a>:
</p>
<p>См. также <span class="plainlinks archwiki-template-man" title="$ man 1 chown"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/chown.1">chown(1)</a></span>, <span class="plainlinks archwiki-template-man" title="$ man 1 chmod"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/chmod.1">chmod(1)</a></span> и <a rel="nofollow" class="external text" href="http://www.linux.com/tutorials/understanding-linux-file-permissions">Linux file permissions</a>.
</p>
<h2><span class="mw-headline" id="Shadow">Shadow</span></h2>
<p>В Arch Linux инструменты для работы с пользователями, группами и паролями собраны в пакет <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=shadow">shadow</a></span>, который являеется зависимостью <a href="../ru/Meta_package_and_package_group.html#%D0%A0%D0%B0%D0%B7%D0%BD%D0%B8%D1%86%D0%B0_%D0%BC%D0%B5%D0%B6%D0%B4%D1%83_%D0%BC%D0%B5%D1%82%D0%B0-%D0%BF%D0%B0%D0%BA%D0%B5%D1%82%D0%BE%D0%BC_%D0%B8_%D0%B3%D1%80%D1%83%D0%BF%D0%BF%D0%BE%D0%B9_%D0%BF%D0%B0%D0%BA%D0%B5%D1%82%D0%BE%D0%B2" class="mw-redirect" title="Мета-пакета">мета-пакета</a> <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=base">base</a></span>.
</p>
<h2>
<span id=".D0.A1.D0.BF.D0.B8.D1.81.D0.BE.D0.BA_.D1.84.D0.B0.D0.B9.D0.BB.D0.BE.D0.B2"></span><span class="mw-headline" id="Список_файлов">Список файлов</span>
</h2>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Важно:</strong> Ни в коем случае не редактируйте эти файлы вручную. Есть специальные программы, которые обеспечивают правильную работу с базами данных и гарантируют отсутствие ошибок в форматировании. Подробнее см. <a href="#%D0%A3%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D1%82%D0%B5%D0%BB%D1%8F%D0%BC%D0%B8">#Управление пользователями</a> и <a href="#%D0%A3%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D0%B3%D1%80%D1%83%D0%BF%D0%BF%D0%B0%D0%BC%D0%B8">#Управление группами</a>.
</div>
<table class="wikitable">
<tbody>
<tr>
<th>Файл</th>
<th>Назначение
</th>
</tr>
<tr>
<td><code>/etc/shadow</code></td>
<td>Безопасное хранение информации о пользователях
</td>
</tr>
<tr>
<td><code>/etc/passwd</code></td>
<td>Информация о пользователях
</td>
</tr>
<tr>
<td><code>/etc/gshadow</code></td>
<td>Скрытая информация о группах
</td>
</tr>
<tr>
<td><code>/etc/group</code></td>
<td>Принадлежность пользователей к группам
</td>
</tr>
</tbody>
</table>
<h2>
<span id=".D0.A3.D0.BF.D1.80.D0.B0.D0.B2.D0.BB.D0.B5.D0.BD.D0.B8.D0.B5_.D0.BF.D0.BE.D0.BB.D1.8C.D0.B7.D0.BE.D0.B2.D0.B0.D1.82.D0.B5.D0.BB.D1.8F.D0.BC.D0.B8"></span><span class="mw-headline" id="Управление_пользователями">Управление пользователями</span>
</h2>
<p>Список пользователей, которые в настоящий момент выполнили вход в систему, можно вывести командой <code>who</code>. Список хранящихся в <a href="#%D0%91%D0%B0%D0%B7%D0%B0_%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85_%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D1%82%D0%B5%D0%BB%D0%B5%D0%B9">базе данных</a> аккаунтов и их характеристик можно вывести командой <code>passwd -Sa</code> с правами root. Описание формата вывода вы найдёте в руководстве <span class="plainlinks archwiki-template-man" title="$ man 1 passwd"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/passwd.1">passwd(1)</a></span>.
</p>
<p>Добавление нового пользователя выполняется командой <i>useradd</i>:
</p>
<pre># useradd -m -G <i>дополнительные_группы</i> -s <i>оболочка_входа</i> <i>имя_пользователя</i>
</pre>
<dl>
<dt>
<code>-m</code>/<code>--create-home</code>
</dt>
<dd>указание создать домашний каталог пользователя по адресу <code>/home/<i>имя_пользователя</i></code>. Внутри домашнего каталога обычный пользователь может без прав root создавать и удалять файлы, устанавливать программы и т.д.</dd>
<dt>
<code>-G</code>/<code>--groups</code>
</dt>
<dd>список дополнительных групп, в которые должен войти новый пользователь. Группы в списке должны разделяться только запятыми, без пробелов. По умолчанию новый пользователь добавляется только в начальную группу (см. ниже в этом разделе).</dd>
<dt>
<code>-s</code>/<code>--shell</code>
</dt>
<dd>путь к файлу оболочки входа (login shell) пользователя. После завершения загрузки системы для пользователя запускается оболочка входа, указанная в этом параметре. Убедитесь, что пакет с необходимой оболочкой установлен, если указали что-то, отличное от <a href="../ru/Bash.html" title="Bash (Русский)">Bash</a>.</dd>
</dl>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Важно:</strong> Файл оболочки входа должен совпадать с одним из указанных в файле <code>/etc/shells</code>. В противном случае <a href="../en/PAM.html" title="PAM">PAM</a>-модуль <code>pam_shell</code> отклонит запрос на вход. В частности, нельзя вместо <code>/bin/bash</code> использовать <code>/usr/bin/bash</code>, разве что вы заранее настроили файл <code>/etc/shells</code> соответствующим образом. Подробнее см. <a rel="nofollow" class="external text" href="https://bugs.archlinux.org/task/33677">FS#33677</a>.
</div>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> При создании пользователя необходимо также с помощью утилиты <i>passwd</i> задать пароль. Подробнее см. <a href="#%D0%9F%D1%80%D0%B8%D0%BC%D0%B5%D1%80_%D0%B4%D0%BE%D0%B1%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D1%8F_%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D1%82%D0%B5%D0%BB%D1%8F">#Пример добавления пользователя</a>.
</div>
<p>Группы в параметре <code>-G</code> задаются именами или номерами существующих групп. Если этот парамет не указан, то поведение <i>useradd</i> зависит от переменной <code>USERGROUPS_ENAB</code> в файле <code>/etc/login.defs</code>. Стандартное поведение (<code>USERGROUPS_ENAB yes</code>) — создать группу, название которой совпадает с именем нового пользователя.
</p>
<p>Когда оболочка входа не нужна, например, если аккаунт пользователя создаётся для работы неинтерактивной службы, вместо обычной оболочки можно указать <code>/usr/bin/nologin</code>. В этом случае процедура входа будет корректно отклоняться (см. <span class="plainlinks archwiki-template-man" title="$ man 8 nologin"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/nologin.8">nologin(8)</a></span>).
</p>
<p>Другие доступные параметры можно найти в руководстве <span class="plainlinks archwiki-template-man" title="$ man 8 useradd"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/useradd.8">useradd(8)</a></span>.
</p>
<h3>
<span id=".D0.9F.D1.80.D0.B8.D0.BC.D0.B5.D1.80_.D0.B4.D0.BE.D0.B1.D0.B0.D0.B2.D0.BB.D0.B5.D0.BD.D0.B8.D1.8F_.D0.BF.D0.BE.D0.BB.D1.8C.D0.B7.D0.BE.D0.B2.D0.B0.D1.82.D0.B5.D0.BB.D1.8F"></span><span class="mw-headline" id="Пример_добавления_пользователя">Пример добавления пользователя</span>
</h3>
<p>Команда ниже добавит в систему пользователя <code>archie</code>, попутно создав для него домашний каталог, а также задействует настройки по умолчанию для групп, названий каталогов, используемых оболочек и проч.
</p>
<pre># useradd -m archie
</pre>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Совет:</strong> Узнать используемую по умолчанию оболочку входа можно командой <code>useradd --defaults</code>. Обычно в роли такой оболочки выступает Bash; чтобы это изменить, воспользуйтесь флагом <code>-s</code>/<code>--shell</code>. В файле <code>/etc/shells</code> перечислены доступные оболочки.
</div>
<p>Хотя задавать пароль для защиты нового пользователя не обязательно, всё же рекомендуется это сделать:
</p>
<pre># passwd archie
</pre>
<p>Указанная выше команда <i>useradd</i> автоматически создаст группу <code>archie</code> и сделает её группой по умолчанию для пользователя <code>archie</code>. Считается правильным подходом создавать отдельную группу для каждого нового пользователя.
</p>
<p>Флагом <code>-g</code> можно задать другую исходную группу, но объединять пользователей в одну группу (например, <code>users</code>) в многопользовательских системах не рекомендуется. Причина в том, что  для совместного доступа на запись для группы пользователей значение <a href="../en/Umask.html" title="Umask">umask</a> устанавливается на <code>002</code>; в итоге все члены группы смогут перезаписывать ваши файлы. См. также <a rel="nofollow" class="external text" href="https://security.ias.edu/how-and-why-user-private-groups-unix">User Private Groups</a>. Если всё же необходимо добавить пользователя в какую-то группу, то при его создании укажите её как вспомогательную.
</p>
<p>Если следовать рекомендованному подходу, т.е. создать группу, название которой совпадает с именем пользователя, то все файлы по умолчанию доступны на запись только создавшему их пользователю. Если вы хотите сделать некий каталог доступным на запись для всех членов определённой группы, то этому каталогу нужно установаить в правах доступа т.н. "бит setgid". Все создаваемые в этом каталоге файлы и подкаталоги получат в качестве группы-владельца группу родительского каталога, а не группу пользователя, их создавшего. Т.о. эти файлы будут доступны на запись для всех членов группы:
</p>
<pre># chmod g+s <i>каталог_с_совместным_доступом</i>
</pre>
<p>Временно изменить идентификатор группы GID пользователя можно командой <i>newgrp</i>. Например, после команды <code>newgrp <i>название_группы</i></code> создаваемые пользователем файлы будут привязаны к идентификатору группы <code><i>название_группы</i></code>; при этом заново выполнять вход не потребуется. Чтобы изменить GID обратно на исходный, выполните команду <i>newgrp</i> без аргументов.
</p>
<h3>
<span id=".D0.9F.D1.80.D0.B8.D0.BC.D0.B5.D1.80_.D0.B4.D0.BE.D0.B1.D0.B0.D0.B2.D0.BB.D0.B5.D0.BD.D0.B8.D1.8F_.D1.81.D0.B8.D1.81.D1.82.D0.B5.D0.BC.D0.BD.D0.BE.D0.B3.D0.BE_.D0.BF.D0.BE.D0.BB.D1.8C.D0.B7.D0.BE.D0.B2.D0.B0.D1.82.D0.B5.D0.BB.D1.8F"></span><span class="mw-headline" id="Пример_добавления_системного_пользователя">Пример добавления системного пользователя</span>
</h3>
<p>Системные пользователи чаще всего создаются для запуска процесоов/демонов другими пользователями, для защиты (например, с помощью <a href="../en/File_permissions_and_attributes.html#Changing_ownership" class="mw-redirect" title="Chown">chown</a>) файлов и/или каталогов, а также по другим соображениям безопасности.
</p>
<p>Команда ниже создаст системного пользователя без доступа к командной оболочке и без домашнего каталога (можно также указать флаг <code>-U</code>, чтобы создать группу, название которой совпадает с именем пользователя, и добавить пользователя в эту группу):
</p>
<pre># useradd -r -s /usr/bin/nologin <i>имя_пользователя</i>
</pre>
<p>Если необходимо присвоить новому пользователю конкретные идентификаторы UID и GID, то укажите их флагами <code>-u</code>/<code>--uid</code> и <code>-g</code>/<code>--gid</code>:
</p>
<pre># useradd -r -u 850 -g 850 -s /usr/bin/nologin <i>имя_пользоваетеля</i>
</pre>
<h3>
<span id=".D0.A1.D0.BC.D0.B5.D0.BD.D0.B0_.D0.B8.D0.BC.D0.B5.D0.BD.D0.B8_.D0.BF.D0.BE.D0.BB.D1.8C.D0.B7.D0.BE.D0.B2.D0.B0.D1.82.D0.B5.D0.BB.D1.8F_.D0.B8.D0.BB.D0.B8_.D0.B4.D0.BE.D0.BC.D0.B0.D1.88.D0.BD.D0.B5.D0.B3.D0.BE_.D0.BA.D0.B0.D1.82.D0.B0.D0.BB.D0.BE.D0.B3.D0.B0"></span><span class="mw-headline" id="Смена_имени_пользователя_или_домашнего_каталога">Смена имени пользователя или домашнего каталога</span>
</h3>
<p>Команда для изменения домашнего каталога пользователя:
</p>
<pre># usermod -d <i>/новый/домашний/каталог</i> -m <i>имя_пользователя</i>
</pre>
<p>Флаг <code>-m</code> нужен для автоматического создания нового каталога и переноса в него всего содержимого старого.
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Совет:</strong> Можно создать ссылку из прежнего домашнего каталога на новый. Это позволит программам находить нужные файлы, путь которых задан в исходниках явно.
<pre># ln -s <i>/новый/домашний/каталог/ /старый/домашний/каталог</i>
</pre>
<p>Обратите внимание, что в строке <code>/старый/домашний/каталог</code> отсутствует закрывающй символ <code>/</code>.
</p>
</div>
<p>Команда для изменения имени пользователя:
</p>
<pre># usermod -l <i>новое_имя</i> <i>старое_имя</i>
</pre>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Важно:</strong> При этом вы не лолжны быть залогинены пользователем, имя которого собираетесь изменить. Откройте новый терминал (например, комбинацией клавиш <code>Ctrl+Alt+F6</code>), после чего войдите либо в root-аккаунт, либо в аккаунт другого пользователя, <a href="../ru/General_recommendations.html#%D0%9F%D0%BE%D0%B2%D1%8B%D1%88%D0%B5%D0%BD%D0%B8%D0%B5_%D0%BF%D1%80%D0%B8%D0%B2%D0%B8%D0%BB%D0%B5%D0%B3%D0%B8%D0%B9" class="mw-redirect" title="Основные рекомендации">повысив</a> права до root. <i>usermod</i> не позволит по ошибке изменить имя "самого себя".
</div>
<p>Смена имени пользоваеля проста и безопасна, когда выполняется правильно. Просто используйте <a href="#%D0%94%D1%80%D1%83%D0%B3%D0%B8%D0%B5_%D0%BF%D1%80%D0%B8%D0%BC%D0%B5%D1%80%D1%8B_%D1%83%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D1%8F_%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D1%82%D0%B5%D0%BB%D1%8F%D0%BC%D0%B8">usermod</a>. Если пользователь входит в "личную" группу с таким же именем, то переименовать её можно командой <a href="#%D0%A3%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D0%B3%D1%80%D1%83%D0%BF%D0%BF%D0%B0%D0%BC%D0%B8">groupmod</a>.
</p>
<p>Альтернативный способ — отредактировать непосредственно файл <code>/etc/passwd</code>. В разделе <a href="#%D0%91%D0%B0%D0%B7%D0%B0_%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85_%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D1%82%D0%B5%D0%BB%D0%B5%D0%B9">#База данных пользователей</a> дано описание его формата.
</p>
<p>Также следует имейть в виду:
</p>
<ul>
<li>При использовании <a href="../ru/Sudo.html" title="Sudo (Русский)">sudo</a> убедитесь, что не забыли обновить файл <code>/etc/sudoers</code>, добавив в него нового пользователя (используйте для этого утилиту <i>visudo</i> с правами root).</li>
<li>Задачи <a href="../en/Cron.html#Crontab_format" title="Cron">crontab</a> также необходимо отредактировать, переименовав файл пользователя в файле <code>/var/spool/cron</code>. Затем выполните <code>crontab -e</code> и отредактируйте пути к файлам и права доступа к ним.</li>
<li>Содержимое пользовательских файлов и каталогов <a href="../ru/Wine.html" title="Wine (Русский)">Wine</a> (вроде <code>~/.wine/drive_c/users</code> и <code>~/.local/share/applications/wine/Programs</code>) необходимо отредактировать.</li>
<li>Некоторые дополнения Thunderburd, вроде <a rel="nofollow" class="external text" href="https://www.enigmail.net/index.php/en/">Enigmail</a>, возможно придётся переустановить.</li>
<li>Все элементы системы (комбинации клавиш, сценарии оболочки и т.п.), где используются абсолютные пути к файлам в старом домашнем каталоге, необходимо изменить. Чтобы избежать этого в будущем, используйте в скриптах переменные <code>~</code> или <code>$HOME</code> для обозначения домашнего каталога.</li>
<li>Тажке не забудьте отредактировать файлы настроек в каталоге <code>/etc/</code>, которые полагаются на абсолютные пути (например, файлы Samba, CUPS и т.д.). Найти нуждающиеся в редактировании файлы проще всего командой <code>grep -r <i>старое_имя_пользователя</i> *</code>.</li>
</ul>
<h3>
<span id=".D0.94.D1.80.D1.83.D0.B3.D0.B8.D0.B5_.D0.BF.D1.80.D0.B8.D0.BC.D0.B5.D1.80.D1.8B_.D1.83.D0.BF.D1.80.D0.B0.D0.B2.D0.BB.D0.B5.D0.BD.D0.B8.D1.8F_.D0.BF.D0.BE.D0.BB.D1.8C.D0.B7.D0.BE.D0.B2.D0.B0.D1.82.D0.B5.D0.BB.D1.8F.D0.BC.D0.B8"></span><span class="mw-headline" id="Другие_примеры_управления_пользователями">Другие примеры управления пользователями</span>
</h3>
<p>Команда для добавления информации о пользователе (например, настоящего имени) в виде комментария <a href="#%D0%91%D0%B0%D0%B7%D0%B0_%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85_%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D1%82%D0%B5%D0%BB%D0%B5%D0%B9">GECOS</a>:
</p>
<pre># chfn <i>имя_пользователя</i>
</pre>
<p>(здесь <i>chfn</i> запускается в интерактивном режиме).
</p>
<p>Либо же можно добавить более длинный GECOS-комментарий командой:
</p>
<pre># usermod -c "Comment" <i>имя_пользователя</i>
</pre>
<p>Следующая команда пометит пароль пользователя как истёкший и потребует от него при следующем входе создать новый:
</p>
<pre># chage -d 0 <i>имя_пользователя</i>
</pre>
<p>Удаляются аккаунты пользователей командой <i>userdel</i>:
</p>
<pre># userdel -r <i>имя_пользователя</i>
</pre>
<p>Флаг <code>-r</code> указывает на то, что домашний каталог и почтовый ящик тоже должны быть удалены.
</p>
<p>Команда для изменения оболочки входа пользователя:
</p>
<pre># usermod -s <i>/bin/bash</i> <i>имя_пользователя</i>
</pre>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Совет:</strong> Скрипт <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/adduser/">adduser</a></span><sup><small>AUR</small></sup> позволяет выполнять действия команд <i>useradd</i>, <i>chfn</i> и <i>passwd</i> интерактивно. См. также <a rel="nofollow" class="external text" href="https://bugs.archlinux.org/task/32893">FS#32893</a>.
</div>
<h2>
<span id=".D0.91.D0.B0.D0.B7.D0.B0_.D0.B4.D0.B0.D0.BD.D0.BD.D1.8B.D1.85_.D0.BF.D0.BE.D0.BB.D1.8C.D0.B7.D0.BE.D0.B2.D0.B0.D1.82.D0.B5.D0.BB.D0.B5.D0.B9"></span><span class="mw-headline" id="База_данных_пользователей">База данных пользователей</span>
</h2>
<p>Информация о пользователях хранится в открытом виде в файле <code>/etc/passwd</code>: каждая строка в нём представляет собой набор из семи полей, описывающих аккаунт.
</p>
<pre><i>account:password:UID:GID:GECOS:directory:shell</i>
</pre>
<p>По порядку:
</p>
<ul>
<li>
<code><i>account</i></code> — имя пользователя. Это поле не может быть пустым. Применяются стандартные для *NIX правила именования.</li>
<li>
<code><i>password</i></code> — пароль пользователя. <div class="archwiki-template-box archwiki-template-box-warning">
<strong>Важно:</strong> Файл <code>passwd</code> доступен на чтение для всех пользователей в системе, поэтому хранить в нём пароли (в виде хэш-сумм или как-то иначе) небезопасно. Вместо этого в Arch Linux используются <a href="../ru/Security.html#%D0%A5%D1%8D%D1%88-%D1%81%D1%83%D0%BC%D0%BC%D1%8B_%D0%BF%D0%B0%D1%80%D0%BE%D0%BB%D0%B5%D0%B9" title="Security (Русский)">shadow-пароли</a>: поле <code>password</code> содержит всего лишь символ <code>x</code>, а хэшированный пароль хранится в файле <code>/etc/shadow</code>, доступ к которому ограничен. По этой причине менять пароли лучше командой <i>passwd</i>.</div>
</li>
<li>
<code><i>UID</i></code> — численное значение идентификатора пользователя. В Arch Linux нумерация обычных пользователей (отличных от root) начинается с UID 1000.</li>
<li>
<code><i>GID</i></code> — численное значение идентификатора основной группы пользователя. Идентификаторы групп можно найти в файле <a href="#%D0%A3%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D0%B3%D1%80%D1%83%D0%BF%D0%BF%D0%B0%D0%BC%D0%B8">/etc/group</a>.</li>
<li>
<code><i>GECOS</i></code> — необязательное поле, носящее информативный характер; обычно содержит настоящее имя пользователя, но может также использоваться службами вроде <i>finger</i> и изменяться командой <a href="#%D0%94%D1%80%D1%83%D0%B3%D0%B8%D0%B5_%D0%BF%D1%80%D0%B8%D0%BC%D0%B5%D1%80%D1%8B_%D1%83%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D1%8F_%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D1%82%D0%B5%D0%BB%D1%8F%D0%BC%D0%B8">chfn</a>. Поскольку поле необязательное, его можно оставить пустым.</li>
<li>
<code><i>directory</i></code> — используется командой входа для задания переменной окружения <code>$HOME</code>. Некоторые службы, для которых создаются специальные пользователи, используют для этого корневой каталог <code>/</code>, но обычные пользователи чаще всего хранят домашний каталог в разделе <code>/home</code>.</li>
<li>
<code><i>shell</i></code> — <a href="../ru/Command-line_shell.html" class="mw-redirect" title="Командная оболочка">командная оболочка</a> пользователя. Это поле является необязательным, и если в нём ничего не указано, то используется оболочка <code>/bin/bash</code>.</li>
</ul>
<p>Пример:
</p>
<pre>jack:x:1001:1003:Jack Smith,some comment here,,:/home/jack:/bin/bash
</pre>
<p>Смысл строки следующий: пользователь <code>jack</code>, пароль хранится в <code>/etc/shadow</code>, идентификатор пользователя — 1001, идентификатор его основной группы 1003. Полное имя — Jack Smith, также имеется некоторый комментарий. Домашний каталог <code>/home/jack</code>, используемая командная оболочка — <a href="../ru/Bash.html" title="Bash (Русский)">Bash</a>.
</p>
<p>Команда <i>pwck</i> проверяет корректность базы данных. При этом она может отстортировать список пользоватей по идентификаторам групп, что бывает полезно при сравнении:
</p>
<pre># pwck -s
</pre>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Важно:</strong> Arch Linux при обновлении пакетов создаёт резервные файлы с суффиксом <i>.pacnew</i>. За исключением случая, когда pacman выводит сообщение с требованием что-то предпринять, при появлении файла базы данных с таким суффиксом его необходимо удалить. Добавление новых пользователей и групп должно производиться только утилитой <span class="plainlinks archwiki-template-man" title="$ man 8 systemd-sysusers"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/systemd-sysusers.8">systemd-sysusers(8)</a></span> или сценариями установки пакетов.
</div>
<h2>
<span id=".D0.A3.D0.BF.D1.80.D0.B0.D0.B2.D0.BB.D0.B5.D0.BD.D0.B8.D0.B5_.D0.B3.D1.80.D1.83.D0.BF.D0.BF.D0.B0.D0.BC.D0.B8"></span><span class="mw-headline" id="Управление_группами">Управление группами</span>
</h2>
<p>В файле <code>/etc/group</code> перечислены существующие группы (подробнее см. <span class="plainlinks archwiki-template-man" title="$ man 5 group"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/group.5">group(5)</a></span>). Также существует файл <code>gshadow</code>, который используется достаточно редко (см. <span class="plainlinks archwiki-template-man" title="$ man 5 gshadow"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/gshadow.5">gshadow(5)</a></span>).
</p>
<p>Команда для вывода списка групп, в которых состоит пользователь:
</p>
<pre>$ groups <i>пользователь</i>
</pre>
<p>Если <code><i>пользователь</i></code> не указан, то будет выведен список групп текущего пользователя.
</p>
<p>Команда <i>id</i> позволяет узнать дополнительные подробности, вроде UID и GID пользователя:
</p>
<pre>$ id <i>пользователь</i>
</pre>
<p>Команда для вывода списка существующих групп:
</p>
<pre>$ cat /etc/group
</pre>
<p>Команда для создания новой группы:
</p>
<pre># groupadd <i>группа</i>
</pre>
<p>Добавить пользователя в группу можно командой <code>gpasswd</code> (см. <a rel="nofollow" class="external text" href="https://bugs.archlinux.org/task/58262">FS#58262</a> на предмет возможных ошибок):
</p>
<pre># gpasswd -a <i>пользователь</i> <i>группа</i>
</pre>
<p>Также добавить пользователя в группы можно командой <i>usermod</i> (здесь <code><i>доп_группы</i></code> — список групп, разделённых запятыми без пробелов):
</p>
<pre># usermod -aG <i>доп_группы</i> <i>пользователь</i>
</pre>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Важно:</strong> Если не указать флаг <code>-a</code>, то команда удалит пользователя из всех групп, кроме указанных в списке <code><i>доп_группы</i></code>. В итоге пользователь будет числиться только в группах из этого списка и ни в каких более.
</div>
<p>Команда для изменения группы, например, переименования:
</p>
<pre># groupmod -n <i>новая_группа</i> <i>старая_группа</i>
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> Изменится название группы, но не численное значение GID. Файлы, принадлеживашие  старой группе, будут теперь принадлежать новой.
</div>
<p>Команда для удаления группы:
</p>
<pre># groupdel <i>группа</i>
</pre>
<p>Команда для удаления пользователя из группы:
</p>
<pre># gpasswd -d <i>пользователь</i> <i>группа</i>
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> Если пользователь в этот момент был залогинен, то ему придётся выйти из системы и снова выполнить вход, чтобы изменения вступили в силу.
</div>
<p>Проверить корректность базы данных групп можно командой <i>grpck</i>.
</p>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Важно:</strong> Arch Linux при обновлении пакетов создаёт резервные копии файлов с суффиксом <i>.pacnew</i>. За исключением случаев, когда pacman выводит сообщение с требованием что-то предпринять, файл базы данных с таким суффиксом необходимо удалить. Добавление новых пользователей и групп при установке пакетов должно производиться только утилитой <span class="plainlinks archwiki-template-man" title="$ man 8 systemd-sysusers"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/systemd-sysusers.8">systemd-sysusers(8)</a></span> или установочными скриптами.
</div>
<h2>
<span id=".D0.A1.D0.BF.D0.B8.D1.81.D0.BE.D0.BA_.D0.B3.D1.80.D1.83.D0.BF.D0.BF"></span><span class="mw-headline" id="Список_групп">Список групп</span>
</h2>
<p>В этом разделе объясняется назначение важнейших групп из пакета <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=filesystem">filesystem</a></span>. Существует множество других групп, которые создаются при установке пакетов с присвоением <a href="../DeveloperWiki:UID_/_GID_Database.html" title="DeveloperWiki:UID / GID Database">корректного GID</a>. Подробности вы найдёте на страницах руководств соответствующих программ.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> Удаление пакета не приводит к удалению автоматически созданных пользователей и групп. Это сделано намеренно, потому что в противном случае созданные в процессе работы программы файлы могут остаться без владельца, что потенциально представляет угрозу безопасности.
</div> 
<h3>
<span id=".D0.9F.D0.BE.D0.BB.D1.8C.D0.B7.D0.BE.D0.B2.D0.B0.D1.82.D0.B5.D0.BB.D1.8C.D1.81.D0.BA.D0.B8.D0.B5_.D0.B3.D1.80.D1.83.D0.BF.D0.BF.D1.8B"></span><span class="mw-headline" id="Пользовательские_группы">Пользовательские группы</span>
</h3>
<p>Часто возникает необходимость добавить обычного (не root) пользователя в одну из групп, обеспечивающих доступ к периферийным устройствам или упрощающих системное администрирование:
</p>
<table class="wikitable">
<tbody>
<tr>
<th>Группа</th>
<th>Файлы</th>
<th>Назначение
</th>
</tr>
<tr>
<td>adm</td>
<td></td>
<td>Группа администрирования, обычно используется для чтения файлов защищённых логов. Позволяет читать файлы <a href="../ru/20098645dd127451d723337a513f51ce.html" class="mw-redirect" title="Systemd/Журнал">журнала</a>.
</td>
</tr>
<tr>
<td>ftp</td>
<td><code>/srv/ftp/</code></td>
<td>Доступ к файлам <a href="../en/List_of_applications/Internet.html#FTP_servers" title="List of applications/Internet">FTP-сервера</a>.
</td>
</tr>
<tr>
<td>games</td>
<td><code>/var/games</code></td>
<td>Доступ к некоторым игровым программам.
</td>
</tr>
<tr>
<td>http</td>
<td><code>/srv/http/</code></td>
<td>Доступ к файлам <a href="../en/List_of_applications/Internet.html#Web_servers" title="List of applications/Internet">HTTP-сервера</a>.
</td>
</tr>
<tr>
<td>log</td>
<td></td>
<td>Доступ к файлам логов в каталоге <code>/var/log/</code>, созданным <a href="../en/Syslog-ng.html" title="Syslog-ng">syslog-ng</a>.
</td>
</tr>
<tr>
<td>rfkill</td>
<td><code>/dev/rfkill</code></td>
<td>Управление питанием беспроводных устройств (используется <a href="../ru/1dc7f819a14c7ee72d436a3b4a1a1db3.html#%D0%9F%D1%80%D0%B5%D0%B4%D0%BE%D1%81%D1%82%D0%B5%D1%80%D0%B5%D0%B6%D0%B5%D0%BD%D0%B8%D1%8F_Rfkill" class="mw-redirect" title="Настройка сети/Беспроводная сеть">rfkill</a>).
</td>
</tr>
<tr>
<td>sys</td>
<td></td>
<td>Администрирование принтеров с помощью <a href="../ru/CUPS.html" title="CUPS (Русский)">CUPS</a>.
</td>
</tr>
<tr>
<td>systemd-journal</td>
<td><code>/var/log/journal/*</code></td>
<td>Может использоваться как альтернатива группам <code>adm</code> и <code>wheel</code> для чтения журналов systemd <a rel="nofollow" class="external autonumber" href="https://cgit.freedesktop.org/systemd/systemd/tree/README?id=fdbbf0eeda929451e2aaf34937a72f03a225e315#n190">[1]</a>. В противном случае отображаются только сообщения, созданные пользователем.
</td>
</tr>
<tr>
<td>uucp</td>
<td>
<code>/dev/ttyS[0-9]+</code>, <code>/dev/tts/[0-9]+</code>, <code>/dev/ttyUSB[0-9]+</code>, <code>/dev/ttyACM[0-9]+</code>, <code>/dev/rfcomm[0-9]+</code>
</td>
<td>Последовательные порты RS-232 и подключенные к ним устройства.
</td>
</tr>
<tr>
<td>wheel</td>
<td></td>
<td>Группа администрирования, даёт необходимые права. Имеет доступ к файлам <a href="../ru/20098645dd127451d723337a513f51ce.html" class="mw-redirect" title="Systemd/Журнал">журнала</a> и принтерам в <a href="../ru/CUPS.html" title="CUPS (Русский)">CUPS</a>. Также позволяет работать с утилитами <a href="../ru/Sudo.html" title="Sudo (Русский)">sudo</a> и <a href="../en/Su.html" title="Su">su</a> (по умолчанию их не использует).
</td>
</tr>
</tbody>
</table>
<h3>
<span id=".D0.A1.D0.B8.D1.81.D1.82.D0.B5.D0.BC.D0.BD.D1.8B.D0.B5_.D0.B3.D1.80.D1.83.D0.BF.D0.BF.D1.8B"></span><span class="mw-headline" id="Системные_группы">Системные группы</span>
</h3>
<p>Следующие группы имеют значение для всей системы, и добавление в них пользователям производится только в указанных целях:
</p>
<table class="wikitable">
<tbody>
<tr>
<th>Группа</th>
<th>Файлы</th>
<th>Назначение
</th>
</tr>
<tr>
<td>dbus</td>
<td></td>
<td>Используется в <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=dbus">dbus</a></span>
</td>
</tr>
<tr>
<td>kmem</td>
<td>
<code>/dev/port</code>, <code>/dev/mem</code>, <code>/dev/kmem</code>
</td>
<td>
</td>
</tr>
<tr>
<td>locate</td>
<td>
<code>/usr/bin/locate</code>, <code>/var/lib/locate</code>, <code>/var/lib/mlocate</code>, <code>/var/lib/slocate</code>
</td>
<td>См. <a href="../en/Locate.html" title="Locate">locate</a>.
</td>
</tr>
<tr>
<td>lp</td>
<td>
<code>/dev/lp[0-9]*</code>, <code>/dev/parport[0-9]*</code>
</td>
<td>Доступ к устройствам параллельного порта (принтеры и прочие).
</td>
</tr>
<tr>
<td>mail</td>
<td><code>/usr/bin/mail</code></td>
<td>
</td>
</tr>
<tr>
<td>nobody</td>
<td></td>
<td>Непривилегированная группа.
</td>
</tr>
<tr>
<td>proc</td>
<td><code>/proc/<i>pid</i>/</code></td>
<td>Группа для сбора информации о процессах. Должна быть задана явно опцией монтирования <code>gid=</code>, не работает, если смонтировать <a rel="nofollow" class="external text" href="https://www.kernel.org/doc/html/latest/filesystems/proc.html">файловую систему proc</a> с опцией <code>hidepid=</code>
</td>
</tr>
<tr>
<td>root</td>
<td><code>/*</code></td>
<td>Полный доступ к администрированис и управлению системой (root, admin).
</td>
</tr>
<tr>
<td>smmsp</td>
<td></td>
<td>Группа <a href="../en/Sendmail.html" title="Sendmail">sendmail</a>.
</td>
</tr>
<tr>
<td>tty</td>
<td>
<code>/dev/tty</code>, <code>/dev/vcc</code>, <code>/dev/vc</code>, <code>/dev/ptmx</code>
</td>
<td>
</td>
</tr>
<tr>
<td>utmp</td>
<td>
<code>/run/utmp</code>, <code>/var/log/btmp</code>, <code>/var/log/wtmp</code>
</td>
<td>
</td>
</tr>
</tbody>
</table>
<h3>
<span id=".D0.93.D1.80.D1.83.D0.BF.D0.BF.D1.8B.2C_.D1.81.D1.83.D1.89.D0.B5.D1.81.D1.82.D0.B2.D0.BE.D0.B2.D0.B0.D0.B2.D1.88.D0.B8.D0.B5_.D0.B4.D0.BE_.D0.BF.D0.B5.D1.80.D0.B5.D1.85.D0.BE.D0.B4.D0.B0_.D0.BD.D0.B0_systemd"></span><span class="mw-headline" id="Группы,_существовавшие_до_перехода_на_systemd">Группы, существовавшие до перехода на systemd</span>
</h3>
<p>До перехода Arch Linux на <a href="../ru/Systemd.html" title="Systemd (Русский)">systemd</a> пользователи должны были вручную добавляться к этим группам, чтобы получить доступ к устройствам. Такой подход был признан устаревшим после перехода на <a href="../ru/Udev.html" title="Udev (Русский)">udev</a>, помечающий устройства <a rel="nofollow" class="external text" href="https://github.com/systemd/systemd/blob/master/src/login/70-uaccess.rules.m4">меткой</a> <code>uaccess</code>, и <i>logind</i>, динамически присваивающий пользователям права доступа с помощью <a href="../ru/Access_Control_Lists.html" class="mw-redirect" title="ACL (Русский)">ACL</a> в соответствии с тем, какой сеанс активен на данный момент. Обратите внимание, что чтобы вышеперечисленное работало, сеанс должен быть корректным (см. <a href="../en/General_troubleshooting.html#Session_permissions" title="General troubleshooting">General troubleshooting#Session permissions</a>).
</p>
<p>Есть несколько важных исключений, которые требуют добавления пользователей в группы ниже — например, если вы хотите разрешить неавторизованным пользователям доступ к устройствам. Тем не мнее, имейте в виду, что это может стать причиной определённых проблем (например, группа <code>audio</code> мешает быстрому переключению между пользователями, а также даёт приложениям возможность блокировать програмное микширование).
</p>
<table class="wikitable">
<tbody>
<tr>
<th>Группы</th>
<th>Файлы</th>
<th>Назначение
</th>
</tr>
<tr>
<td>audio</td>
<td>
<code>/dev/audio</code>, <code>/dev/snd/*</code>, <code>/dev/rtc0</code>
</td>
<td>Прямой доступ к звуковому оборудованию для всех сеансов. По-прежнему требуется, чтобы <a href="../en/Advanced_Linux_Sound_Architecture.html" class="mw-redirect" title="ALSA">ALSA</a> и <a href="../en/Open_Sound_System.html" class="mw-redirect" title="OSS">OSS</a> работали в удаленных сеансах, см. <a href="../en/Advanced_Linux_Sound_Architecture.html#User_privileges" class="mw-redirect" title="ALSA">ALSA#User privileges</a>. Также используется в <a href="../en/JACK_Audio_Connection_Kit.html" class="mw-redirect" title="JACK">JACK</a> для выдачи пользователям разрешений на работу в режиме реального времени.
</td>
</tr>
<tr>
<td>disk</td>
<td><code>/dev/sd[a-zA-Z]*[1-9]</code></td>
<td>Доступ к блочным устройствам, не затронутым другими группами вроде <code>optical</code>, <code>floppy</code> и <code>storage</code>.
</td>
</tr>
<tr>
<td>floppy</td>
<td><code>/dev/fd[0-9]*</code></td>
<td>Доступ к флоппи-дискам.
</td>
</tr>
<tr>
<td>input</td>
<td>
<code>/dev/input/event[0-9]*</code>, <code>/dev/input/mouse[0-9]*</code>
</td>
<td>Доступ к устройствам ввода. Введено в systemd 215 <a rel="nofollow" class="external autonumber" href="https://lists.freedesktop.org/archives/systemd-commits/2014-June/006343.html">[2]</a>.
</td>
</tr>
<tr>
<td>kvm</td>
<td><code>/dev/kvm</code></td>
<td>Доступ к виртуальным машинам с использованием <a href="../en/KVM.html" title="KVM">KVM</a>.
</td>
</tr>
<tr>
<td>optical</td>
<td>
<code>/dev/sr[0-9]</code>, <code>/dev/sg[0-9]</code>
</td>
<td>Доступ к оптическим устройствам, таким как CD- и DVD-приводы.
</td>
</tr>
<tr>
<td>scanner</td>
<td><code>/var/lock/sane</code></td>
<td>Доступ к оборудованию сканера.
</td>
</tr>
<tr>
<td>storage</td>
<td>
<code>/dev/st[0-9]*[lma]*</code>, <code>/dev/nst[0-9]*[lma]*</code>
</td>
<td>Даёт доступ к съёмным носителям вроде USB-дисков, устройств flash/jump, MP3-плееров; позволяет монтировать носители <a rel="nofollow" class="external autonumber" href="https://lists.archlinux.org/pipermail/arch-dev-public/2011-August/021468.html">[3]</a>. В настоящее время используется в основном для работы с ленточными носителями без использования правил udev: <a rel="nofollow" class="external autonumber" href="https://github.com/archlinux/svntogit-packages/blob/packages/systemd/trunk/0001-Use-Arch-Linux-device-access-groups.patch">[4]</a>, <a rel="nofollow" class="external autonumber" href="https://github.com/archlinux/svntogit-packages/commit/26af78b6ad554dbd00615600edc7d53164ef8dee">[5]</a>, <a rel="nofollow" class="external autonumber" href="https://github.com/systemd/systemd/blame/aaaf42cb44d4fcd598fca441a11856f3e8dd06d8/rules.d/50-udev-default.rules.in#L69">[6]</a>, <a rel="nofollow" class="external autonumber" href="https://elixir.bootlin.com/linux/v5.5.6/source/include/scsi/scsi_proto.h#L251">[7]</a>.
</td>
</tr>
<tr>
<td>video</td>
<td>
<code>/dev/fb/0</code>, <code>/dev/misc/agpgart</code>
</td>
<td>Доступ к устройствам захвата видео, аппаратное ускорение 2D/3D, framebuffer (<a href="../ru/Xorg.html" class="mw-redirect" title="X (Русский)">X</a> можно использовать <i>без</i> поддержки этой группы).
</td>
</tr>
</tbody>
</table>
<h3>
<span id=".D0.9D.D0.B5.D0.B8.D1.81.D0.BF.D0.BE.D0.BB.D1.8C.D0.B7.D1.83.D0.B5.D0.BC.D1.8B.D0.B5_.D0.B3.D1.80.D1.83.D0.BF.D0.BF.D1.8B"></span><span class="mw-headline" id="Неиспользуемые_группы">Неиспользуемые группы</span>
</h3>
<p>Следующие группы в настоящий момент никак не используются.
</p>
<table class="wikitable">
<tbody>
<tr>
<th>Группа</th>
<th>Файлы</th>
<th>Назначение
</th>
</tr>
<tr>
<td>bin</td>
<td></td>
<td>Историческое наследие.
</td>
</tr>
<tr>
<td>daemon</td>
<td></td>
<td>
</td>
</tr>
<tr>
<td>lock</td>
<td></td>
<td>Использовалась для lockfile-доступа. Требовалась для <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=gnokii">gnokii</a></span>.
</td>
</tr>
<tr>
<td>mem</td>
<td></td>
<td>
</td>
</tr>
<tr>
<td>network</td>
<td></td>
<td>Не использовалась по умолчанию. Могла использоваться в NetworkManager (см. <a href="../en/NetworkManager.html#Set_up_PolicyKit_permissions" title="NetworkManager">NetworkManager#Set up PolicyKit permissions</a>).
</td>
</tr>
<tr>
<td>power</td>
<td></td>
<td>
</td>
</tr>
<tr>
<td>uuidd</td>
<td></td>
<td>
</td>
</tr>
<tr>
<td>users</td>
<td></td>
<td>Основная группа для пользователей; использовалась, если приватные группы не были предусмотрены. Например, при создании с опцией <code>USERGROUPS_ENAB no</code> в файле <code>/etc/login.defs</code>, или командой <i>useradd</i> с флагом <code>-N</code>/<code>--no-user-group</code> пользователь помещался именно в эту группу.
</td>
</tr>
</tbody>
</table>
<h2>
<span id=".D0.9F.D1.80.D0.BE.D1.87.D0.B8.D0.B5_.D0.B8.D0.BD.D1.81.D1.82.D1.80.D1.83.D0.BC.D0.B5.D0.BD.D1.82.D1.8B_.D0.B4.D0.BB.D1.8F_.D1.80.D0.B0.D0.B1.D0.BE.D1.82.D1.8B_.D1.81_.D0.B1.D0.B0.D0.B7.D0.B0.D0.BC.D0.B8_.D0.B4.D0.B0.D0.BD.D0.BD.D1.8B.D1.85"></span><span class="mw-headline" id="Прочие_инструменты_для_работы_с_базами_данных">Прочие инструменты для работы с базами данных</span>
</h2>
<p>Для просмотра отдельных записей можно использовать <span class="plainlinks archwiki-template-man" title="$ man 1 getent"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/getent.1">getent(1)</a></span>:
</p>
<pre>% getent group tty
</pre>
<p>Как отмечалось в разделе <a href="#%D0%91%D0%B0%D0%B7%D0%B0_%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85_%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D1%82%D0%B5%D0%BB%D0%B5%D0%B9">#База данных пользователей</a>, для работы с базами данных лучше использовать специализированные утилиты вроде <code>passwd</code> и <code>chfn</code>. Если же они недоступны, то есть <code>vipw</code> и <code>vigr</code>. Данные редакторы предпочтительней обычных текстовых редакторов, поскольку они могут блокировать базу данных на случай одновременного редактирования, а также не позволяют добавить в базу некорректную запись. Shadow-базы редактируются командами <code>vipw -s</code> и <code>vigr -s</code> из пакета <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=util-linux">util-linux</a></span>, если утилита <i>chage</i> также недоступна. См. также <a rel="nofollow" class="external text" href="https://bugs.archlinux.org/task/31414">FS#31414</a>.
</p>
</div>
</div>
<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../ru/Category:Security.html" title="Category:Security (Русский)">Security (Русский)</a></li></ul>
</div></div>
	</div>
</div>

<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
		<li>Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Users_and_groups_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9)&amp;oldid=645598">https://wiki.archlinux.org/index.php?title=Users_and_groups_(Русский)&amp;oldid=645598</a>"</li>
		<li id="footer-info-lastmod"> This page was last edited on 14 December 2020, at 13:38.</li>
		<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
	<br>
</ul>
	<ul id="footer-places">
		<li id="footer-places-privacy"><a href="../en/ArchWiki:Privacy_policy.html" title="ArchWiki:Privacy policy">Privacy policy</a></li>
		<li id="footer-places-about"><a href="../en/ArchWiki:About.html" title="ArchWiki:About">About ArchWiki</a></li>
		<li id="footer-places-disclaimer"><a href="../en/ArchWiki:General_disclaimer.html" title="ArchWiki:General disclaimer">Disclaimers</a></li>
	</ul>
	<ul id="footer-icons" class="noprint">
		<li id="footer-copyrightico">
	</ul>
	<div style="clear: both;"></div>
</footer>



</body>
</html>
