<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>VirtualBox (Česky) - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.35.0">
<meta name="robots" content="noindex,follow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="http://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-VirtualBox_Česky rootpage-VirtualBox_Česky skin-vector action-view skin-vector-legacy">
<div id="content" class="mw-body" role="main" style="margin: 0">
	<a id="top"></a>
	<div id="siteNotice" class="mw-body-content"></div>
	<div class="mw-indicators mw-body-content">
	</div>
	<h1 id="firstHeading" class="firstHeading" lang="en">VirtualBox (Česky)</h1>
	<div id="bodyContent" class="mw-body-content">
		<div id="siteSub" class="noprint">From ArchWiki</div>
		<div id="contentSub"></div>
		<div id="contentSub2"></div>
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="#searchInput">Jump to search</a>
		<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr">
<div class="warningbox">The printable version is no longer supported and may have rendering errors. Please update your browser bookmarks and please use the default browser print function instead.</div>
<div class="mw-parser-output">
<div class="noprint archwiki-template-message">
<p><a href="../File:Tango-preferences-desktop-locale.png" class="image"><img alt="Tango-preferences-desktop-locale.png" src="../File:Tango-preferences-desktop-locale.png" decoding="async" width="48" height="48"></a><b>This article or section needs to be <a href="../en/ArchWiki:Contributing.html#Translating" title="ArchWiki:Contributing">translated</a>.</b><a href="../File:Tango-preferences-desktop-locale.png" class="image"><img alt="Tango-preferences-desktop-locale.png" src="../File:Tango-preferences-desktop-locale.png" decoding="async" width="48" height="48"></a></p>
<div>
<b>Notes:</b> <span style="color:red;">please use the first argument of the template to provide more detailed indications.</span> (Discuss in <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php/Talk:VirtualBox_(%C4%8Cesky)">Talk:VirtualBox (Česky)#</a>)</div>
</div>
<p>Tento článek pojednává o provozování VirtualBoxu v Archu, možná vás bude zajímat <a href="../en/VirtualBox.html#Install_a_native_Arch_Linux_system_from_VirtualBox" class="mw-redirect" title="Install Arch Linux from VirtualBox">Install Arch Linux from VirtualBox</a>
</p>
<p><a rel="nofollow" class="external text" href="http://www.virtualbox.org">VirtualBox</a> je emulátor virtuálního PC jako <a href="../en/VMware.html" title="VMware">VMware</a>. Obsahuje plno vlastností integrovaných ve vmware, stejně jako své vlastní. Je v neustálém vývoji a nové vlastnosti postupně přibývají. Verze 2.2 například přinesla podporu 3D OpenGL akcelerace pro hostované Linux a Solaris systémy. Má přehledné grafické uživatelské rozhraní (Qt a/nebo SDL) a je možné jej obsluhovat přes příkazovou řádku. VirtualBox umožňuje běh iTunes jako v sučasnosti v podstatě jedinou možnost, jak synchronizovat iPod Touch nebo iPhone s verzí 3.0 nebo vyšší.
</p>
<div id="toc" class="toc" role="navigation" aria-labelledby="mw-toc-heading">
<input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none"><div class="toctitle" lang="en" dir="ltr">
<h2 id="mw-toc-heading">Contents</h2>
<span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span>
</div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Instalace"><span class="tocnumber">1</span> <span class="toctext">Instalace</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#Spu%C5%A1t%C4%9Bn%C3%AD_VirtualBoxu"><span class="tocnumber">2</span> <span class="toctext">Spuštění VirtualBoxu</span></a></li>
<li class="toclevel-1 tocsection-3">
<a href="#Nastaven%C3%AD"><span class="tocnumber">3</span> <span class="toctext">Nastavení</span></a>
<ul>
<li class="toclevel-2 tocsection-4">
<a href="#Nastaven%C3%AD_s%C3%ADt%C4%9B"><span class="tocnumber">3.1</span> <span class="toctext">Nastavení sítě</span></a>
<ul>
<li class="toclevel-3 tocsection-5"><a href="#NAT"><span class="tocnumber">3.1.1</span> <span class="toctext">NAT</span></a></li>
<li class="toclevel-3 tocsection-6"><a href="#S%C3%AD%C5%A5ov%C3%BD_most"><span class="tocnumber">3.1.2</span> <span class="toctext">Síťový most</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-7">
<a href="#P%C5%99%C3%ADdavky_pro_hosta"><span class="tocnumber">3.2</span> <span class="toctext">Přídavky pro hosta</span></a>
<ul>
<li class="toclevel-3 tocsection-8"><a href="#Host_s_Arch_Linuxem"><span class="tocnumber">3.2.1</span> <span class="toctext">Host s Arch Linuxem</span></a></li>
<li class="toclevel-3 tocsection-9"><a href="#Windows_guests"><span class="tocnumber">3.2.2</span> <span class="toctext">Windows guests</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-10"><a href="#Keyboard_and_mouse_between_the_host_and_the_guest"><span class="tocnumber">3.3</span> <span class="toctext">Keyboard and mouse between the host and the guest</span></a></li>
<li class="toclevel-2 tocsection-11"><a href="#Using_full_resolution_of_the_host_system_in_the_guest"><span class="tocnumber">3.4</span> <span class="toctext">Using full resolution of the host system in the guest</span></a></li>
<li class="toclevel-2 tocsection-12"><a href="#Sharing_folders_between_the_host_and_the_guest"><span class="tocnumber">3.5</span> <span class="toctext">Sharing folders between the host and the guest</span></a></li>
<li class="toclevel-2 tocsection-13"><a href="#Getting_audio_to_work_in_the_guest_machine"><span class="tocnumber">3.6</span> <span class="toctext">Getting audio to work in the guest machine</span></a></li>
<li class="toclevel-2 tocsection-14"><a href="#Setting_up_the_RAM_and_video_memory_for_the_guest"><span class="tocnumber">3.7</span> <span class="toctext">Setting up the RAM and video memory for the guest</span></a></li>
<li class="toclevel-2 tocsection-15"><a href="#Setting_up_CD-ROM_for_the_guest"><span class="tocnumber">3.8</span> <span class="toctext">Setting up CD-ROM for the guest</span></a></li>
<li class="toclevel-2 tocsection-16"><a href="#Enabling_D3D_acceleration_in_Windows_guests"><span class="tocnumber">3.9</span> <span class="toctext">Enabling D3D acceleration in Windows guests</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-17">
<a href="#Virtualized_OS_setup"><span class="tocnumber">4</span> <span class="toctext">Virtualized OS setup</span></a>
<ul>
<li class="toclevel-2 tocsection-18"><a href="#Test_a_liveCD/DVD"><span class="tocnumber">4.1</span> <span class="toctext">Test a liveCD/DVD</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-19">
<a href="#Maintenance"><span class="tocnumber">5</span> <span class="toctext">Maintenance</span></a>
<ul>
<li class="toclevel-2 tocsection-20"><a href="#Rebuild_the_vboxdrv_module"><span class="tocnumber">5.1</span> <span class="toctext">Rebuild the vboxdrv module</span></a></li>
<li class="toclevel-2 tocsection-21"><a href="#Compact_a_disk_image"><span class="tocnumber">5.2</span> <span class="toctext">Compact a disk image</span></a></li>
<li class="toclevel-2 tocsection-22"><a href="#Increase_the_size_of_a_virtual_hard_drive_for_a_Windows_guest"><span class="tocnumber">5.3</span> <span class="toctext">Increase the size of a virtual hard drive for a Windows guest</span></a></li>
<li class="toclevel-2 tocsection-23"><a href="#Windows_Xp_and_Nokia_phones"><span class="tocnumber">5.4</span> <span class="toctext">Windows Xp and Nokia phones</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-24">
<a href="#Migrating_from_another_VM"><span class="tocnumber">6</span> <span class="toctext">Migrating from another VM</span></a>
<ul>
<li class="toclevel-2 tocsection-25"><a href="#Converting_from_QEMU_images"><span class="tocnumber">6.1</span> <span class="toctext">Converting from QEMU images</span></a></li>
<li class="toclevel-2 tocsection-26"><a href="#Converting_from_VMware_images"><span class="tocnumber">6.2</span> <span class="toctext">Converting from VMware images</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-27">
<a href="#Tips_and_tricks"><span class="tocnumber">7</span> <span class="toctext">Tips and tricks</span></a>
<ul>
<li class="toclevel-2 tocsection-28"><a href="#Getting_Web-cams_and_other_USB_devices_to_detect"><span class="tocnumber">7.1</span> <span class="toctext">Getting Web-cams and other USB devices to detect</span></a></li>
<li class="toclevel-2 tocsection-29"><a href="#Sending_a_CTRL+ALT+F1_to_the_Guest"><span class="tocnumber">7.2</span> <span class="toctext">Sending a CTRL+ALT+F1 to the Guest</span></a></li>
<li class="toclevel-2 tocsection-30"><a href="#Starting_VMs_at_system_boot_on_headless_servers"><span class="tocnumber">7.3</span> <span class="toctext">Starting VMs at system boot on headless servers</span></a></li>
<li class="toclevel-2 tocsection-31"><a href="#Guest_managament_daemon"><span class="tocnumber">7.4</span> <span class="toctext">Guest managament daemon</span></a></li>
<li class="toclevel-2 tocsection-32"><a href="#Accessing_server_on_VM_from_host"><span class="tocnumber">7.5</span> <span class="toctext">Accessing server on VM from host</span></a></li>
<li class="toclevel-2 tocsection-33"><a href="#DAEMON_Tools"><span class="tocnumber">7.6</span> <span class="toctext">DAEMON Tools</span></a></li>
<li class="toclevel-2 tocsection-34"><a href="#Using_VirtualBox_on_a_USB_key"><span class="tocnumber">7.7</span> <span class="toctext">Using VirtualBox on a USB key</span></a></li>
<li class="toclevel-2 tocsection-35"><a href="#phpVirtualBox"><span class="tocnumber">7.8</span> <span class="toctext">phpVirtualBox</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-36"><a href="#External_links"><span class="tocnumber">8</span> <span class="toctext">External links</span></a></li>
</ul>
</div>

<h2><span class="mw-headline" id="Instalace">Instalace</span></h2>
<dl>
<dt><span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=virtualbox">virtualbox</a></span></dt>
<dt>Obsahuje základní balík licencovaný podle GPL, k nalezení je v community repositáři.</dt>
</dl>
<dl>
<dt>
<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/virtualbox-ext-oracle/">virtualbox-ext-oracle</a></span><sup><small>AUR</small></sup>
</dt>
<dt>Tento podle PUEL licencovaný rozšiřující balík je dostupný zdarma pro soukromé použití jednotlivcem. Je možné jej stáhnout z <a href="../en/Arch_User_Repository.html" class="mw-redirect" title="AUR">AUR</a>. Obsahuje RPD server, podporuje USB 2.0 a PXE bootování na Intel síťových kartách.</dt>
</dl>
<p>Instalace základního balíčku:
</p>
<pre># pacman -S virtualbox
</pre>
<p>Volitelně je možné nainstalovat <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/qt4/">qt4</a></span><sup><small>AUR</small></sup> pro možnost využívat GUI:
</p>
<pre># pacman -S qt4
</pre>
<h2>
<span id="Spu.C5.A1t.C4.9Bn.C3.AD_VirtualBoxu"></span><span class="mw-headline" id="Spuštění_VirtualBoxu">Spuštění VirtualBoxu</span>
</h2>
<p>Přiřazení uživatele do <b>vboxusers' skupiny:</b>
</p>
<pre># gpasswd -a USERNAME vboxusers
</pre>
<p>Sestavení potřebných modulů:
</p>
<pre># /etc/rc.d/vboxdrv setup
</pre>
<p>Nakonec je záhodno editovat <code>/etc/<a href="../en/SysVinit.html" class="mw-redirect" title="Rc.conf">rc.conf</a></code> a pří)idat <i>vboxrv</i> do sekce MODULES, aby se modul ovladače načetl při příštím spuštění:
</p>
<pre>MODULES=(... <i>vboxdrv</i>)
</pre>
<p>Pro načtení modulu ručně na vyžádádání:
</p>
<pre># modprobe vboxdrv
</pre>
<p>Spuštění Virtualboxu:
</p>
<pre>$ VirtualBox
</pre>
<h2>
<span id="Nastaven.C3.AD"></span><span class="mw-headline" id="Nastavení">Nastavení</span>
</h2>
<h3>
<span id="Nastaven.C3.AD_s.C3.ADt.C4.9B"></span><span class="mw-headline" id="Nastavení_sítě">Nastavení sítě</span>
</h3>
<p>Virtuální počítače ve Virtualboxu mohou být do sítě připojeny různými metodami; zejména pomocí <a href="#NAT">#NAT</a> a <a href="#S%C3%AD%C5%A5ov%C3%BD_most">#Síťový most</a>. Právě <a href="#NAT">#NAT</a> je nejjednodušší možností a je výchozí pro nově vytvořené virtuální stroje.
</p>
<p><a rel="nofollow" class="external text" href="http://www.virtualbox.org/manual/UserManual.html">Manuál VirtualBoxu</a> popisuje možnosti síťování. Ty jsou právě tam přesně popsány a jsou platné pro většinu operačních systémů.
</p>
<h4><span class="mw-headline" id="NAT">NAT</span></h4>
<p>Nastacení ve Virtualboxu:
</p>
<ul>
<li>ve volbě "Nastavení" virtuálního počítače</li>
<li>zvolit panel <i>Síť</i> z možností nalevo</li>
<li>jako <i>Připojena k</i> zvolte možnost <i>NAT</i>
</li>
</ul>
<p>Virtualbox obsahuje DHCP server a umožňuje tak nastavit podřízené systémy pomocí DHCP. IP adresa v NATu první síťového adaptéru je 10.0.2.0, 10.0.3.0 pro další a tak dále.
</p>
<h4>
<span id="S.C3.AD.C5.A5ov.C3.BD_most"></span><span class="mw-headline" id="Síťový_most">Síťový most</span>
</h4>
<p>Síťový most je možné nastavit několika způsoby; jedná se o jednoduché nastavení za cenu omezených možností kontroly. Další možnosti jsou uvedené v <a href="/index.php?title=Pokro%C4%8Dil%C3%A9_nastaven%C3%AD_s%C3%ADt%C4%9B_Virtualbox&amp;action=edit&amp;redlink=1" class="new" title="Pokročilé nastavení sítě Virtualbox (page does not exist)">Pokročilé nastavení sítě Virtualbox</a>. V novějších verzích je možné propojit síťovým mostem rozhraní mezi hostem a hostitelským bezdrátovým rozhraním bez využití klihoven a nástrojů třetích stran.
</p>
<p>Před dalším pokračováním je nutné načíst potřebné moduly:
</p>
<pre># modprobe vboxnetflt
</pre>
<p>Ve Virtualboxu:
</p>
<ul>
<li>v nabídce <i>Nastavení</i> virtuálního počítače</li>
<li>zvolte <i>Síť</i> z levého menu</li>
<li>u <i>Připojena k</i> zvolte <i>Síťový most</i>
</li>
<li>v <i>Název</i> vyberte síťové rozhraní připojení k síti, které má být využito pro připojení virtuálního počítače</li>
</ul>
<p>Spusťte virtuální počítač a nastavte jej jako obvykle; za pomocí DHCp nebo staticky.
</p>
<h3>
<span id="P.C5.99.C3.ADdavky_pro_hosta"></span><span class="mw-headline" id="Přídavky_pro_hosta">Přídavky pro hosta</span>
</h3>
<p>Přídavky pro hosta umožňují sdílení složek, zlepšují podporu akcelerace grafického rozhraní a zpřístupňují obou-směrnou schránku mezi hostem a hostitelem. Integrace myši je další funkcionalitou, která odstraňuje nutnost přepínat myš mezi hostem a hostitelem.
</p>
<h4><span class="mw-headline" id="Host_s_Arch_Linuxem">Host s Arch Linuxem</span></h4>
<p>Více v <a href="../en/VirtualBox.html#Installation_steps_for_Arch_Linux_guests" class="mw-redirect" title="Arch Linux VirtualBox Guest">Arch Linux VirtualBox Guest</a>
</p>
<h4><span class="mw-headline" id="Windows_guests">Windows guests</span></h4>
<p>After installing Windows (XP etc.) on your virtual machine, simply select <i>Devices → Install Guest Additions...</i>
</p>
<p>This will mount the iso image and windows should then automatically launch the guest additions installer. Follow the instructions to the end.
</p>
<h3><span class="mw-headline" id="Keyboard_and_mouse_between_the_host_and_the_guest">Keyboard and mouse between the host and the guest</span></h3>
<ul>
<li>To capture the keyboard and mouse, click the mouse inside the virtual machine display.</li>
<li>To uncapture, press right <code>Ctrl</code>.</li>
</ul>
<p>To get seamless mouse integration between host and guest, install the <a href="#Guest_Additions">#Guest Additions</a><sup>[<a href="../en/Help:Procedures.html#Fix_broken_section_links" title="Help:Procedures">broken link</a>: invalid section]</sup> inside the guest.
</p>
<p>When generating the guests' <code>xorg.conf</code> with <code>X -configure</code>, the InputDevice section may feature the <code>mouse</code> driver. After installing the Guest Additions, replace <code>mouse</code> with <code>vboxmouse</code> and then restart X or reboot the guest.
</p>
<p>Alternatively, add the following to the guest's <code>xorg.conf</code>:
</p>
<pre>Section "InputDevice"
   Identifier   "Mouse0"
   Driver       "vboxmouse"
   Option       "Protocol" "auto"
   Option       "Device" "/dev/input/mice"
   Option       "ZAxisMapping" "4 5 6 7"
EndSection

Section         "ServerLayout"
   Identifier   "X.org Configured"
   Screen     0 "Screen0" 0 0
   InputDevice  "Mouse0" "CorePointer"
   InputDevice  "Keyboard0" "CoreKeyboard"
EndSection
</pre>
<h3><span class="mw-headline" id="Using_full_resolution_of_the_host_system_in_the_guest">Using full resolution of the host system in the guest</span></h3>
<p>Set the resolution of your guest in the grub boot script <code>/boot/grub/menu.lst</code>, i.e. add the correct vga code to the kernel command line. For a resolution of 1280x1024, this would e.g. look like
</p>
<pre># kernel /vmlinuz26 root=/dev/disk/by-uuid/7bdc5dee-8fb0-4260-bc43-60ac6e4e4a54 ro vga=795
</pre>
<p>Add the resolution to <code>/etc/X11/xorg.conf</code>, e.g.
</p>
<pre>Section "Screen"
...
	SubSection "Display"
		Viewport   0 0
		Depth     24
		Modes "1280x1024" "1024x768"
	EndSubSection
...
EndSection
</pre>
<p>If you experience problems with your resolution dropping back to second lower resolution in the 'Modes' setting, simply omit the second resolution. Example 
</p>
<pre>               Modes "1280x1024"
</pre>
<h3><span class="mw-headline" id="Sharing_folders_between_the_host_and_the_guest">Sharing folders between the host and the guest</span></h3>
<p>In the settings of the virtual machine go to shared folders tab and add the folders you want to share.
</p>
<ul><li>NOTE: You need to install Guest Additions in order to use this feature.</li></ul>
<pre>In a Linux host, <i>Devices → Install Guest Additions</i>
Yes (when asked to download the CD image)
Mount (when asked to register and mount)
</pre>
<p>In a Linux host, create one or more folders for sharing files, then set the shared folders via the virtualbox menu (guest window).
</p>
<p>In a Windows guest, starting with VirtualBox 1.5.0, shared folders are browseable and are therefore visible in Windows Explorer. Open Windows Explorer and look for it under <i>My Networking Places → Entire Network → VirtualBox Shared Folders</i>.
</p>
<p>Launch the windows explorer (run explorer command) to browse the network places -&gt; expand with the (+) sign : entire network → VirtualBox shared folders → <b>\\Vboxsvr</b> → then you can now expand all your configured shared folders here, and set up shortcuts for linux folders in the guest filesystem. You can alternatively use the "Add network place wizard", and browse to "VBoxsvr".
</p>
<p>Alternatively, on the Windows command line, you can also use the following:
</p>
<pre>net use x: \\VBOXSVR\sharename
</pre>
<p>While <code>VBOXSVR</code> is a fixed name, replace <code>x:</code> with the drive letter that you want to use for the share, and sharename with the share name specified with VBoxManage.
</p>
<p>In a Windows guest, to improve loading and saving files (e.g. MS Office) by VirtualBox Shared Folders edit <i>c:\windows\system32\drivers\etc\hosts</i> as below:
</p>
<pre>127.0.0.1 localhost vboxsvr
</pre>
<p>In a Linux guest, use the following command:
</p>
<pre># mount -t vboxsf [-o OPTIONS] sharename mountpoint
  (Notes: sharename is optional or same as selected in the VirtualBox-Dialog , mountpoint of the shared directory in the hosts filesystem)
</pre>
<dl><dd>Automatically mounting a shared folder is possible through the linux-guest /etc/fstab file. You may also specify the uid=#,gid=# (where # is replaced by the actual numerical uid and gid) to mount the share with normal user permissions instead of root permissions. (this can be helpful to mount parts of your host ~/home for use in your linux-guest. To do this add an entry in the following format to the linux-guest /etc/fstab:</dd></dl>
<pre>sharename mountpoint vboxsf uid=#,gid=# 0 0
</pre>
<p>Replace <code>sharename</code> with the share name specified with VBoxManage, and mountpoint with the path where you want the share to be mounted (e.g. /mnt/share). The usual mount rules apply, that is, create this directory first if it does not exist yet.
</p>
<p>Beyond the standard options supplied by the mount command, the following are available:
</p>
<pre>iocharset=CHARSET
</pre>
<p>to set the character set used for I/O operations (utf8 by default) and
</p>
<pre>convertcp=CHARSET
</pre>
<p>to specify the character set used for the shared folder name (utf8 by default).
</p>
<h3><span class="mw-headline" id="Getting_audio_to_work_in_the_guest_machine">Getting audio to work in the guest machine</span></h3>
<p>In the machine settings, go to the audio tab and select the correct driver according to your sound system (ALSA, OSS or PulseAudio).
</p>
<h3><span class="mw-headline" id="Setting_up_the_RAM_and_video_memory_for_the_guest">Setting up the RAM and video memory for the guest</span></h3>
<p>You can change the default values by going to <i>Settings → General</i>.
</p>
<h3><span class="mw-headline" id="Setting_up_CD-ROM_for_the_guest">Setting up CD-ROM for the guest</span></h3>
<p>You can change the default values by going to <i>Settings → CD/DVD-ROM</i>.
</p>
<p>Check mount CD/DVD drive and select one of the following options.
</p>
<h3><span class="mw-headline" id="Enabling_D3D_acceleration_in_Windows_guests">Enabling D3D acceleration in Windows guests</span></h3>
<p>Recent versions of Virtualbox have support for accelerating OpenGL inside guests.  This can be enabled with a simple checkbox in the machine's settings, right below where video ram is set, and installing the Virtualbox guest additions.  However, most Windows games use Direct3D (part of DirectX), not OpenGL, and are thus not helped by this method.  However, it is possible to gain accelerated Direct3D in your Windows guests by borrowing the d3d libraries from Wine, which translate d3d calls into OpenGL, which is then accelerated.  
</p>
<p>After enabling OpenGL acceleration as described above, go to <a rel="nofollow" class="external free" href="http://www.nongnu.org/wined3d/">http://www.nongnu.org/wined3d/</a> in your Windows guest and grab the "Latest version (Installer):". Reboot the guest into safe mode (press F8 before the Windows screen appears but after the Virtualbox screen disappears), and install wined3d, accepting the defaults during the install. (You may check the box for DirectX 10 support if you like, dont touch anything else.) Reboot back to normal mode and you should have accelerated Direct3D. 
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong>  This hack may or may not work for some games depending on what hardware checks they make and what parts of D3D they use.</div>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong>  This has only been tried on Windows XP and Windows 7 RC guests AFAIK, and does not work on the Windows 7 guest.  If you have experience with this on a different windows version, please add that data here.</div>
<h2><span class="mw-headline" id="Virtualized_OS_setup">Virtualized OS setup</span></h2>
<p>Virtualbox needs to be setup to virtualize another operating system.
</p>
<h3>
<span id="Test_a_liveCD.2FDVD"></span><span class="mw-headline" id="Test_a_liveCD/DVD">Test a liveCD/DVD</span>
</h3>
<p>Click the 'New' button to create a new virtual environment.  Name it appropriately and select Operating System type and version.  Select base memory size (note: most operating systems will need at least 512MB to function properly).  Create a new hard disk image (a hard disk image is a file that will contain the operating system's filesystem and files).
</p>
<p>When the new image has been created, click 'Settings', then CD/DVD-ROM, check 'Mount CD/DVD Drive' then select an ISO image.
</p>
<h2><span class="mw-headline" id="Maintenance">Maintenance</span></h2>
<h3><span class="mw-headline" id="Rebuild_the_vboxdrv_module">Rebuild the vboxdrv module</span></h3>
<p>Note that any time your kernel version changes (due to an upgrade, recompile, etc.) you must also rebuild the VirtualBox kernel modules.
</p>
<p>Ensure that <i>kernel26-headers</i> is still installed, and run the following command:
</p>
<pre># /etc/rc.d/vboxdrv setup
</pre>
<p>This will build the VirtualBox kernel modules for the <i>currently running kernel</i>; if you have just upgraded your kernel package, reboot before trying to rebuild your kernel modules.
</p>
<p>After rebuilding the module, do not forget to load it with
</p>
<pre># modprobe vboxdrv
</pre>
<p><i>vboxdrv</i> and <i>vboxnetflt</i> should be in the MODULES=() section of your /etc/rc.conf
</p>
<p>If you are using an old virtualbox_bin package built from AUR, run:
</p>
<pre># vbox_build_module
</pre>
<p>If you need to rebuild the Virtual Box Additions in a guest installation of Arch Linux, use this command:
</p>
<pre># /etc/rc.d/rc.vboxadd setup
</pre>
<h3><span class="mw-headline" id="Compact_a_disk_image">Compact a disk image</span></h3>
<p>See <a rel="nofollow" class="external text" href="http://my.opera.com/locksley90/blog/2008/06/01/how-to-compact-a-virtualbox-virtual-disk-image-vdi">How to compact a VirtualBox virtual disk image (VDI)</a>
</p>
<h3><span class="mw-headline" id="Increase_the_size_of_a_virtual_hard_drive_for_a_Windows_guest">Increase the size of a virtual hard drive for a Windows guest</span></h3>
<p>WARNING: ONLY TESTED WITH XP GUEST!
</p>
<p>If you find that you are running out of space due to the small hard drive size you selected when created your VM, you can take the following steps:
</p>
<p>Create a new vdi in ~/.VirtualBox/HardDisks by running:
</p>
<pre># cd ~/.VirtualBox/HardDisks
# VBoxManage createhd -filename new.vdi --size 10000 --remember
</pre>
<p>where size is in mb, in this example 10000MB ~= 10GB, and new.vdi is name of new hard drive to be created.
</p>
<p>Next the old vdi needs to be cloned to the new vdi, this may take some time so wait while it occurs:
</p>
<pre># VBoxManage clonehd old.vdi new.vdi --existing
</pre>
<p>Detach old harddrive and attach new hard drive, replace VMName with whatever you called your VM:
</p>
<pre># VBoxManage modifyvm VMName --hda none
# VBoxManage modifyvm VMName --hda new.vdi
</pre>
<p>Boot the VM, run Partition Wizard 5 to resize the partition on the fly, and reboot.
</p>
<p>Remove old vdi from VirtualBox and delete
</p>
<pre># VBoxManage closemedium disk old.vdi
# rm old.vdi
</pre>
<h3><span class="mw-headline" id="Windows_Xp_and_Nokia_phones">Windows Xp and Nokia phones</span></h3>
<p>To get working Windows XP and Nokia phones with Pc Suite mode, Virtualbox needs two simple steps:
</p>
<p><b>1.</b> Add a rule to udev with <code>/etc/udev/rules.d/40-permissions.rules</code>:
</p>
<pre>LABEL="usb_serial_start"
ATTRS{idVendor}=="0403", ATTRS{idProduct}=="6001", \
GROUP="usbfs", MODE="0660", GROUP="dialout"
LABEL="usb_serial_end"
</pre>
<p><b>2.</b> Create the group usbfs and add its user to it
</p>
<pre>$ sudo groupadd usbfs
$ sudo usermod -a -G usbfs $USER
</pre>
<p>After a logout, connect a Nokia phone with PC Suite mode and start Windows XP to test new rule.
</p>
<h2><span class="mw-headline" id="Migrating_from_another_VM">Migrating from another VM</span></h2>
<p>The <code>qemu-img</code> program can be used to convert images from one format to another, or add compression or encryption to an image. 
</p>
<pre>  # pacman -S qemu
</pre>
<h3><span class="mw-headline" id="Converting_from_QEMU_images">Converting from QEMU images</span></h3>
<p>To convert a QEMU image for use with VirtualBox, first convert it to <i>raw</i> format, then use VirtualBox's conversion utility to convert and compact it in its native format.
</p>
<pre>  $ qemu-img convert -O raw test.qcow2 test.raw
  $ VBoxManage modifyvdi /full/path/to/test.vdi compact
or 
  $ qemu-img convert -O raw test.qcow2 test.raw
    (of course you must have installed qemu package for that)
  $ VBoxManage convertfromraw /full/path/to/test.raw /full/path/to/test.vdi
  $ VBoxManage modifyvdi      /full/path/to/test.vdi compact
</pre>
<h3><span class="mw-headline" id="Converting_from_VMware_images">Converting from VMware images</span></h3>
<p>Do 
</p>
<pre>  $ VBoxManage clonehd source.vmdk target.vdi --format VDI
</pre>
<p>This may not be needed anymore with recent virtualbox versions (to be confirmed)
</p>
<h2><span class="mw-headline" id="Tips_and_tricks">Tips and tricks</span></h2>
<h3><span class="mw-headline" id="Getting_Web-cams_and_other_USB_devices_to_detect">Getting Web-cams and other USB devices to detect</span></h3>
<p>Make sure you filter any devices that are not a keyboard or a mouse so they don't start up at boot and this insures that Windows will detect the device at start-up.
</p>
<h3>
<span id="Sending_a_CTRL.2BALT.2BF1_to_the_Guest"></span><span class="mw-headline" id="Sending_a_CTRL+ALT+F1_to_the_Guest">Sending a CTRL+ALT+F1 to the Guest</span>
</h3>
<p>If your guest O/S is a Linux distro, and you want to open a new tty text shell or exit X via typing <code>Ctrl</code>+<code>Alt</code>+<code>F1</code>, you can easily send this command to the guest O/S simply by hitting your 'Host Key' (usually the <code>Ctrl</code> in the Right side of your keyboard) + <code>F1</code> or <code>F2</code>, etc.
</p>
<h3><span class="mw-headline" id="Starting_VMs_at_system_boot_on_headless_servers">Starting VMs at system boot on headless servers</span></h3>
<p>Add this line to /etc/rc.local
</p>
<pre>exec /bin/su -c 'VBoxManage startvm --type headless &lt;<i>UUID|NAME</i>&gt;' <i>PREFERED_USER</i> &gt;/dev/null 2&gt;&amp;1
</pre>
<p>Where &lt;UUID|NAME&gt; is the guest identifier, and PREFERRED_USER is the user profile that contains the VM definitions and .vdi files.
</p>
<p>To determine the available VMs for a user:
</p>
<pre>su -c 'VBoxManage list vms' PREFERED_USER
</pre>
<p>To save the state of a running VM:
</p>
<pre>su -c 'VBoxManage controlvm &lt;UUID|NAME&gt; savestate' PREFERED_USER
</pre>
<h3><span class="mw-headline" id="Guest_managament_daemon">Guest managament daemon</span></h3>
<p>Below is a <a href="../en/Daemons.html" class="mw-redirect" title="Daemon">daemon</a> for automating guest administration. Guests will be initialized on start, and state-saved on stop.
</p>
<p>The configuration file:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/conf.d/vbox_service</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;"># Guests to manage:
#VB_GUESTS=('OpenBSD' 'Slackware' 'Windows XP')
#
# Disable a guest by prepending a bang:
#VB_GUESTS=('OpenBSD' 'Slackware' !'Windows XP')
#
# Default value matches none:
VB_GUESTS=()

# User to run Virtual Box as:
VB_USER='vbox'
</pre>
<p>The script:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/rc.d/vbox_service</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">#!/bin/bash

. /etc/rc.conf
. /etc/rc.d/functions

unset VB_GUESTS
unset VB_USER
[[ -r /etc/conf.d/vbox_service ]] &amp;&amp; . /etc/conf.d/vbox_service
[[ ${VB_GUESTS[@]} ]] || VB_GUESTS=()
[[ ${VB_USER[@]} ]]   || VB_USER='vbox'

match() {
 [[ $REPLY =~ $1 ]] &amp;&amp; m=("${BASH_REMATCH[@]}")
}

vm_raw() {
 local argv=''
 printf -v argv ' %q ' "$@"
 su -c "/usr/bin/VBoxManage $argv" -s /bin/sh "$VB_USER"
}

vm_ls() {
 local -A out=''
 local -i ret=1

 local m=()
 while read -r; do
   match '^"(.+)" \{(.+)\}$'
   out[${m[1]}]=${m[2]}
 done &lt; &lt;(vm_raw list vms)

 local i=''
 for i in "${VB_GUESTS[@]##!*}"; do
   if [[ ${out[$i]} ]]; then
     printf ' %q ' "${out[$i]}"
     ret=0
   fi
 done

 return $ret
}

vm_envinit() {
 local m=()
 while read -r; do
   match '^(.+)="?([^"]+)'
   env[$1:${m[1]}]=${m[2]}
 done &lt; &lt;(vm_raw showvminfo --machinereadable "$1")
}

start() {
 if [[ ${env[$1:VMState]} != 'running' ]]; then
   vm_raw startvm --type headless "$1"
 fi
}

stop() {
 if [[ ${env[$1:VMState]} == 'running' ]]; then
   vm_raw controlvm "$1" savestate
 fi
}

restart() {
 stop "$1"
 sleep 3
 start "$1"
}

usage() {
 printf '%s\n' "usage: $0 &lt;start|stop|restart&gt; [name|uuid]..." &gt;&amp;2
}

if [[ ! $1 =~ ^(start|stop|restart)$ ]]; then
  usage
  exit 2
fi
cmd=$1
shift || eval set -- "$(vm_ls)"

stat_busy "${cmd^}ing VMs:"
trap 'stat_die' ERR
set -Ee

declare -A env=''

for i; do
  [[ $i ]]
  vm_envinit  "$i"
  stat_append "${env[$i:name]}, "
  $cmd        "${env[$i:UUID]}" &amp;&gt;/dev/null
done

stat_done
</pre>
<h3><span class="mw-headline" id="Accessing_server_on_VM_from_host">Accessing server on VM from host</span></h3>
<div class="noprint archwiki-template-message">
<p><a href="../File:Tango-view-refresh-red.png" class="image"><img alt="Tango-view-refresh-red.png" src="../File:Tango-view-refresh-red.png" decoding="async" width="48" height="48"></a><b>This article or section is out of date.</b><a href="../File:Tango-view-refresh-red.png" class="image"><img alt="Tango-view-refresh-red.png" src="../File:Tango-view-refresh-red.png" decoding="async" width="48" height="48"></a></p>
<div>
<b>Reason:</b> <span style="color:red;">please use the first argument of the template to provide a brief explanation.</span> (Discuss in <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php/Talk:VirtualBox_(%C4%8Cesky)">Talk:VirtualBox (Česky)#</a>)</div>
</div>
<p>To access apache on a VM from the Host machine ONLY, simply execute the following lines on the Host:
</p>
<pre>$ VBoxManage setextradata GuestName "VBoxInternal/Devices/pcnet/0/LUN#0/Config/Apache/HostPort" 8888
$ VBoxManage setextradata GuestName "VBoxInternal/Devices/pcnet/0/LUN#0/Config/Apache/GuestPort" 80
$ VBoxManage setextradata GuestName "VBoxInternal/Devices/pcnet/0/LUN#0/Config/Apache/Protocol" TCP
</pre>
<p>Where 8888 is the port the host should listen on and 80 is the port the VM will send Apache's signal on. 
To use a port lower than 1024 on the host machine changes need to be made to the firewall on the host machine. This can also be set up to work with SSH, etc.. by changing "Apache" to whatever service and using different ports. 
</p>
<p>Note: "pcnet" refers to the network card of the VM. If you use an Intel card in your VM settings change "pcnet" to "e1000"
</p>
<ul><li>from <a rel="nofollow" class="external autonumber" href="http://mydebian.blogdns.org/?p=111">[1]</a>
</li></ul>
<p>It might also be necessary to allow connections from the outside to the server in your VM. E.g. if the guest OS is Arch, you may want to add the line 
</p>
<pre>httpd: ALL
</pre>
<p>to your /etc/hosts.allow file.
</p>
<h3><span class="mw-headline" id="DAEMON_Tools">DAEMON Tools</span></h3>
<p>While VirtualBox can mount ISO images without a problem, there are some image formats which cannot reliably be converted to ISO. For instance, ccd2iso ignores .ccd and .sub files, which can give disk images with broken files. cdemu, fuseiso, and MagicISO will do the same. In this case there is no choice but to use Daemon Tools inside VirtualBox.
</p>
<p>Recent Daemon Tools versions won't install, so use this old one: <a rel="nofollow" class="external autonumber" href="http://www.disc-tools.com/download/daemon347+hashcalc">[2]</a>
</p>
<h3><span class="mw-headline" id="Using_VirtualBox_on_a_USB_key">Using VirtualBox on a USB key</span></h3>
<p>When using VirtualBox on a USB key, for example to start an installed machine with an ISO image, you will manually have to create VDMKs from the existing drives. However, once the new VMDKs are saved and you move on to another machine, you may experience problems launching an appropriate machine again. To get rid of this issue, you can use the following script to launch VirtualBox. This script will clean up and unregister old VMDK files and it will create new, proper VMDKs for you:
</p>
<pre>#!/bin/bash

# Erase old VMDK entries
rm ~/.VirtualBox/*.vmdk

# Clean up VBox-Registry
sed -i '/sd/d' ~/.VirtualBox/VirtualBox.xml

# Remove old harddisks from existing machines
find ~/.VirtualBox/Machines -name \*.xml | while read file; do
  line=`grep -e "type\=\"HardDisk\"" -n $file | cut -d ':' -f 1`
  if [ -n "$line" ]; then
    sed -i ${line}d $file
    sed -i ${line}d $file
    sed -i ${line}d $file
  fi
  sed -i "/rg/d" $file
done

# Delete prev-files created by VirtualBox
find  ~/.VirtualBox/Machines -name \*-prev -exec rm '{}' \;

# Recreate VMDKs
ls -l /dev/disk/by-uuid | cut -d ' ' -f 9,11 | while read ln; do
  if [ -n "$ln" ]; then
    uuid=`echo "$ln" | cut -d ' ' -f 1`
    device=`echo "$ln" | cut -d ' ' -f 2 | cut -d '/' -f 3 | cut -b 1-3`

    # determine whether drive is mounted already
    checkstr1=`mount | grep $uuid`
    checkstr2=`mount | grep $device`
    checkstr3=`ls ~/.VirtualBox/*.vmdk | grep $device`
    if [[ -z "$checkstr1" &amp;&amp; -z "$checkstr2" &amp;&amp; -z "$checkstr3" ]]; then
      VBoxManage internalcommands createrawvmdk -filename ~/.VirtualBox/$device.vmdk -rawdisk /dev/$device -register
    fi
  fi
done

# Start VirtualBox
VirtualBox
</pre>
<p>Note that your user has to be added to the "disk" group to create VMDKs out of existing drives.
</p>
<h3><span class="mw-headline" id="phpVirtualBox">phpVirtualBox</span></h3>
<p>An open source, AJAX implementation of the VirtualBox user interface written in PHP. As a modern web interface, it allows you to access and control remote VirtualBox instances. Much of its verbage and some of its code is based on the (inactive) vboxweb project. It allows the administrator to remotely, graphically, administer their virtual machines without having to log in to their headless VirtualBox servers.
</p>
<p>This requires the PUEL edition for VirtualBox.
</p>
<p>An installation guide is available here:
<a rel="nofollow" class="external free" href="http://code.google.com/p/phpvirtualbox/wiki/Installation">http://code.google.com/p/phpvirtualbox/wiki/Installation</a>
</p>
<p>Arch Linux users should uncomment these 2 extensions in <i>/etc/php/php.ini</i>
</p>
<pre>extension=json.so
extension=soap.so
</pre>
<p>See also <a href="../en/PhpVirtualBox.html" title="PhpVirtualBox">PhpVirtualBox</a>
</p>
<h2><span class="mw-headline" id="External_links">External links</span></h2>
<ul><li><a rel="nofollow" class="external text" href="http://www.virtualbox.org/manual/UserManual.html">VirtualBox User Manual</a></li></ul>
</div>
</div>
<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../cs/Category:Emulation.html" title="Category:Emulation (Česky)">Emulation (Česky)</a></li></ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden categories: <ul>
<li><a href="../en/Category:Pages_or_sections_flagged_with_Template:Translateme.html" title="Category:Pages or sections flagged with Template:Translateme">Pages or sections flagged with Template:Translateme</a></li>
<li><a href="../en/Category:Pages_with_broken_section_links.html" title="Category:Pages with broken section links">Pages with broken section links</a></li>
<li><a href="../en/Category:Pages_or_sections_flagged_with_Template:Out_of_date.html" title="Category:Pages or sections flagged with Template:Out of date">Pages or sections flagged with Template:Out of date</a></li>
</ul>
</div>
</div>
	</div>
</div>

<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
		<li>Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=VirtualBox_(%C4%8Cesky)&amp;oldid=591952">https://wiki.archlinux.org/index.php?title=VirtualBox_(Česky)&amp;oldid=591952</a>"</li>
		<li id="footer-info-lastmod"> This page was last edited on 15 December 2019, at 11:40.</li>
		<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
	<br>
</ul>
	<ul id="footer-places">
		<li id="footer-places-privacy"><a href="../en/ArchWiki:Privacy_policy.html" title="ArchWiki:Privacy policy">Privacy policy</a></li>
		<li id="footer-places-about"><a href="../en/ArchWiki:About.html" title="ArchWiki:About">About ArchWiki</a></li>
		<li id="footer-places-disclaimer"><a href="../en/ArchWiki:General_disclaimer.html" title="ArchWiki:General disclaimer">Disclaimers</a></li>
	</ul>
	<ul id="footer-icons" class="noprint">
		<li id="footer-copyrightico">
	</ul>
	<div style="clear: both;"></div>
</footer>



</body>
</html>
