<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>Pacman (Česky)/Pacnew and Pacsave (Česky) - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.35.0">
<meta name="robots" content="noindex,follow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="http://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Pacman_Česky_Pacnew_and_Pacsave_Česky rootpage-Pacman_Česky skin-vector action-view skin-vector-legacy">
<div id="content" class="mw-body" role="main" style="margin: 0">
	<a id="top"></a>
	<div id="siteNotice" class="mw-body-content"></div>
	<div class="mw-indicators mw-body-content">
	</div>
	<h1 id="firstHeading" class="firstHeading" lang="en">Pacman (Česky)/Pacnew and Pacsave (Česky)</h1>
	<div id="bodyContent" class="mw-body-content">
		<div id="siteSub" class="noprint">From ArchWiki</div>
		<div id="contentSub"><span class="subpages">&lt; <a href="../cs/Pacman.html" title="Pacman (Česky)">Pacman (Česky)</a></span></div>
		<div id="contentSub2"></div>
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="#searchInput">Jump to search</a>
		<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr">
<div class="warningbox">The printable version is no longer supported and may have rendering errors. Please update your browser bookmarks and please use the default browser print function instead.</div>
<div class="mw-parser-output">
<div id="toc" class="toc" role="navigation" aria-labelledby="mw-toc-heading">
<input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none"><div class="toctitle" lang="en" dir="ltr">
<h2 id="mw-toc-heading">Contents</h2>
<span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span>
</div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Na_za%C4%8D%C3%A1tek"><span class="tocnumber">1</span> <span class="toctext">Na začátek</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#backup_soubory_bal%C3%AD%C4%8Dk%C5%AF"><span class="tocnumber">2</span> <span class="toctext">backup soubory balíčků</span></a></li>
<li class="toclevel-1 tocsection-3">
<a href="#Popis_druh%C5%AF"><span class="tocnumber">3</span> <span class="toctext">Popis druhů</span></a>
<ul>
<li class="toclevel-2 tocsection-4"><a href="#.pacnew"><span class="tocnumber">3.1</span> <span class="toctext">.pacnew</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="#.pacsave"><span class="tocnumber">3.2</span> <span class="toctext">.pacsave</span></a></li>
<li class="toclevel-2 tocsection-6"><a href="#.pacorig"><span class="tocnumber">3.3</span> <span class="toctext">.pacorig</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-7"><a href="#Lokalizace_*.pac*_soubor%C5%AF"><span class="tocnumber">4</span> <span class="toctext">Lokalizace *.pac* souborů</span></a></li>
<li class="toclevel-1 tocsection-8"><a href="#N%C3%A1stroje_pro_soubory_.pacnew"><span class="tocnumber">5</span> <span class="toctext">Nástroje pro soubory .pacnew</span></a></li>
<li class="toclevel-1 tocsection-9"><a href="#Zdroje"><span class="tocnumber">6</span> <span class="toctext">Zdroje</span></a></li>
</ul>
</div>

<h2>
<span id="Na_za.C4.8D.C3.A1tek"></span><span class="mw-headline" id="Na_začátek">Na začátek</span>
</h2>
<p>Při upgradech nebo odstraňování balíčků vás <a href="../cs/Pacman.html" title="Pacman (Česky)">Pacman</a> čas od času informuje o souborech (obvykle konfiguračních v <code>/etc</code>), jenž jsou instalovány s příponou <code>.pacnew</code> nebo zálohovány s příponou <code>.pacsave</code>.
</p>
<p>Soubor <code>.pacnew</code> může být vytvořen při upgradu balíčku (<code>pacman -Syu</code>, <code>pacman -Su</code> nebo <code>pacman -U</code>), aby se zamezilo přepsání již existujícího souboru, který byl předtím změněn uživatelem. Když tato situace nastane, ve výstupu pacmanu se objeví zpráva podobná následující:
</p>
<pre>warning: /etc/pam.d/usermod installed as /etc/pam.d/usermod.pacnew
</pre>
<p>Soubor <code>.pacsave</code> může být vytvořen při odstraňování balíčku (<code>pacman -R</code>) nebo jeho upgradu (balíček musí být nejdříve odstraněn). Když má databáze pacmanu záznam o tom, že by měl být jistý soubor vlastněný balíčkem zálohován, vytvoří soubor <code>.pacsave</code>. Když tato situace nastane, pacman zobrazí zprávu podobnou následující:
</p>
<pre>warning: /etc/pam.d/usermod saved as /etc/pam.d/usermod.pacsave
</pre>
<p>Tyto soubory vyžadují ruční zásah uživatele a je dobrým zvykem po každém upgradu nebo odstranění balíčku tuto situaci nějak vyřešit. V opačném případě mohou nesprávné konfigurace vyústit ve špatnou funkci softwaru nebo jeho neschopnost se vůbec spustit.
</p>
<h2>
<span id="backup_soubory_bal.C3.AD.C4.8Dk.C5.AF"></span><span class="mw-headline" id="backup_soubory_balíčků"><code>backup</code> soubory balíčků</span>
</h2>
<p>Soubor <code>PKGBUILD</code> balíčkům určuje, které soubory mají být při upgradu nebo odstranění dotyčného balíčku zachovány nebo zálohovány. Například <code>PKGBUILD</code> pro <code>pulseaudio</code> obsahuje následující řádek:
</p>
<pre>backup=('etc/pulse/client.conf' 'etc/pulse/daemon.conf' 'etc/pulse/default.pa')
</pre>
<h2>
<span id="Popis_druh.C5.AF"></span><span class="mw-headline" id="Popis_druhů">Popis druhů</span>
</h2>
<p>Různé druhy *.pac* souborů.
</p>
<h3><span class="mw-headline" id=".pacnew">.pacnew</span></h3>
<p>Pro každý <code>backup</code> soubor, který je v právě upgradovaném balíčku, pacman vzájemně porovnává tři kontrolní součty MD5 generované z obsahu daného souboru: jeden součet pro verzi nainstalovanou původním balíčkem, jeden pro verzi momentálně sídlící v souborovém systému a jeden pro verzi z nového balíčku. Pokud současná verze ze souborového systému byla v minulosti ručně upravena, pacman nedokáže sloučit tyto změny s novou verzí souboru. Proto při upgradu namísto přepisování změněného souboru pacman uloží novou verzi s příponou <code>.pacnew</code> a ponechá stávající změnenou verzi nedotčenou.
</p>
<p>Pokud zajdeme více do detailů, toto trojcestné srovnání součtů MD5 může skončit s jedním z následujících výsledků:
</p>
<dl>
<dt>původní = <i>X</i>, současný = <i>X</i>, nový = <i>X</i>
</dt>
<dd>Všechny tři verze souboru mají shodný obsah, přepsání tedy není problém. Přepsat současnou verzi novou verzí a neoznamovat nic uživateli. (I když je obsah souboru shodný, toto přepsání zaktualizuje v souborovém systému informace ohledně času instalace, změny a přístupu k souboru. Zajistí též jakoukoliv změnu přístupových práv souboru.)</dd>
</dl>
<dl>
<dt>původní = <i>X</i>, současný = <i>X</i>, nový = <i>Y</i>
</dt>
<dd>Obsah současné verze je shodný s původní, ale nová verze je rozdílná. Jelikož uživatel v minulosti neupravil současnou verzi a nová verze může obsahovat vylepšení nebo opravy, přepsat současnou verzi novou verzí a neoznamovat nic uživateli. Toto je jediné automatické slučování změn, které pacman dokáže vykonávat.</dd>
</dl>
<dl>
<dt>původní = <i>X</i>, současný = <i>Y</i>, nový = <i>X</i>
</dt>
<dd>Původní balíček a nový balíček oba obsahují shodnou verzi souboru, ale verze momentálně sídlící v souborovém systému byla změněna. Ponechat současnou verzi, jak je, a zahodit novou verzi bez oznámení uživateli.</dd>
</dl>
<dl>
<dt>původní = <i>X</i>, současný = <i>Y</i>, nový = <i>Y</i>
</dt>
<dd>Nová verze je shodná se současnou. Přepsat současnou verzi novou verzí a neoznamovat nic uživateli. (I když je obsah souboru shodný, toto přepsání zaktualizuje v souborovém systému informace ohledně času instalace, změny a přístupu k souboru. Zajistí též jakoukoliv změnu přístupových práv souboru.)</dd>
</dl>
<dl>
<dt>původní = <i>X</i>, současný = <i>Y</i>, nový = <i>Z</i>
</dt>
<dd>Všechny tři verze jsou rozdílné. Ponechat současnou verzi, nainstalovat novou verzi s příponou <code>.pacnew</code> a varovat uživatele ohledně nové verze. Od uživatele se očekává, že ručně sloučí jakékoliv nutné změny z nové verze do té současné.</dd>
</dl>
<h3><span class="mw-headline" id=".pacsave">.pacsave</span></h3>
<p>Pokud uživatel změnil některý ze souborů jmenovaných v <code>backup</code>, pak bude k tomuto souboru přidána přípona <code>.pacsave</code> a zůstane v souborovém systému i poté, co bude odstraněn zbytek balíčku.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong>  Použití volby <code>-n</code> spolu s <code>pacman -R</code> způsobí kompletní odstranění <i>všech</i> souborů v zadaném balíčku. Žádné <code>.pacsave</code> soubory tedy vytvořeny nebudou.</div>
<h3><span class="mw-headline" id=".pacorig">.pacorig</span></h3>
<p>Když je při instalaci balíčku spatřen soubor (obvykle nějaká konfigurace v <code>/etc</code>), který nepatří žádnému nainstalovanému balíčku, ale je vypsán v poli <code>backup</code> pro momentálně zpracovávaný balíček, bude uložen s příponou <code>.pacorig</code> a nahrazen verzí z balíčku. To se obvykle stává, když je konfigurační soubor přesunut z jednoho balíčku do jiného. Pokud takový soubor není součástí pole <code>backup</code>, pacman oznámí konflikt souborů a ukončí svoji činnost.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong>  Jelikož <code>.pacorig</code> soubory vznikávají za zvláštních okolností, není pro jejich zpracování žádný jednotný postup. Pokud se o tomto případu ví, obvykle naleznete řešení tohoto konfliktu na <a rel="nofollow" class="external text" href="https://archlinux.org/news/">Arch News</a>.</div>
<h2>
<span id="Lokalizace_.2A.pac.2A_soubor.C5.AF"></span><span class="mw-headline" id="Lokalizace_*.pac*_souborů">Lokalizace *.pac* souborů</span>
</h2>
<p>Arch Linux pro <code>.pacnew</code> soubory neposkytuje žádné oficiální nástroje. Budete je muset řešit sami; několik pomocných nástrojů je předvedeno v následující sekci. Pro ruční řešení budete nejprve muset tyto soubory nalézt. Při upgradu nebo odstraňování velkého počtu balíčků mohou být *.pac* soubory snadno přehlédnuty. Abyste zjistili, zda byly jakékoliv *.pac* vytvořeny:
</p>
<p>Pro jednoduché hledání v místě, kde je uložena většina globálních konfigurací:
</p>
<pre>find /etc -name "*.pac*"
</pre>
<p>nebo na celém disku:
</p>
<pre>find / -name "*.pac*"
</pre>
<p>Případně pro jejich vyhledání použijte logy z pacmana:
</p>
<pre>egrep "pac(new|orig|save)" /var/log/pacman.log
</pre>
<p>Poznámka: z logu přímo nezjistíte, které z těchto souborů jsou momentálně ještě v souborovém systému a které již byly smazány.
</p>
<h2>
<span id="N.C3.A1stroje_pro_soubory_.pacnew"></span><span class="mw-headline" id="Nástroje_pro_soubory_.pacnew">Nástroje pro soubory .pacnew</span>
</h2>
<p>Jakmile máte všechny existující <code>.pacnew</code> soubory lokalizovány, můžete je vyřešit ručně pomocí běžných nástrojů pro slučování, např. <a href="../en/Vim.html#Merging_Files_.28Vimdiff.29" title="Vim">vimdiff (anglicky)</a><sup>[<a href="../en/Help:Procedures.html#Fix_broken_section_links" title="Help:Procedures">broken link</a>: invalid section]</sup>, ediff (součást <a href="../en/Emacs.html#Using_Emacs_as_git_mergetool" title="Emacs">emacs (anglicky)</a>), meld (grafický nástroj pro Gnome) nebo Kompare (grafický nástroj pro KDE). Poté <code>.pacnew</code> soubory smažte.
</p>
<p>V <a href="../cs/Arch_User_Repository.html#.5Bcommunity.5D" class="mw-redirect" title="AUR - uživatelský průvodce (Česky)">repozitáři community</a><sup>[<a href="../en/Help:Procedures.html#Fix_broken_section_links" title="Help:Procedures">broken link</a>: invalid section]</sup> a <a href="../cs/Arch_User_Repository.html#Jak_na_bal.C3.AD.C4.8Dek_z_UNSUPPORTED" class="mw-redirect" title="AUR - uživatelský průvodce (Česky)">uživatelském repozitáři (AUR)</a><sup>[<a href="../en/Help:Procedures.html#Fix_broken_section_links" title="Help:Procedures">broken link</a>: invalid section]</sup> je dostupných několik utilit, které poskytují různou úroveň automatizace těchto úkolů:
</p>
<ul>
<li>
<a href="../en/Pacman/Pacnew_and_Pacsave.html#Managing_.pacnew_files" class="mw-redirect" title="Dotpac">Dotpac</a> - Základní interaktivní skript s textovým rozhraním založeným na ncurses a užitečnou nápovědou. Žádné pomůcky pro ruční ani automatické slučování.</li>
<li>
<code>pacdiff</code> - Velmi minimální a nezdokumentovaný konzolový skript. Je součástí balíčku <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=pacman">pacman</a></span> v repozitáři community.</li>
<li>
<a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages.php?ID=5863">pacdiffviewer</a> - Plnohodnotný interaktivní konzolový skript se schopností automatického slučování. Je součástí balíčku <a href="../en/AUR_helpers.html" class="mw-redirect" title="Yaourt (Česky)">yaourt</a>.</li>
<li>
<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/diffpac/">diffpac</a></span><sup><small>AUR</small></sup><sup>[<a href="../en/Help:Procedures.html#Fix_broken_package_links" title="Help:Procedures">broken link</a>: package not found]</sup> - Samostatná náhražka za pacdiffviewer.</li>
</ul>
<h2><span class="mw-headline" id="Zdroje">Zdroje</span></h2>
<ul><li>Fóra Arch Linuxu: <a rel="nofollow" class="external text" href="https://bbs.archlinux.org/viewtopic.php?id=53532">Dealing With .pacnew Files (anglicky)</a>
</li></ul>
</div>
</div>
<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../cs/Category:Package_management.html" title="Category:Package management (Česky)">Package management (Česky)</a></li></ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden categories: <ul>
<li><a href="../en/Category:Pages_with_broken_section_links.html" title="Category:Pages with broken section links">Pages with broken section links</a></li>
<li><a href="../en/Category:Pages_with_broken_package_links.html" title="Category:Pages with broken package links">Pages with broken package links</a></li>
</ul>
</div>
</div>
	</div>
</div>

<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
		<li>Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Pacman_(%C4%8Cesky)/Pacnew_and_Pacsave_(%C4%8Cesky)&amp;oldid=647003">https://wiki.archlinux.org/index.php?title=Pacman_(Česky)/Pacnew_and_Pacsave_(Česky)&amp;oldid=647003</a>"</li>
		<li id="footer-info-lastmod"> This page was last edited on 26 December 2020, at 12:22.</li>
		<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
	<br>
</ul>
	<ul id="footer-places">
		<li id="footer-places-privacy"><a href="../en/ArchWiki:Privacy_policy.html" title="ArchWiki:Privacy policy">Privacy policy</a></li>
		<li id="footer-places-about"><a href="../en/ArchWiki:About.html" title="ArchWiki:About">About ArchWiki</a></li>
		<li id="footer-places-disclaimer"><a href="../en/ArchWiki:General_disclaimer.html" title="ArchWiki:General disclaimer">Disclaimers</a></li>
	</ul>
	<ul id="footer-icons" class="noprint">
		<li id="footer-copyrightico">
	</ul>
	<div style="clear: both;"></div>
</footer>



</body>
</html>
