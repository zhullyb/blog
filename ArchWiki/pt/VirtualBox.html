<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>VirtualBox (Português) - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.35.0">
<meta name="robots" content="noindex,follow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="http://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-VirtualBox_Português rootpage-VirtualBox_Português skin-vector action-view skin-vector-legacy">
<div id="content" class="mw-body" role="main" style="margin: 0">
	<a id="top"></a>
	<div id="siteNotice" class="mw-body-content"></div>
	<div class="mw-indicators mw-body-content">
	</div>
	<h1 id="firstHeading" class="firstHeading" lang="en">VirtualBox (Português)</h1>
	<div id="bodyContent" class="mw-body-content">
		<div id="siteSub" class="noprint">From ArchWiki</div>
		<div id="contentSub"></div>
		<div id="contentSub2"></div>
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="#searchInput">Jump to search</a>
		<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr">
<div class="warningbox">The printable version is no longer supported and may have rendering errors. Please update your browser bookmarks and please use the default browser print function instead.</div>
<div class="mw-parser-output">
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Status de tradução:</strong> Esse artigo é uma tradução de <a href="../en/VirtualBox.html" title="VirtualBox">VirtualBox</a>. Data da última tradução: 2020-06-23. Você pode ajudar a sincronizar a tradução, se houver <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php?title=VirtualBox&amp;diff=0&amp;oldid=621605">alterações</a> na versão em inglês.</div>
<div class="archwiki-template-meta-related-articles-start">
<p>Artigos relacionados</p>
<ul>
<li><a href="../pt/df076577e384a6acf5f8bb92c2e41474.html" class="mw-redirect" title="VirtualBox/Instalar Arch Linux como convidado">VirtualBox/Instalar Arch Linux como convidado</a></li>
<li><a href="../pt/Category:Hypervisors.html" title="Category:Hypervisors (Português)">Category:Hypervisors (Português)</a></li>
<li><a href="../en/PhpVirtualBox.html" title="PhpVirtualBox">PhpVirtualBox</a></li>
<li><a href="../en/RemoteBox.html" title="RemoteBox">RemoteBox</a></li>
<li><a href="../pt/Moving_an_existing_install_into_(or_out_of)_a_virtual_machine.html" class="mw-redirect" title="Movendo uma instalação existente para dentro (ou fora) de uma máquina virtual">Movendo uma instalação existente para dentro (ou fora) de uma máquina virtual</a></li>
</ul>
</div>
<p><a rel="nofollow" class="external text" href="https://www.virtualbox.org">VirtualBox</a> é um <a href="https://en.wikipedia.org/wiki/pt:Hipervisor" class="extiw" title="wikipedia:pt:Hipervisor">hipervisor</a> usado para executar sistemas operacionais em um ambiente especial, chamado de máquina virtual, sobre o sistema operacional existente. O VirtualBox está em constante desenvolvimento e novos recursos são implementados continuamente. Ele vem com uma interface GUI <a href="../en/Qt.html" title="Qt">Qt</a>, além de ferramentas de linha de comando <a href="https://en.wikipedia.org/wiki/pt:SDL_(biblioteca)" class="extiw" title="wikipedia:pt:SDL (biblioteca)">SDL</a> para gerenciar e executar máquinas virtuais.
</p>
<p>A fim de integrar funções do sistema hospedeiro aos convidados, incluindo pastas compartilhadas e área de transferência, aceleração de vídeo e um modo de integração de janela transparente, os "adicionais para convidado" (<i>guest additions</i>) são fornecidos para alguns sistemas operacionais convidados.
</p>
<div id="toc" class="toc" role="navigation" aria-labelledby="mw-toc-heading">
<input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none"><div class="toctitle" lang="en" dir="ltr">
<h2 id="mw-toc-heading">Contents</h2>
<span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span>
</div>
<ul>
<li class="toclevel-1 tocsection-1">
<a href="#Etapas_de_instala%C3%A7%C3%A3o_para_hospedeiros_Arch_Linux"><span class="tocnumber">1</span> <span class="toctext">Etapas de instalação para hospedeiros Arch Linux</span></a>
<ul>
<li class="toclevel-2 tocsection-2"><a href="#Instalar_os_pacotes_principais"><span class="tocnumber">1.1</span> <span class="toctext">Instalar os pacotes principais</span></a></li>
<li class="toclevel-2 tocsection-3"><a href="#Assinar_m%C3%B3dulos"><span class="tocnumber">1.2</span> <span class="toctext">Assinar módulos</span></a></li>
<li class="toclevel-2 tocsection-4"><a href="#Carregar_os_m%C3%B3dulos_de_kernel_do_VirtualBox"><span class="tocnumber">1.3</span> <span class="toctext">Carregar os módulos de kernel do VirtualBox</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="#Acessando_dispositivos_USB_do_hospedeiro_no_convidado"><span class="tocnumber">1.4</span> <span class="toctext">Acessando dispositivos USB do hospedeiro no convidado</span></a></li>
<li class="toclevel-2 tocsection-6"><a href="#Disco_de_adicionais_para_convidado"><span class="tocnumber">1.5</span> <span class="toctext">Disco de adicionais para convidado</span></a></li>
<li class="toclevel-2 tocsection-7"><a href="#Pacote_de_extens%C3%B5es"><span class="tocnumber">1.6</span> <span class="toctext">Pacote de extensões</span></a></li>
<li class="toclevel-2 tocsection-8"><a href="#Front-ends"><span class="tocnumber">1.7</span> <span class="toctext">Front-ends</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-9"><a href="#Etapas_de_instala%C3%A7%C3%A3o_para_convidados_Arch_Linux"><span class="tocnumber">2</span> <span class="toctext">Etapas de instalação para convidados Arch Linux</span></a></li>
<li class="toclevel-1 tocsection-10">
<a href="#Gerenciamento_de_discos_virtuais"><span class="tocnumber">3</span> <span class="toctext">Gerenciamento de discos virtuais</span></a>
<ul>
<li class="toclevel-2 tocsection-11"><a href="#Formatos_suportados_pelo_VirtualBox"><span class="tocnumber">3.1</span> <span class="toctext">Formatos suportados pelo VirtualBox</span></a></li>
<li class="toclevel-2 tocsection-12">
<a href="#Convers%C3%A3o_de_formato_de_imagem_de_disco"><span class="tocnumber">3.2</span> <span class="toctext">Conversão de formato de imagem de disco</span></a>
<ul>
<li class="toclevel-3 tocsection-13"><a href="#QCOW"><span class="tocnumber">3.2.1</span> <span class="toctext">QCOW</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-14">
<a href="#Montar_discos_virtuais"><span class="tocnumber">3.3</span> <span class="toctext">Montar discos virtuais</span></a>
<ul>
<li class="toclevel-3 tocsection-15"><a href="#VDI"><span class="tocnumber">3.3.1</span> <span class="toctext">VDI</span></a></li>
<li class="toclevel-3 tocsection-16"><a href="#VHD"><span class="tocnumber">3.3.2</span> <span class="toctext">VHD</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-17"><a href="#Compactar_discos_virtuais"><span class="tocnumber">3.4</span> <span class="toctext">Compactar discos virtuais</span></a></li>
<li class="toclevel-2 tocsection-18">
<a href="#Aumentar_discos_virtuais"><span class="tocnumber">3.5</span> <span class="toctext">Aumentar discos virtuais</span></a>
<ul>
<li class="toclevel-3 tocsection-19"><a href="#Procedimento_geral"><span class="tocnumber">3.5.1</span> <span class="toctext">Procedimento geral</span></a></li>
<li class="toclevel-3 tocsection-20"><a href="#Aumentando_o_tamanho_de_discos_VDI"><span class="tocnumber">3.5.2</span> <span class="toctext">Aumentando o tamanho de discos VDI</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-21">
<a href="#Substituir_um_disco_virtual_manualmente_a_partir_do_arquivo_.vbox"><span class="tocnumber">3.6</span> <span class="toctext">Substituir um disco virtual manualmente a partir do arquivo .vbox</span></a>
<ul>
<li class="toclevel-3 tocsection-22"><a href="#Transferir_entre_hospedeiro_Linux_e_outro_SO"><span class="tocnumber">3.6.1</span> <span class="toctext">Transferir entre hospedeiro Linux e outro SO</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-23"><a href="#Clonar_um_disco_virtual_e_atribui%C3%A7%C3%A3o_de_um_novo_UUID_a_ele"><span class="tocnumber">3.7</span> <span class="toctext">Clonar um disco virtual e atribuição de um novo UUID a ele</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-24">
<a href="#Dicas_e_truques"><span class="tocnumber">4</span> <span class="toctext">Dicas e truques</span></a>
<ul>
<li class="toclevel-2 tocsection-25">
<a href="#Importar/exportar_m%C3%A1quinas_virtuais_do_VirtualBox_de/para_outros_hipervisores"><span class="tocnumber">4.1</span> <span class="toctext">Importar/exportar máquinas virtuais do VirtualBox de/para outros hipervisores</span></a>
<ul>
<li class="toclevel-3 tocsection-26"><a href="#Remover_adicionais"><span class="tocnumber">4.1.1</span> <span class="toctext">Remover adicionais</span></a></li>
<li class="toclevel-3 tocsection-27">
<a href="#Usar_o_formato_de_disco_virtual_correto"><span class="tocnumber">4.1.2</span> <span class="toctext">Usar o formato de disco virtual correto</span></a>
<ul>
<li class="toclevel-4 tocsection-28"><a href="#Ferramentas_autom%C3%A1ticas"><span class="tocnumber">4.1.2.1</span> <span class="toctext">Ferramentas automáticas</span></a></li>
<li class="toclevel-4 tocsection-29"><a href="#Convers%C3%A3o_manual"><span class="tocnumber">4.1.2.2</span> <span class="toctext">Conversão manual</span></a></li>
</ul>
</li>
<li class="toclevel-3 tocsection-30"><a href="#Criar_a_configura%C3%A7%C3%A3o_VM_para_seu_hipervisor"><span class="tocnumber">4.1.3</span> <span class="toctext">Criar a configuração VM para seu hipervisor</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-31">
<a href="#Gerenciamento_de_lan%C3%A7amento_de_m%C3%A1quina_virtual"><span class="tocnumber">4.2</span> <span class="toctext">Gerenciamento de lançamento de máquina virtual</span></a>
<ul>
<li class="toclevel-3 tocsection-32"><a href="#Iniciando_m%C3%A1quinas_virtuais_com_um_servi%C3%A7o_(inicializa%C3%A7%C3%A3o_autom%C3%A1tica)"><span class="tocnumber">4.2.1</span> <span class="toctext">Iniciando máquinas virtuais com um serviço (inicialização automática)</span></a></li>
<li class="toclevel-3 tocsection-33"><a href="#Iniciando_m%C3%A1quinas_virtuais_com_um_atalho_de_teclado"><span class="tocnumber">4.2.2</span> <span class="toctext">Iniciando máquinas virtuais com um atalho de teclado</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-34">
<a href="#Usar_dispositivo_espec%C3%ADfico_na_m%C3%A1quina_virtual"><span class="tocnumber">4.3</span> <span class="toctext">Usar dispositivo específico na máquina virtual</span></a>
<ul>
<li class="toclevel-3 tocsection-35"><a href="#Usando_webcam_/_microfone_USB"><span class="tocnumber">4.3.1</span> <span class="toctext">Usando webcam / microfone USB</span></a></li>
<li class="toclevel-3 tocsection-36"><a href="#Detectando_webcams_e_outros_dispositivos_USB"><span class="tocnumber">4.3.2</span> <span class="toctext">Detectando webcams e outros dispositivos USB</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-37"><a href="#Acessar_um_servidor_convidado"><span class="tocnumber">4.4</span> <span class="toctext">Acessar um servidor convidado</span></a></li>
<li class="toclevel-2 tocsection-38"><a href="#Acelera%C3%A7%C3%A3o_D3D_em_convidados_Windows"><span class="tocnumber">4.5</span> <span class="toctext">Aceleração D3D em convidados Windows</span></a></li>
<li class="toclevel-2 tocsection-39"><a href="#VirtualBox_em_um_teclado_USB"><span class="tocnumber">4.6</span> <span class="toctext">VirtualBox em um teclado USB</span></a></li>
<li class="toclevel-2 tocsection-40">
<a href="#Executar_uma_instala%C3%A7%C3%A3o_nativa_do_Arch_Linux_no_VirtualBox"><span class="tocnumber">4.7</span> <span class="toctext">Executar uma instalação nativa do Arch Linux no VirtualBox</span></a>
<ul>
<li class="toclevel-3 tocsection-41"><a href="#Verificar_se_voc%C3%AA_tem_um_esquema_de_nomea%C3%A7%C3%A3o_persistente"><span class="tocnumber">4.7.1</span> <span class="toctext">Verificar se você tem um esquema de nomeação persistente</span></a></li>
<li class="toclevel-3 tocsection-42"><a href="#Verificar_se_a_imagem_do_seu_mkinitcpio_est%C3%A1_correta"><span class="tocnumber">4.7.2</span> <span class="toctext">Verificar se a imagem do seu mkinitcpio está correta</span></a></li>
<li class="toclevel-3 tocsection-43">
<a href="#Criar_uma_configura%C3%A7%C3%A3o_de_VM_para_inicializar_a_partir_da_unidade_f%C3%ADsica"><span class="tocnumber">4.7.3</span> <span class="toctext">Criar uma configuração de VM para inicializar a partir da unidade física</span></a>
<ul>
<li class="toclevel-4 tocsection-44"><a href="#Criar_uma_imagem_.vmdk_de_disco_raw"><span class="tocnumber">4.7.3.1</span> <span class="toctext">Criar uma imagem .vmdk de disco raw</span></a></li>
<li class="toclevel-4 tocsection-45"><a href="#Criar_o_arquivo_de_configura%C3%A7%C3%A3o_da_VM"><span class="tocnumber">4.7.3.2</span> <span class="toctext">Criar o arquivo de configuração da VM</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-2 tocsection-46"><a href="#Instalar_um_sistema_Arch_Linux_nativo_a_partir_do_VirtualBox"><span class="tocnumber">4.8</span> <span class="toctext">Instalar um sistema Arch Linux nativo a partir do VirtualBox</span></a></li>
<li class="toclevel-2 tocsection-47">
<a href="#Instalar_convidado_MacOS"><span class="tocnumber">4.9</span> <span class="toctext">Instalar convidado MacOS</span></a>
<ul>
<li class="toclevel-3 tocsection-48"><a href="#Nenhuma_entrada_do_teclado/mouse_ao_iniciar_a_instala%C3%A7%C3%A3o_do_Mojave"><span class="tocnumber">4.9.1</span> <span class="toctext">Nenhuma entrada do teclado/mouse ao iniciar a instalação do Mojave</span></a></li>
<li class="toclevel-3 tocsection-49"><a href="#Shell_interativo_UEFI_ap%C3%B3s_reiniciar"><span class="tocnumber">4.9.2</span> <span class="toctext">Shell interativo UEFI após reiniciar</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-50">
<a href="#Mover_uma_instala%C3%A7%C3%A3o_nativa_do_Windows_para_uma_m%C3%A1quina_virtual"><span class="tocnumber">4.10</span> <span class="toctext">Mover uma instalação nativa do Windows para uma máquina virtual</span></a>
<ul>
<li class="toclevel-3 tocsection-51"><a href="#Tarefas_no_Windows"><span class="tocnumber">4.10.1</span> <span class="toctext">Tarefas no Windows</span></a></li>
<li class="toclevel-3 tocsection-52"><a href="#Usando_Disk2vhd_para_clonar_parti%C3%A7%C3%A3o_do_Windows"><span class="tocnumber">4.10.2</span> <span class="toctext">Usando Disk2vhd para clonar partição do Windows</span></a></li>
<li class="toclevel-3 tocsection-53"><a href="#Tarefas_no_GNU/Linux"><span class="tocnumber">4.10.3</span> <span class="toctext">Tarefas no GNU/Linux</span></a></li>
<li class="toclevel-3 tocsection-54"><a href="#Corrigir_MBR_e_gerenciador_de_boot_da_Microsoft"><span class="tocnumber">4.10.4</span> <span class="toctext">Corrigir MBR e gerenciador de boot  da Microsoft</span></a></li>
<li class="toclevel-3 tocsection-55"><a href="#Limita%C3%A7%C3%B5es_conhecidas"><span class="tocnumber">4.10.5</span> <span class="toctext">Limitações conhecidas</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-56">
<a href="#Executar_uma_parti%C3%A7%C3%A3o_do_Windows_no_VirtualBox"><span class="tocnumber">4.11</span> <span class="toctext">Executar uma partição do Windows no VirtualBox</span></a>
<ul>
<li class="toclevel-3 tocsection-57"><a href="#Configurar_o_udev_para_fornecer_ao_VirtualBox_acesso_de_raw_%C3%A0s_parti%C3%A7%C3%B5es_do_Windows"><span class="tocnumber">4.11.1</span> <span class="toctext">Configurar o udev para fornecer ao VirtualBox acesso de raw às partições do Windows</span></a></li>
<li class="toclevel-3 tocsection-58">
<a href="#Configura%C3%A7%C3%A3o_do_VirtualBox"><span class="tocnumber">4.11.2</span> <span class="toctext">Configuração do VirtualBox</span></a>
<ul>
<li class="toclevel-4 tocsection-59"><a href="#Criar_arquivos_de_imagem_de_disco_virtual"><span class="tocnumber">4.11.2.1</span> <span class="toctext">Criar arquivos de imagem de disco virtual</span></a></li>
<li class="toclevel-4 tocsection-60">
<a href="#Anexar_imagens_de_disco_virtual_%C3%A0_VM"><span class="tocnumber">4.11.2.2</span> <span class="toctext">Anexar imagens de disco virtual à VM</span></a>
<ul>
<li class="toclevel-5 tocsection-61"><a href="#Configura%C3%A7%C3%A3o_de_permiss%C3%B5es_do_sistema_de_arquivos_com_seguran%C3%A7a_mais_alta"><span class="tocnumber">4.11.2.2.1</span> <span class="toctext">Configuração de permissões do sistema de arquivos com segurança mais alta</span></a></li>
<li class="toclevel-5 tocsection-62"><a href="#Configura%C3%A7%C3%A3o_de_permiss%C3%B5es_do_sistema_de_arquivos_com_seguran%C3%A7a_mais_baixa"><span class="tocnumber">4.11.2.2.2</span> <span class="toctext">Configuração de permissões do sistema de arquivos com segurança mais baixa</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-3 tocsection-63"><a href="#Configurar_uma_ESP_separada_no_VirtualBox"><span class="tocnumber">4.11.3</span> <span class="toctext">Configurar uma ESP separada no VirtualBox</span></a></li>
<li class="toclevel-3 tocsection-64"><a href="#Configurar_o_firmware_UEFI_virtual_para_usar_o_gerenciador_de_boot_do_Windows"><span class="tocnumber">4.11.4</span> <span class="toctext">Configurar o firmware UEFI virtual para usar o gerenciador de boot do Windows</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-65"><a href="#Executar_um_disco_totalmente_f%C3%ADsico_no_Virtualbox"><span class="tocnumber">4.12</span> <span class="toctext">Executar um disco totalmente físico no Virtualbox</span></a></li>
<li class="toclevel-2 tocsection-66"><a href="#Definir_a_resolu%C3%A7%C3%A3o_inicial_do_convidado"><span class="tocnumber">4.13</span> <span class="toctext">Definir a resolução inicial do convidado</span></a></li>
<li class="toclevel-2 tocsection-67">
<a href="#SSH_do_hospedeiro_para_o_convidado"><span class="tocnumber">4.14</span> <span class="toctext">SSH do hospedeiro para o convidado</span></a>
<ul>
<li class="toclevel-3 tocsection-68"><a href="#SSHFS_como_alternativa_%C3%A0_pasta_compartilhada"><span class="tocnumber">4.14.1</span> <span class="toctext">SSHFS como alternativa à pasta compartilhada</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1 tocsection-69">
<a href="#Solu%C3%A7%C3%A3o_de_problemas"><span class="tocnumber">5</span> <span class="toctext">Solução de problemas</span></a>
<ul>
<li class="toclevel-2 tocsection-70"><a href="#Teclado_e_mouse_est%C3%A3o_travados_na_m%C3%A1quina_virtual"><span class="tocnumber">5.1</span> <span class="toctext">Teclado e mouse estão travados na máquina virtual</span></a></li>
<li class="toclevel-2 tocsection-71"><a href="#Nenhuma_op%C3%A7%C3%A3o_para_cliente_de_SO_64_bits"><span class="tocnumber">5.2</span> <span class="toctext">Nenhuma opção para cliente de SO 64 bits</span></a></li>
<li class="toclevel-2 tocsection-72"><a href="#VirtualBox_GUI_n%C3%A3o_corresponde_ao_tema_GTK_do_hospedeiro"><span class="tocnumber">5.3</span> <span class="toctext">VirtualBox GUI não corresponde ao tema GTK do hospedeiro</span></a></li>
<li class="toclevel-2 tocsection-73"><a href="#N%C3%A3o_%C3%A9_poss%C3%ADvel_enviar_Ctrl+Alt+Fn_para_o_convidado"><span class="tocnumber">5.4</span> <span class="toctext">Não é possível enviar Ctrl+Alt+Fn para o convidado</span></a></li>
<li class="toclevel-2 tocsection-74"><a href="#Subsistema_USB_n%C3%A3o_funciona"><span class="tocnumber">5.5</span> <span class="toctext">Subsistema USB não funciona</span></a></li>
<li class="toclevel-2 tocsection-75"><a href="#Modem_USB_n%C3%A3o_funciona_no_hospedeiro"><span class="tocnumber">5.6</span> <span class="toctext">Modem USB não funciona no hospedeiro</span></a></li>
<li class="toclevel-2 tocsection-76"><a href="#Dispositivo_USB_trava_o_convidado"><span class="tocnumber">5.7</span> <span class="toctext">Dispositivo USB trava o convidado</span></a></li>
<li class="toclevel-2 tocsection-77"><a href="#Hospedeiro_trava_ao_iniciar_m%C3%A1quina_virtual"><span class="tocnumber">5.8</span> <span class="toctext">Hospedeiro trava ao iniciar máquina virtual</span></a></li>
<li class="toclevel-2 tocsection-78"><a href="#Microfone_anal%C3%B3gico_n%C3%A3o_funciona"><span class="tocnumber">5.9</span> <span class="toctext">Microfone analógico não funciona</span></a></li>
<li class="toclevel-2 tocsection-79"><a href="#Microfone_n%C3%A3o_funciona_ap%C3%B3s_atualiza%C3%A7%C3%A3o"><span class="tocnumber">5.10</span> <span class="toctext">Microfone não funciona após atualização</span></a></li>
<li class="toclevel-2 tocsection-80"><a href="#Problemas_com_imagens_convertidas_para_ISO"><span class="tocnumber">5.11</span> <span class="toctext">Problemas com imagens convertidas para ISO</span></a></li>
<li class="toclevel-2 tocsection-81"><a href="#Falha_ao_criar_a_interface_de_rede_interna"><span class="tocnumber">5.12</span> <span class="toctext">Falha ao criar a interface de rede interna</span></a></li>
<li class="toclevel-2 tocsection-82"><a href="#Falha_ao_inserir_m%C3%B3dulo"><span class="tocnumber">5.13</span> <span class="toctext">Falha ao inserir módulo</span></a></li>
<li class="toclevel-2 tocsection-83"><a href="#VBOX_E_INVALID_OBJECT_STATE_(0x80BB0007)"><span class="tocnumber">5.14</span> <span class="toctext">VBOX_E_INVALID_OBJECT_STATE (0x80BB0007)</span></a></li>
<li class="toclevel-2 tocsection-84"><a href="#NS_ERROR_FAILURE_e_itens_de_menu_em_falta"><span class="tocnumber">5.15</span> <span class="toctext">NS_ERROR_FAILURE e itens de menu em falta</span></a></li>
<li class="toclevel-2 tocsection-85"><a href="#OpenBSD_inutiliz%C3%A1vel_quando_instru%C3%A7%C3%B5es_de_virtualiza%C3%A7%C3%A3o_est%C3%A3o_indispon%C3%ADveis"><span class="tocnumber">5.16</span> <span class="toctext">OpenBSD inutilizável quando instruções de virtualização estão indisponíveis</span></a></li>
<li class="toclevel-2 tocsection-86"><a href="#Windows:_%22O_caminho_especificado_n%C3%A3o_existe._Verifique_o_caminho_e_tente_novamente.%22"><span class="tocnumber">5.17</span> <span class="toctext">Windows: "O caminho especificado não existe. Verifique o caminho e tente novamente."</span></a></li>
<li class="toclevel-2 tocsection-87"><a href="#Erro_no_Windows_8.x_com_c%C3%B3digo_0x000000C4"><span class="tocnumber">5.18</span> <span class="toctext">Erro no Windows 8.x com código 0x000000C4</span></a></li>
<li class="toclevel-2 tocsection-88"><a href="#Windows_8,_8.1_ou_10_falha_em_instalar,_inicializar_ou_tem_erro_%22ERR_DISK_FULL%22"><span class="tocnumber">5.19</span> <span class="toctext">Windows 8, 8.1 ou 10 falha em instalar, inicializar ou tem erro "ERR_DISK_FULL"</span></a></li>
<li class="toclevel-2 tocsection-89"><a href="#WinXP:_Profundidade_de_bits_n%C3%A3o_pode_ser_maior_que_16"><span class="tocnumber">5.20</span> <span class="toctext">WinXP: Profundidade de bits não pode ser maior que 16</span></a></li>
<li class="toclevel-2 tocsection-90"><a href="#Windows:_Oscila%C3%A7%C3%A3o_da_tela_se_a_acelera%C3%A7%C3%A3o_3D_estiver_ativada"><span class="tocnumber">5.21</span> <span class="toctext">Windows: Oscilação da tela se a aceleração 3D estiver ativada</span></a></li>
<li class="toclevel-2 tocsection-91"><a href="#N%C3%A3o_%C3%A9_poss%C3%ADvel_iniciar_o_VirtualBox_com_Wayland:_Falha_de_segmenta%C3%A7%C3%A3o"><span class="tocnumber">5.22</span> <span class="toctext">Não é possível iniciar o VirtualBox com Wayland: Falha de segmentação</span></a></li>
<li class="toclevel-2 tocsection-92"><a href="#Congelamento_aleat%C3%B3rio_em_convidados_com_placa_de_v%C3%ADdeo_da_intel"><span class="tocnumber">5.23</span> <span class="toctext">Congelamento aleatório em convidados com placa de vídeo da intel</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-93"><a href="#Veja_tamb%C3%A9m"><span class="tocnumber">6</span> <span class="toctext">Veja também</span></a></li>
</ul>
</div>

<h2>
<span id="Etapas_de_instala.C3.A7.C3.A3o_para_hospedeiros_Arch_Linux"></span><span class="mw-headline" id="Etapas_de_instalação_para_hospedeiros_Arch_Linux">Etapas de instalação para hospedeiros Arch Linux</span>
</h2>
<p>Para iniciar as máquinas virtuais do VirtualBox na sua caixa Arch Linux, siga estas etapas de instalação.
</p>
<h3><span class="mw-headline" id="Instalar_os_pacotes_principais">Instalar os pacotes principais</span></h3>
<p><a href="../pt/Help:Reading.html#Instala%C3%A7%C3%A3o_de_pacotes" class="mw-redirect" title="Instale">Instale</a> o pacote <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=virtualbox">virtualbox</a></span>. Você precisará escolher um pacote para fornecer os módulos de hospedeiro:
</p>
<ul>
<li>para o kernel <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=linux">linux</a></span>, escolha <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=virtualbox-host-modules-arch">virtualbox-host-modules-arch</a></span>
</li>
<li>para outros <a href="../pt/Kernel.html" class="mw-redirect" title="Kernels (Português)">kernels</a>, escolha <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=virtualbox-host-dkms">virtualbox-host-dkms</a></span>
</li>
</ul>
<p>Para compilar os módulos do VirtualBox fornecidos pelo <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=virtualbox-host-dkms">virtualbox-host-dkms</a></span>, também será necessário instalar o(s) pacote(s) apropriado(s) para o(s) seu(s) kernel(s) instalado(s) (p.ex., <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=linux-lts-headers">linux-lts-headers</a></span> para <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=linux-lts">linux-lts</a></span>). <a rel="nofollow" class="external autonumber" href="https://lists.archlinux.org/pipermail/arch-dev-public/2016-March/027808.html">[1]</a> Quando o VirtualBox ou o kernel é atualizado, os módulos do kernel serão recompilados automaticamente graças ao hook do pacman de <a href="../pt/Dynamic_Kernel_Module_Support.html" class="mw-redirect" title="DKMS (Português)">DKMS</a>.
</p>
<h3>
<span id="Assinar_m.C3.B3dulos"></span><span class="mw-headline" id="Assinar_módulos">Assinar módulos</span>
</h3>
<p>Ao usar um kernel personalizado com a opção <code>CONFIG_MODULE_SIG_FORCE</code> ativada, você deve assinar seus módulos com uma chave gerada durante a compilação do kernel.
</p>
<p>Navegue até a pasta da árvore do kernel e execute o seguinte comando:
</p>
<pre># for module in `ls /lib/modules/$(uname -r)/kernel/misc/{vboxdrv.ko,vboxnetadp.ko,vboxnetflt.ko,vboxpci.ko}` ; do ./scripts/sign-file sha1 certs/signing_key.pem certs/signing_key.x509 $module ; done
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> O algoritmo de hashing não precisa corresponder ao configurado, mas deve ser integrado ao kernel.</div>
<h3>
<span id="Carregar_os_m.C3.B3dulos_de_kernel_do_VirtualBox"></span><span class="mw-headline" id="Carregar_os_módulos_de_kernel_do_VirtualBox">Carregar os módulos de kernel do VirtualBox</span>
</h3>
<p><span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=virtualbox-host-modules-arch">virtualbox-host-modules-arch</a></span> e <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=virtualbox-host-dkms">virtualbox-host-dkms</a></span> usam <code>systemd-modules-load.service</code> para carregar módulos do VirtualBox automaticamente no momento da inicialização. Para que os módulos sejam carregados após a instalação, reinicie ou carregue os módulos uma vez manualmente; a lista de módulos pode ser encontrada em <code>/usr/lib/modules-load.d/virtualbox-host-modules-arch.conf</code> ou <code>/usr/lib/modules-load.d/virtualbox-host-dkms.conf</code>.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> Se você não quer que os módulos do VirtualBox sejam carregados automaticamente no momento da inicialização, você tem que usar <a href="../pt/Systemd.html#Usando_units" class="mw-redirect" title="Mask (Português)">mask</a> para mascarar o padrão <code>/usr/lib/modules-load.d/virtualbox-host-modules-arch.conf</code> (ou <code>/usr/lib/modules-load.d/virtualbox-host-dkms.conf</code>) criando um arquivo vazio (ou um link simbólico para <code>/dev/null</code>) com o mesmo nome em <code>/etc/modules-load.d/</code>.</div>
<p>Dentre os <a href="../pt/Kernel_module.html" class="mw-redirect" title="Módulos de kernel">módulos de kernel</a> que o VirtualBox usa, existe um módulo obrigatório chamado <code>vboxdrv</code>, que deve ser carregado antes que qualquer máquina virtual possa ser executada.
</p>
<p>Para carregar o módulo manualmente, executar:
</p>
<pre># modprobe vboxdrv
</pre>
<p>Os seguintes módulos são necessários somente em configurações avançadas:
</p>
<ul><li>
<code>vboxnetadp</code> e <code>vboxnetflt</code> são necessários quando você pretende usar os recursos de <a rel="nofollow" class="external text" href="https://www.virtualbox.org/manual/ch06.html#network_bridged">conexão em modo Bridge</a> ou <a rel="nofollow" class="external text" href="https://www.virtualbox.org/manual/ch06.html#network_hostonly">Rede Interna</a>. Mais precisamente, o <code>vboxnetadp</code> é necessário para criar a interface do hospedeiro nas preferências globais do VirtualBox, e <code>vboxnetflt</code> é necessário para iniciar uma máquina virtual usando essa interface de rede.</li></ul>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> Se os módulos do kernel do VirtualBox foram carregados no kernel enquanto você atualizou os módulos, você precisa recarregá-los manualmente para usar a nova versão atualizada. Para fazer isso, execute <code>vboxreload</code> como root.</div>
<h3><span class="mw-headline" id="Acessando_dispositivos_USB_do_hospedeiro_no_convidado">Acessando dispositivos USB do hospedeiro no convidado</span></h3>
<p>Para usar as portas USB de sua máquina do hospedeiro em suas máquinas virtuais, adicione usuários que serão autorizados a usar esse recurso para o <a href="../pt/Users_and_groups.html#Gerenciamento_de_grupo" class="mw-redirect" title="Grupo de usuários">grupo de usuários</a> <code>vboxusers</code>.
</p>
<h3><span class="mw-headline" id="Disco_de_adicionais_para_convidado">Disco de adicionais para convidado</span></h3>
<p>Também é recomendado instalar o pacote <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=virtualbox-guest-iso">virtualbox-guest-iso</a></span> no hospedeiro executando o VirtualBox. Este pacote funcionará como uma imagem de disco que pode ser usada para instalar os adicionais para convidado em sistemas convidados que não sejam o Arch Linux. O arquivo <i>.iso</i> estará localizado em <code>/usr/lib/virtualbox/additions/VBoxGuestAdditions.iso</code>, e pode ter que ser montado manualmente dentro da máquina virtual. Uma vez montado, você pode executar o instalador de adicionais para convidado dentro da máquina convidado.
</p>
<h3>
<span id="Pacote_de_extens.C3.B5es"></span><span class="mw-headline" id="Pacote_de_extensões">Pacote de extensões</span>
</h3>
<p>O Oracle Extension Pack fornece <a rel="nofollow" class="external text" href="https://www.virtualbox.org/manual/ch01.html#intro-installing">funcionalidades adicionais</a> e é lançado sob uma licença não-livre <b>disponível apenas para uso pessoal</b>. Para instalá-lo, o pacote <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/virtualbox-ext-oracle/">virtualbox-ext-oracle</a></span><sup><small>AUR</small></sup> está disponível, e uma versão pré-compilada pode ser encontrada no repositório <a href="../en/Unofficial_user_repositories.html#seblu" title="Unofficial user repositories">seblu</a>.
</p>
<p>Se você preferir usar o modo tradicional e manual: baixe a extensão manualmente e instale-a através da GUI (<i>Arquivo &gt; Preferências &gt; Extensões</i>) ou via <code>VBoxManage extpack install &lt;.vbox-extpack&gt;</code>, verifique se você tem um kit de ferramentas como <a href="../en/Polkit.html" title="Polkit">Polkit</a> para conceder acesso privilegiado ao VirtualBox. A instalação desta extensão <a rel="nofollow" class="external text" href="https://www.virtualbox.org/ticket/8473">requer acesso de root</a>.
</p>
<h3><span class="mw-headline" id="Front-ends">Front-ends</span></h3>
<p>VirtualBox vem com três front-ends:
</p>
<ul>
<li>Se você quiser usar o VirtualBox com a GUI regular, use <code>VirtualBox</code>.</li>
<li>Se você deseja iniciar e gerenciar suas máquinas virtuais a partir da linha de comando, use o comando <code>VBoxSDL</code>, que fornece apenas uma janela simples para a máquina virtual, sem nenhuma sobreposição.</li>
<li>Se você quiser usar o VirtualBox sem executar qualquer GUI (por exemplo, em um servidor), use o comando <code>VBoxHeadless</code>. Com a extensão VRDP, você ainda pode acessar remotamente as exibições de suas máquinas virtuais.</li>
</ul>
<p>Um recurso de segurança no Wayland (ou seja, ao usar o GDM) não permite que o VirtualBox pegue todas as entradas do teclado. Isso é irritante quando você deseja passar atalhos do gerenciador de janelas para o sistema operacional convidado. Isso pode ser contornado colocando o VirtualBox em uma lista de permissões:
</p>
<pre>$ gsettings get org.gnome.mutter.wayland xwayland-grab-access-rules
$ gsettings set org.gnome.mutter.wayland xwayland-grab-access-rules "['VirtualBox Machine']"
</pre>
<p>O primeiro comando mostrará se outros aplicativos já estão na lista de permissões. Nesse caso, adicione 'VirtualBox Machine' a essa lista, em vez de tê-lo como o único.
</p>
<p>Finalmente, você também pode usar <a href="../en/PhpVirtualBox.html" title="PhpVirtualBox">phpVirtualBox</a> para administrar suas máquinas virtuais via uma interface web.
</p>
<p>Confira o <a rel="nofollow" class="external text" href="https://www.virtualbox.org/manual">manual do VirtualBox</a> para aprender como criar máquinas virtuais.
</p>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Atenção:</strong> Se você pretende armazenar imagens de disco virtuais em um sistema de arquivos <a href="../en/Btrfs.html" title="Btrfs">Btrfs</a>, antes de criar quaisquer imagens, considere a possibilidade de desabilitar <a href="../en/Btrfs.html#Copy-on-Write_(CoW)" title="Btrfs">copy-on-write</a> (também conhecido como "cópia em gravação") para o destino diretório dessas imagens.</div>
<h2>
<span id="Etapas_de_instala.C3.A7.C3.A3o_para_convidados_Arch_Linux"></span><span class="mw-headline" id="Etapas_de_instalação_para_convidados_Arch_Linux">Etapas de instalação para convidados Arch Linux</span>
</h2>
<p>Veja <a href="../pt/df076577e384a6acf5f8bb92c2e41474.html" class="mw-redirect" title="VirtualBox/Instalar Arch Linux como convidado">VirtualBox/Instalar Arch Linux como convidado</a>.
</p>
<h2><span class="mw-headline" id="Gerenciamento_de_discos_virtuais">Gerenciamento de discos virtuais</span></h2>
<p>Veja também <a href="/index.php?title=Importar/exportar_m%C3%A1quinas_virtuais_do_VirtualBox_de/para_outros_hipervisores&amp;action=edit&amp;redlink=1" class="new" title="Importar/exportar máquinas virtuais do VirtualBox de/para outros hipervisores (page does not exist)">Importar/exportar máquinas virtuais do VirtualBox de/para outros hipervisores</a>.
</p>
<h3><span class="mw-headline" id="Formatos_suportados_pelo_VirtualBox">Formatos suportados pelo VirtualBox</span></h3>
<p>VirtualBox possui suporte aos seguintes formatos de disco virtual:
</p>
<ul>
<li>
<b>VDI</b>: O Virtual Disk Image é o próprio contêiner aberto do VirtualBox usado por padrão quando você cria uma máquina virtual com o VirtualBox.</li>
<li>
<b>VMDK</b>: O Virtual Machine Disk foi inicialmente desenvolvido pela VMware para seus produtos. A especificação foi inicialmente de código fechado, mas tornou-se agora um formato aberto que é totalmente suportado pelo VirtualBox. Este formato oferece a possibilidade de ser dividido em vários arquivos de 2GB. Esse recurso é especialmente útil se você quiser armazenar a máquina virtual em máquinas que não suportam arquivos muito grandes. Outros formatos, excluindo o formato HDD da Parallels, não fornecem esse recurso equivalente.</li>
<li>
<b>VHD</b>: O Virtual Hard Disk é o formato usado pela Microsoft no Windows Virtual PC e no Hyper-V. Se você pretende usar qualquer um desses produtos da Microsoft, terá que escolher esse formato.</li>
</ul>
<dl><dd><div class="archwiki-template-box archwiki-template-box-tip">
<strong>Dica:</strong> Desde o Windows 7, esse formato pode ser montado diretamente sem qualquer aplicativo adicional.</div></dd></dl>
<ul>
<li>
<b>VHDX</b> (somente leitura): Esta é a versão estendida ("e<b>X</b>tended") do formato Virtual Hard Disk desenvolvido pela Microsoft, que foi lançado em 2012-09-04 com o Hyper-V 3.0 vindo com o Windows Server 2012. Esta nova versão do formato de disco oferece desempenho aprimorado (melhor bloco alinhamento), tamanho de blocos maiores e suporte a journal, o que resulta em resiliência de falha de energia. O VirtualBox <a rel="nofollow" class="external text" href="https://www.virtualbox.org/manual/ch15.html#idp63002176">deve ter suporte este formato somente leitura</a>.</li>
<li>
<b>HDD</b> (versão 2): O formato HDD é desenvolvido pela Parallels Inc e usado em suas soluções de hipervisor, como o Parallels Desktop for Mac. Versões mais recentes deste formato (ou seja, 3 e 4) não são suportadas devido à falta de documentação para este formato proprietário. <div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> Há atualmente uma controvérsia a cerca do suporte à versão 2 do formato. Enquanto o manual oficial do VirtualBox  <a rel="nofollow" class="external text" href="https://www.virtualbox.org/manual/ch05.html#vdidetails">só relata ter suporte à segunda versão do formato de arquivo HDD</a>, contribuidores do Wikipédia <a href="https://en.wikipedia.org/wiki/Comparison_of_platform_virtual_machines#Image_type_compatibility" class="extiw" title="wikipedia:Comparison of platform virtual machines">relatam que a primeira versão pode funcionar também</a>. Ajuda é bem-vinda se você puder realizar alguns testes com a primeira versão do formato HDD.</div>
</li>
<li>
<b>QED</b>: O formato de disco aprimorado do QEMU é um formato de arquivo antigo para o QEMU, outro hipervisor de código aberto e software livre. Este formato foi projetado a partir de 2010 de forma a fornecer uma alternativa superior ao QCOW2 e outros. Esse formato apresenta um caminho de E/S totalmente assíncrono, integridade de dados forte, arquivos de apoio e arquivos esparsos. Há suprote ao formato QED apenas para compatibilidade com máquinas virtuais criadas com versões antigas do QEMU.</li>
<li>
<b>QCOW</b>: O formato QEMU Copy On Write é o formato atual do QEMU. O formato QCOW possui suporte a compressão e criptografia transparentes baseadas em zlib (o último é falho e não é recomendado). O QCOW está disponível em duas versões: QCOW e QCOW2. QCOW2 tende a substituir o primeiro. O QCOW possui <a rel="nofollow" class="external text" href="https://www.virtualbox.org/manual/ch15.html#idp63002176">atualmente total suporte pelo VirtualBox</a>. O QCOW2 vem em duas revisões: QCOW2 0.10 e QCOW2 1.1 (que é o padrão quando você cria um disco virtual com o QEMU). O VirtualBox não posssui suporte a QCOW2.</li>
<li>
<b>OVF</b>: O Open Virtualization Format é um formato aberto que foi projetado para interoperabilidade e distribuição de máquinas virtuais entre diferentes hipervisores. O VirtualBox possui suporte a todas as revisões deste formato através do <a rel="nofollow" class="external text" href="https://www.virtualbox.org/manual/ch08.html#idp55423424">recurso de importação/exportação do VBoxManage</a>, mas com <a rel="nofollow" class="external text" href="https://www.virtualbox.org/manual/ch14.html#KnownProblems">limitações conhecidas</a>.</li>
<li>
<b>RAW</b>: Esse é o modo quando o disco virtual é exposto diretamente ao disco sem estar contido em um contêiner de formato de arquivo específico. O VirtualBox possui suporte a esse recurso de várias maneiras: convertendo disco RAW <a rel="nofollow" class="external text" href="https://www.virtualbox.org/manual/ch08.html#idp59139136">para um formato específico</a> ou <a rel="nofollow" class="external text" href="https://www.virtualbox.org/manual/ch08.html#vboxmanage-clonevdi">clonando um disco para RAW</a> ou usando diretamente um arquivo VMDK <a rel="nofollow" class="external text" href="https://www.virtualbox.org/manual/ch09.html#idp57804112">que aponta para um disco físico ou um arquivo simples</a>.</li>
</ul>
<h3>
<span id="Convers.C3.A3o_de_formato_de_imagem_de_disco"></span><span class="mw-headline" id="Conversão_de_formato_de_imagem_de_disco">Conversão de formato de imagem de disco</span>
</h3>
<p><a rel="nofollow" class="external text" href="https://www.virtualbox.org/manual/ch08.html#vboxmanage-clonevdi">VBoxManage clonehd</a> pode ser usado para converter entre VDI, VMDK, VHD e RAW.
</p>
<pre>$ VBoxManage clonehd <i>arquivo_entrada</i> <i>arquivo_saída</i> --format <i>formato_saída</i>
</pre>
<p>Por exemplo, para converter VDI em VMDK:
</p>
<pre>$ VBoxManage clonehd <i>origem.vdi</i> <i>destino.vmdk</i> --format VMDK
</pre>
<h4><span class="mw-headline" id="QCOW">QCOW</span></h4>
<p>O VirtualBox não possui suporte ao formato de imagem de disco QCOW2 do <a href="../en/QEMU.html" title="QEMU">QEMU</a>. Para usar uma imagem de disco QCOW2 com o VirtualBox, você precisa convertê-la, o que você pode fazer com o comando <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=qemu">qemu</a></span> do <code>qemu-img</code>. <code>qemu-img</code> pode converter QCOW para/de VDI, VMDK, VHDX, RAW e vários outros formatos (que você pode ver executando <code>qemu-img --help</code>).
</p>
<pre>$ qemu-img convert -O <i>formato_saída</i> <i>arquivo_entrada</i> <i>arquivo_saída</i>
</pre>
<p>Por exemplo, para converter QCOW2 em VDI:
</p>
<pre>$ qemu-img convert -O vdi <i>origem.qcow2</i> <i>destino.vdi</i>
</pre>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Dica:</strong> O parâmetro <code>-p</code> é usado para obter o progresso da tarefa de conversão.</div>
<p>Há duas revisões do QCOW2: 0.10 e 1.1. Você pode especificar a revisão a ser usada com <code>-o compat=<i>revisão</i></code>.
</p>
<h3><span class="mw-headline" id="Montar_discos_virtuais">Montar discos virtuais</span></h3>
<h4><span class="mw-headline" id="VDI">VDI</span></h4>
<p>A montagem de imagens VDI só funciona com imagens de tamanho fixo (também imagens estáticas); imagens dinâmicas (alocação dinâmica de tamanho) não são facilmente montáveis.
</p>
<p>O deslocamento da partição (dentro da VDI) é necessário, em seguida, adicione o valor de <code>offData</code> a <code>32256</code> (por exemplo, 69632 + 32256 = 101888):
</p>
<pre>$ VBoxManage internalcommands dumphdinfo &lt;armazenamento.vdi&gt; | grep "offData"
</pre>
<p>O armazenamento pode agora ser montado com:
</p>
<pre># mount -t ext4 -o rw,noatime,noexec,loop,offset=101888 &lt;armazenamento.vdi&gt; /mntpoint/
</pre>
<p>Para discos VDI com mais partições, você também pode usar <code>losetup</code>:
</p>
<pre># losetup -o $offData -Pf
</pre>
<p>Depois disso você deve encontrar as partições como <code>/dev/loop*</code> (por exemplo, <code>/dev/loop0p1</code>). Então, você pode montá-las como de costume (por exemplo, <code>mount mount /dev/loop0p1 /mnt/</code>).
</p>
<p>Você também pode usar o script <a rel="nofollow" class="external text" href="https://github.com/pld-linux/VirtualBox/blob/master/mount.vdi">mount.vdi</a>, o qual você pode usar como (instale o script em <code>/usr/bin/</code>):
</p>
<pre># mount -t vdi -o fstype=ext4,rw,noatime,noexec <i>local_arquivo_vdi</i> <i>/mnt/</i>
</pre>
<p>Alternativamente, você pode usar o módulo de kernel do <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=qemu">qemu</a></span> que pode fazer essa <a rel="nofollow" class="external text" href="http://bethesignal.org/blog/2011/01/05/how-to-mount-virtualbox-vdi-image/">atribuição</a>:
</p>
<pre># modprobe nbd max_part=16
# qemu-nbd -c /dev/nbd0 &lt;armazenamento.vdi&gt;
# mount /dev/nbd0p1 /mnt/dir/
# # to unmount:
# umount /mnt/dir/
# qemu-nbd -d /dev/nbd0
</pre>
<p>Se os nós da partição não forem propagados, tente usar <code>partprobe/dev/nbd0</code>; caso contrário, uma partição VDI pode ser mapeada diretamente para um nó por: <code>qemu-nbd -P 1 -c /dev/nbd0 &lt;armazenamento.vdi&gt;</code>.
</p>
<h4><span class="mw-headline" id="VHD">VHD</span></h4>
<p>Como em VDI, imagens VHD podem ser montadas com o módulo nbd do <a href="../en/QEMU.html" title="QEMU">QEMU</a>:
</p>
<pre># modprobe nbd
# qemu-nbd -c /dev/nbd0 <i>armazenamento</i>.vhd
# mount /dev/nbd0p1 /mnt
</pre>
<p>Para desmontar:
</p>
<pre># umount /mnt
# qemu-nbd -d /dev/nbd0
</pre>
<h3><span class="mw-headline" id="Compactar_discos_virtuais">Compactar discos virtuais</span></h3>
<p>A compactação de discos virtuais só funciona com arquivos <i>.vdi</i> e consiste basicamente nas seguintes etapas.
</p>
<p>Inicialize sua máquina virtual e remova todo o inchaço manualmente ou usando ferramentas de limpeza como <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=bleachbit">bleachbit</a></span> que está <a rel="nofollow" class="external text" href="http://bleachbit.sourceforge.net/download/windows">disponível para sistemas Windows também</a>.
</p>
<p>A limpeza do espaço livre com zeros pode ser alcançado por meio de várias ferramentas:
</p>
<ul>
<li>Se você estava usando Bleachbit anteriormente, marque a caixa de seleção <i>Sistema &gt; Espaço livre em disco</i> na GUI, ou use <code>bleachbit -c system.free_disk_space</code> na CLI;</li>
<li>Em sistemas baseados em UNIX, usando <code>dd</code> ou preferencialmente <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/dcfldd/">dcfldd</a></span><sup><small>AUR</small></sup> (veja <a rel="nofollow" class="external text" href="https://superuser.com/a/355322">aqui</a> para aprender as diferenças):</li>
</ul>
<dl><dd><pre># dcfldd if=/dev/zero of=<i>/arquivo_para_preencher</i> bs=4M</pre></dd></dl>
<p>Quando <code>arquivo_para_preencher</code> atingir o limite da partição, você receberá uma mensagem como <code>1280 blocks (5120Mb) written.dcfldd:: No space left on device</code>. Isso significa que todos os blocos de espaço do usuário e não reservados da partição serão preenchidos com zeros. Usar esse comando como root é importante para garantir que todos os blocos livres tenham sido sobrescritos. De fato, por padrão, ao usar partições com sistema de arquivos ext, uma porcentagem especificada de blocos do sistema de arquivos é reservada para o superusuário (veja o argumento <code>-m</code> nas páginas man do <code>mkfs.ext4</code> ou use <code>tune2fs -l</code> para ver quanto espaço é reservado para aplicativos da raiz).
</p>
<dl><dd>Quando o processo supramencionado estiver concluído, você poderá remover o arquivo <code><i>arquivo_para_preencher</i></code> que você criou.</dd></dl>
<ul><li>No Windows, há duas ferramentas disponíveis:
<ul>
<li>
<code>sdelete</code> da <a rel="nofollow" class="external text" href="https://technet.microsoft.com/en-us/sysinternals/bb842062.aspx">Sysinternals Suite</a>, digite <code>sdelete -s -z <i>c:</i></code>, sendo que você precisa reexecutar o comando para cada unidade existente em sua máquina virtual;</li>
<li>ou, se você gosta de scripts, há uma <a rel="nofollow" class="external text" href="http://blog.whatsupduck.net/2012/03/powershell-alternative-to-sdelete.html">solução em PowerShell</a>, mas que ainda precisa ser repetida para todas as unidades.</li>
</ul>
</li></ul>
<dl><dd><dl>
<dd><pre>PS&gt; ./Write-ZeroesToFreeSpace.ps1 -Root <i>c:\</i> -PercentFree 0</pre></dd>
<dd><div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> Este script deve ser executado em um ambiente do PowerShell com privilégios de administrador. Por padrão, os scripts não podem ser executados, certifique-se de que a política de execução esteja, pelo menos, em <code>RemoteSigned</code> e não em <code>Restricted</code>. Isso pode ser verificado com <code>Get-ExecutionPolicy</code> e a política necessária pode ser definida com <code>Set-ExecutionPolicy RemoteSigned</code>.</div></dd>
</dl></dd></dl>
<p>Uma vez que o espaço livre em disco tenha sido apagado, desligue sua máquina virtual.
</p>
<p>Na próxima vez que você inicializar sua máquina virtual, é recomendável fazer uma verificação do sistema de arquivos.
</p>
<ul>
<li>Em sistemas baseados em UNIX, você pode usar <code>fsck</code> manualmente;
<ul><li>Nos sistemas GNU/Linux e, portanto, no Arch Linux, você pode forçar uma verificação de disco na inicialização <a href="../pt/Fsck.html#For%C3%A7ando_a_verifica%C3%A7%C3%A3o" title="Fsck (Português)">graças a um parâmetro de inicialização do kernel</a>;</li></ul>
</li>
<li>Nos sistemas Windows, você pode usar:
<ul>
<li>
<code>chkdsk <i>c:</i> /F</code> sendo que <code><i>c:</i></code> precisa ser substituído por cada disco que você precisa verificar e corrigir erros;</li>
<li>ou <code>FsckDskAll</code> <a rel="nofollow" class="external text" href="http://therightstuff.de/2009/02/14/ChkDskAll-ChkDsk-For-All-Drives.aspx">daqui</a><sup title="Status da última verificação: 404">[<a href="https://en.wikipedia.org/wiki/pt:Wikip%C3%A9dia:Liga%C3%A7%C3%A3o_inativa" class="extiw" title="wikipedia:pt:Wikipédia:Ligação inativa">link inativo</a> 2020-08-06 ⓘ]</sup> que é basicamente o mesmo software que <code>chkdsk</code>, mas sem a necessidade de repetir o comando para todas as unidades;</li>
</ul>
</li>
</ul>
<p>Agora, remova os zeros do arquivo <i>.vdi</i> com <a rel="nofollow" class="external text" href="https://www.virtualbox.org/manual/ch08.html#vboxmanage-modifyvdi">VBoxManage modifyhd</a>:
</p>
<pre>$ VBoxManage modifyhd <i>seu_disco.vdi</i> --compact
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> Se sua máquina virtual tiver snapshots, você precisará aplicar o comando acima em cada arquivo <code>.vdi</code> que você possui.</div>
<h3><span class="mw-headline" id="Aumentar_discos_virtuais">Aumentar discos virtuais</span></h3>
<h4><span class="mw-headline" id="Procedimento_geral">Procedimento geral</span></h4>
<p>Se você está ficando sem espaço devido ao pequeno tamanho do disco rígido que você selecionou quando criou sua máquina virtual, a solução recomendada pelo manual do VirtualBox é usar <a rel="nofollow" class="external text" href="https://www.virtualbox.org/manual/ch08.html#vboxmanage-modifyvdi">VBoxManage modifyhd</a>. No entanto, esse comando só funciona para discos VDI e VHD e apenas para as variantes alocadas dinamicamente. Se você quiser redimensionar um disco de disco virtual de tamanho fixo também, leia este truque que funciona para uma máquina virtual do Windows ou UNIX.
</p>
<p>Primeiro, crie um novo disco virtual próximo ao que você deseja aumentar:
</p>
<pre>$ VBoxManage createhd -filename <i>novo.vdi</i> --size <i>10000</i>
</pre>
<p>sendo que o tamanho está em MiB, neste exemplo 10000MiB ~= 10GiB e <i>novo.vdi</i> é o nome do novo disco rígido a ser criado.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> Por padrão, esse comando usa a variante de formato de arquivo <i>Standard</i> (correspondente à dinâmica alocada) e, portanto, não usará a mesma variante de formato de arquivo do disco virtual de origem. Se o seu <i>antigo.vdi</i> tiver um tamanho fixo e você quiser manter essa variante, adicione o parâmetro <code>--variant Fixed</code>.</div>
<p>Em seguida, o disco virtual antigo precisa ser clonado para o novo, o que pode levar algum tempo:
</p>
<pre>$ VBoxManage clonehd <i>antigo.vdi</i> <i>novo.vdi</i> --existing
</pre>
<p>Desanexe o disco rígido antigo e anexe um novo, substitua todos os argumentos itálicos obrigatórios pelos seus valores apropriados:
</p>
<pre>$ VBoxManage storageattach <i>nome_VM</i> --storagectl <i>SATA</i> --port <i>0</i> --medium none
$ VBoxManage storageattach <i>nome_VM</i> --storagectl <i>SATA</i> --port <i>0</i> --medium <i>novo.vdi</i> --type hdd
</pre>
<p>Para obter o nome do controlador de armazenamento e o número da porta, você pode usar o comando <code>VBoxManage showvminfo <i>nome_VM</i></code>. Entre os resultados, você obterá esse resultado (o que você está procurando está em itálico):
</p>
<pre>[...]
Storage Controller Name (0):            IDE
Storage Controller Type (0):            PIIX4
Storage Controller Instance Number (0): 0
Storage Controller Max Port Count (0):  2
Storage Controller Port Count (0):      2
Storage Controller Bootable (0):        on
Storage Controller Name (1):            SATA
Storage Controller Type (1):            IntelAhci
Storage Controller Instance Number (1): 0
Storage Controller Max Port Count (1):  30
Storage Controller Port Count (1):      1
Storage Controller Bootable (1):        on
IDE (1, 0): Empty
<i>SATA</i> (<i>0</i>, 0): /home/wget/IT/Virtual_machines/GNU_Linux_distributions/ArchLinux_x64_EFI/Snapshots/{6bb17af7-e8a2-4bbf-baac-fbba05ebd704}.vdi (UUID: 6bb17af7-e8a2-4bbf-baac-fbba05ebd704)
[...]
</pre>
<p>Baixe a <a rel="nofollow" class="external text" href="http://gparted.org/download.php">imagem do GParted live</a> e monte-a como um arquivo de CD/DVD virtual, inicialize sua máquina virtual, aumente/mova suas partições, desmonte o GParted live e reinicie.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> Nos discos GPT, aumentar o tamanho do disco resultará no backup do cabeçalho GPT não estar no final do dispositivo. O GParted pedirá para corrigir isso, clique em <i>Corrigir</i> nas duas vezes. Nos discos MBR, você não tem esse problema como essa tabela de partições como nenhum trailer no final do disco.</div>
<p>Finalmente, cancele o registro do disco virtual do VirtualBox e remova o arquivo:
</p>
<pre>$ VBoxManage closemedium disk <i>antigo.vdi</i>
$ rm <i>antigo.vdi</i>
</pre>
<h4><span class="mw-headline" id="Aumentando_o_tamanho_de_discos_VDI">Aumentando o tamanho de discos VDI</span></h4>
<p>Se o seu disco for um VDI, execute:
</p>
<pre>$ VBoxManage modifyhd <i>seu_disco_virtual.vdi</i> --resize <i>o_novo_tamanho</i>
</pre>
<p>Em seguida, retorne à etapa Gparted para aumentar o tamanho da partição no disco virtual.
</p>
<h3><span class="mw-headline" id="Substituir_um_disco_virtual_manualmente_a_partir_do_arquivo_.vbox">Substituir um disco virtual manualmente a partir do arquivo .vbox</span></h3>
<p>Se você acha que editar um simples arquivo <i>XML</i> é mais conveniente do que brincar com a GUI ou com <code>VBoxManage</code> e você deseja substituir (ou adicionar) um disco virtual à sua máquina virtual, no arquivo de configuração <i>.vbox</i> correspondente à sua máquina virtual, basta substituir o GUID, o local do arquivo e o formato de acordo com suas necessidades:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">ArchLinux_vm.vbox</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">&lt;HardDisk uuid="<i>{670157e5-8bd4-4f7b-8b96-9ee412a712b5}</i>" location="<i>ArchLinux_vm.vdi</i>" format="<i>VDI</i>" type="Normal"/&gt;</pre>
<p>então, na sub-tag <code>&lt;AttachedDevice&gt;</code> de <code>&lt;StorageController&gt;</code>, substitua o GUID pelo novo.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">ArchLinux_vm.vbox</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">&lt;AttachedDevice type="HardDisk" port="0" device="0"&gt;
  &lt;Image uuid="<i>{670157e5-8bd4-4f7b-8b96-9ee412a712b5}</i>"/&gt;
&lt;/AttachedDevice&gt;</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> Se você não souber o GUID da unidade que deseja adicionar, poderá usar o <code>VBoxManage showhdinfo <i>arquivo</i></code>. Se você usou anteriormente o <code>VBoxManage clonehd</code> para copiar/converter seu disco virtual, este comando deveria ter gerado o GUID logo após a conclusão da cópia/conversão. O uso de um GUID aleatório não funciona, pois cada UUID <a rel="nofollow" class="external text" href="http://www.virtualbox.org/manual/ch05.html#cloningvd">é armazenado dentro de cada imagem de disco</a>.</div>
<h4><span class="mw-headline" id="Transferir_entre_hospedeiro_Linux_e_outro_SO">Transferir entre hospedeiro Linux e outro SO</span></h4>
<p>As informações sobre o caminho para discos rígidos e snapshots são armazenadas entre as tags <code>&lt;HardDisks&gt; .... &lt;/HardDisks&gt;</code> no arquivo com a extensão <i>.vbox</i>. Você pode editá-las manualmente ou usar este script onde você precisará alterar apenas o caminho ou usar os padrões, presumindo que <i>.vbox</i> está no mesmo diretório com um disco virtual e a pasta de instantâneos. Ele imprimirá a nova configuração na <i>stdout</i>.
</p>
<pre>#!/bin/bash
NewPath="${PWD}/"
Snapshots="Snapshots/"
Filename="$1"

 awk -v SetPath="$NewPath" -v SnapPath="$Snapshots" '{if(index($0,"&lt;HardDisk uuid=") != 0){A=$3;split(A,B,"=");
L=B[2];
 gsub(/\"/,"",L);
  sub(/^.*\//,"",L);
  sub(/^.*\\/,"",L);
 if(index($3,"{") != 0){SnapS=SnapPath}else{SnapS=""};
  print $1" "$2" location="\"SetPath SnapS L"\" "$4" "$5}
else print $0}' "$Filename"</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> 
<ul>
<li>Se você for preparar a máquina virtual para uso em um hospedeiro Windows, no final do nome do caminho, use a barra invertida \ em vez de /.</li>
<li>O script detecta snapshots procurando <code>{</code> no nome do arquivo.</li>
<li>Para executá-lo em um novo hospedeiro, você precisará adicioná-lo primeiro ao registrador clicando em <b>Máquina -&gt; Adicionar...</b> ou usando as teclas de atalho Ctrl+A e depois navegue até arquivo <i>.vbox</i> que contém configuração ou linha de comando de uso <code>VBoxManage registervm <i>nome_de_arquivo</i>. vbox</code>
</li>
</ul>
</div>
<h3>
<span id="Clonar_um_disco_virtual_e_atribui.C3.A7.C3.A3o_de_um_novo_UUID_a_ele"></span><span class="mw-headline" id="Clonar_um_disco_virtual_e_atribuição_de_um_novo_UUID_a_ele">Clonar um disco virtual e atribuição de um novo UUID a ele</span>
</h3>
<p>Os UUIDs são amplamente utilizados pelo VirtualBox. Cada máquina virtual e cada disco virtual de uma máquina virtual deve ter um UUID diferente. Quando você inicia uma máquina virtual no VirtualBox, o VirtualBox rastreia todos os UUIDs da sua instância de máquina virtual. Veja a <a rel="nofollow" class="external text" href="http://www.virtualbox.org/manual/ch08.html#vboxmanage-list">VBoxManage list</a> para listar os itens registrados no VirtualBox.
</p>
<p>Se clonou um disco virtual manualmente copiando o arquivo de disco virtual, você precisará atribuir um novo UUID à unidade virtual clonada se desejar usar o disco na mesma máquina virtual ou mesmo em outra (se essa já tiver sido aberto, e assim registrado, com o VirtualBox).
</p>
<p>Você pode usar este comando para atribuir um novo UUID a um disco virtual:
</p>
<pre>$ VBoxManage internalcommands sethduuid <i>/caminho/para/disco.vdi</i>
</pre>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Dica:</strong> Para evitar a cópia do disco virtual e atribuir um novo UUID ao seu arquivo manualmente, você pode usar <a rel="nofollow" class="external text" href="http://www.virtualbox.org/manual/ch08.html#vboxmanage-clonevdi">VBoxManage clonehd</a>.</div>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> Os comando acima possuem suporte a todos os <a href="#Formatos_suportados_pelo_VirtualBox">formatos de discos virtuais suportados pelo VirtualBox</a>.</div>
<h2><span class="mw-headline" id="Dicas_e_truques">Dicas e truques</span></h2>
<div class="noprint archwiki-template-message">
<p><a href="../File:Tango-preferences-desktop-locale.png" class="image"><img alt="Tango-preferences-desktop-locale.png" src="../File:Tango-preferences-desktop-locale.png" decoding="async" width="48" height="48"></a><b>Este artigo ou esta seção precisa de <a href="../pt/ArchWiki:Contributing.html#Traduzindo" class="mw-redirect" title="ArchWiki:Contribuindo">tradução</a>.</b><a href="../File:Tango-preferences-desktop-locale.png" class="image"><img alt="Tango-preferences-desktop-locale.png" src="../File:Tango-preferences-desktop-locale.png" decoding="async" width="48" height="48"></a></p>
<div>
<b>Notas:</b> Esta seção está sendo traduzida. (Discuta em <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php/Talk:VirtualBox_(Portugu%C3%AAs)">Talk:VirtualBox (Português)#</a>)</div>
</div>
<h3>
<span id="Importar.2Fexportar_m.C3.A1quinas_virtuais_do_VirtualBox_de.2Fpara_outros_hipervisores"></span><span class="mw-headline" id="Importar/exportar_máquinas_virtuais_do_VirtualBox_de/para_outros_hipervisores">Importar/exportar máquinas virtuais do VirtualBox de/para outros hipervisores</span>
</h3>
<p>Se você planeja usar sua máquina virtual em outro hipervisor ou deseja importar no VirtualBox uma máquina virtual criada com outro hipervisor, você pode estar interessado em ler as etapas a seguir.
</p>
<h4><span class="mw-headline" id="Remover_adicionais">Remover adicionais</span></h4>
<p>Adicionais para convidados estão disponíveis na maioria das soluções de hipervisor: o VirtualBox vem com as adicionais para convidados, o VMware com as VMware Tools, o Parallels com as Parallels Tools etc. Esses componentes adicionais foram projetados para serem instalados dentro de uma máquina virtual após a instalação do sistema operacional convidado. Eles consistem em drivers de dispositivo e aplicativos de sistema que otimizam o sistema operacional convidado para melhor desempenho e usabilidade <a rel="nofollow" class="external text" href="https://www.virtualbox.org/manual/ch04.html">fornecendo esses recursos</a>.
</p>
<p>Se você instalou os adicionais à sua máquina virtual, desinstale-os primeiro. Seu convidado, especialmente se estiver usando um sistema operacional da família Windows, pode se comportar de maneira estranha, travar ou até não inicializar se você ainda estiver usando os drivers específicos em outro hipervisor.
</p>
<h4><span class="mw-headline" id="Usar_o_formato_de_disco_virtual_correto">Usar o formato de disco virtual correto</span></h4>
<p>Esta etapa dependerá da capacidade de converter a imagem do disco virtual diretamente ou não.
</p>
<h5>
<span id="Ferramentas_autom.C3.A1ticas"></span><span class="mw-headline" id="Ferramentas_automáticas">Ferramentas automáticas</span>
</h5>
<p>Algumas empresas fornecem ferramentas que oferecem a capacidade de criar máquinas virtuais a partir de um sistema operacional Windows ou GNU/Linux localizado em uma máquina virtual ou mesmo em uma instalação nativa. Com esse produto, você não precisa aplicar esta e as etapas a seguir e pode parar de ler aqui.
</p>
<ul>
<li>
<i><a rel="nofollow" class="external text" href="http://www.parallels.com/products/transporter">Parallels Transporter</a></i> que não é gratuito, é um produto da Parallels Inc. Essa solução basicamente consiste em um software chamado <i>agente</i> que será instalado no convidado que você deseja importar/converter. Em seguida, o Parallels Transporter, <u>que funciona apenas no OS X</u>, criará uma máquina virtual a partir desse <i>agente</i> que será contatado pelo USB ou por rede Ethernet.</li>
<li>
<i><a rel="nofollow" class="external text" href="https://www.vmware.com/products/converter/">VMware vCenter Converter</a></i> que é gratuito após o registro no site da VMware, funciona quase da mesma maneira que o Parallels Transporter, mas o software que reúne os dados para criar a máquina virtual funciona apenas em uma plataforma Windows.</li>
</ul>
<h5>
<span id="Convers.C3.A3o_manual"></span><span class="mw-headline" id="Conversão_manual">Conversão manual</span>
</h5>
<p>Primeiro, familiarize-se com os formatos <a href="#Formatos_suportados_pelo_VirtualBox">suportados pelo VirtualBox</a> e <a href="https://en.wikipedia.org/wiki/Comparison_of_platform_virtual_machines#Image_type_compatibility" class="extiw" title="wikipedia:Comparison of platform virtual machines">compatíveis com os hipervisores de terceiros</a>.
</p>
<ul><li>A importação ou exportação de uma máquina virtual de/para uma solução VMware não é um problema se você usar o formato de disco VMDK ou OVF; caso contrário, é possível converter <a href="#Convers%C3%A3o_de_formato_de_imagem_de_disco">VMDK para VDI e VDI para VMDK</a> e a ferramenta VMware vCenter Converter mencionada acima está disponível.</li></ul>
<ul><li>A importação ou exportação de/para QEMU também não é um problema: alguns formatos QEMU são suportados diretamente pelo VirtualBox e a conversão entre <a href="#QCOW">QCOW2 em VDI e VDI em QCOW2</a> ainda está disponível, se necessário.</li></ul>
<ul><li>A importação ou exportação de/para o hipervisor Parallels é a maneira mais difícil: o Parallels suporta apenas seu próprio formato HDD (mesmo o formato OVF padrão e portátil não é suportado!).</li></ul>
<dl><dd><ul>
<li>Para exportar sua máquina virtual para o Parallels, você precisará usar a ferramenta Parallels Transporter descrita acima.</li>
<li>Para importar sua máquina virtual para o VirtualBox, você precisará usar o VMware vCenter Converter descrito acima para converter a VM no formato VMware primeiro. Em seguida, aplique a solução para migrar do VMware.</li>
</ul></dd></dl>
<h4>
<span id="Criar_a_configura.C3.A7.C3.A3o_VM_para_seu_hipervisor"></span><span class="mw-headline" id="Criar_a_configuração_VM_para_seu_hipervisor">Criar a configuração VM para seu hipervisor</span>
</h4>
<p>Cada hipervisor possui seu próprio arquivo de configuração da máquina virtual: <code>.vbox</code> para VirtualBox, <code>.vmx</code> para VMware, um arquivo <code>config.pvs</code> localizado no pacote da máquina virtual (arquivo <code>.pvm</code>) etc. Você precisará recriar uma nova máquina virtual em seu novo hipervisor de destino e especificar sua configuração de hardware o mais próximo possível da sua máquina virtual inicial.
</p>
<p>Preste muita atenção à interface do firmware (BIOS ou UEFI) usada para instalar o sistema operacional convidado. Embora haja uma opção disponível para escolher entre essas duas interfaces nas soluções VirtualBox e Parallels, no VMware, você precisará adicionar manualmente a seguinte linha ao seu arquivo <i>.vmx</i>.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">ArchLinux_vm.vmx</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">firmware = "efi"</pre>
<p>Por fim, peça ao seu hipervisor para usar o disco virtual existente que você converteu e inicie a máquina virtual.
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Dica:</strong> 
<ul>
<li>No VirtualBox, se você não quiser procurar em toda a GUI para encontrar o local certo para adicionar seu novo dispositivo de unidade virtual, poderá <a href="#Substituir_um_disco_virtual_manualmente_a_partir_do_arquivo_.vbox">substituir um disco virtual manualmente a partir do arquivo .vbox</a> ou use o <code>VBoxManage storageattach</code> descrito em <a href="#Aumentando_o_tamanho_de_discos_VDI">#Aumentando o tamanho de discos VDI</a> ou em <a rel="nofollow" class="external text" href="https://www.virtualbox.org/manual/ch08.html#vboxmanage-storageattach">página de manual do VirtualBox</a>.</li>
<li>Da mesma forma, nos produtos VMware, você pode substituir o local do local do disco virtual atual adaptando o local do arquivo <i>.vmdk</i> no seu arquivo de configuração <i>.vmx</i>.</li>
</ul>
</div>
<h3>
<span id="Gerenciamento_de_lan.C3.A7amento_de_m.C3.A1quina_virtual"></span><span class="mw-headline" id="Gerenciamento_de_lançamento_de_máquina_virtual">Gerenciamento de lançamento de máquina virtual</span>
</h3>
<h4>
<span id="Iniciando_m.C3.A1quinas_virtuais_com_um_servi.C3.A7o_.28inicializa.C3.A7.C3.A3o_autom.C3.A1tica.29"></span><span class="mw-headline" id="Iniciando_máquinas_virtuais_com_um_serviço_(inicialização_automática)">Iniciando máquinas virtuais com um serviço (inicialização automática)</span>
</h4>
<p>A seguir, veja os detalhes de implementação de um serviço systemd que será usado para considerar uma máquina virtual como um serviço.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/system/vboxvmservice@.service</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Unit]
Description=VBox Virtual Machine %i Service
Requires=systemd-modules-load.service
After=systemd-modules-load.service

[Service]
User=<i>nome_de_usuário</i>
Group=vboxusers
ExecStart=/usr/bin/VBoxManage startvm %i --type <i>modo_início</i>
ExecStop=/usr/bin/VBoxManage controlvm %i <i>modo_parada</i>
RemainAfterExit=yes

[Install]
WantedBy=multi-user.target</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> 
<ul>
<li>Substitua <code><i>nome_de_usuário</i></code> por um usuário que seja membro do grupo <code>vboxusers</code>. Verifique se o usuário escolhido é o mesmo que criará/importará máquinas virtuais, caso contrário, o usuário não verá os dispositivos da VM.</li>
<li>Substitua <code><i>modo_início</i></code> por um tipo de front-end da VM, geralmente <code>gui</code>, <code>headless</code> ou <code>separate</code>
</li>
<li>Substitua <code><i>modo_parada</i></code> pela opção de estado desejada, geralmente <code>savestate</code> ou <code>acpipowerbutton</code>
</li>
</ul>
</div>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> Se você possui várias máquinas virtuais gerenciadas pelo Systemd e elas não estão parando corretamente, tente adicionar <code>KillMode=none</code> e <code>TimeoutStopSec=40</code> no final da seção <code>[Service]</code>.</div>
<p><a href="../pt/Systemd.html#Usando_units" class="mw-redirect" title="Habilite">Habilite</a> a unit de systemd <code>vboxvmservice@<i>nome_da_sua_máquina_virtual</i></code> para iniciar a máquina virtual na próxima inicialização. Para iniciá-la diretamente, basta <a href="../pt/Systemd.html#Usando_units" class="mw-redirect" title="Inicia">iniciar</a> a unit de systemd.
</p>
<p>O VirtualBox 4.2 apresenta <a rel="nofollow" class="external text" href="http://lifeofageekadmin.com/how-to-set-your-virtualbox-vm-to-automatically-startup/">uma nova maneira</a> para sistemas do tipo UNIX para que máquinas virtuais sejam iniciadas automaticamente, exceto pelo uso de um serviço systemd.
</p>
<h4>
<span id="Iniciando_m.C3.A1quinas_virtuais_com_um_atalho_de_teclado"></span><span class="mw-headline" id="Iniciando_máquinas_virtuais_com_um_atalho_de_teclado">Iniciando máquinas virtuais com um atalho de teclado</span>
</h4>
<p>Pode ser útil iniciar máquinas virtuais diretamente com um atalho de teclado em vez de usar a interface VirtualBox (GUI ou CLI). Para isso, você pode simplesmente definir ligações de teclas em <code>.xbindkeysrc</code>. Por favor, consulte <a href="../en/Xbindkeys.html" title="Xbindkeys">Xbindkeys</a> para mais detalhes.
</p>
<p>Exemplo, usando a tecla <code>Fn</code> de um laptop com uma tecla de bateria não utilizada (<code>F3</code> no computador usado neste exemplo):
</p>
<pre> "VBoxManage startvm 'Windows 7'"
 m: 0x0 + c: 244
 XF86Battery
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> Se você tiver um espaço no nome da sua máquina virtual, coloque-o com aspas simples, como feito no exemplo acima.</div>
<h3>
<span id="Usar_dispositivo_espec.C3.ADfico_na_m.C3.A1quina_virtual"></span><span class="mw-headline" id="Usar_dispositivo_específico_na_máquina_virtual">Usar dispositivo específico na máquina virtual</span>
</h3>
<h4>
<span id="Usando_webcam_.2F_microfone_USB"></span><span class="mw-headline" id="Usando_webcam_/_microfone_USB">Usando webcam / microfone USB</span>
</h4>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> Você precisará ter o pacote de extensão do VirtualBox instalado antes de seguir as etapas abaixo. Veja <a href="#Pacote_de_extens%C3%B5es">#Pacote de extensões</a> para detalhes.</div>
<ol>
<li>Certifique-se de que a máquina virtual não esteja funcionando e que sua webcam / microfone não esteja sendo usada(o).</li>
<li>Abra a janela principal do VirtualBox e vá para as configurações da máquina Arch. Vá para a seção USB.</li>
<li>Certifique-se de que "Habilitar Controladora USB" esteja selecionado. Certifique-se também de que "Habilitar Controladora USB 2.0 (EHCI)" também esteja selecionado.</li>
<li>Clique no botão "Acrescentar filtro de dispositivo" (o cabo com o ícone "+").</li>
<li>Selecione seu dispositivo de webcam / microfone USB na lista.</li>
<li>Agora, clique em OK e inicie sua VM.</li>
</ol>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> Se o seu microfone não aparecer no menu "Adicionar filtro do dispositivo", tente as opções USB 3.0 e 1.1 (na etapa 3).</div>
<h4><span class="mw-headline" id="Detectando_webcams_e_outros_dispositivos_USB">Detectando webcams e outros dispositivos USB</span></h4>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> Isso não vai adiantar muito se você estiver executando um sistema operacional *NIX dentro de sua VM, pois a maioria não tem recursos de detecção automática.</div>
<p>Se o dispositivo que você está procurando não aparecer em nenhum dos menus da seção acima e você tiver tentado todas as três opções de controlador USB,
inicialize sua VM três vezes separadas. Uma vez usando o controlador USB 1.1, outra usando o controlador USB 2.0, etc. Deixe a VM funcionando por pelo menos 5 minutos após a inicialização. Às vezes, o Windows detecta automaticamente o dispositivo para você. Certifique-se de filtrar quaisquer dispositivos que não sejam um teclado ou mouse, para que não sejam inicializados na inicialização. Isso garante que o Windows detectará o dispositivo na inicialização.
</p>
<h3><span class="mw-headline" id="Acessar_um_servidor_convidado">Acessar um servidor convidado</span></h3>
<p>To access <a href="https://en.wikipedia.org/wiki/Apache_HTTP_Server" class="extiw" title="wikipedia:Apache HTTP Server">Apache server</a> on a Virtual Machine from the host machine <b>only</b>, simply execute the following lines on the host:
</p>
<pre>$ VBoxManage setextradata GuestName "VBoxInternal/Devices/<i>pcnet</i>/0/LUN#0/Config/Apache/HostPort" <i>8888</i>
$ VBoxManage setextradata GuestName "VBoxInternal/Devices/<i>pcnet</i>/0/LUN#0/Config/Apache/GuestPort" <i>80</i>
$ VBoxManage setextradata GuestName "VBoxInternal/Devices/<i>pcnet</i>/0/LUN#0/Config/Apache/Protocol" TCP
</pre>
<p>Where 8888 is the port the host should listen on and 80 is the port the VM will send Apache's signal on.
</p>
<p>To use a port lower than 1024 on the host machine, changes need to be made to the firewall on that host machine. This can also be set up to work with SSH or any other services by changing "Apache" to the corresponding service and ports.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> <code>pcnet</code> refers to the network card of the VM. If you use an Intel card in your VM settings, change <code>pcnet</code> to <code>e1000</code>.</div>
<p>To communicate between the VirtualBox guest and host using ssh, the server port must be forwarded under Settings &gt; Network. When connecting from the client/host, connect to the IP address of the client/host machine, as opposed to the connection of the other machine. This is because the connection will be made over a virtual adapter.
</p>
<h3>
<span id="Acelera.C3.A7.C3.A3o_D3D_em_convidados_Windows"></span><span class="mw-headline" id="Aceleração_D3D_em_convidados_Windows">Aceleração D3D em convidados Windows</span>
</h3>
<p>Recent versions of Virtualbox have support for accelerating OpenGL inside guests.  This can be enabled with a simple checkbox in the machine's settings, right below where video ram is set, and installing the Virtualbox guest additions.  However, most Windows games use Direct3D (part of DirectX), not OpenGL, and are thus not helped by this method.  However, it is possible to gain accelerated Direct3D in your Windows guests by borrowing the d3d libraries from Wine, which translate d3d calls into OpenGL, which is then accelerated. These libraries are now part of Virtualbox guest additions software.
</p>
<p>After enabling OpenGL acceleration as described above, reboot the guest into safe mode (press F8 before the Windows screen appears but after the Virtualbox screen disappears), and install Virtualbox guest additions, during install enable checkbox "Direct3D support". Reboot back to normal mode and you should have accelerated Direct3D.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong>  This hack may or may not work for some games depending on what hardware checks they make and what parts of D3D they use.</div>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong>  This was tested on Windows XP, 7 and 8.1. If method does not work on your Windows version please add data here.</div>
<h3><span class="mw-headline" id="VirtualBox_em_um_teclado_USB">VirtualBox em um teclado USB</span></h3>
<p>When using VirtualBox on a USB key, for example to start an installed machine with an ISO image, you will manually have to create VDMKs from the existing drives. However, once the new VMDKs are saved and you move on to another machine, you may experience problems launching an appropriate machine again. To get rid of this issue, you can use the following script to launch VirtualBox. This script will clean up and unregister old VMDK files and it will create new, proper VMDKs for you:
</p>
<pre>#!/bin/bash

# Erase old VMDK entries
rm ~/.VirtualBox/*.vmdk

# Clean up VBox-Registry
sed -i '/sd/d' ~/.VirtualBox/VirtualBox.xml

# Remove old harddisks from existing machines
find ~/.VirtualBox/Machines -name \*.xml | while read file; do
  line=`grep -e "type\=\"HardDisk\"" -n $file | cut -d ':' -f 1`
  if [ -n "$line" ]; then
    sed -i ${line}d $file
    sed -i ${line}d $file
    sed -i ${line}d $file
  fi
  sed -i "/rg/d" $file
done

# Delete prev-files created by VirtualBox
find  ~/.VirtualBox/Machines -name \*-prev -exec rm '{}' \;

# Recreate VMDKs
ls -l /dev/disk/by-uuid | cut -d ' ' -f 9,11 | while read ln; do
  if [ -n "$ln" ]; then
    uuid=`echo "$ln" | cut -d ' ' -f 1`
    device=`echo "$ln" | cut -d ' ' -f 2 | cut -d '/' -f 3 | cut -b 1-3`

    # determine whether drive is mounted already
    checkstr1=`mount | grep $uuid`
    checkstr2=`mount | grep $device`
    checkstr3=`ls ~/.VirtualBox/*.vmdk | grep $device`
    if [[ -z "$checkstr1" &amp;&amp; -z "$checkstr2" &amp;&amp; -z "$checkstr3" ]]; then
      VBoxManage internalcommands createrawvmdk -filename ~/.VirtualBox/$device.vmdk -rawdisk /dev/$device -register
    fi
  fi
done

# Start VirtualBox
VirtualBox
</pre>
<p>Note that your user has to be added to the "disk" group to create VMDKs out of existing drives.
</p>
<h3>
<span id="Executar_uma_instala.C3.A7.C3.A3o_nativa_do_Arch_Linux_no_VirtualBox"></span><span class="mw-headline" id="Executar_uma_instalação_nativa_do_Arch_Linux_no_VirtualBox">Executar uma instalação nativa do Arch Linux no VirtualBox</span>
</h3>
<p>If you have a dual boot system between Arch Linux and another operating system, it can become rapidly tedious to switch back and forth if you need to work in both. Also, by using virtual machines, you just have a tiny fragment of your computer power, which can cause issues when working on projects requiring performance.
</p>
<p>This guide will let you reuse, in a virtual machine, your native Arch Linux installation when you are running your second operating system. This way, you keep the ability to run each operating system natively, but have the option to run your Arch Linux installation inside a virtual machine.
</p>
<h4>
<span id="Verificar_se_voc.C3.AA_tem_um_esquema_de_nomea.C3.A7.C3.A3o_persistente"></span><span class="mw-headline" id="Verificar_se_você_tem_um_esquema_de_nomeação_persistente">Verificar se você tem um esquema de nomeação persistente</span>
</h4>
<p>Depending on your hard drive setup, device files representing your hard drives may appear differently when you will run your Arch Linux installation natively or in virtual machine. This problem occurs when using <a href="../en/RAID.html#Implementation" title="RAID">FakeRAID</a> for example. The fake RAID device will be mapped in <code>/dev/mapper/</code> when you run your GNU/Linux distribution natively, while the devices are still accessible separately. However, in your virtual machine, it can appear without any mapping in <code>/dev/sdaX</code> for example, because the drivers controlling the fake RAID in your host operating system (e.g. Windows) are abstracting the fake RAID device.
</p>
<p>To circumvent this problem, we will need to use an addressing scheme that is persistent to both systems. This can be achieved using <a href="../en/Persistent_block_device_naming.html#by-uuid" class="mw-redirect" title="UUID">UUIDs</a>. Make sure your <a href="../en/Arch_boot_process.html#Boot_loader" class="mw-redirect" title="Boot loader">boot loader</a> and <a href="../en/Fstab.html" title="Fstab">fstab</a> file is using UUIDs, otherwise fix this issue. Read <a href="../en/Fstab.html" title="Fstab">fstab</a> and <a href="../en/Persistent_block_device_naming.html" title="Persistent block device naming">Persistent block device naming</a>.
</p>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Warning:</strong> 
<ul>
<li>Make sure your host partition is only accessible in read only from your Arch Linux virtual machine, this will avoid risk of corruptions if you were to corrupt that host partition by writing on it due to lack of attention.</li>
<li>You should NEVER allow VirtualBox to boot from the entry of your second operating system, which, as a reminder, is used as the host for this virtual machine! Take thus a special care especially if your default boot loader/boot manager entry is your other operating system. Give a more important timeout or put it below in the order of preferences.</li>
</ul>
</div>
<h4>
<span id="Verificar_se_a_imagem_do_seu_mkinitcpio_est.C3.A1_correta"></span><span class="mw-headline" id="Verificar_se_a_imagem_do_seu_mkinitcpio_está_correta">Verificar se a imagem do seu mkinitcpio está correta</span>
</h4>
<p>Make sure your <a href="../en/Mkinitcpio.html" title="Mkinitcpio">mkinitcpio</a> configuration uses the <a href="../en/Mkinitcpio.html#HOOKS" title="Mkinitcpio">HOOK</a> <code>block</code>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/mkinitcpio.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[...]
HOOKS="base udev autodetect modconf <i>block</i> filesystems keyboard fsck"
[...]</pre>
<p>If it is not present, add it and <a href="../en/Mkinitcpio.html#Image_creation_and_activation" class="mw-redirect" title="Regenerate the initramfs">regenerate the initramfs</a>.
</p>
<h4>
<span id="Criar_uma_configura.C3.A7.C3.A3o_de_VM_para_inicializar_a_partir_da_unidade_f.C3.ADsica"></span><span class="mw-headline" id="Criar_uma_configuração_de_VM_para_inicializar_a_partir_da_unidade_física">Criar uma configuração de VM para inicializar a partir da unidade física</span>
</h4>
<h5><span class="mw-headline" id="Criar_uma_imagem_.vmdk_de_disco_raw">Criar uma imagem .vmdk de disco raw</span></h5>
<p>Now, we need to create a new virtual machine which will use a <a rel="nofollow" class="external text" href="https://www.virtualbox.org/manual/ch09.html#rawdisk">RAW disk</a> as virtual drive, for that we will use a ~ 1Kio VMDK file which will be mapped to a physical disk. Unfortunately, VirtualBox does not have this option in the GUI, so we will have to use the console and use an internal command of <code>VBoxManage</code>.
</p>
<p>Boot the host which will use the Arch Linux virtual machine. The command will need to be adapted according to the host you have.
</p>
<dl>
<dt>On a GNU/Linux host</dt>
<dd></dd>
</dl>
<p>There are 3 ways to achieve this: login as root, changing the access right of the device with <code>chmod</code>, adding your user to the <code>disk</code> group. The latter way is the more elegant, let us proceed that way:
</p>
<pre># gpasswd -a <i>your_user</i> disk
</pre>
<p>Apply the new group settings with:
</p>
<pre>$ newgrp
</pre>
<p>Now, you can use the command:
</p>
<pre>$ VBoxManage internalcommands createrawvmdk -filename <i>/path/to/file.vmdk</i> -rawdisk <i>/dev/sdb</i> -register
</pre>
<p>Adapt the above command to your need, especially the path and filename of the VMDK location and the raw disk location to map which contain your Arch Linux installation.
</p>
<dl>
<dt>On a Windows host</dt>
<dd></dd>
</dl>
<p>
Open a command prompt must be run as administrator. </p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> On Windows, open your start menu/start screen, type <code>cmd</code>, and type <code>Ctrl+Shift+Enter</code>, this is a shortcut to execute the selected program with admin rights.</div>
<p>
On Windows, as the disk filename convention is different from UNIX, use this command to determine what drives you have in your Windows system and their location:</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"># wmic diskdrive get name,size,model</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Model                               Name                Size
WDC WD40EZRX-00SPEB0 ATA Device     \\.\PHYSICALDRIVE1  4000783933440
KINGSTON SVP100S296G ATA Device     \\.\PHYSICALDRIVE0  96024821760
Hitachi HDT721010SLA360 ATA Device  \\.\PHYSICALDRIVE2  1000202273280
Innostor Ext. HDD USB Device        \\.\PHYSICALDRIVE3  1000202273280</pre>
<p>In this example, as the Windows convention is <code>\\.\PhysicalDriveX</code> where X is a number from 0, <code>\\.\PHYSICALDRIVE1</code> could be analogous to <code>/dev/sdb</code> from the Linux disk terminology.
</p>
<p>To use the <code>VBoxManage</code> command on Windows, you can either, change the current directory to your VirtualBox installation folder first with <code>cd C:\Program Files\Oracle\VirtualBox\</code>
</p>
<pre># .\VBoxManage.exe internalcommands createrawvmdk -filename C:\file.vmdk -rawdisk \\.\PHYSICALDRIVE1
</pre>
<p>or use the absolute path name:
</p>
<pre># "C:\Program Files\Oracle\VirtualBox\VBoxManage.exe" internalcommands createrawvmdk -filename C:\file.vmdk -rawdisk \\.\PHYSICALDRIVE1
</pre>
<dl>
<dt>On another OS host</dt>
<dd></dd>
</dl>
<p>There are other limitations regarding the aforementioned command when used in other operating systems like OS X, please thus <a rel="nofollow" class="external text" href="https://www.virtualbox.org/manual/ch09.html#rawdisk">read carefully the manual page</a>, if you are concerned.
</p>
<h5>
<span id="Criar_o_arquivo_de_configura.C3.A7.C3.A3o_da_VM"></span><span class="mw-headline" id="Criar_o_arquivo_de_configuração_da_VM">Criar o arquivo de configuração da VM</span>
</h5>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> 
<ul>
<li>To make use of the VBoxManage command on Windows, you need to change the current directory to your VirtualBox installation folder first: cd C:\Program Files\Oracle\VirtualBox\.</li>
<li>Windows makes use of backslashes instead of slashes, please replace all slashes / occurrences by backslashes \ in the commands that follow when you will use them.</li>
</ul>
</div>
<p>After, we need to create a new machine (replace the <i>VM_name</i> to your convenience) and register it with VirtualBox.
</p>
<pre>$ VBoxManage createvm -name <i>VM_name</i> -register
</pre>
<p>Then, the newly raw disk needs to be attached to the machine. This will depend if your computer or actually the root of your native Arch Linux installation is on an IDE or a SATA controller.
</p>
<p>If you need an IDE controller:
</p>
<pre>$ VBoxManage storagectl <i>VM_name</i> --name "IDE Controller" --add ide
$ VBoxManage storageattach <i>VM_name</i> --storagectl "IDE Controller" --port 0 --device 0 --type hdd --medium /path/to/file.vmdk
</pre>
<p>otherwise:
</p>
<pre>$ VBoxManage storagectl <i>VM_name</i> --name "SATA Controller" --add sata
$ VBoxManage storageattach <i>VM_name</i> --storagectl "SATA Controller" --port 0 --device 0 --type hdd --medium /path/to/file.vmdk
</pre>
<p>While you continue using the CLI, it is recommended to use the VirtualBox GUI, to personalise the virtual machine configuration. Indeed, you must specify its hardware configuration as close as possible as your native machine: turning on the 3D acceleration, increasing video memory, setting the network interface, etc.
</p>
<p>Finally, you may want to seamlessly integrate your Arch Linux with your host operating system and allow copy pasting between both OSes. Please refer to <a href="../en/VirtualBox/Install_Arch_Linux_as_a_guest.html#Install_the_Guest_Additions" title="VirtualBox/Install Arch Linux as a guest">VirtualBox/Install Arch Linux as a guest#Install the Guest Additions</a> for that, since this Arch Linux virtual machine is basically an Arch Linux guest.
</p>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Warning:</strong> For <a href="../en/Xorg.html" title="Xorg">Xorg</a> to work in natively and in the virtual machine, since obviously it will be using different drivers, it is best if there is no <code>/etc/X11/xorg.conf</code>, so Xorg will pick up everything it needs on the fly. However, if you really do need your own Xorg configuration, maybe is it worth to set your default systemd target to <code>multi-user.target</code> with <code>systemctl isolate graphical.target</code> as root (more details at <a href="../en/Systemd.html#Targets" title="Systemd">Systemd#Targets</a> and <a href="../en/Systemd.html#Change_current_target" title="Systemd">Systemd#Change current target</a>). In that way, the graphical interface is disabled (i.e. Xorg is not launched) and after you logged in, you can <code>startx</code>} manually with a custom <code>xorg.conf</code>.</div>
<h3><span class="mw-headline" id="Instalar_um_sistema_Arch_Linux_nativo_a_partir_do_VirtualBox">Instalar um sistema Arch Linux nativo a partir do VirtualBox</span></h3>
<p>In some cases it may be useful to install a native Arch Linux system while running another operating system: one way to accomplish this is to perform the installation through VirtualBox on a <a rel="nofollow" class="external text" href="http://www.virtualbox.org/manual/ch09.html#rawdisk">raw disk</a>. If the existing operating system is Linux based, you may want to consider following <a href="../en/Install_Arch_Linux_from_existing_Linux.html" class="mw-redirect" title="Install from existing Linux">Install from existing Linux</a> instead.
</p>
<p>This scenario is very similar to <a href="#Run_a_native_Arch_Linux_installation_inside_VirtualBox">#Run a native Arch Linux installation inside VirtualBox</a><sup>[<a href="../pt/Help:Procedures.html#Corrigir_links_quebrados_de_se%C3%A7%C3%B5es" class="mw-redirect" title="Help:Procedimentos">link quebrado</a>: seção inválida]</sup>, but will follow those steps in a different order: start by <a href="#Create_a_raw_disk_.vmdk_image">#Create a raw disk .vmdk image</a><sup>[<a href="../pt/Help:Procedures.html#Corrigir_links_quebrados_de_se%C3%A7%C3%B5es" class="mw-redirect" title="Help:Procedimentos">link quebrado</a>: seção inválida]</sup>, then <a href="#Create_the_VM_configuration_file">#Create the VM configuration file</a><sup>[<a href="../pt/Help:Procedures.html#Corrigir_links_quebrados_de_se%C3%A7%C3%B5es" class="mw-redirect" title="Help:Procedimentos">link quebrado</a>: seção inválida]</sup>.
</p>
<p>Now, you should have a working VM configuration whose virtual VMDK disk is tied to a real disk. The installation process is exactly the same as the steps described in <a href="../en/VirtualBox/Install_Arch_Linux_as_a_guest.html" title="VirtualBox/Install Arch Linux as a guest">VirtualBox/Install Arch Linux as a guest</a>, but <a href="#Make_sure_you_have_a_persistent_naming_scheme">#Make sure you have a persistent naming scheme</a><sup>[<a href="../pt/Help:Procedures.html#Corrigir_links_quebrados_de_se%C3%A7%C3%B5es" class="mw-redirect" title="Help:Procedimentos">link quebrado</a>: seção inválida]</sup> and <a href="#Make_sure_your_mkinitcpio_image_is_correct">#Make sure your mkinitcpio image is correct</a><sup>[<a href="../pt/Help:Procedures.html#Corrigir_links_quebrados_de_se%C3%A7%C3%B5es" class="mw-redirect" title="Help:Procedimentos">link quebrado</a>: seção inválida]</sup>.
</p>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Warning:</strong> 
<ul>
<li>For BIOS systems and MBR disks, do not install a bootloader inside your virtual machine, this will not work since the MBR is not linked to the MBR of your real machine and your virtual disk is only mapped to a real partition without the MBR.</li>
<li>For UEFI systems without <a href="https://en.wikipedia.org/wiki/Compatibility_Support_Module#CSM" class="extiw" title="wikipedia:Compatibility Support Module">CSM</a> and GPT disks, the installation will not work at all since:</li>
</ul>
<dl><dd><ul>
<li>the <a href="https://en.wikipedia.org/wiki/EFI_System_partition" class="extiw" title="wikipedia:EFI System partition">ESP</a> partition is not mapped to your virtual disk and Arch Linux requires to have the Linux kernel on it to boot as an EFI application (see <a href="../en/EFISTUB.html" title="EFISTUB">EFISTUB</a> for details);</li>
<li>and the efivars, if you are installing Arch Linux using the EFI mode brought by VirtualBox, are not the one of your real system: the bootmanager entries will hence not be registered.</li>
</ul></dd></dl>
<ul><li>This is why, it is recommended to create your partitions in a native installation first, otherwize the partitions will not be taken into consideration in your MBR/GPT partition table.</li></ul>
</div>
<p>After completing the installation, boot your computer natively with an GNU/Linux installation media (whether it be Arch Linux or not), <a href="../en/Installation_guide.html#Chroot" title="Installation guide">chroot</a> into your installed Arch Linux installation and install and configure a <a href="../en/Arch_boot_process.html#Boot_loader" class="mw-redirect" title="Bootloader">bootloader</a>.
</p>
<h3><span class="mw-headline" id="Instalar_convidado_MacOS">Instalar convidado MacOS</span></h3>
<p>Before starting the VM, run the following commands on the host machine <a rel="nofollow" class="external autonumber" href="https://medium.com/@twister.mr/installing-macos-to-virtualbox-1fcc5cf22801">[2]</a>:
</p>
<pre>$ VBoxManage modifyvm "MyMacVM" --cpuid-set 00000001 000106e5 00100800 0098e3fd bfebfbff
$ VBoxManage setextradata "MyMacVM" "VBoxInternal/Devices/efi/0/Config/DmiSystemVersion" "1.0"
$ VBoxManage setextradata "MyMacVM" "VBoxInternal/Devices/efi/0/Config/DmiBoardProduct" "Iloveapple"
$ VBoxManage setextradata "MyMacVM" "VBoxInternal/Devices/smc/0/Config/DeviceKey" "ourhardworkbythesewordsguardedpleasedontsteal(c)AppleComputerInc"
$ VBoxManage setextradata "MyMacVM" "VBoxInternal/Devices/smc/0/Config/GetKeyFromRealSMC" 1
$ VBoxManage setextradata "MyMacVM" VBoxInternal2/EfiGopMode 4
</pre>
<h4>
<span id="Nenhuma_entrada_do_teclado.2Fmouse_ao_iniciar_a_instala.C3.A7.C3.A3o_do_Mojave"></span><span class="mw-headline" id="Nenhuma_entrada_do_teclado/mouse_ao_iniciar_a_instalação_do_Mojave">Nenhuma entrada do teclado/mouse ao iniciar a instalação do Mojave</span>
</h4>
<p>If you are attempting to install Mojave, after doing the aforementioned steps, the installer will load up but you might not be able to send keyboard or mouse input. The reason seems to be that Mojave no longer supports the USB 1.1 controllers and in order to fix the issue you need to emulating USB 3.0. To do that first install the <a href="#Extension_pack">VirtualBox Extension pack</a><sup>[<a href="../pt/Help:Procedures.html#Corrigir_links_quebrados_de_se%C3%A7%C3%B5es" class="mw-redirect" title="Help:Procedimentos">link quebrado</a>: seção inválida]</sup>.
</p>
<p>Then go to <i>Machine &gt; Settings &gt; USB</i> and select <i>USB 3.0</i>. Input should work from this point onwards.
</p>
<h4>
<span id="Shell_interativo_UEFI_ap.C3.B3s_reiniciar"></span><span class="mw-headline" id="Shell_interativo_UEFI_após_reiniciar">Shell interativo UEFI após reiniciar</span>
</h4>
<p>If the installer is unable to properly format the bootable drive during installation and you end up in an UEFI shell, enter the following:
</p>
<ol>
<li>Type <code>exit</code> at the UEFI prompt</li>
<li>Select <i>Boot Maintenance Manager</i>
</li>
<li>Select <i>Boot From File</i>
</li>
</ol>
<p>You will now be brought to couple of obscure PCI paths. The first one is the one that you just attempted to boot from and it did not work. The second (or third) one should be the one with the MacOS recovery partition that you need to load to continue the installation. Click the second Entry. If it's empty, press <code>Esc</code> to go back and select the third entry. Once you get one with folders click though the folders. It should be something like <i>macOS Install Data &gt;  Locked Files &gt;  Boot Files &gt;  boot.efi</i> . Once you click enter on the <i>boot.efi</i> you should boot into the MacOS installer and resume installation. Note that some of the subdirectories might be missing. Remember that you need to get to a <code>boot.efi</code>.<a rel="nofollow" class="external autonumber" href="https://superuser.com/questions/1235970/stuck-on-uefi-interactive-shell-with-mac-os-x-high-sierra-vm">[3]</a>
</p>
<h3>
<span id="Mover_uma_instala.C3.A7.C3.A3o_nativa_do_Windows_para_uma_m.C3.A1quina_virtual"></span><span class="mw-headline" id="Mover_uma_instalação_nativa_do_Windows_para_uma_máquina_virtual">Mover uma instalação nativa do Windows para uma máquina virtual</span>
</h3>
<p>If you want to migrate an existing native Windows installation to a virtual machine which will be used with VirtualBox on GNU/Linux, this use case is for you. This section only covers native Windows installation using the MSDOS/Intel partition scheme. Your Windows installation must reside on the first MBR partition for this operation to success. Operation for other partitions are available but have been untested (see <a href="#Known_limitations">#Known limitations</a><sup>[<a href="../pt/Help:Procedures.html#Corrigir_links_quebrados_de_se%C3%A7%C3%B5es" class="mw-redirect" title="Help:Procedimentos">link quebrado</a>: seção inválida]</sup> for details).
</p>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Warning:</strong> If you are using an OEM version of Windows, this process is unauthorized by the end user license license. Indeed, the OEM license typically states the Windows install is tied with the hardware together. Transferring a Windows install to a virtual machine removes this link. Make thus sure you have a full Windows install or a volume license model before continuing. If you have a full Windows license but the latter is not coming in volume, nor as a special license for several PCs, this means you will have to remove the native installation after the transfer operation has been achieved.</div>
<p>A couple of tasks are required to be done inside your native Windows installation first, then on your GNU/Linux host.
</p>
<h4><span class="mw-headline" id="Tarefas_no_Windows">Tarefas no Windows</span></h4>
<p>The first three following points comes from <a rel="nofollow" class="external text" href="https://www.virtualbox.org/wiki/Migrate_Windows#HAL">this outdated VirtualBox wiki page</a>, but are updated here.
</p>
<ul><li>Remove IDE/ATA controllers checks (Windows XP only): Windows memorize the IDE/ATA drive controllers it has been installed on and will not boot if it detects these have changed. The solution proposed by Microsoft is to reuse the same controller or use one of the same serial, which is impossible to achieve since we are using a Virtual Machine. <a rel="nofollow" class="external text" href="https://www.virtualbox.org/wiki/Migrate_Windows#HardDiskSupport">MergeIDE</a>, a German tool, developped upon another other solution proposed by Microsoft can be used. That solution basically consists in taking all IDE/ATA controller drivers supported by Windows XP from the initial driver archive (the location is hard coded, or specify it as the first argument to the <code>.bat</code> script), installing them and registering them with the regedit database.</li></ul>
<ul><li>Use the right type of Hardware Abstraction Layer (old 32 bits Windows versions): Microsoft ships 3 default versions: <code>Hal.dll</code> (Standard PC), <code>Halacpi.dll</code> (ACPI HAL) and <code>Halaacpi.dll</code> (ACPI HAL with IO APIC). Your Windows install could come installed with the first or the second version. In that way, please <a rel="nofollow" class="external text" href="https://www.virtualbox.org/manual/ch08.html#idp56927888">disable the <i>Enable IO/APIC</i> VirtualBox extended feature</a>.</li></ul>
<ul><li>Disable any AGP device driver (only outdated Windows versions): If you have the files <code>agp440.sys</code> or <code>intelppm.sys</code> inside the <code>C:\Windows\SYSTEM32\drivers\</code> directory, remove it. As VirtualBox uses a PCI virtual graphic card, this can cause problems when this AGP driver is used.</li></ul>
<ul><li>Create a Windows recovery disk: In the following steps, if things turn bad, you will need to repair your Windows installation. Make sure you have an install media at hand, or create one with <i>Create a recovery disk</i> from Vista SP1, <i>Create a system repair disc</i> on Windows 7 or <i>Create a recovery drive</i> on Windows 8.x).</li></ul>
<h4>
<span id="Usando_Disk2vhd_para_clonar_parti.C3.A7.C3.A3o_do_Windows"></span><span class="mw-headline" id="Usando_Disk2vhd_para_clonar_partição_do_Windows">Usando Disk2vhd para clonar partição do Windows</span>
</h4>
<p>Boot into Windows, clean up the installation (with <a rel="nofollow" class="external text" href="http://www.piriform.com/ccleaner">CCleaner</a> for example), use <a rel="nofollow" class="external text" href="https://technet.microsoft.com/en-us/library/ee656415.aspx">disk2vhd</a> tool to create a VHD image. Include a reserved system partition (if present) and the actual Windows partition (usually disk C:). The size of Disk2vhd-created image will be the sum of the actual files on the partition (used space), not the size of a whole partition. If all goes well, the image should just boot in a VM and you will not have to go through the hassle with MBR and Windows bootloader, as in the case of cloning an entire partition.
</p>
<h4>
<span id="Tarefas_no_GNU.2FLinux"></span><span class="mw-headline" id="Tarefas_no_GNU/Linux">Tarefas no GNU/Linux</span>
</h4>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> Skip the partition-related parts if you created VHD image with <a href="#Using_Disk2vhd_to_clone_Windows_partition">Disk2vhd</a><sup>[<a href="../pt/Help:Procedures.html#Corrigir_links_quebrados_de_se%C3%A7%C3%B5es" class="mw-redirect" title="Help:Procedimentos">link quebrado</a>: seção inválida]</sup>.</div>
<ul><li>Reduce the native Windows partition size to the size Windows actually needs with <code>ntfsresize</code> available from <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=ntfs-3g">ntfs-3g</a></span>. The size you will specify will be the same size of the VDI that will be created in the next step. If this size is too low, you may break your Windows install and the latter might not boot at all.</li></ul>
<dl>
<dd>Use the <code>--no-action</code> option first to run a test:</dd>
<dd><pre># ntfsresize --no-action --size <i>52Gi</i> <i>/dev/sda1</i></pre></dd>
</dl>
<dl><dd>If only the previous test succeeded, execute this command again, but this time without the aforementioned test flag.</dd></dl>
<ul><li>Install VirtualBox on your GNU/Linux host (see <a href="#Installation_steps_for_Arch_Linux_hosts">#Installation steps for Arch Linux hosts</a><sup>[<a href="../pt/Help:Procedures.html#Corrigir_links_quebrados_de_se%C3%A7%C3%B5es" class="mw-redirect" title="Help:Procedimentos">link quebrado</a>: seção inválida]</sup> if your host is Arch Linux).</li></ul>
<ul><li>Create the Windows disk image from the beginning of the drive to the end of the first partition where is located your Windows installation. Copying from the beginning of the disk is necessary because the MBR space at the beginning of the drive needs to be on the virtual drive along with the Windows partition. In this example two following partitions <code>sda2</code> and <code>sda3</code>will be later removed from the partition table and the MBR bootloader  will be updated.</li></ul>
<dl>
<dd><pre># sectnum=$(( $(cat /sys/block/''sda/sda1''/start) + $(cat /sys/block/''sda/sda1''/size) ))</pre></dd>
<dd>Using <code>cat /sys/block/<i>sda/sda1</i>/size</code> will output the number of total sectors of the first partition of the disk <code>sda</code>. Adapt where necessary.</dd>
</dl>
<dl>
<dd><pre># dd if=''/dev/sda'' bs=512 count=$sectnum | VBoxManage convertfromraw stdin ''windows.vdi'' $(( $sectnum * 512 ))</pre></dd>
<dd>We need to display the size in byte, <code>$(( $sectnum * 512 ))</code> will convert the sector numbers to bytes.</dd>
</dl>
<ul><li>Since you created your disk image as root, set the right ownership to the virtual disk image: <pre># chown <i>your_user</i>:<i>your_group</i> windows.vdi</pre>
</li></ul>
<ul><li>Create your virtual machine configuration file and use the virtual disk created previously as the main virtual hard disk.</li></ul>
<ul><li>Try to boot your Windows VM, it may just work.  First though remove and repair disks from the boot process as it may interfere (and likely will) booting into safe-mode.</li></ul>
<ul><li>Attempt to boot your Windows virtual machine in safe mode (press the F8 key before the Windows logo shows up)... if running into boot issues, read <a href="#Fix_MBR_and_Microsoft_bootloader">#Fix MBR and Microsoft bootloader</a><sup>[<a href="../pt/Help:Procedures.html#Corrigir_links_quebrados_de_se%C3%A7%C3%B5es" class="mw-redirect" title="Help:Procedimentos">link quebrado</a>: seção inválida]</sup>.  In safe-mode, drivers will be installed likely by the Windows plug-and-play detection mechanism <a rel="nofollow" class="external text" href="http://i.imgur.com/hh1RrSp.png">view</a>.  Additionally, install the VirtualBox Guest Additions via the menu <i>Devices</i> &gt; <i>Insert Guest Additions CD image...</i>. If a new disk dialog does not appear, navigate to the CD drive and start the installer manually.</li></ul>
<ul><li>You should finally have a working Windows virtual machine. Do not forget to read the <a href="#Known_limitations">#Known limitations</a><sup>[<a href="../pt/Help:Procedures.html#Corrigir_links_quebrados_de_se%C3%A7%C3%B5es" class="mw-redirect" title="Help:Procedimentos">link quebrado</a>: seção inválida]</sup>.</li></ul>
<ul><li>Performance tip: according to <a rel="nofollow" class="external text" href="http://www.virtualbox.org/manual/ch05.html#harddiskcontrollers">VirtualBox manual</a>, SATA controller has a better performance than IDE. If you cannot boot Windows off virtual SATA controller right away, it is probably due to the lack of SATA drivers. Attach virtual disk to IDE controller, create an empty SATA controller and boot the VM - Windows should automatically install SATA drivers for the controller. You can then shutdown VM, detach virtual disk from IDE controller and attach it to SATA controller instead.</li></ul>
<h4><span class="mw-headline" id="Corrigir_MBR_e_gerenciador_de_boot_da_Microsoft">Corrigir MBR e gerenciador de boot  da Microsoft</span></h4>
<p>If your Windows virtual machine refuses to boot, you may need to apply the following modifications to your virtual machine.
</p>
<ul><li>Boot a GNU/Live live distribution inside your virtual machine before Windows starts up.</li></ul>
<ul><li>Remove other partitions entries from the virtual disk MBR. Indeed, since we copied the MBR and only the Windows partition, the entries of the other partitions are still present in the MBR, but the partitions are not available anymore. Use <code>fdisk</code> to achieve this for example.</li></ul>
<dl><dd><pre>fdisk ''/dev/sda''
Command (m for help): a
Partition number (''1-3'', default ''3''): ''1''</pre></dd></dl>
<ul><li>Write the updated partition table to the disk (this will recreate the MBR) using the <code>m</code> command inside <code>fdisk</code>.</li></ul>
<ul><li>Use <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=testdisk">testdisk</a></span> (see <a rel="nofollow" class="external text" href="http://www.cgsecurity.org/index.html?testdisk.html">here</a> for details) to add a generic MBR:</li></ul>
<dl><dd><pre># testdisk &gt; <i>Disk /dev/sda...</i> &gt; [Proceed] &gt;  [Intel] Intel/PC partition &gt; [MBR Code] Write TestDisk MBR to first sector &gt; Write a new copy of MBR code to first sector? (Y/n) &gt; Y &gt; Write a new copy of MBR code, confirm? (Y/N) &gt; A new copy of MBR code has been written. You have to reboot for the change to take effect. &gt; [OK]</pre></dd></dl>
<ul><li>With the new MBR and updated partition table, your Windows virtual machine should be able to boot. If you are still encountering issues, boot your Windows recovery disk from on of the previous step, and inside your Windows RE environment, execute the commands <a rel="nofollow" class="external text" href="https://support.microsoft.com/kb/927392">described here</a>.</li></ul>
<h4>
<span id="Limita.C3.A7.C3.B5es_conhecidas"></span><span class="mw-headline" id="Limitações_conhecidas">Limitações conhecidas</span>
</h4>
<ul>
<li>Your virtual machine can sometimes hang and overrun your RAM, this can be caused by conflicting drivers still installed inside your Windows virtual machine. Good luck to find them!</li>
<li>Additional software expecting a given driver beneath may either not be disabled/uninstalled or needs to be uninstalled first as the drivers that are no longer available.</li>
<li>Your Windows installation must reside on the first partition for the above process to work. If this requirement is not met, the process might be achieved too, but this had not been tested. This will require either copying the MBR and editing in hexadecimal see <a rel="nofollow" class="external text" href="https://superuser.com/questions/237782/virtualbox-booting-cloned-disk/253417#253417">VirtualBox: booting cloned disk</a> or will require to fix the partition table <a rel="nofollow" class="external text" href="http://gparted.org/h2-fix-msdos-pt.php">manually</a> or by repairing Windows with the recovery disk you created in a previous step. Let us consider our Windows installation on the second partition; we will copy the MBR, then the second partition where to the disk image. <code>VBoxManage convertfromraw</code> needs the total number of bytes that will be written: calculated thanks to the size of the MBR (the start of the first partition) plus the size of the second (Windows) partition. <code>{ dd if=/dev/sda bs=512 count=$(cat /sys/block/sda/sda1/start) ; dd if=/dev/sda2 bs=512 count=$(cat /sys/block/sda/sda2/size) ; } | VBoxManage convertfromraw stdin windows.vdi $(( ($(cat /sys/block/sda/sda1/start) + $(cat /sys/block/sda/sda2/size)) * 512 ))</code>.</li>
</ul>
<h3>
<span id="Executar_uma_parti.C3.A7.C3.A3o_do_Windows_no_VirtualBox"></span><span class="mw-headline" id="Executar_uma_partição_do_Windows_no_VirtualBox">Executar uma partição do Windows no VirtualBox</span>
</h3>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> The technique outlined in this section only applies to <a href="../en/Unified_Extensible_Firmware_Interface.html" class="mw-redirect" title="UEFI">UEFI</a> systems.</div>
<p>In some cases, it is useful to be able to <a href="../en/Dual_boot_with_Windows.html" title="Dual boot with Windows">dual boot with Windows</a> <i>and</i> access the partition in a virtual machine. This process is significantly different from <a href="#Move_a_native_Windows_installation_to_a_virtual_machine">#Move a native Windows installation to a virtual machine</a><sup>[<a href="../pt/Help:Procedures.html#Corrigir_links_quebrados_de_se%C3%A7%C3%B5es" class="mw-redirect" title="Help:Procedimentos">link quebrado</a>: seção inválida]</sup> in several ways:
</p>
<ul>
<li>The Windows partition is not copied to a virtual disk image. Instead, a raw VMDK file is created</li>
<li>Changes in the VM will be mirrored in the partition, and vice versa</li>
<li>OEM licenses should still be satisfied, since the Windows partition still boots directly on the hardware</li>
</ul>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Warning:</strong> Some of the commands used here can corrupt either the Windows partition, the Arch Linux partition, or both. Use extreme caution when executing commands, and double check that they are being run in the correct shell. It would be a good idea to have a backup of the entire drive ready before beginning this process.</div>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> It will be useful to have the <a rel="nofollow" class="external text" href="https://archlinux.org/download/">Arch install ISO</a> readily available, as it will be used the configure the <a href="../en/EFI_system_partition.html" title="EFI system partition">EFI system partition</a> in the VM. It is also worth having access to Windows installation media (such as the <a rel="nofollow" class="external text" href="https://www.microsoft.com/en-us/software-download/windows10ISO">Windows 10 ISO</a>) in case the Windows partition is corrupted.</div>
<h4>
<span id="Configurar_o_udev_para_fornecer_ao_VirtualBox_acesso_de_raw_.C3.A0s_parti.C3.A7.C3.B5es_do_Windows"></span><span class="mw-headline" id="Configurar_o_udev_para_fornecer_ao_VirtualBox_acesso_de_raw_às_partições_do_Windows">Configurar o udev para fornecer ao VirtualBox acesso de raw às partições do Windows</span>
</h4>
<p>VirtualBox must have <a rel="nofollow" class="external text" href="https://www.virtualbox.org/manual/ch09.html#rawdisk">raw disk access</a> in order to run a Windows partition. Normally, this would require VirtualBox to be run with full root privileges, but <a href="../en/Udev.html" title="Udev">udev</a> can be configured to restrict access to certain partitions. One convenient way to do this assign all Windows-related partitions to the <i>vboxusers</i> group, which can be done with the following udev rules:
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> The UUIDs in these rules correspond to particular <a href="https://en.wikipedia.org/wiki/GUID_Partition_Table#Partition_type_GUIDs" class="extiw" title="wikipedia:GUID Partition Table">GPT partition types</a>. In this case, the UUIDs correspond to all <a href="https://en.wikipedia.org/wiki/Microsoft_Reserved_Partition" class="extiw" title="wikipedia:Microsoft Reserved Partition">Microsoft Reserved</a> (<i>msftres</i>) and <a href="https://en.wikipedia.org/wiki/Microsoft_basic_data_partition" class="extiw" title="wikipedia:Microsoft basic data partition">Microsoft basic data</a> (<i>msftdata</i>) partitions.</div>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/udev/rules.d/99-vbox.rules</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;"># Rules to give VirtualBox users raw access to Windows partitions

# Microsoft Reserved partitions (msftres)
SUBSYSTEM=="block", ENV{ID_PART_ENTRY_TYPE}=="e3c9e316-0b5c-4db8-817d-f92df00215ae", GROUP="vboxusers"

# Windows partitions (msftdata)
SUBSYSTEM=="block", ENV{ID_PART_ENTRY_TYPE}=="ebd0a0a2-b9e5-4433-87c0-68b6b72699c7", GROUP="vboxusers"
</pre>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> Useful udev environment variables and attributes corresponding to a particular partition can be found by running <code>udevadm info /dev/<i>sdXX</i></code>.</div>
<h4>
<span id="Configura.C3.A7.C3.A3o_do_VirtualBox"></span><span class="mw-headline" id="Configuração_do_VirtualBox">Configuração do VirtualBox</span>
</h4>
<p>A VirtualBox VM must be manually created with a custom configuration.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Do not add a virtual disk during the initial creation of the VM.</div>
<p>Configure the VM with the following settings:
</p>
<ul>
<li>System
<ul>
<li>Motherboard
<ul>
<li><i>Enable I/O APIC</i></li>
<li><i>Enable EFI</i></li>
<li><i>Hardware Clock in UTC Time</i></li>
</ul>
</li>
<li>Acceleration
<ul>
<li>Paravirtualization Interface: <i>Hyper-V</i>
</li>
<li><i>Enable VT-x/AMD-V</i></li>
<li><i>Enable Nested Paging</i></li>
</ul>
</li>
</ul>
</li>
<li>Display &gt; Screen &gt; Acceleration
<ul>
<li><i>Enable 3D Acceleration</i></li>
<li><i>Enable 2D Acceleration</i></li>
</ul>
</li>
<li>USB &gt; <i>Enable USB Controller</i>
</li>
</ul>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> The <i>Hyper-V</i> setting is not required in order for the system to operate correctly, but it may help avoid licensing issues.</div>
<h5><span class="mw-headline" id="Criar_arquivos_de_imagem_de_disco_virtual">Criar arquivos de imagem de disco virtual</span></h5>
<p>To access the Windows partitions, create a <a rel="nofollow" class="external text" href="https://www.virtualbox.org/manual/ch09.html#rawdisk-access-disk-partitions">raw VMDK file</a> pointing to the relevant Windows partitions and set the ownership:
</p>
<pre># vboxmanage internalcommands createrawvmdk -filename <i>/path/to/vm/folder/windows.vmdk</i> -rawdisk /dev/<i>sdx</i> -partitions <i>res</i>,<i>data</i> -relative
# chown <i>user</i>:<i>group</i> <i>/path/to/vm/folder/windows.vmdk</i></pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> When creating the raw VMDK file...
<ul>
<li>Root access because VirtualBox must read the partition table</li>
<li>The <code>-rawdisk</code> parameter should point to a block device, not a partition</li>
<li>
<i>res</i> is the partition number of the Microsoft Reserved Partition</li>
<li>
<i>data</i> is the partition number of the Microsoft basic data partition (i.e. the Windows installation)</li>
<li>An extra file (<i>windows-pt.vmdk</i>) will also be created</li>
<li>
<i>windows.vmdk</i> will need to be re-created if the partition table is changed</li>
</ul>
</div>
<p>After creating the image, change the ownership so that the desired user/group has access:
</p>
<p>In order to boot the virtual machine in UEFI mode, a dedicated virtual disk for the <a href="../en/EFI_system_partition.html" title="EFI system partition">EFI system partition</a> must be created:
</p>
<pre>$ vboxmanage createmedium disk --filename <i>/path/to/vm/folder/esp.vmdk</i> --size 512 --format VMDK</pre>
<h5>
<span id="Anexar_imagens_de_disco_virtual_.C3.A0_VM"></span><span class="mw-headline" id="Anexar_imagens_de_disco_virtual_à_VM">Anexar imagens de disco virtual à VM</span>
</h5>
<h6>
<span id="Configura.C3.A7.C3.A3o_de_permiss.C3.B5es_do_sistema_de_arquivos_com_seguran.C3.A7a_mais_alta"></span><span class="mw-headline" id="Configuração_de_permissões_do_sistema_de_arquivos_com_segurança_mais_alta">Configuração de permissões do sistema de arquivos com segurança mais alta</span>
</h6>
<p>Add your user in virtualbox group:
</p>
<pre># usermod -aG vboxusers user
</pre>
<p>Determine the UUID of the targeted disk.
</p>
<pre># udevadm info /dev/sdb | grep UUID
</pre>
<p>Example of output:
</p>
<pre>E: ID_PART_TABLE_UUID=01234567-89ab-cdef-0123-456789abcde
</pre>
<p>Create an udev rule with the found UUID:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/udev/rules.d/99-vbox.rules</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;"># Rules to give VirtualBox users raw access to Windows disk

# sdb
ENV{ID_PART_ENTRY_TYPE}=="1234567-89ab-cdef-0123-456789abcde", GROUP="vboxusers"</pre>
<h6>
<span id="Configura.C3.A7.C3.A3o_de_permiss.C3.B5es_do_sistema_de_arquivos_com_seguran.C3.A7a_mais_baixa"></span><span class="mw-headline" id="Configuração_de_permissões_do_sistema_de_arquivos_com_segurança_mais_baixa">Configuração de permissões do sistema de arquivos com segurança mais baixa</span>
</h6>
<p>To be able to add the vmdk file in Virtualbox Virtual Media Manager without running VirtualBox as root, the user need to be in <code>vboxusers</code> and <code>disk</code> groups.
</p>
<pre># usermod -aG disk,vboxusers user
</pre>
<p>Once the disk is added to the Virtual Media Manager, it is possible to attach it to a virtual machine through the GUI.
</p>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Warning:</strong> Be aware of the potential security implications of this, as you will probably be giving your user account full read-write access to some or all storage devices.
</div>
<h4><span class="mw-headline" id="Configurar_uma_ESP_separada_no_VirtualBox">Configurar uma ESP separada no VirtualBox</span></h4>
<p>Configure the settings of the virtual machine and add the previously created ESP disk (ie /path/to/vm/folder/esp.vmdk) to the virtual machine.
</p>
<h4><span class="mw-headline" id="Configurar_o_firmware_UEFI_virtual_para_usar_o_gerenciador_de_boot_do_Windows">Configurar o firmware UEFI virtual para usar o gerenciador de boot do Windows</span></h4>
<p>This will require a Windows Installation disk (successfully tested Windows 10 Pro Build 1903).
</p>
<p>(Note: The following disk order may not matter) Configure the Virtual Machine with the previously created disks as following:
</p>
<ul>
<li>Add the newly created ESP disk as a SATA device (SATA Port 0).</li>
<li>Add the newly created rawdisk as a SATA device (SATA Port 1).</li>
<li>Mount the Windows Installation disk into an optical drive.</li>
</ul>
<p>Start the Virtual Machine and boot from the Windows Installation disk.
</p>
<p>Prior to partitioning and installation, press SHIFT+F10 to launch command prompt from the install media.
</p>
<p>Enter the following commands to create a new GPt partitioned disk (the ESP vmdk), and install the Windows Boot Loader onto it using configuration from the existing Windows partition:
</p>
<p><b>From the Command Prompt, open Diskpart.</b>
</p>
<pre>diskpart
</pre>
<p><b>List all disks identified by the system</b>
</p>
<pre>list disk
</pre>
<p>The desired disk should be 500MB in size and unpartitioned. If the disk order was adhered to as above, it should be <i>disk 0</i>.
</p>
<p><b>Select and use the desired disk</b>
</p>
<p>Here we will use <i>disk 0</i>
</p>
<pre>select disk 0
</pre>
<p><b>Format as UEFI and assign a label and drive letter</b>
</p>
<pre>clean
convert gpt
create partition efi size=100
format quick fs=fat32 label="System"
assign letter="S"
</pre>
<p><b>List all known volumes</b>
</p>
<pre>list volume
exit
</pre>
<p>It is likely that the original Windows partition will be listed as <i>C</i> here.
Our newly created UEFI boot partition will be labelled as <i>S</i> with <i>System</i>.
</p>
<p><b>Installed the Windows Boot Loader onto UEFI disk</b>
</p>
<p>Again, assuming out original Windows install is detected as 'C' and our new UEFI disk is 'S'
</p>
<pre>C:
cd C:\Windows\System32
bcdboot C:\Windows /s S: /f UEFI
</pre>
<p>Now simply detach the Windows Installation disk from the VM and reboot.
The VM should now boot from the newly installed boot partition on ESP vmdk, and load the original Windows installation. It may display 'detecting disks' for a short while prior to booting up.
</p>
<h3>
<span id="Executar_um_disco_totalmente_f.C3.ADsico_no_Virtualbox"></span><span class="mw-headline" id="Executar_um_disco_totalmente_físico_no_Virtualbox">Executar um disco totalmente físico no Virtualbox</span>
</h3>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> You may refer to Virtualbox official documentation <a rel="nofollow" class="external text" href="https://www.virtualbox.org/manual/ch09.html#rawdisk">9.8.1. Using a Raw Host Hard Disk From a Guest</a>.</div>
<p>This works the same way as <a href="#Run_a_Windows_partition_in_VirtualBox">#Run a Windows partition in VirtualBox</a><sup>[<a href="../pt/Help:Procedures.html#Corrigir_links_quebrados_de_se%C3%A7%C3%B5es" class="mw-redirect" title="Help:Procedimentos">link quebrado</a>: seção inválida]</sup> but the vmdk will contain the entire disk rather than one partion, and so you won't need to create a separate ESP or MBR partition as the one in the physical disk will be used.
</p>
<p>Create the raw disk:
</p>
<pre># VBoxManage internalcommands createrawvmdk -filename /path/to/file.vmdk -rawdisk /dev/sdb
</pre>
<p>Then follow the same method as in <a href="#Run_a_Windows_partition_in_VirtualBox">#Run a Windows partition in VirtualBox</a><sup>[<a href="../pt/Help:Procedures.html#Corrigir_links_quebrados_de_se%C3%A7%C3%B5es" class="mw-redirect" title="Help:Procedimentos">link quebrado</a>: seção inválida]</sup> for the configuration and virtual disk attachement.
</p>
<h3>
<span id="Definir_a_resolu.C3.A7.C3.A3o_inicial_do_convidado"></span><span class="mw-headline" id="Definir_a_resolução_inicial_do_convidado">Definir a resolução inicial do convidado</span>
</h3>
<p>You can change the BIOS/UEFI booting resolution using <code>VBoxManage</code> tool. For example:
</p>
<pre>$ VBoxManage setextradata "Your Virtual Machine Name" "VBoxInternal2/EfiGraphicsResolution" "2560x1440"
</pre>
<p>Recommended resolutions are 1280x720, 1920x1080, 2048x1080, 2560x1440, 3840x2160, 1280x800, 1280x1024, 1440x900, 1600x900.
</p>
<h3><span class="mw-headline" id="SSH_do_hospedeiro_para_o_convidado">SSH do hospedeiro para o convidado</span></h3>
<p>A aba de rede das configurações da máquina virtual contém, em <i>Avançado</i>, uma ferramenta para criar o encaminhamento de porta.
É possível usá-lo para encaminhar a porta ssh do convidado <code>22</code> para uma porta do hospedeiro, por exemplo, <code>3022</code>:
</p>
<pre>user@host$ ssh -p 3022 $USER@localhost
</pre>
<p>vai estabelecer uma conexão entre hospedeiro e o convidado.
</p>
<h4>
<span id="SSHFS_como_alternativa_.C3.A0_pasta_compartilhada"></span><span class="mw-headline" id="SSHFS_como_alternativa_à_pasta_compartilhada">SSHFS como alternativa à pasta compartilhada</span>
</h4>
<p>Usando este encaminhamento de porta e o sshfs, é simples montar o sistema de arquivos do convidado no do hospedeiro:
</p>
<pre>user@host$ sshfs -p 3022 $USER@localhost:$HOME ~/pasta_compartilhada
</pre>
<p>e transferir arquivos entre ambos.
</p>
<h2>
<span id="Solu.C3.A7.C3.A3o_de_problemas"></span><span class="mw-headline" id="Solução_de_problemas">Solução de problemas</span>
</h2>
<h3>
<span id="Teclado_e_mouse_est.C3.A3o_travados_na_m.C3.A1quina_virtual"></span><span class="mw-headline" id="Teclado_e_mouse_estão_travados_na_máquina_virtual">Teclado e mouse estão travados na máquina virtual</span>
</h3>
<p>Isso significa que sua máquina virtual capturou a entrada do teclado e do mouse. Simplesmente pressione a tecla <code>Ctrl</code> e sua entrada deve controlar seu hospedeiro novamente.
</p>
<p>Para controlar de forma transparente sua máquina virtual com o mouse indo e voltando de seu hospedeiro, sem ter que pressionar nenhuma tecla e, assim, ter uma integração perfeita, instale os adicionais para convidados dentro do convidado. Leia a partir do passo <a href="#Instalar_os_adicionais_para_convidado">#Instalar os adicionais para convidado</a><sup>[<a href="../pt/Help:Procedures.html#Corrigir_links_quebrados_de_se%C3%A7%C3%B5es" class="mw-redirect" title="Help:Procedimentos">link quebrado</a>: seção inválida]</sup> se o convidado for o Arch Linux, caso contrário leia a ajuda oficial do VirtualBox.
</p>
<h3>
<span id="Nenhuma_op.C3.A7.C3.A3o_para_cliente_de_SO_64_bits"></span><span class="mw-headline" id="Nenhuma_opção_para_cliente_de_SO_64_bits">Nenhuma opção para cliente de SO 64 bits</span>
</h3>
<p>Ao iniciar um cliente VM e nenhuma opção de 64 bits estiver disponível, verifique se os recursos de virtualização da CPU (geralmente denominados <code>VT-x</code>) estão habilitados na BIOS.
</p>
<p>Se você estiver usando um hospedeiro do Windows, talvez seja necessário desabilitar o Hyper-V, já que ele impede que o VirtualBox use o VT-x. <a rel="nofollow" class="external autonumber" href="https://www.virtualbox.org/ticket/12350">[4]</a>
</p>
<h3>
<span id="VirtualBox_GUI_n.C3.A3o_corresponde_ao_tema_GTK_do_hospedeiro"></span><span class="mw-headline" id="VirtualBox_GUI_não_corresponde_ao_tema_GTK_do_hospedeiro">VirtualBox GUI não corresponde ao tema GTK do hospedeiro</span>
</h3>
<p>Veja <a href="../en/Uniform_look_for_Qt_and_GTK_applications.html" title="Uniform look for Qt and GTK applications">Uniform look for Qt and GTK applications</a> para informações sobre aplicação de temas em aplicativos baseados no Q, como o VirtualBox.
</p>
<h3>
<span id="N.C3.A3o_.C3.A9_poss.C3.ADvel_enviar_Ctrl.2BAlt.2BFn_para_o_convidado"></span><span class="mw-headline" id="Não_é_possível_enviar_Ctrl+Alt+Fn_para_o_convidado">Não é possível enviar Ctrl+Alt+Fn para o convidado</span>
</h3>
<p>O sistema operacional do convidado é uma distribuição GNU/Linux e você deseja abrir um novo shell TTY pressionando <code>Ctrl+Alt+F2</code> ou sair da sessão atual com <code>Ctrl+Alt+Backspace</code>. Se você digitar esses atalhos de teclado sem qualquer adaptação, o convidado não receberá nenhuma entrada e o hospedeiro (se for uma distribuição GNU/Linux também) interceptará essas teclas de atalho. Para enviar <code>Ctrl+Alt+F2</code> para o convidado, por exemplo, simplesmente pressione a <i>Tecla do Hospedeiro</i> (normalmente a tecla <code>Ctrl</code> da direita) e pressione <code>F2</code> simultaneamente.
</p>
<h3>
<span id="Subsistema_USB_n.C3.A3o_funciona"></span><span class="mw-headline" id="Subsistema_USB_não_funciona">Subsistema USB não funciona</span>
</h3>
<p>Seu usuário deve estar no grupo <code>vboxusers</code> e você precisa instalar o <a href="#Pacote_de_extens%C3%B5es">pacote de extensões</a> se quiser suporte a USB 2. Em seguida, você poderá ativar o USB 2 nas configurações da VM e adicionar um ou vários filtros para os dispositivos que deseja acessar no sistema operacional do convidado.
</p>
<p>Se <code>VBoxManage list usbhost</code> não mostrar nenhum dispositivo USB, mesmo que seja executado como root, certifique-se de que não há regras antigas do udev (do VirtualBox 4.x) em <code>/etc/udev/rules.d/</code>. O VirtualBox 5.0 instala as regras do udev para <code>/usr/lib/udev/rules.d/</code>. Você pode usar o comando como <code>pacman -Qo /usr/lib/udev/rules.d/60-vboxdrv.rules</code> para determinar se o arquivo de regras do udev está desatualizado.
</p>
<p>Às vezes, em hospedeiros Linux antigos, o subsistema USB não é detectado automaticamente, resultando em um erro <code>Could not load the Host USB Proxy service: VERR_NOT_FOUND</code> ou em uma unidade USB não visível no hospedeiro, <a rel="nofollow" class="external text" href="https://bbs.archlinux.org/viewtopic.php?id=121377">mesmo quando o usuário está no grupo <b>vboxusers</b></a>. Este problema é devido ao fato de que o VirtualBox mudou de <i>usbfs</i> para <i>sysfs</i> na versão 3.0.8. Se o hospedeiro não entender essa alteração, você poderá reverter para o comportamento antigo definindo a seguinte variável de ambiente em qualquer arquivo originado pelo seu shell (por exemplo, <code>~/.bashrc</code> se estiver usando <i>bash</i>):
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.bashrc</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">VBOX_USB=usbfs</pre>
<p>Em seguida, certifique-se de que o ambiente tenha conhecimento dessa alteração (reconecte, crie o arquivo manualmente, ative uma nova instância do shell ou reinicialize).
</p>
<p>Certifique-se também de que seu usuário seja membro do grupo <code>storage</code>.
</p>
<h3>
<span id="Modem_USB_n.C3.A3o_funciona_no_hospedeiro"></span><span class="mw-headline" id="Modem_USB_não_funciona_no_hospedeiro">Modem USB não funciona no hospedeiro</span>
</h3>
<p>Se você tiver um modem USB que está sendo usado pelo sistema operacional convidado, a eliminação do sistema operacional convidado pode fazer com que o modem fique inutilizável pelo sistema hospedeiro. Matar e reiniciar <code>VBoxSVC</code> deve corrigir este problema.
</p>
<h3><span class="mw-headline" id="Dispositivo_USB_trava_o_convidado">Dispositivo USB trava o convidado</span></h3>
<p>Se a conexão de um dispositivo USB ao convidado causar uma falha ou qualquer outro comportamento incorreto, tente alternar o controlador USB de USB 2 (EHCI) para USB 3 (xHCI) ou vice-versa.
</p>
<h3>
<span id="Hospedeiro_trava_ao_iniciar_m.C3.A1quina_virtual"></span><span class="mw-headline" id="Hospedeiro_trava_ao_iniciar_máquina_virtual">Hospedeiro trava ao iniciar máquina virtual</span>
</h3>
<p>Geralmente, tais problemas são observados após a atualização do VirtualBox ou do kernel do Linux. Fazer downgrade para as versões anteriores deles pode resolver o problema.
</p>
<p>Desabilitar virtualização de hardware (VT-x/AMD-V) pode resolver o problema.
</p>
<h3>
<span id="Microfone_anal.C3.B3gico_n.C3.A3o_funciona"></span><span class="mw-headline" id="Microfone_analógico_não_funciona">Microfone analógico não funciona</span>
</h3>
<p>Se a entrada de áudio de um microfone analógico está funcionando corretamente no hospedeiro, mas nenhum som parece passar para o convidado, apesar do dispositivo de microfone aparentemente ser detectado normalmente, instalar um <a href="../pt/Sound_system.html#Servidores_de_som" class="mw-redirect" title="Sistema de som">servidor de som</a> como como <a href="../pt/PulseAudio.html" title="PulseAudio (Português)">PulseAudio</a> no hospedeiro pode corrigir o problema.
</p>
<p>Se depois de instalar o <a href="../pt/PulseAudio.html" title="PulseAudio (Português)">PulseAudio</a> o microfone ainda se recusar a funcionar, configurar <i>Driver de áudio do Hospedeiro</i> (em <i>VirtualBox &gt; Máquina &gt; Configurações &gt; Áudio</i>) como <i>Driver de áudio ALSA</i> pode ajudar.
</p>
<h3>
<span id="Microfone_n.C3.A3o_funciona_ap.C3.B3s_atualiza.C3.A7.C3.A3o"></span><span class="mw-headline" id="Microfone_não_funciona_após_atualização">Microfone não funciona após atualização</span>
</h3>
<p>Houve problemas relatados em torno da entrada de som nas versões 5.1.x. <a rel="nofollow" class="external text" href="https://www.virtualbox.org/ticket/16191">Ticket #16191</a>
</p>
<p><a href="../pt/Downgrading_packages.html" class="mw-redirect" title="Fazendo downgrade">Fazendo downgrade</a> pode resolver o problema. Você pode usar <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/virtualbox-bin-5.0/">virtualbox-bin-5.0</a></span><sup><small>AUR</small></sup> para facilitar o downgrade.
</p>
<h3><span class="mw-headline" id="Problemas_com_imagens_convertidas_para_ISO">Problemas com imagens convertidas para ISO</span></h3>
<p>Alguns formatos de imagem não podem ser convertidos de forma confiável para ISO. Por exemplo, <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=ccd2iso">ccd2iso</a></span> ignora arquivos .ccd e .sub, que podem resultar em imagens de disco com arquivos quebrados.
</p>
<p>Neste caso, você terá que usar o <a href="../en/CDemu.html" title="CDemu">CDemu</a> para Linux dentro do VirtualBox ou qualquer outro utilitário usado para montar imagens de disco.
</p>
<h3><span class="mw-headline" id="Falha_ao_criar_a_interface_de_rede_interna">Falha ao criar a interface de rede interna</span></h3>
<p>Certifique-se de que todos os módulos do kernel necessários estejam carregados. Veja <a href="#Carregar_os_m%C3%B3dulos_de_kernel_do_VirtualBox">#Carregar os módulos de kernel do VirtualBox</a>.
</p>
<p>Se todos os módulos do kernel necessários forem carregados e você ainda não conseguir criar o adaptador somente para hospedeiro, navegue até <i>Arquivo &gt; Gerenciar rede do hospedeiro</i> e clique no botão <i>Criar</i> para adicionar a interface de rede.
</p>
<h3>
<span id="Falha_ao_inserir_m.C3.B3dulo"></span><span class="mw-headline" id="Falha_ao_inserir_módulo">Falha ao inserir módulo</span>
</h3>
<p>Quando você obtiver o seguinte erro ao tentar carregar módulos:
</p>
<pre>Failed to insert 'vboxdrv': Required key not available
</pre>
<p><a href="#Assinar_m%C3%B3dulos">Assine</a> seus módulos ou desative <code>CONFIG_MODULE_SIG_FORCE</code> na configuração do seu kernel.
</p>
<h3>
<span id="VBOX_E_INVALID_OBJECT_STATE_.280x80BB0007.29"></span><span class="mw-headline" id="VBOX_E_INVALID_OBJECT_STATE_(0x80BB0007)">VBOX_E_INVALID_OBJECT_STATE (0x80BB0007)</span>
</h3>
<p>Isso pode ocorrer se uma VM for encerrada de modo inadequado. Execute o seguinte comando:
</p>
<pre>$ VBoxManage controlvm <i>nome_da_máquina_virtual</i> poweroff
</pre>
<h3><span class="mw-headline" id="NS_ERROR_FAILURE_e_itens_de_menu_em_falta">NS_ERROR_FAILURE e itens de menu em falta</span></h3>
<p>Isso acontece algumas vezes ao selecionar o formato de disco <i>QCOW</i>/<i>QCOW2</i>/<i>QED</i> ao criar um novo disco virtual.
</p>
<p>Se você encontrar essa mensagem na primeira vez que iniciar a máquina virtual:
</p>
<pre>Failed to open a session for the virtual machine debian.
Could not open the medium '/home/.../VirtualBox VMs/debian/debian.qcow'.
QCow: Reading the L1 table for image '/home/.../VirtualBox VMs/debian/debian.qcow' failed (VERR_EOF).
VD: error VERR_EOF opening image file '/home/.../VirtualBox VMs/debian/debian.qcow' (VERR_EOF).

Result Code: 
NS_ERROR_FAILURE (0x80004005)
Component: 
Medium
</pre>
<p>Saia do VirtualBox, exclua todos os arquivos da nova máquina e, do arquivo de configuração do virtualbox, remova a última linha do menu <code>MachineRegistry</code> (ou a máquina incorreta que você está criando):
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.config/VirtualBox/VirtualBox.xml</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">...
&lt;MachineRegistry&gt;
  &lt;MachineEntry uuid="{00000000-0000-0000-0000-000000000000}" src="/home/void/VirtualBox VMs/debian/debian.vbox"/&gt;
  &lt;MachineEntry uuid="{00000000-0000-0000-0000-000000000000}" src="/home/void/VirtualBox VMs/ubuntu/ubuntu.vbox"/&gt;
  <strike>&lt;MachineEntry uuid="{00000000-0000-0000-0000-000000000000}" src="/home/void/VirtualBox VMs/lastvmcausingproblems/lastvmcausingproblems.qcow"/&gt;</strike>
&lt;/MachineRegistry&gt;
...</pre>
<h3>
<span id="OpenBSD_inutiliz.C3.A1vel_quando_instru.C3.A7.C3.B5es_de_virtualiza.C3.A7.C3.A3o_est.C3.A3o_indispon.C3.ADveis"></span><span class="mw-headline" id="OpenBSD_inutilizável_quando_instruções_de_virtualização_estão_indisponíveis">OpenBSD inutilizável quando instruções de virtualização estão indisponíveis</span>
</h3>
<p>Embora o OpenBSD funcione bem em outros hipervisores sem as instruções de virtualização (VT-x AMD-V) ativadas, uma máquina virtual OpenBSD funcionando no VirtualBox sem essas instruções será inutilizável, manifestando-se com um monte de falhas de segmentação. Iniciar o VirtualBox com o argumento <i>-norawr0</i> <a rel="nofollow" class="external text" href="https://www.virtualbox.org/ticket/3947">pode resolver o problema</a>. Você pode fazer assim:
</p>
<pre>$ VBoxSDL -norawr0 -vm <i>nome_da_VM_OpenBSD</i>
</pre>
<h3>
<span id="Windows:_.22O_caminho_especificado_n.C3.A3o_existe._Verifique_o_caminho_e_tente_novamente..22"></span><span class="mw-headline" id='Windows:_"O_caminho_especificado_não_existe._Verifique_o_caminho_e_tente_novamente."'>Windows: "O caminho especificado não existe. Verifique o caminho e tente novamente."</span>
</h3>
<p>Essa mensagem de erro pode aparecer ao executar um arquivo <code>.exe</code> que requer privilégios de administrador de uma pasta compartilhada em convidados do windows. <a rel="nofollow" class="external autonumber" href="https://www.virtualbox.org/ticket/5732#comment:39">[5]</a>
</p>
<p>Como solução alternativa, copie o arquivo para a unidade virtual ou use <a href="https://en.wikipedia.org/wiki/pt:Uniform_Naming_Convention" class="extiw" title="wikipedia:pt:Uniform Naming Convention">caminhos UNC</a> (<code>\\vboxsvr</code>). Consulte <a rel="nofollow" class="external autonumber" href="https://support.microsoft.com/de-de/help/2019185/copying-files-from-a-mapped-drive-to-a-local-directory-fails-with-erro">[6]</a> para obter mais informações.
</p>
<h3>
<span id="Erro_no_Windows_8.x_com_c.C3.B3digo_0x000000C4"></span><span class="mw-headline" id="Erro_no_Windows_8.x_com_código_0x000000C4">Erro no Windows 8.x com código 0x000000C4</span>
</h3>
<p>Se você receber este código de erro durante a inicialização, mesmo que você escolha o tipo de sistema operacional Windows 8, tente habilitar a instrução da CPU <code>CMPXCHG16B</code>:
</p>
<pre>$ vboxmanage setextradata <i>nome_da_máquina_virtual</i> VBoxInternal/CPUM/CMPXCHG16B 1
</pre>
<h3>
<span id="Windows_8.2C_8.1_ou_10_falha_em_instalar.2C_inicializar_ou_tem_erro_.22ERR_DISK_FULL.22"></span><span class="mw-headline" id='Windows_8,_8.1_ou_10_falha_em_instalar,_inicializar_ou_tem_erro_"ERR_DISK_FULL"'>Windows 8, 8.1 ou 10 falha em instalar, inicializar ou tem erro "ERR_DISK_FULL"</span>
</h3>
<p>Atualize as configurações da VM indo em <i>Configurações &gt; Armazenamento &gt; Controladora: SATA</i> e marque a opção <i>Utilizar cache de I/O do hospedeiro</i>.
</p>
<h3>
<span id="WinXP:_Profundidade_de_bits_n.C3.A3o_pode_ser_maior_que_16"></span><span class="mw-headline" id="WinXP:_Profundidade_de_bits_não_pode_ser_maior_que_16">WinXP: Profundidade de bits não pode ser maior que 16</span>
</h3>
<p>Se você estiver executando em profundidade de cor de 16 bits, os ícones podem aparecer difusos/instáveis. No entanto, ao tentar alterar a profundidade de cor para um nível mais alto, o sistema pode restringi-lo a uma resolução mais baixa ou simplesmente não permitir que você altere a profundidade. Para corrigir isso, execute <code>regedit</code> no Windows e adicione a seguinte chave ao registro da VM do Windows XP:
</p>
<pre>[HKEY_LOCAL_MACHINE\SOFTWARE\Policies\Microsoft\Windows NT\Terminal Services]
"ColorDepth"=dword:00000004
</pre>
<p>Em seguida, atualize a profundidade de cor na janela "propriedades da área de trabalho". Se nada acontecer, force a tela a redesenhar através de algum método (por exemplo, <code>Host+f</code> para redesenhar/entrar em tela cheia).
</p>
<h3>
<span id="Windows:_Oscila.C3.A7.C3.A3o_da_tela_se_a_acelera.C3.A7.C3.A3o_3D_estiver_ativada"></span><span class="mw-headline" id="Windows:_Oscilação_da_tela_se_a_aceleração_3D_estiver_ativada">Windows: Oscilação da tela se a aceleração 3D estiver ativada</span>
</h3>
<p>VirtualBox &gt; 4.3.14 traz um problema em que os convidados Windows com aceleração 3D ficam oscilando. Desde que o r120678 foi implementado um patch para reconhecer uma configuração de <a href="../pt/Environment_variables.html" class="mw-redirect" title="Variável de ambiente">variável de ambiente</a>, abra o VirtualBox assim:
</p>
<pre>$ CR_RENDER_FORCE_PRESENT_MAIN_THREAD=0 VirtualBox
</pre>
<p>Certifique-se de que nenhum serviço do VirtualBox ainda esteja em execução. Consulta o <a rel="nofollow" class="external text" href="https://www.virtualbox.org/ticket/13653">bug 13653 do VirtualBox</a>.
</p>
<h3>
<span id="N.C3.A3o_.C3.A9_poss.C3.ADvel_iniciar_o_VirtualBox_com_Wayland:_Falha_de_segmenta.C3.A7.C3.A3o"></span><span class="mw-headline" id="Não_é_possível_iniciar_o_VirtualBox_com_Wayland:_Falha_de_segmentação">Não é possível iniciar o VirtualBox com Wayland: Falha de segmentação</span>
</h3>
<p>Este problema é causado pelo Qt detectando Wayland (p.ex., se <code>XDG_SESSION_TYPE=wayland</code>), mas o VirtualBox não funciona no Wayland ainda. Veja <a rel="nofollow" class="external text" href="https://bugs.archlinux.org/task/58761">FS#58761</a> e o <a rel="nofollow" class="external text" href="https://www.virtualbox.org/ticket/18679">relatório de erro do upstream</a>.
</p>
<p>A detecção da plataforma Qt pode ser desativada e o X11 forçado sobre Wayland configurando a <a href="../pt/Environment_variables.html" class="mw-redirect" title="Variável de ambiente">variável de ambiente</a> <code>QT_QPA_PLATFORM=xcb</code>.
Para não afetar os outros aplicativos Qt (que geralmente funcionam bem com Wayland), <code>QT_QPA_PLATFORM=xcb</code> deve ser definido apenas ao iniciar o VirtualBox.
</p>
<p>Se estiver iniciando pela <a href="../pt/Desktop_entries.html" class="mw-redirect" title="Entrada de desktop">entrada de desktop</a>, siga as instruções em <a href="../pt/Desktop_entries.html#Modificar_vari%C3%A1veis_de_ambiente" class="mw-redirect" title="Entradas de desktop">Entradas de desktop#Modificar variáveis de ambiente</a> e altere as linhas começando com <code>Exec=VirtualBox ...</code> para <code>Exec=env QT_QPA_PLATFORM=xcb VirtualBox ...</code>. Se estiver iniciando no shell, alias (<a href="../en/Bash.html#Aliases" title="Bash">Bash#Aliases</a>]) <code>virtualbox</code> para <code>env QT_QPA_PLATFORM=xcb virtualbox</code>.
</p>
<h3>
<span id="Congelamento_aleat.C3.B3rio_em_convidados_com_placa_de_v.C3.ADdeo_da_intel"></span><span class="mw-headline" id="Congelamento_aleatório_em_convidados_com_placa_de_vídeo_da_intel">Congelamento aleatório em convidados com placa de vídeo da intel</span>
</h3>
<p>Com cpu e placa de vídeo da Intel, alocar mais processadores para o convidado pode baixar o desempenho da renderização, causando congelamentos aleatórios. Alocar menos ou apenas um processador por ajudar.
</p>
<h2>
<span id="Veja_tamb.C3.A9m"></span><span class="mw-headline" id="Veja_também">Veja também</span>
</h2>
<ul>
<li><a rel="nofollow" class="external text" href="https://www.virtualbox.org/manual/UserManual.html">Manual de usuário do VirtualBox</a></li>
<li><a href="https://en.wikipedia.org/wiki/pt:VirtualBox" class="extiw" title="wikipedia:pt:VirtualBox">Wikipedia:pt:VirtualBox</a></li>
</ul>
</div>
</div>
<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Categories</a>: <ul>
<li><a href="../pt/Category:Hypervisors.html" title="Category:Hypervisors (Português)">Hypervisors (Português)</a></li>
<li><a href="../pt/Category:Oracle.html" title="Category:Oracle (Português)">Oracle (Português)</a></li>
</ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden categories: <ul>
<li><a href="../en/Category:Pages_with_dead_links.html" title="Category:Pages with dead links">Pages with dead links</a></li>
<li><a href="../pt/Category:Pages_or_sections_flagged_with_Template:Translateme.html" title="Category:Pages or sections flagged with Template:Translateme (Português)">Pages or sections flagged with Template:Translateme (Português)</a></li>
<li><a href="../en/Category:Pages_with_broken_section_links.html" title="Category:Pages with broken section links">Pages with broken section links</a></li>
</ul>
</div>
</div>
	</div>
</div>

<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
		<li>Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=VirtualBox_(Portugu%C3%AAs)&amp;oldid=647084">https://wiki.archlinux.org/index.php?title=VirtualBox_(Português)&amp;oldid=647084</a>"</li>
		<li id="footer-info-lastmod"> This page was last edited on 26 December 2020, at 12:28.</li>
		<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
	<br>
</ul>
	<ul id="footer-places">
		<li id="footer-places-privacy"><a href="../en/ArchWiki:Privacy_policy.html" title="ArchWiki:Privacy policy">Privacy policy</a></li>
		<li id="footer-places-about"><a href="../en/ArchWiki:About.html" title="ArchWiki:About">About ArchWiki</a></li>
		<li id="footer-places-disclaimer"><a href="../en/ArchWiki:General_disclaimer.html" title="ArchWiki:General disclaimer">Disclaimers</a></li>
	</ul>
	<ul id="footer-icons" class="noprint">
		<li id="footer-copyrightico">
	</ul>
	<div style="clear: both;"></div>
</footer>



</body>
</html>
