<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>systemd-boot (Português) - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.35.0">
<meta name="robots" content="noindex,follow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="http://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Systemd-boot_Português rootpage-Systemd-boot_Português skin-vector action-view skin-vector-legacy">
<div id="content" class="mw-body" role="main" style="margin: 0">
	<a id="top"></a>
	<div id="siteNotice" class="mw-body-content"></div>
	<div class="mw-indicators mw-body-content">
	</div>
	<h1 id="firstHeading" class="firstHeading" lang="en">systemd-boot (Português)</h1>
	<div id="bodyContent" class="mw-body-content">
		<div id="siteSub" class="noprint">From ArchWiki</div>
		<div id="contentSub"></div>
		<div id="contentSub2"></div>
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="#searchInput">Jump to search</a>
		<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr">
<div class="warningbox">The printable version is no longer supported and may have rendering errors. Please update your browser bookmarks and please use the default browser print function instead.</div>
<div class="mw-parser-output">
<p><span></span>
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Status de tradução:</strong> Esse artigo é uma tradução de <a href="../en/Systemd-boot.html" title="Systemd-boot">Systemd-boot</a>. Data da última tradução: 2020-11-20. Você pode ajudar a sincronizar a tradução, se houver <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php?title=Systemd-boot&amp;diff=0&amp;oldid=641892">alterações</a> na versão em inglês.</div>
<div class="archwiki-template-meta-related-articles-start">
<p>Artigos relacionados</p>
<ul>
<li><a href="../pt/Arch_boot_process.html" class="mw-redirect" title="Processo de inicialização do Arch">Processo de inicialização do Arch</a></li>
<li><a href="../en/Unified_Extensible_Firmware_Interface/Secure_Boot.html" class="mw-redirect" title="Secure Boot">Secure Boot</a></li>
<li><a href="../en/Unified_Extensible_Firmware_Interface.html" title="Unified Extensible Firmware Interface">Unified Extensible Firmware Interface</a></li>
</ul>
</div>
<p><b>systemd-boot</b>, antigamente chamado de <b>gummiboot</b> (Alemão para: 'bote de borracha'), é um simples <a href="../pt/Arch_boot_process.html#Gerenciador_de_boot" class="mw-redirect" title="Gerenciador de boot">gerenciador de boot</a> UEFI que executa imagens EFI configuradas. A entrada padrão é selecionada por um padrão (glob) definido ou um menu navegável na tela por meio das setas. Vêm com o <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=systemd">systemd</a></span>, que é instalado em um sistema Arch por padrão.
</p>
<p>É simples de configurar mas pode somente iniciar executáveis EFI como o <a href="../pt/EFISTUB.html" title="EFISTUB (Português)">EFISTUB</a> do kernel Linux, shell UEFI, GRUB ou o gerenciador de boot do Windows.
</p>
<div id="toc" class="toc" role="navigation" aria-labelledby="mw-toc-heading">
<input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none"><div class="toctitle" lang="en" dir="ltr">
<h2 id="mw-toc-heading">Contents</h2>
<span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span>
</div>
<ul>
<li class="toclevel-1 tocsection-1">
<a href="#Instala%C3%A7%C3%A3o"><span class="tocnumber">1</span> <span class="toctext">Instalação</span></a>
<ul>
<li class="toclevel-2 tocsection-2"><a href="#Instalando_o_gerenciador_de_boot_EFI"><span class="tocnumber">1.1</span> <span class="toctext">Instalando o gerenciador de boot EFI</span></a></li>
<li class="toclevel-2 tocsection-3"><a href="#Instala%C3%A7%C3%A3o_usando_XBOOTLDR"><span class="tocnumber">1.2</span> <span class="toctext">Instalação usando XBOOTLDR</span></a></li>
<li class="toclevel-2 tocsection-4">
<a href="#Atualizando_o_gerenciador_de_boot_EFI"><span class="tocnumber">1.3</span> <span class="toctext">Atualizando o gerenciador de boot EFI</span></a>
<ul>
<li class="toclevel-3 tocsection-5"><a href="#Atualiza%C3%A7%C3%A3o_manual"><span class="tocnumber">1.3.1</span> <span class="toctext">Atualização manual</span></a></li>
<li class="toclevel-3 tocsection-6"><a href="#Atualiza%C3%A7%C3%A3o_autom%C3%A1tica"><span class="tocnumber">1.3.2</span> <span class="toctext">Atualização automática</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1 tocsection-7">
<a href="#Configura%C3%A7%C3%A3o"><span class="tocnumber">2</span> <span class="toctext">Configuração</span></a>
<ul>
<li class="toclevel-2 tocsection-8"><a href="#Configura%C3%A7%C3%A3o_do_carregador"><span class="tocnumber">2.1</span> <span class="toctext">Configuração do carregador</span></a></li>
<li class="toclevel-2 tocsection-9">
<a href="#Adicionando_carregadores"><span class="tocnumber">2.2</span> <span class="toctext">Adicionando carregadores</span></a>
<ul>
<li class="toclevel-3 tocsection-10"><a href="#Shells_EFI_ou_outras_aplica%C3%A7%C3%B5es_EFI"><span class="tocnumber">2.2.1</span> <span class="toctext">Shells EFI ou outras aplicações EFI</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-11"><a href="#Inicializando_para_a_configura%C3%A7%C3%A3o_de_Firmware_EFI"><span class="tocnumber">2.3</span> <span class="toctext">Inicializando para a configuração de Firmware EFI</span></a></li>
<li class="toclevel-2 tocsection-12"><a href="#Supporte_a_hiberna%C3%A7%C3%A3o"><span class="tocnumber">2.4</span> <span class="toctext">Supporte a hibernação</span></a></li>
<li class="toclevel-2 tocsection-13"><a href="#Editor_de_par%C3%A2metros_do_kernel_protegido_por_senha"><span class="tocnumber">2.5</span> <span class="toctext">Editor de parâmetros do kernel protegido por senha</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-14"><a href="#Teclas_dentro_do_menu_de_boot"><span class="tocnumber">3</span> <span class="toctext">Teclas dentro do menu de boot</span></a></li>
<li class="toclevel-1 tocsection-15">
<a href="#Dicas_e_truques"><span class="tocnumber">4</span> <span class="toctext">Dicas e truques</span></a>
<ul>
<li class="toclevel-2 tocsection-16"><a href="#Escolhendo_a_pr%C3%B3xima_inicializa%C3%A7%C3%A3o"><span class="tocnumber">4.1</span> <span class="toctext">Escolhendo a próxima inicialização</span></a></li>
<li class="toclevel-2 tocsection-17"><a href="#Preparando_uma_imagem_de_kernel_unificada"><span class="tocnumber">4.2</span> <span class="toctext">Preparando uma imagem de kernel unificada</span></a></li>
<li class="toclevel-2 tocsection-18"><a href="#Grml_na_ESP"><span class="tocnumber">4.3</span> <span class="toctext">Grml na ESP</span></a></li>
<li class="toclevel-2 tocsection-19"><a href="#systemd-boot_em_sistemas_BIOS"><span class="tocnumber">4.4</span> <span class="toctext">systemd-boot em sistemas BIOS</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-20">
<a href="#Resolu%C3%A7%C3%A3o_de_problemas"><span class="tocnumber">5</span> <span class="toctext">Resolução de problemas</span></a>
<ul>
<li class="toclevel-2 tocsection-21"><a href="#Instalando_depois_de_inicializar_no_modo_BIOS"><span class="tocnumber">5.1</span> <span class="toctext">Instalando depois de inicializar no modo BIOS</span></a></li>
<li class="toclevel-2 tocsection-22"><a href="#Entrada_manual_usando_efibootmgr"><span class="tocnumber">5.2</span> <span class="toctext">Entrada manual usando efibootmgr</span></a></li>
<li class="toclevel-2 tocsection-23"><a href="#Entrada_manual_usando_bcdedit_do_Windows"><span class="tocnumber">5.3</span> <span class="toctext">Entrada manual usando bcdedit do Windows</span></a></li>
<li class="toclevel-2 tocsection-24"><a href="#Menu_n%C3%A3o_aparece_depois_de_atualiza%C3%A7%C3%A3o_do_Windows"><span class="tocnumber">5.4</span> <span class="toctext">Menu não aparece depois de atualização do Windows</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-25"><a href="#Veja_tamb%C3%A9m"><span class="tocnumber">6</span> <span class="toctext">Veja também</span></a></li>
</ul>
</div>

<h2>
<span id="Instala.C3.A7.C3.A3o"></span><span class="mw-headline" id="Instalação">Instalação</span>
</h2>
<h3><span class="mw-headline" id="Instalando_o_gerenciador_de_boot_EFI">Instalando o gerenciador de boot EFI</span></h3>
<p>Para instalar o gerenciador de boot EFI <i>systemd-boot</i>, primeiro tenha certeza que o sistema inicializou no modo UEFI e que as <a href="../en/Unified_Extensible_Firmware_Interface.html#UEFI_variables" title="Unified Extensible Firmware Interface">variáveis UEFI</a> são acessíveis. Isto pode ser verificado ao executar o comando <code>efivar --list</code> ou, se <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=efivar">efivar</a></span> não está instalado, ao executar <code>ls /sys/firmware/efi/efivars</code> (se o diretório existe, o sistema foi inicializado no modo UEFI).
</p>
<p><code><i>esp</i></code> será usada nesta página para indicar o <a href="../pt/EFI_system_partition.html#Pontos_de_montagem_comuns" title="EFI system partition (Português)">ponto de montagem ESP</a>, ex. <code>/boot</code>, <code>/boot/efi</code>, ou <code>/efi</code>. Isto assume que você executou <code>chroot</code> no ponto de montagem do seu sistema.
</p>
<p>Com a ESP montada em <code><i>esp</i></code>, use bootctl para instalar <i>systemd-boot</i> na partição de sistema EFI ao executar: 
</p>
<pre># bootctl install
</pre>
<p>Isto vai copiar o gerenciador de boot <i>systemd-boot</i> para a partição EFI: em um sistema com arquitetura x64 os dois binários idênticos <code><i>esp</i>/EFI/systemd/systemd-bootx64.efi</code> e <code><i>esp</i>/EFI/BOOT/BOOTX64.EFI</code> vão ser transferidos para a ESP. Isto vai definir <i>systemd-boot</i> como a aplicação EFI (entrada de boot padrão) carregada pelo gerenciador de boot EFI. 
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> Instalar systemd-boot sobrescreverá qualquer arquivo existente em <code>/EFI/BOOT/BOOTX64.EFI</code>, por exemplo, a versão da Microsoft deste arquivo.</div>
<p>Para concluir a instalação, <a href="#Configura%C3%A7%C3%A3o">configure</a> o <i>systemd-boot</i>.
</p>
<h3>
<span id="Instala.C3.A7.C3.A3o_usando_XBOOTLDR"></span><span class="mw-headline" id="Instalação_usando_XBOOTLDR">Instalação usando XBOOTLDR</span>
</h3>
<p>Desde a versão 242 do systemd, uma partição <code><i>boot</i></code> separada do tipo <code>"Linux extended boot"</code> pode ser criada para manter o kernel e initramfs separados da partição <code><i>esp</i></code>. XBOOTLDR <a rel="nofollow" class="external autonumber" href="https://systemd.io/BOOT_LOADER_SPECIFICATION">[1]</a> deve ter o tipo de partição GUID <code>"bc13c2ff-59e6-4262-a352-b275fd6f7172"</code>.
</p>
<p>Isto é particularmente útil para <a href="../pt/Dual_boot_with_Windows.html" class="mw-redirect" title="Dual boot com Windows">dual boot com Windows</a> com uma <a href="../pt/EFI_system_partition.html" class="mw-redirect" title="Partição de sistema EFI">partição de sistema EFI</a> que é muito pequena. Caso contrário, crie uma partição <code><i>esp</i></code> normal e depois crie outra partição para <code><i>boot</i></code> no mesmo dispositivo de armazenamento físico. O tamanho do <code><i>boot</i></code> deve ser o bastante para acomodar todos os kernels que você vai instalar.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> systemd-boot não faz verificação de tipo do sistema de arquivos para a ESP. Então, é possível usar outros sistemas de arquivos mas somente se sua implementação UEFI pode ler durante a inicialização.</div>
<p>Durante a instalação monte a <code><i>esp</i></code> para <code>/mnt/efi</code> e <code><i>boot</i></code> para <code>/mnt/boot</code>.
</p>
<p>Uma vez no ambiente chroot use o comando:
</p>
<pre># bootctl --esp-path=/efi --boot-path=/boot install
</pre>
<p>Para concluir a instalação, <a href="#Configura%C3%A7%C3%A3o">configure</a> o <i>systemd-boot</i>.
</p>
<h3><span class="mw-headline" id="Atualizando_o_gerenciador_de_boot_EFI">Atualizando o gerenciador de boot EFI</span></h3>
<p>Toda vez que tiver uma nova versão do <i>systemd-boot</i>, o gerenciador de boot pode ser opcionalmente reinstalado pelo usuário. Isto pode ser feito manualmente ou automaticamente por meio de hooks do pacman. As duas abordagens são descritas a seguir.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> O gerenciador de boot é um executável EFI e qualquer versão pode ser usada para inicializar o sistema (atualizações parciais não são válidas, considerando que pacman somente instala o instalador do systemd-boot, não o systemd-boot). No entanto, novas versões podem adicionar novas funcionalidades ou consertar bugs, então é provavelmente uma boa ideia atualizá-lo de qualquer maneira.</div>
<h4>
<span id="Atualiza.C3.A7.C3.A3o_manual"></span><span class="mw-headline" id="Atualização_manual">Atualização manual</span>
</h4>
<p><i>bootctl</i> deve ser usado ao atualizar o <i>systemd-boot</i>.
</p>
<pre># bootctl update
</pre>
<p>Se a ESP está montada em uma diferente localização, consulte o manual para as opções <code>--esp-path=</code> e <code>--boot-path=</code>.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> Este comando com estas opções também é usado quando migrar do <i>gummiboot</i>, antes de remover o pacote. Se este pacote já foi removido, então execute <code>bootctl --esp-path=<i>esp</i> install</code>.</div>
<h4>
<span id="Atualiza.C3.A7.C3.A3o_autom.C3.A1tica"></span><span class="mw-headline" id="Atualização_automática">Atualização automática</span>
</h4>
<p>O pacote <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/systemd-boot-pacman-hook/">systemd-boot-pacman-hook</a></span><sup><small>AUR</small></sup> oferece um <a href="../pt/Pacman.html#Hooks" class="mw-redirect" title="Hook do pacman">hook do pacman</a> para automatizar o processo de atualização. <a href="../pt/Help:Reading.html#Instala%C3%A7%C3%A3o_de_pacotes" class="mw-redirect" title="Instala">Instalar</a> o pacote adicionará um pacote hook que será executado toda vez que o pacote <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=systemd">systemd</a></span> é atualizado.
Alternativamente, para replicar o que o pacote <i>systemd-boot-pacman-hook</i> faz sem instalá-lo, adicione o seguinte hook do pacman no diretório <code>/etc/pacman.d/hooks/</code>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/pacman.d/hooks/100-systemd-boot.hook</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Trigger]
Type = Package
Operation = Upgrade
Target = systemd

[Action]
Description = Updating systemd-boot
When = PostTransaction
Exec = /usr/bin/bootctl update</pre>
<p>Se você tem <a href="../en/Unified_Extensible_Firmware_Interface/Secure_Boot.html" title="Unified Extensible Firmware Interface/Secure Boot">Secure Boot</a> habilitado, você pode querer instalar um <a href="../pt/Pacman.html#Hooks" class="mw-redirect" title="Hook do pacman">hook do pacman</a> para automaticamente reassinar o kernel e o systemd-boot quando este for atualizado.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/pacman.d/hooks/99-secureboot.hook</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Trigger]
Operation = Install
Operation = Upgrade
Type = Package
Target = linux
Target = systemd

[Action]
Description = Assinar o Kernel para SecureBoot
When = PostTransaction
Exec = /usr/bin/sh -c "/usr/bin/find /boot/ -type f \( -name 'vmlinuz-*' -o -name 'systemd*' \) -exec /usr/bin/sh -c 'if ! /usr/bin/sbverify --list {} 2&gt;/dev/null</pre>
<p>O <code>Target</code> precisa ser duplicado cada vez que você deseja acrescentar um novo pacote. Com relação à instrução do <code>find</code>, como havia uma condição com os nomes de arquivos do hooks do ALPM serem separados por espaços, foi necessário inserir a instrução toda com aspas para que fosse interpretada corretamente. Como o systemd-boot é localizado em subdiretórios, a profundidade precisou ser ajustada também para que fosse removido o argumento <code>-maxdepth</code>. Para evitar incômodo, se você não tiver certeza, tente reinstalar o pacote que deseja testar para testar se o hook e o processo de assinatura são executados corretamente. Veja. Veja <a href="../pt/Pacman.html#Hooks" title="Pacman (Português)">Pacman (Português)#Hooks</a> ou <span class="plainlinks archwiki-template-man" title="$ man 5 alpm-hooks"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/alpm-hooks.5">alpm-hooks(5)</a></span> para mais informações.
</p>
<p><br>
</p>
<h2>
<span id="Configura.C3.A7.C3.A3o"></span><span class="mw-headline" id="Configuração">Configuração</span>
</h2>
<h3>
<span id="Configura.C3.A7.C3.A3o_do_carregador"></span><span class="mw-headline" id="Configuração_do_carregador">Configuração do carregador</span>
</h3>
<p>A configuração do carregador é armazenada no arquivo <code><i>esp</i>/loader/loader.conf</code>. As configurações a seguir podem ser especificada:
</p>
<ul>
<li>
<code>default</code> – entrada padrão para selecionar como definido em <a href="#Adicionando_carregadores">#Adicionando carregadores</a>; isto pode ser uma expressão como <code>arch-*.conf</code>.</li>
<li>
<code>timeout</code> – tempo limite do menu em segundos antes que a entrada padrão seja inicializada. Se isto não é definido, o menu somente será mostrado com a tecla <code>espaço</code> (a maioria das teclas funciona também) pressionada durante a inicialização.</li>
<li>
<code>editor</code> – para habilitar o editor de parâmetros do kernel ou não. <code>yes</code> (padrão) é habilitado, <code>no</code> é desabilitado; considerando que o usuário pode adicionar <code>init=/bin/bash</code> para evitar a senha e ganhar acesso root, é fortemente recomendado definir esta opção para <code>no</code> se a máquina pode ser acessada por pessoas não autorizadas.</li>
<li>
<code>auto-entries</code> – mostra automaticamente entradas para Windows, shell EFI, e carregador padrão se definido para <code>1</code> (padrão), <code>0</code> para esconder;</li>
<li>
<code>auto-firmware</code> – mostra a entrada para reinicializar nas configurações UEFI de firmware se definido para <code>1</code> (padrão), <code>0</code> para esconder;</li>
<li>
<code>console-mode</code> – muda o modo do console UEFI:
<ul>
<li>
<code>0</code> para 80x25;</li>
<li>
<code>1</code> para 80x50;</li>
<li>
<code>2</code> e acima para modos não padrão oferecidos pelo firmware do dispositivo, se qualquer;</li>
<li>
<code>auto</code> pega um modo apropriado automaticamente;</li>
<li>
<code>max</code> para o maior modo disponível;</li>
<li>
<code>keep</code> (padrão) para o modo selecionado pelo firmware.</li>
</ul>
</li>
<li>
<code>random-seed-mode</code> - controla se vai ler a semente randômica do arquivo <code><i>esp</i>/loader/random-seed</code>. Se definido para <code>with-system-token</code> (padrão), carrega a semente do arquivo somente se a variável <code>LoaderSystemToken</code> é definida; se definido para <code>always</code>, carrega a semente do arquivo até mesmo se a variável EFI não está definida; e se definida para <code>off</code>, o arquivo é ignorado.</li>
</ul>
<p>Para uma explicação detalhada das configurações disponíveis e seus respectivos argumentos veja o manual <span class="plainlinks archwiki-template-man" title="$ man 5 loader.conf"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/loader.conf.5">loader.conf(5)</a></span>. Um exemplo de configuração do carregador é mostrado abaixo:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"><i>esp</i>/loader/loader.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">default  arch.conf
timeout  4
console-mode max
editor   no
</pre>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Dica:</strong> 
<ul>
<li>systemd-boot não aceita <code>tabs</code> como indentação, use espaçamentos.</li>
<li>
<code>default</code> e <code>timeout</code> podem ser mudados no menu de inicialização e as mudanças vão ser salvas como variáveis EFI <code>LoaderEntryDefault</code> e <code>LoaderConfigTimeout</code>, sobrescrevendo estas opções.</li>
<li>
<code>bootctl set-default ""</code> pode ser usado para limpar a variável EFI sobrescrevendo a opção <code>default</code>.</li>
<li>Um arquivo de configuração básico está localizado em <code>/usr/share/systemd/bootctl/loader.conf</code>.</li>
</ul>
</div>
<h3><span class="mw-headline" id="Adicionando_carregadores">Adicionando carregadores</span></h3>
<p><i>systemd-boot</i> buscará pelos itens do menu de inicialização em <code><i>esp</i>/loader/entries/*.conf</code> e adicionalmente em <code>boot/loader/entries/*.conf</code> se usar <a href="#Instala%C3%A7%C3%A3o_usando_XBOOTLDR">XBOOTLDR</a>.
As opções possíveis são:
</p>
<ul>
<li>
<code>title</code> – nome do sistema operacional. <b>necessário.</b>
</li>
<li>
<code>version</code> – versão do kernel, mostrado somente quando múltiplas entradas com o mesmo título existe. Opcional.</li>
<li>
<code>machine-id</code> – identificador da máquina em <code>/etc/machine-id</code>, mostrado somente quando múltiplas entradas com o mesmo título e versão existem. Opcional.</li>
<li>
<code>efi</code> – aplicação EFI a iniciar, relativo ao seu ESP (<code><i>esp</i></code>); ex. <code>/vmlinuz-linux</code>. Este parâmetro <b>ou</b> <code>linux</code> (veja abaixo) é <b>necessário</b>.</li>
<li>
<code>options</code> – opções da linha de comando à passar para o programa EFI ou <a href="../pt/Kernel_parameters.html" class="mw-redirect" title="Parâmetros do kernel">parâmetros do kernel</a>. Opcional, mas você precisará no mínimo <code>root=<i>dev</i></code> se inicializar o Linux. Este parâmetro pode ser omitido se a partição raiz é atribuída ao tipo Root Partition GUID correto como definido na <a rel="nofollow" class="external text" href="https://systemd.io/DISCOVERABLE_PARTITIONS/">Discoverable Partitions Specification</a> e se o hook do <a href="../pt/Mkinitcpio.html" title="Mkinitcpio (Português)">mkinitcpio</a> do <code>systemd</code> está presente.</li>
</ul>
<p>Para inicializar o Linux, você pode também usar <code>linux</code> ao invês de <code>efi</code>. Ou <code>initrd</code> em adição a <code>options</code>. A sintaxe é:
</p>
<ul><li>
<code>linux</code> e <code>initrd</code> seguido por um caminho relativo dos arquivos correspondentes na ESP;  e.x. <code>/vmlinuz-linux</code>; isto vai ser automaticamente traduzido em <code>efi <i>caminho</i></code> e <code>options initrd=<i>caminho</i></code> – esta sintaxe é somente suportada por conveniência e não há diferenças em função.</li></ul>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> Se <code>options</code> está presente na entrada de boot e <a href="../en/Unified_Extensible_Firmware_Interface/Secure_Boot.html" class="mw-redirect" title="Secure Boot">Secure Boot</a> está desabilitado, o valor de <code>options</code> vai sobrescrever qualquer linha <code>.cmdline</code> inserida na imagem EFI que está especificada pelo <code>efi</code> ou <code>linux</code> (veja <a href="#Preparando_uma_imagem_de_kernel_unificada">#Preparando uma imagem de kernel unificada</a>). Com Secure Boot, no entanto, <code>options</code> (e quaisquer modificações feitas a linha de comando do kernel na interface do gerenciador de boot) serão ignoradas, e somente as <code>.cmdline</code> serão usadas. </div>
<p>Um exemplo de um arquivo de configuração para inicializar o Arch de uma partição com rótulo <i>arch_os</i> e carregando o <a href="../en/Microcode.html" title="Microcode">microcode</a> da CPU da Intel é:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"><i>esp</i>/loader/entries/arch.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">title   Arch Linux
linux   /vmlinuz-linux
initrd  /intel-ucode.img
initrd  /initramfs-linux.img
options root="LABEL=<i>arch_os</i>" rw</pre>
<p><i>systemd-boot</i> vai automaticamente verificar no tempo de inicialização pelo <b>Gerenciador de Boot do Windows</b> na localização <code>/EFI/Microsoft/Boot/Bootmgfw.efi</code>, <b>Shell EFI</b> <code>/shellx64.efi</code> e <b>EFI Default Loader</b> (carregador padrão EFI) <code>/EFI/BOOT/bootx64.efi</code>, como também arquivos do kernel especialmente preparados em <code>/EFI/Linux</code>. Quando detectado, as entradas correspondentes com títulos <code>auto-windows</code>, <code>auto-efi-shell</code> e <code>auto-efi-default</code>, respectivamente, serão geradas. Estas entradas não precisam de configuração manual. No entanto, outras aplicações EFI não são detectadas automaticamente (diferente do <a href="../en/REFInd.html" title="REFInd">rEFInd</a>), então para inicializar o kernel Linux, entradas de boot devem ser criadas manualmente.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> 
<ul>
<li>Se você tem dual-boot com Windows, é fortemente recomendado desabilitar sua opção padrão <a href="../pt/Dual_boot_with_Windows.html#Inicializa%C3%A7%C3%A3o_r%C3%A1pida_e_hiberna%C3%A7%C3%A3o" class="mw-redirect" title="Dual boot com Windows">inicialização rápida</a>.</li>
<li>Se você tem uma CPU Intel ou AMD, carregue o <i>microcode</i> com <code>initrd</code> antes de outras imagens, um exemplo é fornecido em <a href="../en/Microcode.html#systemd-boot" title="Microcode">Microcode#systemd-boot</a>.</li>
<li>A partição raiz pode ser indentificada com sua <code>LABEL</code> (rótulo), <code>PARTUUID</code> ou <code>UUID</code> (veja <a href="../pt/Persistent_block_device_naming.html" class="mw-redirect" title="Nomeação persistente de dispositivo de bloco">Nomeação persistente de dispositivo de bloco</a>). Isto é necessário somente para identificar a partição raiz, não a <code><i>esp</i></code>.</li>
</ul>
</div>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Dica:</strong> 
<ul>
<li>As entradas de boot disponíveis que foram configuradas podem ser listadas com o comando <code>bootctl list</code>.</li>
<li>Um exemplo de arquivo de entrada está localizado em <code>/usr/share/systemd/bootctl/arch.conf</code>.</li>
<li>Os <a href="../pt/Kernel_parameters.html" class="mw-redirect" title="Parâmetros do kernel">parâmetros do kernel</a> para cenários como <a href="../pt/LVM.html" title="LVM (Português)">LVM</a>, <a href="../pt/Dm-crypt.html" class="mw-redirect" title="LUKS (Português)">LUKS</a> ou <a href="../pt/Dm-crypt.html" title="Dm-crypt (Português)">dm-crypt</a> pode ser encontrado nas páginas relevantes.</li>
</ul>
</div>
<h4>
<span id="Shells_EFI_ou_outras_aplica.C3.A7.C3.B5es_EFI"></span><span class="mw-headline" id="Shells_EFI_ou_outras_aplicações_EFI">Shells EFI ou outras aplicações EFI</span>
</h4>
<p>Caso você tenha instalado <a href="../en/Unified_Extensible_Firmware_Interface.html#UEFI_Shell" title="Unified Extensible Firmware Interface">shells EFI</a> e <a href="../en/REFInd.html#Tools" title="REFInd">outras aplicações EFI</a> na ESP, você pode usar os seguintes exemplos.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> O parâmetro do caminho do arquivo para a linha <code>efi</code> é relativo ao ponto de montagem da sua <i>esp</i>. Se você montou em <code>/boot</code> e seus binários EFI estão em <code>/boot/EFI/xx.efi</code> e <code>/boot/yy.efi</code>, então você deve especificar os parâmetros como <code>efi /EFI/xx.efi</code> e <code>efi /yy.efi</code> respectivamente.</div>
<p>Exemplos de carregadores de Shells UEFI:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"><i>esp</i>/loader/entries/uefi-shell-v1-x86_64.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">title   UEFI Shell x86_64 v1
efi     /EFI/shellx64_v1.efi
</pre>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"><i>esp</i>/loader/entries/uefi-shell-v2-x86_64.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">title   UEFI Shell x86_64 v2
efi     /EFI/shellx64_v2.efi
</pre>
<h3>
<span id="Inicializando_para_a_configura.C3.A7.C3.A3o_de_Firmware_EFI"></span><span class="mw-headline" id="Inicializando_para_a_configuração_de_Firmware_EFI">Inicializando para a configuração de Firmware EFI</span>
</h3>
<p>A maioria dos firmware configurados para EFI vão adicionar suas próprias entradas <a href="../en/Unified_Extensible_Firmware_Interface.html#efibootmgr" class="mw-redirect" title="Efibootmgr">efibootmgr</a> para inicializar o firmware de configuração UEFI.
</p>
<h3>
<span id="Supporte_a_hiberna.C3.A7.C3.A3o"></span><span class="mw-headline" id="Supporte_a_hibernação">Supporte a hibernação</span>
</h3>
<p>Veja <a href="../en/Power_management/Suspend_and_hibernate.html" class="mw-redirect" title="Suspend and hibernate">Suspend and hibernate</a>.
</p>
<h3>
<span id="Editor_de_par.C3.A2metros_do_kernel_protegido_por_senha"></span><span class="mw-headline" id="Editor_de_parâmetros_do_kernel_protegido_por_senha">Editor de parâmetros do kernel protegido por senha</span>
</h3>
<p>Alternativamente você pode instalar <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/systemd-boot-password/">systemd-boot-password</a></span><sup><small>AUR</small></sup> que suporta configuração básica da opção <code>password</code>. Use <code>sbpctl generate</code> para gerar um valor para esta opção.
</p>
<p>Instale <i>systemd-boot-password</i> com o seguinte comando:
</p>
<pre># sbpctl install <i>esp</i>
</pre>
<p>Com o editor habilitado, vai ser solicitado sua senha antes que você possa editar os parâmetros do kernel.
</p>
<h2><span class="mw-headline" id="Teclas_dentro_do_menu_de_boot">Teclas dentro do menu de boot</span></h2>
<p>As seguintes teclas são usadas dentro do menu:
</p>
<ul>
<li>
<code>Up/Down</code> - seleciona a entrada</li>
<li>
<code>Enter</code> - inicializa a entrada selecionada</li>
<li>
<code>d</code> - define a entrada padrão a ser inicializada (salvo em uma váriavel EFI não volátil)</li>
<li>
<code>-/T</code> - diminue o timeout (salvo em uma váriavel EFI não volátil)</li>
<li>
<code>+/t</code> - aumenta o timeout (salvo em uma váriavel EFI não volátil)</li>
<li>
<code>e</code> - edita a linha de comando do kernel. Não tem efeito se a opção de configuração <code>editor</code> é definida para <code>0</code>.</li>
<li>
<code>v</code> - mostra a versão atual do systemd-boot e UEFI</li>
<li>
<code>Q</code> - sai do menu</li>
<li>
<code>P</code> - mostra a configuração atual</li>
<li>
<code>h/?</code> - ajuda</li>
</ul>
<p>Estes atalhos vão, quando pressionado dentro do menu ou antes dele, diretamente inicializar uma entrada específica:
</p>
<ul>
<li>
<code>l</code> - Linux</li>
<li>
<code>w</code> - Windows</li>
<li>
<code>a</code> - OS X</li>
<li>
<code>s</code> - Shell EFI</li>
<li>
<code>1-9</code> - número da entrada</li>
</ul>
<h2><span class="mw-headline" id="Dicas_e_truques">Dicas e truques</span></h2>
<h3>
<span id="Escolhendo_a_pr.C3.B3xima_inicializa.C3.A7.C3.A3o"></span><span class="mw-headline" id="Escolhendo_a_próxima_inicialização">Escolhendo a próxima inicialização</span>
</h3>
<p>O gerenciador de boot é integrado com o comando systemctl, permitindo escolher que opção você quer inicializar depois de reiniciar. Por exemplo, suponha que você tenha compilado um kernel customizado e criou um arquivo de entrada <code><i>esp</i>/loader/entries/arch-custom.conf</code> para inicializar ele, você pode executar
</p>
<pre>$ systemctl reboot --boot-loader-entry=arch-custom
</pre>
<p>e seu sistema irá reiniciar nesta entrada mantendo a opção padrão intacta para inicializações subsequentes. Para ver uma lista de entradas possíveis use a opção <code>--help</code>.
</p>
<p>Se você quer inicializar no firmware da sua placa-mãe diretamente, você pode usar esse comando:
</p>
<pre>$ systemctl reboot --firmware-setup
</pre>
<h3><span class="mw-headline" id="Preparando_uma_imagem_de_kernel_unificada">Preparando uma imagem de kernel unificada</span></h3>
<p>systemd-boot busca em <code><i>esp</i>/EFI/Linux/</code> por <a rel="nofollow" class="external text" href="https://systemd.io/BOOT_LOADER_SPECIFICATION#type-2-efi-unified-kernel-images">imagens unificadas de kernel</a>, que junta o kernel, o disco RAM inicial (initrd), a linha de comando do kernel, <code>/etc/os-release</code>, e uma imagem splash em um único arquivo. Este arquivo pode ser facilmente assinado para <a href="../en/Unified_Extensible_Firmware_Interface/Secure_Boot.html" class="mw-redirect" title="Secure Boot">Secure Boot</a>.
</p>
<p>Coloque a linha de comando do kernel que você quer em um arquivo, e crie o arquivo unificado dessa forma:
</p>
<pre>$ objcopy \
    --add-section .osrel="/usr/lib/os-release" --change-section-vma .osrel=0x20000 \
    --add-section .cmdline="linha-de-comando-do-kernel.txt" --change-section-vma .cmdline=0x30000 \
    --add-section .splash="/usr/share/systemd/bootctl/splash-arch.bmp" --change-section-vma .splash=0x40000 \
    --add-section .linux="arquivo-vmlinuz" --change-section-vma .linux=0x2000000 \
    --add-section .initrd="arquivo-initrd" --change-section-vma .initrd=0x3000000 \
    "/usr/lib/systemd/boot/efi/linuxx64.efi.stub" "<i>linux</i>.efi"</pre>
<p>Opcionalmente <a href="../en/Unified_Extensible_Firmware_Interface/Secure_Boot.html#Signing_EFI_binaries" class="mw-redirect" title="Secure Boot">assine</a> o arquivo <code><i>linux</i>.efi</code> produzido acima.
</p>
<p>Copie <code><i>linux</i>.efi</code> para <code><i>esp</i>/EFI/Linux/</code>.
</p>
<h3><span class="mw-headline" id="Grml_na_ESP">Grml na ESP</span></h3>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> As seguintes instruções não são exclusivas para Grml. Com leves ajustes, instalar outro software (e.x. <a rel="nofollow" class="external text" href="http://www.system-rescue-cd.org/">SystemRescueCD</a>) é possível.</div>
<p><a rel="nofollow" class="external text" href="https://grml.org/">Grml</a> é um pequeno sistema live com uma coleção de software para administração e recuperação do sistema.
</p>
<p>Para instalar Grml na ESP, precisamos somente copiar o kernel <code>vmlinuz</code>, o initramfs <code>initrd.img</code>, e a squashed image (Imagem compactada com sistema de arquivos somente leitura) <code>grml64-small.squashfs</code> do arquivo iso para a ESP. Para fazer isso, primeiro baixe a <a rel="nofollow" class="external text" href="https://grml.org/">grml64-small.iso</a> e monte o arquivo (o ponto de montagem desse exemplo é <i>mnt</i>); o kernel e initramfs estão localizados em <code><i>mnt</i>/boot/grml64small/</code>, e a squashed image reside em <code><i>mnt</i>/live/grml64-small/</code>.
</p>
<p>Depois, crie um diretório para Grml na sua ESP,
</p>
<pre># mkdir -p <i>esp</i>/grml
</pre>
<p>e copie os arquivos mencionados acima para lá:
</p>
<pre># cp <i>mnt</i>/boot/grml64small/vmlinuz <i>esp</i>/grml
# cp <i>mnt</i>/boot/grml64small/initrd.img <i>esp</i>/grml
# cp <i>mnt</i>/live/grml64-small/grml64-small.squashfs <i>esp</i>/grml
</pre>
<p>no último passo, crie uma entrada para o carregador do systemd-boot: em <code><i>esp</i>/loader/entries</code> crie um arquivo <code>grml.conf</code> com o seguinte conteúdo:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"><i>esp</i>/loader/entries/grml.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">title   Grml Live Linux
linux   /grml/vmlinuz
initrd  /grml/initrd.img
options apm=power-off boot=live live-media-path=/grml/ nomce net.ifnames=0</pre>
<p>Para uma visão geral das opções de boot disponíveis, consulte <a rel="nofollow" class="external text" href="http://git.grml.org/?p=grml-live.git;a=blob_plain;f=templates/GRML/grml-cheatcodes.txt;hb=HEAD">cheatcode for Grml</a>.
</p>
<h3><span class="mw-headline" id="systemd-boot_em_sistemas_BIOS">systemd-boot em sistemas BIOS</span></h3>
<p>Se você precisa de um gerenciador de boot para sistemas BIOS que segue a <a rel="nofollow" class="external text" href="https://systemd.io/BOOT_LOADER_SPECIFICATION/">Boot Loader Specification</a>, o systemd-boot pode funcionar. O gerenciador de boot <a href="../en/Clover.html" title="Clover">Clover</a> suporta inicializar de sistemas BIOS e oferece um ambiente EFI simulado.
</p>
<h2>
<span id="Resolu.C3.A7.C3.A3o_de_problemas"></span><span class="mw-headline" id="Resolução_de_problemas">Resolução de problemas</span>
</h2>
<h3><span class="mw-headline" id="Instalando_depois_de_inicializar_no_modo_BIOS">Instalando depois de inicializar no modo BIOS</span></h3>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Atenção:</strong> Isto não é recomendado.</div>
<p>Se inicializou no modo BIOS, você ainda pode instalar o <i>systemd-boot</i>, no entanto este processo precisa que você fale ao firmware para lançar o arquivo EFI do <i>systemd-boot</i> na inicialização, normalmente por meio de duas maneiras:
</p>
<ul>
<li>você tem um Shell EFI funcionando em algum outro lugar.</li>
<li>sua interface de firmware oferece uma maneira de apropriadamente definir o arquivo EFI que precisa ser carregado na inicialização.</li>
</ul>
<p>Se você pode fazer isto, a instalação é mais fácil: vai para seu Shell EFI ou a interface de configuração do firmware e mude o arquivo EFI padrão da sua máquina para <code><i>esp</i>/EFI/systemd/systemd-bootx64.efi</code> (ou <code>systemd-bootia32.efi</code> se seu sistema de firmware é 32 bits).
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> A interface do firmware das máquinas Dell da linha Latitude oferece tudo que você precisa para configurar a inicialização EFI mas o Shell EFI não poderá escrever para a ROM do computador.</div>
<h3><span class="mw-headline" id="Entrada_manual_usando_efibootmgr">Entrada manual usando efibootmgr</span></h3>
<p>Se o comando <code>bootctl install</code> falhou, você pode criar uma entrada de boot EFI manualmente usando <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=efibootmgr">efibootmgr</a></span>:
</p>
<pre># efibootmgr --create --disk /dev/sd<i>X</i> --part <i>Y</i> --loader "\EFI\systemd\systemd-bootx64.efi" --label "Gerenciador de Boot do Linux" --verbose
</pre>
<p>Onde <code>/dev/sd<i>XY</i></code> é a <a href="../pt/EFI_system_partition.html" class="mw-redirect" title="Partição de sistema EFI">partição de sistema EFI</a>.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> O caminho para a imagem EFI deve usar a barra invertida (<code>\</code>) como o separador</div>
<h3><span class="mw-headline" id="Entrada_manual_usando_bcdedit_do_Windows">Entrada manual usando bcdedit do Windows</span></h3>
<p>Se por alguma razão você precisa criar uma entrada de boot EFI pelo Windows, você pode usar os seguintes comandos em um prompt de administrador:
</p>
<pre># bcdedit /copy {bootmgr} /d "Gerenciador de Boot do Linux"
# bcdedit /set {guid} path \EFI\systemd\systemd-bootx64.efi
</pre>
<p>Mude <code>{guid} </code> para o id retornado pelo primeiro comando. Você pode também definí-lo como a entrada padrão usando
</p>
<pre># bcdedit /default {guid}
</pre>
<h3>
<span id="Menu_n.C3.A3o_aparece_depois_de_atualiza.C3.A7.C3.A3o_do_Windows"></span><span class="mw-headline" id="Menu_não_aparece_depois_de_atualização_do_Windows">Menu não aparece depois de atualização do Windows</span>
</h3>
<p>Veja <a href="../en/Unified_Extensible_Firmware_Interface.html#Windows_changes_boot_order" class="mw-redirect" title="UEFI">UEFI#Windows changes boot order</a>.
</p>
<h2>
<span id="Veja_tamb.C3.A9m"></span><span class="mw-headline" id="Veja_também">Veja também</span>
</h2>
<ul>
<li><a rel="nofollow" class="external free" href="https://www.freedesktop.org/wiki/Software/systemd/systemd-boot/">https://www.freedesktop.org/wiki/Software/systemd/systemd-boot/</a></li>
<li><a rel="nofollow" class="external free" href="https://github.com/systemd/systemd/tree/master/src/boot/efi">https://github.com/systemd/systemd/tree/master/src/boot/efi</a></li>
<li><a rel="nofollow" class="external free" href="https://bbs.archlinux.org/viewtopic.php?id=254374">https://bbs.archlinux.org/viewtopic.php?id=254374</a></li>
<li><a rel="nofollow" class="external free" href="https://systemd.io/BOOT_LOADER_SPECIFICATION/">https://systemd.io/BOOT_LOADER_SPECIFICATION/</a></li>
</ul>
</div>
</div>
<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../pt/Category:Boot_loaders.html" title="Category:Boot loaders (Português)">Boot loaders (Português)</a></li></ul>
</div></div>
	</div>
</div>

<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
		<li>Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Systemd-boot_(Portugu%C3%AAs)&amp;oldid=641980">https://wiki.archlinux.org/index.php?title=Systemd-boot_(Português)&amp;oldid=641980</a>"</li>
		<li id="footer-info-lastmod"> This page was last edited on 21 November 2020, at 00:19.</li>
		<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
	<br>
</ul>
	<ul id="footer-places">
		<li id="footer-places-privacy"><a href="../en/ArchWiki:Privacy_policy.html" title="ArchWiki:Privacy policy">Privacy policy</a></li>
		<li id="footer-places-about"><a href="../en/ArchWiki:About.html" title="ArchWiki:About">About ArchWiki</a></li>
		<li id="footer-places-disclaimer"><a href="../en/ArchWiki:General_disclaimer.html" title="ArchWiki:General disclaimer">Disclaimers</a></li>
	</ul>
	<ul id="footer-icons" class="noprint">
		<li id="footer-copyrightico">
	</ul>
	<div style="clear: both;"></div>
</footer>



</body>
</html>
