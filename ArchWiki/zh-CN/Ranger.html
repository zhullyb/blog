<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>ranger (简体中文) - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.35.0">
<meta name="robots" content="noindex,follow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="http://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Ranger_简体中文 rootpage-Ranger_简体中文 skin-vector action-view skin-vector-legacy">
<div id="content" class="mw-body" role="main" style="margin: 0">
	<a id="top"></a>
	<div id="siteNotice" class="mw-body-content"></div>
	<div class="mw-indicators mw-body-content">
	</div>
	<h1 id="firstHeading" class="firstHeading" lang="en">ranger (简体中文)</h1>
	<div id="bodyContent" class="mw-body-content">
		<div id="siteSub" class="noprint">From ArchWiki</div>
		<div id="contentSub"></div>
		<div id="contentSub2"></div>
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="#searchInput">Jump to search</a>
		<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr">
<div class="warningbox">The printable version is no longer supported and may have rendering errors. Please update your browser bookmarks and please use the default browser print function instead.</div>
<div class="mw-parser-output">
<div class="archwiki-template-meta-related-articles-start">
<p>Related articles</p>
<ul>
<li><a href="../en/Midnight_Commander.html" title="Midnight Commander">Midnight Commander</a></li>
<li><a href="../en/Nnn.html" title="Nnn">nnn</a></li>
<li><a href="../en/Vifm.html" title="Vifm">vifm</a></li>
</ul>
</div>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>翻译状态：</strong>本文是 <a href="../en/Ranger.html" title="Ranger">Ranger</a> 的<a href="../zh-CN/ArchWiki:Translation_Team.html" title="ArchWiki:Translation Team (简体中文)">翻译</a>。上次翻译日期：2019-10-29。如果英文版本有所<a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php?title=Ranger&amp;diff=0&amp;oldid=583919">更改</a>，则您可以帮助同步翻译。</div>
<p><a rel="nofollow" class="external text" href="https://ranger.github.io/">ranger</a> 是一个基于文本的文件管理器，以 Python 编写。不同层级的目录分别在一个面板的三列中进行展示. 可以通过快捷键, 书签, 鼠标以及历史命令在它们之间移动. 当选中文件或目录时, 会自动显示文件或目录的内容.
</p>
<p>主要特性有: <a href="../en/Vi.html" title="Vi">vi</a> 风格的快捷键, 书签, 选择, 标签, 选项卡, 命令历史, 创建符号链接的能力, 多种终端模式, 以及任务视图. ranger 可以定制命令和快捷键，包括绑定到外部脚本。最接近的竞争者是 <a href="../en/Vifm.html" title="Vifm">Vifm</a>， 它有 2 个面板以及 vi 风格的快捷键，但是总体特性相对较少。
</p>
<div id="toc" class="toc" role="navigation" aria-labelledby="mw-toc-heading">
<input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none"><div class="toctitle" lang="en" dir="ltr">
<h2 id="mw-toc-heading">Contents</h2>
<span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span>
</div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#%E5%AE%89%E8%A3%85"><span class="tocnumber">1</span> <span class="toctext">安装</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#%E7%94%A8%E6%B3%95"><span class="tocnumber">2</span> <span class="toctext">用法</span></a></li>
<li class="toclevel-1 tocsection-3">
<a href="#%E5%AE%9A%E5%88%B6"><span class="tocnumber">3</span> <span class="toctext">定制</span></a>
<ul>
<li class="toclevel-2 tocsection-4"><a href="#%E7%A7%BB%E5%8A%A8%E5%88%B0%E5%9B%9E%E6%94%B6%E7%AB%99"><span class="tocnumber">3.1</span> <span class="toctext">移动到回收站</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="#%E5%91%BD%E4%BB%A4%E5%AE%9A%E4%B9%89"><span class="tocnumber">3.2</span> <span class="toctext">命令定义</span></a></li>
<li class="toclevel-2 tocsection-6"><a href="#%E9%85%8D%E8%89%B2%E6%96%B9%E6%A1%88"><span class="tocnumber">3.3</span> <span class="toctext">配色方案</span></a></li>
<li class="toclevel-2 tocsection-7"><a href="#%E6%96%87%E4%BB%B6%E5%85%B3%E8%81%94"><span class="tocnumber">3.4</span> <span class="toctext">文件关联</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-8">
<a href="#%E6%8F%90%E7%A4%BA%E4%B8%8E%E6%8A%80%E5%B7%A7"><span class="tocnumber">4</span> <span class="toctext">提示与技巧</span></a>
<ul>
<li class="toclevel-2 tocsection-9">
<a href="#%E5%AD%98%E6%A1%A3%E7%9B%B8%E5%85%B3"><span class="tocnumber">4.1</span> <span class="toctext">存档相关</span></a>
<ul>
<li class="toclevel-3 tocsection-10"><a href="#%E8%A7%A3%E5%8E%8B%E7%BC%A9"><span class="tocnumber">4.1.1</span> <span class="toctext">解压缩</span></a></li>
<li class="toclevel-3 tocsection-11"><a href="#%E5%8E%8B%E7%BC%A9"><span class="tocnumber">4.1.2</span> <span class="toctext">压缩</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-12"><a href="#%E5%A4%96%E9%83%A8%E9%A9%B1%E5%8A%A8"><span class="tocnumber">4.2</span> <span class="toctext">外部驱动</span></a></li>
<li class="toclevel-2 tocsection-13"><a href="#%E9%95%9C%E5%83%8F%E6%8C%82%E8%BD%BD"><span class="tocnumber">4.3</span> <span class="toctext">镜像挂载</span></a></li>
<li class="toclevel-2 tocsection-14"><a href="#PDF%E6%96%87%E4%BB%B6%E9%A2%84%E8%A7%88"><span class="tocnumber">4.4</span> <span class="toctext">PDF文件预览</span></a></li>
<li class="toclevel-2 tocsection-15"><a href="#%E5%9C%A8%E5%BD%93%E5%89%8D%E7%9B%AE%E5%BD%95%E6%89%93%E5%BC%80%E6%96%B0%E6%A0%87%E7%AD%BE"><span class="tocnumber">4.5</span> <span class="toctext">在当前目录打开新标签</span></a></li>
<li class="toclevel-2 tocsection-16">
<a href="#Shell_tips"><span class="tocnumber">4.6</span> <span class="toctext">Shell tips</span></a>
<ul>
<li class="toclevel-3 tocsection-17"><a href="#%E7%9B%AE%E5%BD%95%E5%90%8C%E6%AD%A5"><span class="tocnumber">4.6.1</span> <span class="toctext">目录同步</span></a></li>
<li class="toclevel-3 tocsection-18"><a href="#Start_a_shell_from_ranger"><span class="tocnumber">4.6.2</span> <span class="toctext">Start a shell from ranger</span></a></li>
<li class="toclevel-3 tocsection-19"><a href="#%E9%81%BF%E5%85%8D%E5%9C%A8_ranger_%E5%90%AF%E5%8A%A8%E7%9A%84_shell_%E5%86%85%E5%88%9B%E5%BB%BA%E6%96%B0%E7%9A%84_ranger"><span class="tocnumber">4.6.3</span> <span class="toctext">避免在 ranger 启动的 shell 内创建新的 ranger</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1 tocsection-20">
<a href="#%E7%96%91%E9%9A%BE%E8%A7%A3%E7%AD%94"><span class="tocnumber">5</span> <span class="toctext">疑难解答</span></a>
<ul>
<li class="toclevel-2 tocsection-21"><a href="#Artifacts_in_image_preview"><span class="tocnumber">5.1</span> <span class="toctext">Artifacts in image preview</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-22"><a href="#%E5%8F%82%E8%A7%81"><span class="tocnumber">6</span> <span class="toctext">参见</span></a></li>
</ul>
</div>

<h2>
<span id=".E5.AE.89.E8.A3.85"></span><span class="mw-headline" id="安装">安装</span>
</h2>
<p>安装 <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=ranger">ranger</a></span> 包，或其开发版 <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/ranger-git/">ranger-git</a></span><sup><small>AUR</small></sup>。
</p>
<h2>
<span id=".E7.94.A8.E6.B3.95"></span><span class="mw-headline" id="用法">用法</span>
</h2>
<p>在 <a href="../en/List_of_applications.html#Terminal_emulators" title="List of applications">终端</a> 里执行 <code>ranger</code> 来启动 ranger.
</p>
<table class="wikitable">
<caption>
</caption>
<tbody>
<tr>
<th>快捷键</th>
<th>命令
</th>
</tr>
<tr>
<td><code>?</code></td>
<td>打开帮助手册或列出快捷键、命令以及设置项
</td>
</tr>
<tr>
<td>
<code>l</code>, <code>Enter</code>
</td>
<td>打开文件
</td>
</tr>
<tr>
<td>
<code>j</code>, <code>k</code>
</td>
<td>选择当前目录中的文件
</td>
</tr>
<tr>
<td>
<code>h</code>, <code>l</code>
</td>
<td>在目录树中上移和下移
</td>
</tr>
</tbody>
</table>
<h2>
<span id=".E5.AE.9A.E5.88.B6"></span><span class="mw-headline" id="定制">定制</span>
</h2>
<p>第一次启动　ranger 会创建一个目录 <code>~/.config/ranger/</code>。可以使用以下命令复制默认配置文件到这个目录:
</p>
<pre>$ ranger --copy-config=all
</pre>
<p>了解一些基本的 python 知识可能对定制 ranger 会有帮助。
</p>
<ul>
<li>
<code>rc.conf</code> - 选项设置和快捷键</li>
<li>
<code>commands.py</code> - 能通过 <code>:</code> 执行的命令</li>
<li>
<code>rifle.conf</code> - 指定不同类型的文件的默认打开程序。</li>
</ul>
<p><code>rc.conf</code> 只需要包含与默认配置文件不同的部分, 因为它们都会被加载。对于 <code>commands.py</code>，如果你没有包含整个文件，把下面这一行加入到文件起始处：
</p>
<pre>from ranger.api.commands import *
</pre>
<p>更多配置选项请参考 <span class="plainlinks archwiki-template-man" title="$ man 1 ranger"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/ranger.1">ranger(1)</a></span>。
</p>
<h3>
<span id=".E7.A7.BB.E5.8A.A8.E5.88.B0.E5.9B.9E.E6.94.B6.E7.AB.99"></span><span class="mw-headline" id="移动到回收站">移动到回收站</span>
</h3>
<p>如果想添加一个把文件移动到目录 <code>~/.local/share/Trash/files/</code> 的快捷键 <code>DD</code>, 把以下这一行添加到 <code>~/.config/ranger/rc.conf</code>:
</p>
<pre>map DD shell mv %s /home/${USER}/.local/share/Trash/files/
</pre>
<p>或使用 <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=glib2">glib2</a></span> 软件包提供的 GIO 命令:
</p>
<pre>map DD shell gio trash %s
</pre>
<p>一般的图形文件管理器都支持查看或清空回收站，此外还可以使用 <code>gio list trash://</code> 命令查看，用 <code>gio trash --empty</code> 命令清空回收站。
</p>
<h3>
<span id=".E5.91.BD.E4.BB.A4.E5.AE.9A.E4.B9.89"></span><span class="mw-headline" id="命令定义">命令定义</span>
</h3>
<p>继续上面的例子，在 <code>~/.config/ranger/commands.py</code> 增加如下代码将会定义一个清空垃圾箱 <code>~/.Trash</code> 的命令。
</p>
<pre>class empty(Command):
    """:empty

    Empties the trash directory ~/.Trash
    """

    def execute(self):
        self.fm.run("rm -rf /home/myname/.Trash/{*,.[^.]*}")
</pre>
<p>输入 <code>:empty</code> 与 <code>Enter</code> 来执行命令， 如果希望的话，也可以使用 tab 补全。
</p>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Warning:</strong> 注意 [^.] 是上面命令的必要部分。否则，它会删除所有 ..* 形式的文件和目录，即删除你家目录的所有数据。</div>
<h3>
<span id=".E9.85.8D.E8.89.B2.E6.96.B9.E6.A1.88"></span><span class="mw-headline" id="配色方案">配色方案</span>
</h3>
<p>Ranger 配备了四个配色方案：<code>默认</code>、<code>丛林</code>、<code>积雪</code>和<code>烈日</code>。
下列命令可自定义配色：
</p>
<pre> set colorscheme <i>scheme</i>
</pre>
<p>自定义配色方案放在 <code>~/.config/ranger/colorschemes</code>。
</p>
<h3>
<span id=".E6.96.87.E4.BB.B6.E5.85.B3.E8.81.94"></span><span class="mw-headline" id="文件关联">文件关联</span>
</h3>
<p>Ranger 使用自己的文件打开程序，名为<code>rifle</code>，它的配置文件为 <code>~/.config/ranger/rifle.conf</code>。如果该文件不存在，可运行 <code>ranger --copy-config=rifle</code> 生成。例如，如下的代码指定 <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=kile">kile</a></span> 为打开 tex 文件的默认程序。
</p>
<pre>ext tex = kile "$@"
</pre>
<p>使用 <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=xdg-utils">xdg-utils</a></span> 来打开所有文件，设置 <code>$EDITOR</code> 和 <code>$PAGER</code>:
</p>
<pre>else = xdg-open "$1"
label editor = "$EDITOR" -- "$@"
label pager  = "$PAGER" -- "$@"
</pre>
<h2>
<span id=".E6.8F.90.E7.A4.BA.E4.B8.8E.E6.8A.80.E5.B7.A7"></span><span class="mw-headline" id="提示与技巧">提示与技巧</span>
</h2>
<div class="noprint archwiki-template-message">
<p><a href="../File:Tango-edit-clear.png" class="image"><img alt="Tango-edit-clear.png" src="../File:Tango-edit-clear.png" decoding="async" width="48" height="48"></a><b>This article or section needs language, wiki syntax or style improvements. See <a href="../en/Help:Style.html" title="Help:Style">Help:Style</a> for reference.</b><a href="../File:Tango-edit-clear.png" class="image"><img alt="Tango-edit-clear.png" src="../File:Tango-edit-clear.png" decoding="async" width="48" height="48"></a></p>
<div>
<b>Reason:</b>  (Discuss in <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php/Talk:Ranger_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)">Talk:Ranger (简体中文)#</a>)</div>
</div>
<h3>
<span id=".E5.AD.98.E6.A1.A3.E7.9B.B8.E5.85.B3"></span><span class="mw-headline" id="存档相关">存档相关</span>
</h3>
<p>可以使用 <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=atool">atool</a></span> 或 <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=p7zip">p7zip</a></span> 来进行存档操作。
</p>
<h4>
<span id=".E8.A7.A3.E5.8E.8B.E7.BC.A9"></span><span class="mw-headline" id="解压缩">解压缩</span>
</h4>
<p>下面的命令实现了复制(yy)一个或多个存档文件，然后执行 ":extracthere" 解压到需要的目录。
</p>
<pre>import os
from ranger.core.loader import CommandLoader

class extracthere(Command):
    def execute(self):
        """ Extract copied files to current directory """
        copied_files = tuple(self.fm.copy_buffer)

        if not copied_files:
            return

        def refresh(_):
            cwd = self.fm.get_directory(original_path)
            cwd.load_content()

        one_file = copied_files[0]
        cwd = self.fm.thisdir
        original_path = cwd.path
        au_flags = ['-X', cwd.path]
        au_flags += self.line.split()[1:]
        au_flags += ['-e']

        self.fm.copy_buffer.clear()
        self.fm.cut_buffer = False
        if len(copied_files) == 1:
            descr = "extracting: " + os.path.basename(one_file.path)
        else:
            descr = "extracting files from: " + os.path.basename(one_file.dirname)
        obj = CommandLoader(args=['aunpack'] + au_flags \
                + [f.path for f in copied_files], descr=descr)

        obj.signal_bind('after', refresh)
        self.fm.loader.add(obj)</pre>
<p>对于使用 7z 的用户, 可以在添加以下命令后, 选中压缩包然后执行 ":extract" 或通过绑定的快捷键来解压
</p>
<pre>class extract(Command):
    """:extract &lt;paths&gt;
    
    Extract archives using 7z
    """
    def execute(self):
        import os
        fail=[]
        for i in self.fm.thistab.get_selection():
            ExtractProg='7z x'
            if i.path.endswith('.zip'):
                # zip encoding issue
                ExtractProg='unzip -O gbk'
            elif i.path.endswith('.tar.gz'):
                ExtractProg='tar xvf'
            elif i.path.endswith('.tar.xz'):
                ExtractProg='tar xJvf'
            elif i.path.endswith('.tar.bz2'):
                ExtractProg='tar xjvf'
            if os.system('{0} "{1}"'.format(ExtractProg, i.path)):
                fail.append(i.path)
        if len(fail) &gt; 0:
            self.fm.notify("Fail to extract: {0}".format(' '.join(fail)), duration=10, bad=True)
        self.fm.redraw_window()</pre>
<p>PS: 如果需要解压 ZIP 压缩包还需要安装 <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/unzip-iconv/">unzip-iconv</a></span><sup><small>AUR</small></sup>(为了解决中文乱码问题)
</p>
<h4>
<span id=".E5.8E.8B.E7.BC.A9"></span><span class="mw-headline" id="压缩">压缩</span>
</h4>
<p>以下命令允许用户将当前目录下选中的文件通过":compress &lt;package name&gt;"命令压缩。它还支持通过当前目录名和为扩展名追加几种可能性来建议名称。
</p>
<pre>import os
from ranger.core.loader import CommandLoader

class compress(Command):
    def execute(self):
        """ Compress marked files to current directory """
        cwd = self.fm.thisdir
        marked_files = cwd.get_selection()

        if not marked_files:
            return

        def refresh(_):
            cwd = self.fm.get_directory(original_path)
            cwd.load_content()

        original_path = cwd.path
        parts = self.line.split()
        au_flags = parts[1:]

        descr = "compressing files in: " + os.path.basename(parts[1])
        obj = CommandLoader(args=['apack'] + au_flags + \
                [os.path.relpath(f.path, cwd.path) for f in marked_files], descr=descr)

        obj.signal_bind('after', refresh)
        self.fm.loader.add(obj)

    def tab(self):
        """ Complete with current folder name """

        extension = ['.zip', '.tar.gz', '.rar', '.7z']
        return ['compress ' + os.path.basename(self.fm.thisdir.path) + ext for ext in extension]</pre>
<h3>
<span id=".E5.A4.96.E9.83.A8.E9.A9.B1.E5.8A.A8"></span><span class="mw-headline" id="外部驱动">外部驱动</span>
</h3>
<p>外部驱动可以通过 <a href="../en/Udev.html" title="Udev">udev</a> 或 [udisks] 自动挂载。挂载在 <code>/media</code> 下的驱动可以通过快捷键 <code>gm</code> (go, media) 访问。
</p>
<h3>
<span id=".E9.95.9C.E5.83.8F.E6.8C.82.E8.BD.BD"></span><span class="mw-headline" id="镜像挂载">镜像挂载</span>
</h3>
<p>以下命令假设你正在使用 <a href="../en/CDemu.html" title="CDemu">CDemu</a> 作为你的镜像挂载器和一些挂载虚拟驱动器到指定位置 (如 '/media/virtualrom') ，类似于 <a href="../en/Autofs.html" title="Autofs">autofs</a>的系统。<b>不要忘记根据你的系统设置修改挂载路径</b>.
</p>
<p>为了从 ranger 里把镜像挂载到 cdemud 虚拟驱动器, 需要选中镜像文件然后在终端输入 ':mount'。根据你的设置，挂载可能会需要一些时间(我的需要长达一分钟的时间). 以下命令使用自定义的 loader 会等待加载过程结束然后通过后台在第 9 标签打开挂载了的镜像.
</p>
<pre>import os, time
from ranger.core.loader import Loadable
from ranger.ext.signals import SignalDispatcher
from ranger.ext.shell_escape import *

class MountLoader(Loadable, SignalDispatcher):
    """
    Wait until a directory is mounted
    """
    def __init__(self, path):
        SignalDispatcher.__init__(self)
        descr = "Waiting for dir '" + path + "' to be mounted"
        Loadable.__init__(self, self.generate(), descr)
        self.path = path

    def generate(self):
        available = False
        while not available:
            try:
                if os.path.ismount(self.path):
                    available = True
            except:
                pass
            yield
            time.sleep(0.03)
        self.signal_emit('after')

class mount(Command):
    def execute(self):
        selected_files = self.fm.env.cwd.get_selection()

        if not selected_files:
            return

        space = ' '
        self.fm.execute_command("cdemu -b system unload 0")
        self.fm.execute_command("cdemu -b system load 0 " + \
                space.join([shell_escape(f.path) for f in selected_files]))
 
        mountpath = "/media/virtualrom/"

        def mount_finished(path):
            currenttab = self.fm.current_tab
            self.fm.tab_open(9, mountpath)
            self.fm.tab_open(currenttab)

        obj = MountLoader(mountpath)
        obj.signal_bind('after', mount_finished)
        self.fm.loader.add(obj)</pre>
<h3>
<span id="PDF.E6.96.87.E4.BB.B6.E9.A2.84.E8.A7.88"></span><span class="mw-headline" id="PDF文件预览">PDF文件预览</span>
</h3>
<p>在默认情况下，<code>ranger</code>将会以文本的形式预览PDF文件。然后，你可以通过先将PDF文件转换为图片，再以图片的方式预览PDF文件。<code>ranger</code>将图片预览保存在 <code>~/.cache/ranger/</code>目录下。你需要手动创建这个目录，或者在<code>~/.config/ranger/rc.conf</code>将<code>preview_images</code>设置为<code>true</code>来让<code>ranger</code>在下一次启动时自动创建这个目录。然而，请注意你并不需要将<code>preview_images</code>一直设置为<code>true</code>来以图片的方式预览PDF文件，只要有 <code>~/.cache/ranger</code>就可以了。
</p>
<p>为了启用这个功能，你可以在<code>/usr/share/doc/ranger/config/scope.sh</code>去掉相应行的注释，或者在你本地文件<code>~/.config/ranger/scope.sh</code>中增加/取消注释这些行。
</p>
<h3>
<span id=".E5.9C.A8.E5.BD.93.E5.89.8D.E7.9B.AE.E5.BD.95.E6.89.93.E5.BC.80.E6.96.B0.E6.A0.87.E7.AD.BE"></span><span class="mw-headline" id="在当前目录打开新标签">在当前目录打开新标签</span>
</h3>
<p>你可能已经注意到有两个快捷键能够以家目录为默认目录创建新的标签 (<code>gn</code> 和 <code>Ctrl+n</code>). 不妨重新绑定  <code>Ctrl+n</code>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">rc.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">map &lt;c-n&gt;  eval fm.tab_new('%d')
</pre>
<h3><span class="mw-headline" id="Shell_tips">Shell tips</span></h3>
<h4>
<span id=".E7.9B.AE.E5.BD.95.E5.90.8C.E6.AD.A5"></span><span class="mw-headline" id="目录同步">目录同步</span>
</h4>
<p><i>ranger</i> 提供了一个 shell <a href="../en/Bash.html#Functions" title="Bash">function</a><sup>[<a href="../en/ArchWiki:Requests.html#Broken_section_links" class="mw-redirect" title="ArchWiki:Requests">断开的链接</a>：无效的部分]</sup> <code>/usr/share/doc/ranger/examples/bash_automatic_cd.sh</code>. 执行 <code>ranger-cd</code> 会自动切换到最后一次浏览的目录.
</p>
<p>If you launch ranger from a graphical launcher (such as <code>$TERMCMD -e ranger</code>, where TERMCMD is an X terminal), you cannot use <code>ranger-cd</code>. Create an executable script:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">ranger-launcher.sh</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">#!/bin/sh
export RANGERCD=true
$TERMCMD
</pre>
<p>and add at the <i>very end</i> of your shell configuration:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">.<i>shell</i>rc</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">$RANGERCD &amp;&amp; unset RANGERCD &amp;&amp; ranger-cd
</pre>
<p>This will launch <code>ranger-cd</code> only if the <code>RANGERCD</code> variable is set. It is important to unset this variable again, otherwise launching a subshell from this terminal will automatically relaunch <code>ranger</code>.
</p>
<h4><span class="mw-headline" id="Start_a_shell_from_ranger">Start a shell from ranger</span></h4>
<p>With the previous method you can switch to a shell in last browsed path simply by leaving ranger. However you may not want to quit ranger for several reasons (numerous opened tabs, copy in progress, etc.).
You can start a shell from ranger (<code>S</code> by default) without losing your ranger session. Unfortunately, the shell will not switch to the current folder automatically. Again, this can be solved with an executable script:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">shellcd</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">#!/bin/sh
export AUTOCD="$(realpath "$1")"

$SHELL
</pre>
<p>and - as before - add this to at the very end of your shell configuration:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">shellrc</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">cd "$AUTOCD"
</pre>
<p>Now you can change your shell binding for ranger:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">rc.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">map S shell shellcd %d
</pre>
<p>Alternatively, you can make use of your shell history file if it has any. For instance, you could do this for <a href="../en/Zsh.html#Dirstack" title="Zsh">zsh</a>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">shellcd</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">## Prepend argument to zsh dirstack.
BUF="$(realpath "$1")
$(grep -v "$(realpath "$1")" "$ZDIRS")"
echo "$BUF" &gt; "$ZDIRS"

zsh
</pre>
<p>Change ZDIRS for your dirstack.
</p>
<h4>
<span id=".E9.81.BF.E5.85.8D.E5.9C.A8_ranger_.E5.90.AF.E5.8A.A8.E7.9A.84_shell_.E5.86.85.E5.88.9B.E5.BB.BA.E6.96.B0.E7.9A.84_ranger"></span><span class="mw-headline" id="避免在_ranger_启动的_shell_内创建新的_ranger">避免在 ranger 启动的 shell 内创建新的 ranger</span>
</h4>
<p>Put this in your <a href="../en/Autostarting.html#Shells" title="Autostarting">shell's startup file</a><sup>[<a href="../en/ArchWiki:Requests.html#Broken_section_links" class="mw-redirect" title="ArchWiki:Requests">断开的链接</a>：无效的部分]</sup>:
</p>
<pre>rg() {
    if [ -z "$RANGER_LEVEL" ]
    then
        ranger
    else
        exit
    fi
}
</pre>
<p>Execute <code>rg</code> to start or restore ranger.
</p>
<h2>
<span id=".E7.96.91.E9.9A.BE.E8.A7.A3.E7.AD.94"></span><span class="mw-headline" id="疑难解答">疑难解答</span>
</h2>
<h3><span class="mw-headline" id="Artifacts_in_image_preview">Artifacts in image preview</span></h3>
<p>无边框边栏可能在图片预览中产生条纹。<a rel="nofollow" class="external autonumber" href="https://bbs.linuxdistrocommunity.com/showthread.php?tid=1051">[1]</a><sup title="最后检查状态：domain name not resolved">[<a href="https://en.wikipedia.org/wiki/Wikipedia:Link_rot" class="extiw" title="wikipedia:Wikipedia:Link rot">失效链接</a> 2020-08-04 ⓘ]</sup> 在 <code>~/.config/ranger/rc.conf</code> 设置:
</p>
<pre>set draw_borders true
</pre>
<p>可以解决这个问题
</p>
<h2>
<span id=".E5.8F.82.E8.A7.81"></span><span class="mw-headline" id="参见">参见</span>
</h2>
<ul>
<li><a rel="nofollow" class="external text" href="https://bbs.archlinux.org/viewtopic.php?id=93025">BBS thread</a></li>
<li><a rel="nofollow" class="external text" href="http://dotshare.it/category/fms/ranger/">DotShare.it configurations</a></li>
<li><a rel="nofollow" class="external text" href="https://github.com/hut/ranger">GitHub</a></li>
<li><a rel="nofollow" class="external text" href="https://www.digitalocean.com/community/tutorials/installing-and-using-ranger-a-terminal-file-manager-on-a-ubuntu-vps">Installing and using ranger</a></li>
<li><a rel="nofollow" class="external text" href="https://lists.nongnu.org/mailman/listinfo/ranger-users">Mailing list</a></li>
<li><a rel="nofollow" class="external text" href="http://nongnu.org/ranger">Official website</a></li>
<li><a rel="nofollow" class="external text" href="http://bloerg.net/2012/10/17/ranger-file-manager.html">Ranger tutorial</a></li>
</ul>
</div>
</div>
<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Categories</a>: <ul>
<li><a href="../zh-CN/Category:File_managers.html" title="Category:File managers (简体中文)">File managers (简体中文)</a></li>
<li><a href="../zh-CN/Category:Console_applications.html" title="Category:Console applications (简体中文)">Console applications (简体中文)</a></li>
</ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden categories: <ul>
<li><a href="../en/Category:Pages_or_sections_flagged_with_Template:Style.html" title="Category:Pages or sections flagged with Template:Style">Pages or sections flagged with Template:Style</a></li>
<li><a href="../en/Category:Pages_with_broken_section_links.html" title="Category:Pages with broken section links">Pages with broken section links</a></li>
<li><a href="../en/Category:Pages_with_dead_links.html" title="Category:Pages with dead links">Pages with dead links</a></li>
</ul>
</div>
</div>
	</div>
</div>

<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
		<li>Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Ranger_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)&amp;oldid=638607">https://wiki.archlinux.org/index.php?title=Ranger_(简体中文)&amp;oldid=638607</a>"</li>
		<li id="footer-info-lastmod"> This page was last edited on 14 October 2020, at 07:17.</li>
		<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
	<br>
</ul>
	<ul id="footer-places">
		<li id="footer-places-privacy"><a href="../en/ArchWiki:Privacy_policy.html" title="ArchWiki:Privacy policy">Privacy policy</a></li>
		<li id="footer-places-about"><a href="../en/ArchWiki:About.html" title="ArchWiki:About">About ArchWiki</a></li>
		<li id="footer-places-disclaimer"><a href="../en/ArchWiki:General_disclaimer.html" title="ArchWiki:General disclaimer">Disclaimers</a></li>
	</ul>
	<ul id="footer-icons" class="noprint">
		<li id="footer-copyrightico">
	</ul>
	<div style="clear: both;"></div>
</footer>



</body>
</html>
