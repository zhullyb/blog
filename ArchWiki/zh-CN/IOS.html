<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>iOS (简体中文) - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.35.0">
<meta name="robots" content="noindex,follow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="http://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-IOS_简体中文 rootpage-IOS_简体中文 skin-vector action-view skin-vector-legacy">
<div id="content" class="mw-body" role="main" style="margin: 0">
	<a id="top"></a>
	<div id="siteNotice" class="mw-body-content"></div>
	<div class="mw-indicators mw-body-content">
	</div>
	<h1 id="firstHeading" class="firstHeading" lang="en">iOS (简体中文)</h1>
	<div id="bodyContent" class="mw-body-content">
		<div id="siteSub" class="noprint">From ArchWiki</div>
		<div id="contentSub"></div>
		<div id="contentSub2"></div>
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="#searchInput">Jump to search</a>
		<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr">
<div class="warningbox">The printable version is no longer supported and may have rendering errors. Please update your browser bookmarks and please use the default browser print function instead.</div>
<div class="mw-parser-output">
<p><span></span>
</p>
<div class="archwiki-template-meta-related-articles-start">
<p>Related articles</p>
<ul>
<li><a href="../en/Audiobook.html" title="Audiobook">Audiobook</a></li>
<li><a href="../en/IPhone_tethering.html" title="IPhone tethering">iPhone tethering</a></li>
</ul>
</div>
<div class="noprint archwiki-template-message">
<p><a href="../File:Tango-edit-clear.png" class="image"><img alt="Tango-edit-clear.png" src="../File:Tango-edit-clear.png" decoding="async" width="48" height="48"></a><b>This article or section needs language, wiki syntax or style improvements. See <a href="../en/Help:Style.html" title="Help:Style">Help:Style</a> for reference.</b><a href="../File:Tango-edit-clear.png" class="image"><img alt="Tango-edit-clear.png" src="../File:Tango-edit-clear.png" decoding="async" width="48" height="48"></a></p>
<div>
<b>Reason:</b> Numerous style issues, see <a href="../en/Help:Style.html" title="Help:Style">Help:Style</a> (Discuss in <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php/Talk:IOS_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)">Talk:IOS (简体中文)#</a>)</div>
</div>
<p>The purpose of this article is to demonstrate the use of iDevices under Arch Linux.
</p>
<div id="toc" class="toc" role="navigation" aria-labelledby="mw-toc-heading">
<input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none"><div class="toctitle" lang="en" dir="ltr">
<h2 id="mw-toc-heading">Contents</h2>
<span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span>
</div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Required_Packages"><span class="tocnumber">1</span> <span class="toctext">Required Packages</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#Changing_iPod_Mountpoint"><span class="tocnumber">2</span> <span class="toctext">Changing iPod Mountpoint</span></a></li>
<li class="toclevel-1 tocsection-3">
<a href="#Importing_videos_and_pictures"><span class="tocnumber">3</span> <span class="toctext">Importing videos and pictures</span></a>
<ul>
<li class="toclevel-2 tocsection-4"><a href="#HTML5_videos"><span class="tocnumber">3.1</span> <span class="toctext">HTML5 videos</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="#Importing_pictures_and_deleting_them"><span class="tocnumber">3.2</span> <span class="toctext">Importing pictures and deleting them</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-6">
<a href="#Converting_video_for_iPod"><span class="tocnumber">4</span> <span class="toctext">Converting video for iPod</span></a>
<ul>
<li class="toclevel-2 tocsection-7"><a href="#Gen_5/5.5"><span class="tocnumber">4.1</span> <span class="toctext">Gen 5/5.5</span></a></li>
<li class="toclevel-2 tocsection-8">
<a href="#Handbrake"><span class="tocnumber">4.2</span> <span class="toctext">Handbrake</span></a>
<ul>
<li class="toclevel-3 tocsection-9"><a href="#DVD_to_iPod"><span class="tocnumber">4.2.1</span> <span class="toctext">DVD to iPod</span></a></li>
<li class="toclevel-3 tocsection-10"><a href="#Video_File_to_iPod"><span class="tocnumber">4.2.2</span> <span class="toctext">Video File to iPod</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-11">
<a href="#More_Advanced/Configurable_Methods"><span class="tocnumber">4.3</span> <span class="toctext">More Advanced/Configurable Methods</span></a>
<ul>
<li class="toclevel-3 tocsection-12"><a href="#Avidemux"><span class="tocnumber">4.3.1</span> <span class="toctext">Avidemux</span></a></li>
<li class="toclevel-3 tocsection-13"><a href="#Mencoder"><span class="tocnumber">4.3.2</span> <span class="toctext">Mencoder</span></a></li>
<li class="toclevel-3 tocsection-14"><a href="#FFMpeg"><span class="tocnumber">4.3.3</span> <span class="toctext">FFMpeg</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1 tocsection-15">
<a href="#iPhone/iPod_Touch"><span class="tocnumber">5</span> <span class="toctext">iPhone/iPod Touch</span></a>
<ul>
<li class="toclevel-2 tocsection-16"><a href="#Introduction"><span class="tocnumber">5.1</span> <span class="toctext">Introduction</span></a></li>
<li class="toclevel-2 tocsection-17">
<a href="#Making_Friends_with_the_Device"><span class="tocnumber">5.2</span> <span class="toctext">Making Friends with the Device</span></a>
<ul>
<li class="toclevel-3 tocsection-18"><a href="#The_SSHFS_Way"><span class="tocnumber">5.2.1</span> <span class="toctext">The SSHFS Way</span></a></li>
<li class="toclevel-3 tocsection-19"><a href="#The_iFuse_Way"><span class="tocnumber">5.2.2</span> <span class="toctext">The iFuse Way</span></a></li>
<li class="toclevel-3 tocsection-20"><a href="#Generating_HashInfo_file"><span class="tocnumber">5.2.3</span> <span class="toctext">Generating HashInfo file</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-21"><a href="#Unobfuscating_the_Database"><span class="tocnumber">5.3</span> <span class="toctext">Unobfuscating the Database</span></a></li>
<li class="toclevel-2 tocsection-22"><a href="#Syncing"><span class="tocnumber">5.4</span> <span class="toctext">Syncing</span></a></li>
<li class="toclevel-2 tocsection-23"><a href="#The_iFuse_Way_-_iPhone_OS_3.x_and_4.x"><span class="tocnumber">5.5</span> <span class="toctext">The iFuse Way - iPhone OS 3.x and 4.x</span></a></li>
<li class="toclevel-2 tocsection-24"><a href="#Rhythmbox"><span class="tocnumber">5.6</span> <span class="toctext">Rhythmbox</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-25"><a href="#iPod_Classic/Nano3g"><span class="tocnumber">6</span> <span class="toctext">iPod Classic/Nano3g</span></a></li>
<li class="toclevel-1 tocsection-26"><a href="#iPod_Shuffle_1st_and_2nd_generation"><span class="tocnumber">7</span> <span class="toctext">iPod Shuffle 1st and 2nd generation</span></a></li>
<li class="toclevel-1 tocsection-27"><a href="#iPod_management_apps"><span class="tocnumber">8</span> <span class="toctext">iPod management apps</span></a></li>
<li class="toclevel-1 tocsection-28"><a href="#See_also"><span class="tocnumber">9</span> <span class="toctext">See also</span></a></li>
</ul>
</div>

<h2><span class="mw-headline" id="Required_Packages">Required Packages</span></h2>
<p>To interact with iOS devices with thunar or GNOME Files, install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=gvfs-afc">gvfs-afc</a></span> and <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=usbmuxd">usbmuxd</a></span>.  Remember restart X afterwards.  Now iOS devices should show up in thunar or Files.  Not tested with KDE file managers.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> All deps should get pulled down when installing gvfs-afc.</div>
<h2><span class="mw-headline" id="Changing_iPod_Mountpoint">Changing iPod Mountpoint</span></h2>
<p>Traditional iPods are accessed just like a normal USB storage device containing a vfat file system (in rare cases <code>hfsplus</code>), and can be <a href="../en/USB_storage_devices.html" title="USB storage devices">accessed as such</a>. See the <a href="../en/USB_storage_devices.html" title="USB storage devices">USB storage devices</a> article for detailed instructions.
</p>
<p>If udisks2 is running, it will mount an attached iPod to <code>/run/media/<i>$USER</i>/<i>iPod name</i></code> (the older udisks will use <code>/media/<i>&lt;iPod name&gt;</i></code>).
</p>
<p>If the volume label of your iPod is long, or contains a mixture of spaces, and/or lower-case and capital letters, it may present an inconvenience. You may easily change the volume label for more expedient access using <code>dosfslabel</code> from the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=dosfstools">dosfstools</a></span> package:
</p>
<ul><li>Get and confirm the current volume label:</li></ul>
<pre># dosfslabel /dev/sd<i>XY</i>
</pre>
<ul><li>Set the new volume label:</li></ul>
<pre># dosfslabel /dev/sd<i>XY</i> ArchPod
</pre>
<ul><li>Unmount the device:</li></ul>
<pre>$ udisksctl unmount -b /dev/sd<i>XY</i>
</pre>
<ul><li>Mount it again:</li></ul>
<pre>$ udisksctl mount -b /dev/sd<i>XY</i>
</pre>
<p>where <code>/dev/sdxx</code> is the current device node of your iPod.
</p>
<h2><span class="mw-headline" id="Importing_videos_and_pictures">Importing videos and pictures</span></h2>
<p>Both videos and photos can be found in typically in <code><i>&lt;mountpoint&gt;</i>/DCIM/100APPLE</code>.
</p>
<h3><span class="mw-headline" id="HTML5_videos">HTML5 videos</span></h3>
<p>Typically you want to convert MOV files to a HTML5 video format like OGV using ffmpeg2theora. Note that the creation date metadata is not in the converted video, so you need to use a script like:
</p>
<pre>#!/usr/bin/sh

find -name "*.MOV" | while read mov
do
    d=$(gst-discoverer-0.10 -v $mov | awk '/datetime:/{print $2}' | tr -d \")
    base=${mov%.*}
    if test -f $base.ogv
    then
        touch -d${d} $base.ogv
        ls -l $base.ogv
    else
        echo $base.ogv missing
    fi
done
</pre>
<p>And use <code>cp -a</code> or <code>rsync -t</code> in order to preserve the file's date &amp; time.
</p>
<h3><span class="mw-headline" id="Importing_pictures_and_deleting_them">Importing pictures and deleting them</span></h3>
<p>You can move photos and videos out of <code><i>&lt;mountpoint&gt;</i>/DCIM/100APPLE</code>, however you need to trigger a rebuild of the "Camera Roll" database by deleting the old databases.
</p>
<pre># rm Photos* com.apple.photos.caches_metadata.plist
</pre>
<h2><span class="mw-headline" id="Converting_video_for_iPod">Converting video for iPod</span></h2>
<h3>
<span id="Gen_5.2F5.5"></span><span class="mw-headline" id="Gen_5/5.5">Gen 5/5.5</span>
</h3>
<h3><span class="mw-headline" id="Handbrake">Handbrake</span></h3>
<p><a rel="nofollow" class="external text" href="http://handbrake.fr/">Handbrake</a> is a nifty tool with presets for a variety of iPod versions. CLI and GTK versions are available from pacman as <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=handbrake-cli">handbrake-cli</a></span> and <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=handbrake">handbrake</a></span> respectively.
</p>
<p>If you do decide to take the CLI way, a good guide is available at <a rel="nofollow" class="external free" href="http://trac.handbrake.fr/wiki/CLIGuide">http://trac.handbrake.fr/wiki/CLIGuide</a><sup title="最后检查状态：domain name not resolved">[<a href="https://en.wikipedia.org/wiki/Wikipedia:Link_rot" class="extiw" title="wikipedia:Wikipedia:Link rot">失效链接</a> 2020-08-02 ⓘ]</sup>.
</p>
<h4><span class="mw-headline" id="DVD_to_iPod">DVD to iPod</span></h4>
<p><b>Get from:</b> <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/podencoder/">podencoder</a></span><sup><small>AUR</small></sup><sup>[<a href="../en/Help:Procedures.html#Fix_broken_package_links" title="Help:Procedures">断开的链接</a>：package not found]</sup><br>
<b>Depends on:</b> aur/gpac mplayer
</p>
<p>Has detailed help, and is fairly self explanatory.
</p>
<p>An alternative is to use a method suggested at <a href="../en/Optical_disc_drive.html#DVD-Video" class="mw-redirect" title="DVD Ripping">DVD Ripping</a> then use one of the programs listed below to convert that to an iPod-friendly format.
</p>
<h4><span class="mw-headline" id="Video_File_to_iPod">Video File to iPod</span></h4>
<p><b>Get from:</b> <a rel="nofollow" class="external free" href="http://thomer.com/howtos/mp4ize">http://thomer.com/howtos/mp4ize</a><sup title="最后检查状态：SSL error">[<a href="https://en.wikipedia.org/wiki/Wikipedia:Link_rot" class="extiw" title="wikipedia:Wikipedia:Link rot">失效链接</a> 2020-12-27 ⓘ]</sup><br>
<b>Depends on:</b> <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=mplayer">mplayer</a></span>
</p>
<p>This is a Ruby script to convert video files to an mp4 suitable for an iPod or iPhone.
</p>
<h3>
<span id="More_Advanced.2FConfigurable_Methods"></span><span class="mw-headline" id="More_Advanced/Configurable_Methods">More Advanced/Configurable Methods</span>
</h3>
<h4><span class="mw-headline" id="Avidemux">Avidemux</span></h4>
<p><a href="../en/Help:Reading.html#Installation_of_packages" class="mw-redirect" title="Install">Install</a> <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=avidemux-gtk">avidemux-gtk</a></span><sup>[<a href="../en/Help:Procedures.html#Fix_broken_package_links" title="Help:Procedures">断开的链接</a>：replaced by <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=avidemux-qt">avidemux-qt</a></span>]</sup> or <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=avidemux-qt">avidemux-qt</a></span> from the official repositories.
</p>
<p>This can convert to mp4 files. If you enforce a hard max of bit rate @ 700ish and keep the video size to 720x480 or 320x240 than it works fine for video file exporting.
</p>
<h4><span class="mw-headline" id="Mencoder">Mencoder</span></h4>
<p><a href="../en/Help:Reading.html#Installation_of_packages" class="mw-redirect" title="Install">Install</a> the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=mplayer">mplayer</a></span> package from the official repositories.
</p>
<p>Has <i>extremely</i> comprehensive configuration support, which will be able to spit out iPod-compatible video files. Check out <span class="plainlinks archwiki-template-man" title="$ man 1 mencoder"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/mencoder.1">mencoder(1)</a></span>; a lot of MPlayer opts will also affect encoding.
</p>
<p>A basic guide is also available at <a href="../en/MEncoder.html" title="MEncoder">MEncoder</a>.
</p>
<p>An example command to encode iPhone/iPod Touch-compatible video:
</p>
<pre>mencoder INPUT -o output.mp4 \
-vf scale=480:-10,harddup \
-oac faac -faacopts mpeg=4:object=2:raw:br=128 \
-of lavf -lavfopts format=mp4 \
-ovc x264 -x264encopts nocabac:level_idc=30:bframes=0
</pre>
<h4><span class="mw-headline" id="FFMpeg">FFMpeg</span></h4>
<p><a href="../en/Help:Reading.html#Installation_of_packages" class="mw-redirect" title="Install">Install</a> the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=ffmpeg">ffmpeg</a></span> package from the official repositories.
</p>
<p>Another encoder with comprehensive configuration support. Example command to encode for 5G iPod:
</p>
<pre>$ ffmpeg -vcodec xvid -b 300 -qmin 3 -qmax 5 -bufsize 4096 \
-g 300 -acodec aac -ab 96 -i INPUT -s 320x240 \
-aspect 4:3 output.mp4
</pre>
<p>or iPod Touch/iPhone compatible video output:
</p>
<pre>$ ffmpeg -f mp4 -vcodec mpeg4 -maxrate 1000 -b 700 -qmin 3 -qmax 5\
-bufsize 4096 -g 300 -acodec aac -ab 192 -s 480×320 -aspect 4:3 -i INPUT output.mp4
</pre>
<h2>
<span id="iPhone.2FiPod_Touch"></span><span class="mw-headline" id="iPhone/iPod_Touch">iPhone/iPod Touch</span>
</h2>
<h3><span class="mw-headline" id="Introduction">Introduction</span></h3>
<p>By default, neither the iPhone nor the iPod Touch present mass storage capability over USB, though there exist two solutions for accessing your files.
</p>
<p>The first is to mount your device through the FUSE file system SSHFS. This requires jailbreaking, which can be done on any major OS using e.g. <a rel="nofollow" class="external text" href="http://www.ijailbreak.com/how-to/how-to-jailbreak-iphone-4s-absinthe-linux/">Absinthe</a> for recent iOS versions. After jailbreaking, an SSH server will also need to be installed on the device, which can be done through the Cydia program, installed on the device during the jailbreak process.
</p>
<p>The second is to use a FUSE file system called <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/ifuse/">ifuse</a></span><sup><small>AUR</small></sup>, which allows you to mount your device through USB, as you normally would. After installing ifuse, for instance, you should see your iPhone appear in the left navigation of Gnome Files and other supporting file managers. This method requires no hacking and is in general the better solution, though be aware that the software is still under heavy development. As of late, however, it has proven to be rather reliable and stable.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> The current releases of <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=libgpod">libgpod</a></span> and <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/gtkpod/">gtkpod</a></span><sup><small>AUR</small></sup> support the iPod Touch and the iPhone OS 3.1.x up to iOS 4.3.x. It is possible to transfer pictures and music without limitations.</div>
<p>Refer to this page:<a rel="nofollow" class="external autonumber" href="https://help.ubuntu.com/community/PortableDevices/iPhone">[1]</a>
</p>
<h3><span class="mw-headline" id="Making_Friends_with_the_Device">Making Friends with the Device</span></h3>
<h4><span class="mw-headline" id="The_SSHFS_Way">The SSHFS Way</span></h4>
<p>After this the easiest way to properly initialise a few things on the device's side is with the <a rel="nofollow" class="external text" href="http://launchpad.net/ipod-convenience">iPod convenience script</a>. This is available in the AUR as <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/ipod-convenience/">ipod-convenience</a></span><sup><small>AUR</small></sup><sup>[<a href="../en/Help:Procedures.html#Fix_broken_package_links" title="Help:Procedures">断开的链接</a>：package not found]</sup>
</p>
<p>Next do <code>modprobe fuse</code> to actually load the fuse module. You may also want to add it to your MODULES array in <code>/etc/rc.conf</code> to have it loaded on boot.
</p>
<p>A few things may need changing in the script, depending on your setup. If you do not use sudo, replace:
</p>
<pre>sudo lsusb -v -d 05ac: | grep iSerial | awk '{print $3}' | cut -b1-16 | xargs printf "FirewireGuid: 0x%s" &gt;&gt; $MOUNTPOINT/iTunes_Control/Device/SysInfo
</pre>
<p>with:
</p>
<pre>su -c "lsusb -v -d 05ac: | grep iSerial | awk '{print $3}' | cut -b1-16 | xargs printf \"FirewireGuid: 0x%s\" &gt;&gt; $MOUNTPOINT/iTunes_Control/Device/SysInfo"
</pre>
<p>in the file /usr/share/ipod-convenience/mount-umount. You may also need to replace:
</p>
<pre>PROCESS=`ssh root@$IPADDRESS ps x | grep MobileMusicPlayer | grep -v grep | awk '{print $1}'`
</pre>
<p>with:
</p>
<pre>PROCESS=`ssh root@$IPADDRESS ps ax | grep MobileMusicPlayer | grep -v grep | awk '{print $1}'`
</pre>
<p>(I'm not sure under what circumstances this is necessary; it was on my iPod Touch running 2.2.1, and it will not have any adverse affect under other firmware version)
</p>
<p>After that, edit the <code>/etc/default/ipod-convenience</code> file with details of your device's IP address, and create the mount point, which is <code>/media/ipod</code> by default (make sure to set the permissions correctly if you want it accessible by a regular user)
</p>
<p>To actually mount the device, run <code>ipod-touch-mount</code> or <code>iphone-mount</code> (they both do exactly the same thing so it does not matter which). This should prompt for the root password of the device twice, which is 'alpine' by default in firmware versions 1.1 and up. This will need to be done every time you want to sync. (This can be done without having to type the password each time by using SSH keys - see <a href="../en/SSH_keys.html" class="mw-redirect" title="Using SSH Keys">Using SSH Keys</a> for more information)
</p>
<h4><span class="mw-headline" id="The_iFuse_Way">The iFuse Way</span></h4>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> If using an iPad/iPad2 that has a screen password, one must unlock the device to gain access through the USB interface.</div>
<p>You will need to install <b>usbmuxd</b>, <b>libplist</b>, <b>libimobiledevice</b>, <b>ifuse</b>.  As libimobiledevice is required by ifuse and usbmuxd, you can pull in all four with:
</p>
<pre># pacman -S ifuse usbmuxd libplist
</pre>
<p>Now make sure that you have the fuse module loaded by doing <code>modprobe fuse</code>, assuming that you do not have it in <code>/etc/modules-load.d/</code> already.
</p>
<p>You can now mount your device.  Make sure it is unlocked before you plug it in, or it will not be recognized.
</p>
<pre># ifuse &lt;mountpoint&gt;
</pre>
<p>The mountpoint field is where you want to have it mounted.
</p>
<p>And you are done! You should be able to point your syncing software of choice to the mount point and be able to transfer files.
</p>
<p>To unmount your device:
</p>
<pre># umount &lt;mountpoint&gt;
</pre>
<h4><span class="mw-headline" id="Generating_HashInfo_file">Generating HashInfo file</span></h4>
<p>If you have not previously synced your device using iTunes specifically, you will get error messages telling you that the HashInfo file is missing. This can be fixed by making an iTunes installation on MacOS or Windows create it (by plugging in the iPod there). Alternatively you can create this file yourself, instructions can be found on <a rel="nofollow" class="external text" href="http://ihash.marcansoft.com/">this website</a>.
</p>
<h3><span class="mw-headline" id="Unobfuscating_the_Database">Unobfuscating the Database</span></h3>
<p>Since firmware version 2.0, Apple has obfuscated the music database. If you are using recent firmware, the file <code>/System/Library/Lockdown/Checkpoint.xml</code> can be modified to enable use of the older, non-obfuscated database. Replace:
</p>
<pre>&lt;key&gt;DBVersion&lt;/key&gt;
&lt;integer&gt;4&lt;/integer&gt;
</pre>
<p>with:
</p>
<pre>&lt;key&gt;DBVersion&lt;/key&gt;
&lt;integer&gt;2&lt;/integer&gt;
</pre>
<p>Then reboot your device.
</p>
<p>If syncing fails with "ERROR: Unsupported checksum type '0' in cbk file generation!", you may need to leave this at 4. libgpod seems to <a rel="nofollow" class="external text" href="http://gitorious.org/libgpod/libgpod/blobs/b9b83dc8b6c3d1f0c53ed32f05279ca838d54e02/src/itdb_sqlite.c#line2064">expect a hashed database.</a><sup title="最后检查状态：404">[<a href="https://en.wikipedia.org/wiki/Wikipedia:Link_rot" class="extiw" title="wikipedia:Wikipedia:Link rot">失效链接</a> 2020-08-02 ⓘ]</sup>
</p>
<h3><span class="mw-headline" id="Syncing">Syncing</span></h3>
<p>Use your favourite <a href="#iPod_management_apps">iPod-compatible program</a>. Individual configuration will vary, but in general, pointing your program to your specified mount point should yield good results.
</p>
<p>After you have synced, run <code>ipod-touch-umount</code> (or <code>iphone-umount</code>, depending on your taste) to unmount the SSHFS file system and restart the <code>MobileMusicPlayer</code> process on the device, so that the new music database is read.
</p>
<p>If you used iFuse, simply type:
</p>
<pre># umount &lt;mountpoint&gt;
</pre>
<p>You will still need to reload the MobileMusicPlayer process. If your device is not jailbroken, then you are stuck restarting it.
</p>
<h3><span class="mw-headline" id="The_iFuse_Way_-_iPhone_OS_3.x_and_4.x">The iFuse Way - iPhone OS 3.x and 4.x</span></h3>
<p><i>Warning: this software is considered unstable and should probably not be used in a productive environment</i>
</p>
<p>Make sure you already installed base-devel, which contains several programs needed to compile your new components. If you did not, just run:
</p>
<pre># pacman -S base-devel
</pre>
<p>which will install everything you will need.
</p>
<p>You will need to install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=libplist">libplist</a></span>, <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=libimobiledevice">libimobiledevice</a></span>, <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=libgpod">libgpod</a></span>, <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=usbmuxd">usbmuxd</a></span> and <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/ifuse/">ifuse</a></span><sup><small>AUR</small></sup>.
</p>
<p>Now make sure that you have the fuse module loaded by doing <code>modprobe fuse</code>, assuming that you do not have it in /etc/rc.conf already.
Check if the group "usbmux" has been created and add your user using
</p>
<pre># gpasswd -a &lt;user&gt; usbmux
</pre>
<p>To make sure the new rules apply, execute
</p>
<pre>$ udevadm control --reload-rules
</pre>
<p>and plug in your iPod/iPhone. 
</p>
<p>Run as ROOT:
</p>
<pre># usbmuxd
</pre>
<p>Now you should the be able to mount your device by running
</p>
<pre>$ ifuse ~/ipod
</pre>
<p>or similar. Make sure the directory used exists and is accessible to your user.
</p>
<p>Mount the device and create the iTunes_Control/Device directory. Then, get your UUID. It should be in the syslog from usbmuxd, or you can find it by running 
</p>
<pre>$ lsusb -v | egrep "iSerial.*[a-f0-9]{40}"
</pre>
<p>It should be 40 characters long. Then, run 
</p>
<pre>$ ipod-read-sysinfo-extended &lt;uuid&gt; &lt;mountpoint&gt;. 
</pre>
<p>This should generate a file named <code>iTunes_Control/Device/SysInfoExtended</code>.
</p>
<p>Now, start up your favourite app, it should detect the device via libgpod.
I recommend using gtkpod-git for the time being, as that is what the libgpod developers seem to be using for debugging purposes.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> If gtkpod/gtkpod-git seems to work only from root/sudo while your user only gets the slash screen, you can delete your <code>~/.gtkpod</code> folder and retry. Note that gtkpod will forget your preferences.</div>
<h3><span class="mw-headline" id="Rhythmbox">Rhythmbox</span></h3>
<p>Rhythmbox uses the Gnome Virtual File System to detect mobile devices. If using the iFuse way, gvfs-afc needs to be installed:
</p>
<pre># pacman -S gvfs-afc
</pre>
<h2>
<span id="iPod_Classic.2FNano3g"></span><span class="mw-headline" id="iPod_Classic/Nano3g">iPod Classic/Nano3g</span>
</h2>
<p>You need to set up the iPod to make libgpod able to find its FireWire ID. For this, you will need to get your FireWire ID manually
</p>
<p>1) Mount the iPod as a rw mount point. In the following example, I will use <code>/mnt/ipod</code>.
</p>
<p>2 ) Find the serial number by typing
</p>
<pre># lsusb -v | grep -i Serial 
</pre>
<p>this should print a 16 character long string like 00A1234567891231 (it will have no colons or hyphens) 
</p>
<p>3) Once you have that number, create or edit <code>/mnt/ipod/iPod_Control/Device/SysInfo</code>. Add to that file the line below:
</p>
<pre>  FirewireGuid: 0xffffffffffffffff
</pre>
<p>(replace ffffffffffffffff with the 16 digit string you obtained at the previous step and do not forget the leading 0x before the string)
</p>
<p>Your iPod can now be managed with Amarok or gtkpod.
</p>
<h2><span class="mw-headline" id="iPod_Shuffle_1st_and_2nd_generation">iPod Shuffle 1st and 2nd generation</span></h2>
<p>Due to the simple structure of the Shuffle (compared to the "big" iPods), it is possible to use the player almost like any other USB flash MP3 player. What is necessary is <a rel="nofollow" class="external text" href="https://sourceforge.net/projects/shuffle-db/files/latest/download">rebuild_db.py</a> file stored in the iPod's root directory. Simply copy MP3 files onto the iPod Shuffle (sub-folders are allowed too) and run:
</p>
<pre>$ python2 /path/to/rebuild_db.py
</pre>
<p><a rel="nofollow" class="external text" href="http://shuffle-db.sourceforge.net/">Source</a>
</p>
<h2><span class="mw-headline" id="iPod_management_apps">iPod management apps</span></h2>
<ul><li>
<a rel="nofollow" class="external text" href="https://wiki.gnome.org/Apps/Rhythmbox">Rhythmbox</a>
<ul>
<li>GTK interface (<a href="../en/GNOME.html" title="GNOME">GNOME</a>)</li>
<li>Is part of the official GNOME projects.</li>
<li>Fast, light interface.</li>
<li>Manage music on your computer and iPod</li>
<li>Download or stream podcasts and video podcasts</li>
<li>Queue up songs and podcasts</li>
<li>Last.fm integration</li>
<li>Live radio stations</li>
<li>Jamendo and Magnatune support</li>
<li>Audio CD burning</li>
<li>Album cover display</li>
<li>Song lyrics display</li>
<li>DAAP sharing</li>
</ul>
</li></ul>
<ul><li>
<a rel="nofollow" class="external text" href="http://banshee.fm">Banshee</a>
<ul>
<li>GTK interface (GNOME)</li>
<li>Uses Mono so it is slower and more resource hogging than rhythmbox</li>
<li>Device Sync: Sync your music and videos to your Android, iPod, or other device - or import its media</li>
<li>Podcasts: Download or stream podcasts and video podcasts</li>
<li>Play Queue: Queue up songs, videos, and podcasts, or let the Auto DJ take over</li>
<li>Shuffle Modes: Shuffle (or Auto DJ) by artist, album, rating, or even songs' acoustic similarity</li>
<li>Album Art: Artwork is automatically fetched as you listen</li>
<li>Powerful Search, Smart Playlists: Find exactly what you want, fast</li>
<li>Video Support: All the power of Banshee, now for your videos</li>
</ul>
</li></ul>
<ul><li>
<a rel="nofollow" class="external text" href="http://www.yamipod.com">Yamipod</a>
<ul>
<li>GTK interface (GNOME)</li>
<li>super lightweight application for managing ONLY music on your iPod (not on your computer)</li>
<li>easy ratings edit</li>
<li>PC to iPod synchronization</li>
<li>News RSS and podcasts to iPod upload</li>
<li>Last.fm support</li>
<li>playlist support</li>
</ul>
</li></ul>
<ul><li>
<a rel="nofollow" class="external text" href="http://www.gtkpod.org">gtkpod</a>
<ul>
<li>GTK interface (GNOME)</li>
<li>Read your existing iTunesDB (i.e. import the existing contents of your iPod including play counts, ratings and on-the-go playlists).</li>
<li>Add MP3, WAV, M4A (non-protected AAC), M4B (audio book), podcasts, and various video files (single files, directories or existing playlists) to the **iPod. You need a third party product to download podcasts, like 'bashpodder' or 'gpodder'</li>
<li>View, add and modify Cover Art</li>
<li>Browse the contents of your local hard disk by album/artist/genre by adding all your songs to the 'local' database. From there the tracks can be **dragged over to the iPod/Shuffle easily.</li>
<li>Create and modify playlists, including smart playlists.</li>
<li>You can choose the charset the ID3 tags are encoded in from within gtkpod. The default is the charset currently used by your locale setting.</li>
<li>Extract tag information (artist, album, title...) from the filename if you supply a template.</li>
<li>Detect duplicates when adding songs (optional).</li>
<li>Remove and export tracks from your iPod.</li>
<li>Modify ID3 tags -- changes are also updated in the original file (optional).</li>
<li>Refresh ID3 tags from file (if you have changed the tags in the original file).</li>
<li>Sync directories.</li>
<li>Normalize the volume of your tracks (uses mp3gain or the replay-gain tag)</li>
<li>Write the updated iTunesDB and added songs to your iPod.</li>
<li>Work offline and synchronize your new playlists / songs with the iPod at a later time.</li>
<li>Export your korganizer/kaddressbook/Thunderbird/evocalendar/evolution/webcalendar... data to the iPod (scripts for other programs can be added).</li>
</ul>
</li></ul>
<ul><li>
<a rel="nofollow" class="external text" href="http://www.floola.com">Floola</a>
<ul><li>GTK interface (GNOME)</li></ul>
</li></ul>
<ul><li>
<a rel="nofollow" class="external text" href="https://amarok.kde.org/">Amarok</a>
<ul><li>KDE/qt interface</li></ul>
</li></ul>
<ul><li>
<a rel="nofollow" class="external text" href="http://qpod.sourceforge.net">qPod</a>
<ul>
<li>KDE/qt interface</li>
<li>front-end for GNUpod</li>
</ul>
</li></ul>
<ul><li>
<a rel="nofollow" class="external text" href="https://www.gnu.org/software/gnupod/">GNUpod</a>
<ul><li>command-line only</li></ul>
</li></ul>
<ul><li>
<a rel="nofollow" class="external text" href="http://www.jakpod.de/">jakpod</a>
<ul>
<li>JakPod is based on Java and allows you to copy music and video files to your iPod.</li>
<li>iPod Nano 6th support</li>
<li>
<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/jakpod/">jakpod</a></span><sup><small>AUR</small></sup><sup>[<a href="../en/Help:Procedures.html#Fix_broken_package_links" title="Help:Procedures">断开的链接</a>：package not found]</sup>
</li>
</ul>
</li></ul>
<h2><span class="mw-headline" id="See_also">See also</span></h2>
<ul><li><ul>
<li><a rel="nofollow" class="external text" href="http://help.ubuntu.com/community/PortableDevices/iPhone">More information about iPhone/iPod Touch support</a></li>
<li>
<a rel="nofollow" class="external text" href="http://wiki.gotux.net/code/perl/atget">Apple trailers downloader script</a><sup title="最后检查状态：domain name not resolved">[<a href="https://en.wikipedia.org/wiki/Wikipedia:Link_rot" class="extiw" title="wikipedia:Wikipedia:Link rot">失效链接</a> 2020-08-02 ⓘ]</sup>
</li>
</ul></li></ul>
</div>
</div>
<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../zh-CN/Category:Mobile_devices.html" title="Category:Mobile devices (简体中文)">Mobile devices (简体中文)</a></li></ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden categories: <ul>
<li><a href="../en/Category:Pages_or_sections_flagged_with_Template:Style.html" title="Category:Pages or sections flagged with Template:Style">Pages or sections flagged with Template:Style</a></li>
<li><a href="../en/Category:Pages_with_dead_links.html" title="Category:Pages with dead links">Pages with dead links</a></li>
<li><a href="../en/Category:Pages_with_broken_package_links.html" title="Category:Pages with broken package links">Pages with broken package links</a></li>
</ul>
</div>
</div>
	</div>
</div>

<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
		<li>Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=IOS_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)&amp;oldid=647306">https://wiki.archlinux.org/index.php?title=IOS_(简体中文)&amp;oldid=647306</a>"</li>
		<li id="footer-info-lastmod"> This page was last edited on 27 December 2020, at 12:22.</li>
		<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
	<br>
</ul>
	<ul id="footer-places">
		<li id="footer-places-privacy"><a href="../en/ArchWiki:Privacy_policy.html" title="ArchWiki:Privacy policy">Privacy policy</a></li>
		<li id="footer-places-about"><a href="../en/ArchWiki:About.html" title="ArchWiki:About">About ArchWiki</a></li>
		<li id="footer-places-disclaimer"><a href="../en/ArchWiki:General_disclaimer.html" title="ArchWiki:General disclaimer">Disclaimers</a></li>
	</ul>
	<ul id="footer-icons" class="noprint">
		<li id="footer-copyrightico">
	</ul>
	<div style="clear: both;"></div>
</footer>



</body>
</html>
