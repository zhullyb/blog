<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>CUPS (简体中文)/Printer sharing (简体中文) - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.35.0">
<meta name="robots" content="noindex,follow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="http://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-CUPS_简体中文_Printer_sharing_简体中文 rootpage-CUPS_简体中文 skin-vector action-view skin-vector-legacy">
<div id="content" class="mw-body" role="main" style="margin: 0">
	<a id="top"></a>
	<div id="siteNotice" class="mw-body-content"></div>
	<div class="mw-indicators mw-body-content">
	</div>
	<h1 id="firstHeading" class="firstHeading" lang="en">CUPS (简体中文)/Printer sharing (简体中文)</h1>
	<div id="bodyContent" class="mw-body-content">
		<div id="siteSub" class="noprint">From ArchWiki</div>
		<div id="contentSub"><span class="subpages">&lt; <a href="../zh-CN/CUPS.html" title="CUPS (简体中文)">CUPS (简体中文)</a></span></div>
		<div id="contentSub2"></div>
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="#searchInput">Jump to search</a>
		<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr">
<div class="warningbox">The printable version is no longer supported and may have rendering errors. Please update your browser bookmarks and please use the default browser print function instead.</div>
<div class="mw-parser-output">
<div class="archwiki-template-meta-related-articles-start">
<p>Related articles</p>
<ul>
<li><a href="../en/Samba.html" title="Samba">Samba</a></li>
<li><a href="../en/CUPS.html" title="CUPS">CUPS</a></li>
</ul>
</div>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>翻译状态：</strong>本文是 <a href="../en/CUPS/Printer_sharing.html" class="mw-redirect" title="CUPS printer sharing">CUPS_printer_sharing</a> 的<a href="../zh-CN/ArchWiki:Translation_Team.html" title="ArchWiki:Translation Team (简体中文)">翻译</a>。上次翻译日期：2015-08-23。如果英文版本有所<a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php?title=CUPS_printer_sharing&amp;diff=0&amp;oldid=392936">更改</a>，则您可以帮助同步翻译。</div>
<div class="noprint archwiki-template-message">
<p><a href="../File:Tango-preferences-desktop-locale.png" class="image"><img alt="Tango-preferences-desktop-locale.png" src="../File:Tango-preferences-desktop-locale.png" decoding="async" width="48" height="48"></a><b>本文或本节需要<a href="../zh-CN/ArchWiki:Contributing.html#%E7%BF%BB%E8%AF%91" title="ArchWiki:Contributing (简体中文)">翻译</a>。要贡献翻译，请访问<a href="../zh-CN/ArchWiki:Translation_Team.html" class="mw-redirect" title="ArchWiki Translation Team (简体中文)">简体中文翻译团队</a>。</b><a href="../File:Tango-preferences-desktop-locale.png" class="image"><img alt="Tango-preferences-desktop-locale.png" src="../File:Tango-preferences-desktop-locale.png" decoding="async" width="48" height="48"></a></p>
<div>
<b>附注：</b> <span style="color:red;">请使用模板的第一个参数进行更详细的指示。</span>（在 <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php/Talk:CUPS_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)/Printer_sharing_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)">Talk:CUPS (简体中文)/Printer sharing (简体中文)#</a> 中讨论）</div>
</div>
<p>这篇文章是在系统间共享打印机的操作指南，支持GNU/Linux系统与GNU/Linux系统间共享，以及GNU/Linux系统与Microsoft Windows系统间共享。
</p>
<div id="toc" class="toc" role="navigation" aria-labelledby="mw-toc-heading">
<input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none"><div class="toctitle" lang="en" dir="ltr">
<h2 id="mw-toc-heading">Contents</h2>
<span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span>
</div>
<ul>
<li class="toclevel-1 tocsection-1">
<a href="#GNU/Linux%E7%B3%BB%E7%BB%9F%E9%97%B4%E5%85%B1%E4%BA%AB"><span class="tocnumber">1</span> <span class="toctext">GNU/Linux系统间共享</span></a>
<ul>
<li class="toclevel-2 tocsection-2"><a href="#%E4%BD%BF%E7%94%A8%E7%BD%91%E9%A1%B5%E6%93%8D%E4%BD%9C%E7%95%8C%E9%9D%A2"><span class="tocnumber">1.1</span> <span class="toctext">使用网页操作界面</span></a></li>
<li class="toclevel-2 tocsection-3">
<a href="#%E6%89%8B%E5%8A%A8%E6%93%8D%E4%BD%9C"><span class="tocnumber">1.2</span> <span class="toctext">手动操作</span></a>
<ul>
<li class="toclevel-3 tocsection-4"><a href="#%E5%A6%82%E6%9E%9C%E6%82%A8%E7%9A%84%E5%AE%A2%E6%88%B7%E7%AB%AFCUPS%E7%89%88%E6%9C%AC%E4%B8%BA1.6.x%E8%80%8C%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%AB%AFCUPS%E7%89%88%E6%9C%AC&lt;=_1.5.x"><span class="tocnumber">1.2.1</span> <span class="toctext">如果您的客户端CUPS版本为1.6.x而服务器端CUPS版本&lt;= 1.5.x</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1 tocsection-5">
<a href="#Between_GNU/Linux_and_Windows"><span class="tocnumber">2</span> <span class="toctext">Between GNU/Linux and Windows</span></a>
<ul>
<li class="toclevel-2 tocsection-6">
<a href="#Linux_server_-_Windows_client"><span class="tocnumber">2.1</span> <span class="toctext">Linux server - Windows client</span></a>
<ul>
<li class="toclevel-3 tocsection-7"><a href="#Sharing_via_IPP"><span class="tocnumber">2.1.1</span> <span class="toctext">Sharing via IPP</span></a></li>
<li class="toclevel-3 tocsection-8"><a href="#Sharing_via_Samba"><span class="tocnumber">2.1.2</span> <span class="toctext">Sharing via Samba</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-9">
<a href="#Windows_server_-_Linux_client"><span class="tocnumber">2.2</span> <span class="toctext">Windows server - Linux client</span></a>
<ul>
<li class="toclevel-3 tocsection-10"><a href="#Sharing_via_LPD"><span class="tocnumber">2.2.1</span> <span class="toctext">Sharing via LPD</span></a></li>
<li class="toclevel-3 tocsection-11"><a href="#Sharing_via_IPP_2"><span class="tocnumber">2.2.2</span> <span class="toctext">Sharing via IPP</span></a></li>
<li class="toclevel-3 tocsection-12">
<a href="#Sharing_via_Samba_2"><span class="tocnumber">2.2.3</span> <span class="toctext">Sharing via Samba</span></a>
<ul>
<li class="toclevel-4 tocsection-13"><a href="#Configuration_using_the_web_interface"><span class="tocnumber">2.2.3.1</span> <span class="toctext">Configuration using the web interface</span></a></li>
<li class="toclevel-4 tocsection-14"><a href="#Manual_configuration"><span class="tocnumber">2.2.3.2</span> <span class="toctext">Manual configuration</span></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1 tocsection-15">
<a href="#Troubleshooting"><span class="tocnumber">3</span> <span class="toctext">Troubleshooting</span></a>
<ul>
<li class="toclevel-2 tocsection-16"><a href="#Cannot_print_with_GTK_applications"><span class="tocnumber">3.1</span> <span class="toctext">Cannot print with GTK applications</span></a></li>
<li class="toclevel-2 tocsection-17"><a href="#Unable_to_add/modify_a_printer_via_SAMBA"><span class="tocnumber">3.2</span> <span class="toctext">Unable to add/modify a printer via SAMBA</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-18"><a href="#Other_operating_systems"><span class="tocnumber">4</span> <span class="toctext">Other operating systems</span></a></li>
</ul>
</div>

<h2>
<span id="GNU.2FLinux.E7.B3.BB.E7.BB.9F.E9.97.B4.E5.85.B1.E4.BA.AB"></span><span class="mw-headline" id="GNU/Linux系统间共享">GNU/Linux系统间共享</span>
</h2>
<p>在作为打印服务器的GNU/Linux系统（服务器端）上安装好CUPS之后，建议您通过网页操作界面与另一个GNU/Linux系统（客户端）共享打印机；当然您也可以选择手动操作共享。
</p>
<p>在启动cupsd之前，您需要保证avahi-daemon处于运行状态。
</p>
<p>您的客户端需要支持Avahi主机名解析，否则客户端可能报错称“找不到打印机”("Unable to locate printer")。详情请参考<a href="../en/Avahi.html#Hostname_resolution" title="Avahi">avahi#Hostname resolution</a>。
</p>
<h3>
<span id=".E4.BD.BF.E7.94.A8.E7.BD.91.E9.A1.B5.E6.93.8D.E4.BD.9C.E7.95.8C.E9.9D.A2"></span><span class="mw-headline" id="使用网页操作界面">使用网页操作界面</span>
</h3>
<p>用浏览器访问CUPS管理页面：<a rel="nofollow" class="external free" href="http://localhost:631">http://localhost:631</a> 
</p>
<p>点击页面上方的<i>Administration</i>按钮, 在Printer下选择“add printer”，将会自动检测已连接的打印机。如果打印机无法被检测，请尝试将打印机重启后重新检测。
</p>
<p>打印机设置好之后，将<i>Server</i>下的"Share printers connected to this system"改为选中状态，然后点击下方的<i>change settings</i>保存修改。这时打印服务器将自动重启。
</p>
<p>选择"Edit Configuration File"即可直接修改配置文件<code>cups.conf</code>。通过修改文件您可以选择仅将打印机共享到特定用户或IP地址，下文中有详细说明。
</p>
<h3>
<span id=".E6.89.8B.E5.8A.A8.E6.93.8D.E4.BD.9C"></span><span class="mw-headline" id="手动操作">手动操作</span>
</h3>
<p>在打印服务器端（即与打印机直接相连的那端）编辑配置文件 <code>/etc/cups/cupsd.conf</code>，使共享打印机的系统能连接到服务器端。比如添加如下内容：
</p>
<pre>&lt;Location /&gt;
   Order allow,deny
   Allow localhost
   Allow 192.168.0.*
&lt;/Location&gt;
</pre>
<p>其中“Allow”后面为允许与打印服务器相连的系统。"Allow all"将允许局域网内所有系统与打印服务器连接。
</p>
<p>此外我们需要保证服务器端正在监听客户端所在的IP地址。在"# Listen &lt;serverip&gt;:631"之后添加如下内容（注意：“Listen”后面为服务器的IP地址，而非客户端IP地址）：
</p>
<pre>Listen 192.168.0.101:631
</pre>
<p>为了“让打印机在局域网中可见”("Show shared printers on the local network")，请添加如下内容以保证Browsing指令可以使用：
</p>
<pre>Browsing On
</pre>
<p>完成修改后重启CUPS。
</p>
<p>在客户端的<code>/etc/cups/client.conf</code>文件中（如果文件不存在则新建）新建一行，将服务器的名称或IP地址添加到"ServerName"（服务器名称）后面：
</p>
<pre>ServerName 192.168.0.101
</pre>
<p>还有很多其他可行的配置方式，在http://localhost:631/help/network.html 中有详细介绍。
</p>
<p>完成修改后重启CUPS。
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>注意：</strong> 在客户端添加打印机时，如果采用的是IPP协议（Internet Printing Protocol）, 请采用如下形式的URI： ipp://192.168.0.101:631/printers/&lt;打印机名称&gt;</div>
<h4>
<span id=".E5.A6.82.E6.9E.9C.E6.82.A8.E7.9A.84.E5.AE.A2.E6.88.B7.E7.AB.AFCUPS.E7.89.88.E6.9C.AC.E4.B8.BA1.6.x.E8.80.8C.E6.9C.8D.E5.8A.A1.E5.99.A8.E7.AB.AFCUPS.E7.89.88.E6.9C.AC.3C.3D_1.5.x"></span><span class="mw-headline" id="如果您的客户端CUPS版本为1.6.x而服务器端CUPS版本&lt;=_1.5.x">如果您的客户端CUPS版本为1.6.x而服务器端CUPS版本&lt;= 1.5.x</span>
</h4>
<p>在CUPS 1.6及其之后的版本中, 客户端默认采用IPP 2.0。如果服务器端的CUPS版本&lt;=1.5/IPP版本&lt;= 1.1，由于客户端不会自动使用较早版本的通信协议，客户端将无法与服务器端交流。一个可行的方法是在<code>/etc/cups/client.conf</code>中添加如下内容(此方法于2013-05-07被指有误, 可以参考<a rel="nofollow" class="external text" href="http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=704238">错误报告</a>):
</p>
<pre>ServerName HOSTNAME-OR-IP-ADDRESS[:PORT]/version=1.1
</pre>
<h2>
<span id="Between_GNU.2FLinux_and_Windows"></span><span class="mw-headline" id="Between_GNU/Linux_and_Windows">Between GNU/Linux and Windows</span>
</h2>
<h3><span class="mw-headline" id="Linux_server_-_Windows_client">Linux server - Windows client</span></h3>
<h4><span class="mw-headline" id="Sharing_via_IPP">Sharing via IPP</span></h4>
<p>The <b>preferred way</b> to connect a Windows client to a Linux print server is using <a href="https://en.wikipedia.org/wiki/Internet_Printing_Protocol" class="extiw" title="wikipedia:Internet Printing Protocol">IPP</a>. It is a standard printer protocol based on HTTP, allowing you all ways to profit from port forwarding, tunneling etc.
The configuration is <b>very easy</b> and this way is less error-prone than using Samba.
IPP is natively supported by Windows <b>since Windows 2000</b>.
</p>
<p>To configure the server side proceed as described in the section above to enable browsing.
</p>
<p>On the Windows computer, go to the printer control panel and choose to 'Add a New Printer'. Next, choose to give a URL. For the URL, type in the location of the printer:
</p>
<pre>http://<i>host_ip_address</i>:631/printers/<i>printer_name</i>
</pre>
<p>(where <i>host_ip_address</i> is the GNU/Linux server's IP address and <i>printer_name</i> is the name of the printer being connected to, you can also use the server's fully qualified domain name, if it has one, but you may need to set <code>ServerAlias my_fully_qualified_domain_name</code> in <i>cupsd.conf</i> for this to work).
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> The add printer dialog in windows is quite sensitive to the path to the printer, the dialogue box itself suggests:
<pre>http://servername:631/printers/printer_name/.printer
</pre>
<p>which will work in a web-browser but <b>not</b> in the add printer dialogue.  (At least, not when using cups as an ipp server).  The syntax suggested above:
</p>
<pre>http://host_ip_address:631/printers/printer_name
</pre>
<b>will</b> work.</div>
<p>After this, install the native printer drivers for your printer on the Windows computer. If the CUPS server is set up to use its own printer drivers, then you can just select a generic postscript printer for the Windows client(e.g. 'HP Color LaserJet 8500 PS' or 'Xerox DocuTech 135 PS2'). Then test the print setup by printing a test page.
</p>
<h4><span class="mw-headline" id="Sharing_via_Samba">Sharing via Samba</span></h4>
<p>If your client's Windows version is below Windows 2000 or if you experienced troubles with IPP you can also use Samba for sharing.
Note of course that with Samba this involves another complex piece of software. This makes this way <b>more difficult to configure</b> and thus sometimes also <b>more error-prone</b>, mostly due to authentication problems.
</p>
<p>To configure Samba on the Linux server, edit <code>/etc/samba/smb.conf</code> file to allow access to printers. File <code>smb.conf</code> can look something like this:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/samba/smb.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[global]
workgroup=Heroes
server string=Arch Linux Print Server
security=user

[printers]
    comment=All Printers
    path=/var/spool/samba
    browseable=yes
    # to allow user 'guest account' to print.
    guest ok=no
    writable=no
    printable=yes
    create mode=0700
    write list=@adm root yourusername</pre>
<p>That should be enough to share the printer, yet adding an individual printer entry may be desirable:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/samba/smb.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[ML1250]
    comment=Samsung ML-1250 Laser Printer
    printer=ml1250
    path=/var/spool/samba
    printing=cups
    printable=yes
    printer admin=@admin root yourusername
    user client driver=yes
    # to allow user 'guest account' to print.
    guest ok=no
    writable=no
    write list=@adm root yourusername
    valid users=@adm root yourusername</pre>
<p>Please note that this assumes configuration was made so that users must have a valid account to access the printer. To have a public printer, set <i>guest ok</i> to <i>yes</i>, and remove the <i>valid users</i> line. To add accounts, set up a regular GNU/Linux account and then set up a Samba password on the server. For instance:
</p>
<pre># useradd yourusername
# smbpasswd -a yourusername
</pre>
<p><br>
After this, restart the Samba daemon.
</p>
<p>Obviously, there are a lot of tweaks and customizations that can be done with setting up a Samba print server, so it is advised to look at the Samba and CUPS documentation for more help. The <code>smb.conf.example</code> file also has some good samples that might warrant imitating.
</p>
<h3><span class="mw-headline" id="Windows_server_-_Linux_client">Windows server - Linux client</span></h3>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Warning:</strong> CUPS cannot handle spaces in printer URIs. If your Windows printer name or user passwords have spaces, CUPS will throw "lpadmin: Bad device-uri" error</div>
<h4><span class="mw-headline" id="Sharing_via_LPD">Sharing via LPD</span></h4>
<p>Windows 7 has a built-in LPD server - using it will probably be the easiest approach as it does neither require an installation of <i>Samba</i> on the client nor heavy configuration on the server. It can be activated in the <i>Control Panel</i> under <i>Programs</i> -&gt; <i>Activate Windows functions</i> in the section <i>Print services</i>. The printer must have <i>shared</i> activated in its properties. Use a share name without any special characters like spaces, commas, etc.
</p>
<p>Then the printer can be added in CUPS, choosing LPD protocol. The printer address will look like this:
</p>
<pre># lpd://windowspc/printersharename
</pre>
<p>Before adding the printer, you will most likely have to install an appropriate printer driver depending on your printer model. Generic PostScript or RAW drivers might also work.
</p>
<h4><span class="mw-headline" id="Sharing_via_IPP_2">Sharing via IPP</span></h4>
<p>As above, IPP is also the <b>preferred</b> protocol for printer sharing. However this way might be a bit <b>more difficult</b> than the native Samba approach below, since you need a greater effort to set up an IPP-Server on Windows.
The commonly chosen server software is Microsoft's Internet Information Services (IIS).
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> This section is incomplete. Here is a description how to set up ISS in Windows XP and Windows 2000, unfortunately in German <a rel="nofollow" class="external autonumber" href="http://www.heise.de/netze/artikel/Ueberall-drucken-221652.html">[1]</a><sup title="最后检查状态：404">[<a href="https://en.wikipedia.org/wiki/Wikipedia:Link_rot" class="extiw" title="wikipedia:Wikipedia:Link rot">失效链接</a> 2020-08-02 ⓘ]</sup>
</div>
<h4><span class="mw-headline" id="Sharing_via_Samba_2">Sharing via Samba</span></h4>
<p>A <b>much simpler way</b> is using Window's native printer sharing via Samba. There is almost no configuration needed, and all of it can be done from the CUPS Backend. As above noted, if there are any problems the reason is mostly related to authentication trouble and Windows access restrictions.
</p>
<p>On the server side enable sharing for your desired printer and ensure that the user on the client machine has the right to access the printer.
</p>
<p>The following section describes how to set up the client, assuming that both daemons (cupsd and smbd) are running.
</p>
<h5><span class="mw-headline" id="Configuration_using_the_web_interface">Configuration using the web interface</span></h5>
<p>The Samba CUPS back-end is enabled by default, if for any reason it is not activate it by entering the following command and restarting CUPS.
</p>
<pre># ln -s $(which smbspool) /usr/lib/cups/backend/smb
</pre>
<p>Next, simply log in on the CUPS web interface and choose to add a new printer. As a device choose "Windows Printer via SAMBA".
</p>
<p>For the device location, enter:
</p>
<pre>smb://username:password@hostname/printer_name
</pre>
<p>Or without a password:
</p>
<pre>smb://username@hostname/printer_name
</pre>
<p>Make sure that the user actually has access to the printer on the Windows computer and select the appropriate drivers. If the computer is located on a domain, make sure the user-name includes the domain: 
</p>
<pre>smb://username:password@domain/hostname/printer_name
</pre>
<p>If the network contains many printers you might want to set a preferred printer. To do so use the web interface, go into the printer tab, choose the desired printer and select 'Set as default' from the drop-down list.
</p>
<h5><span class="mw-headline" id="Manual_configuration">Manual configuration</span></h5>
<p>For manual configuration stop the CUPS daemon and add your printer to <code>/etc/cups/printers.conf</code>, which might for example look like this
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/cups/printers.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">&lt;DefaultPrinter MyPrinter&gt;
AuthInfoRequired username,password
Info My printer via SAMBA
Location In my Office
MakeModel Samsung ML-1250 - CUPS+Gutenprint v5.2.7        # &lt;= use 'lpinfo -m' to list available models
DeviceURI smb://username:password@hostname/printer_name   # &lt;= server URI as described in previous section
State Idle
Type 4
Accepting Yes
Shared No
JobSheets none none
QuotaPeriod 0
PageLimit 0
KLimit 0
AllowUser yourusername                                    # &lt;= do not forget to change this
OpPolicy default
ErrorPolicy stop-printer
&lt;/Printer&gt;</pre>
<p>Then restart the CUPS daemon an try to print a test page.
</p>
<p>To set the preferred printer use the following command 
</p>
<pre># lpoptions -d desired_default_printer_name
</pre>
<h2><span class="mw-headline" id="Troubleshooting">Troubleshooting</span></h2>
<p>See <a href="../en/CUPS/Troubleshooting.html" title="CUPS/Troubleshooting">CUPS/Troubleshooting</a> for general troubleshooting tips.
</p>
<h3><span class="mw-headline" id="Cannot_print_with_GTK_applications">Cannot print with GTK applications</span></h3>
<p>If you get "getting printer information failed" when you try to print from gtk-applications, add this line to your <code>/etc/hosts</code>:
</p>
<pre> # serverip 	some.name.org 	ServersHostname
</pre>
<h3>
<span id="Unable_to_add.2Fmodify_a_printer_via_SAMBA"></span><span class="mw-headline" id="Unable_to_add/modify_a_printer_via_SAMBA">Unable to add/modify a printer via SAMBA</span>
</h3>
<p>When adding a or modifying a printer via SAMBA, the interface hangs at 100% CPU for about 30 seconds and then returns the message
</p>
<pre>Unable to get list of printer drivers: Success
</pre>
<p>This is a known bug in Gutenprint (<a rel="nofollow" class="external text" href="https://bugs.archlinux.org/task/43708">FS#43708</a>). The workaround is to uninstall Gutenprint and install only foomatic-db.
</p>
<pre> lpinfo -m
</pre>
<p>should then return the list of drivers instead of just the "Success" message.
</p>
<h2><span class="mw-headline" id="Other_operating_systems">Other operating systems</span></h2>
<p>More information on interfacing CUPS with other printing systems can be found in the CUPS manual, e.g. on <a rel="nofollow" class="external free" href="http://localhost:631/sam.html#PRINTING_OTHER">http://localhost:631/sam.html#PRINTING_OTHER</a>
</p>
</div>
</div>
<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../zh-CN/Category:Printers.html" title="Category:Printers (简体中文)">Printers (简体中文)</a></li></ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden categories: <ul>
<li><a href="../zh-CN/Category:Pages_or_sections_flagged_with_Template:Translateme.html" title="Category:Pages or sections flagged with Template:Translateme (简体中文)">Pages or sections flagged with Template:Translateme (简体中文)</a></li>
<li><a href="../en/Category:Pages_with_dead_links.html" title="Category:Pages with dead links">Pages with dead links</a></li>
</ul>
</div>
</div>
	</div>
</div>

<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
		<li>Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=CUPS_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)/Printer_sharing_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)&amp;oldid=630997">https://wiki.archlinux.org/index.php?title=CUPS_(简体中文)/Printer_sharing_(简体中文)&amp;oldid=630997</a>"</li>
		<li id="footer-info-lastmod"> This page was last edited on 11 August 2020, at 18:32.</li>
		<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
	<br>
</ul>
	<ul id="footer-places">
		<li id="footer-places-privacy"><a href="../en/ArchWiki:Privacy_policy.html" title="ArchWiki:Privacy policy">Privacy policy</a></li>
		<li id="footer-places-about"><a href="../en/ArchWiki:About.html" title="ArchWiki:About">About ArchWiki</a></li>
		<li id="footer-places-disclaimer"><a href="../en/ArchWiki:General_disclaimer.html" title="ArchWiki:General disclaimer">Disclaimers</a></li>
	</ul>
	<ul id="footer-icons" class="noprint">
		<li id="footer-copyrightico">
	</ul>
	<div style="clear: both;"></div>
</footer>



</body>
</html>
