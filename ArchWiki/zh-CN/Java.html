<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>Java (简体中文) - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.35.0">
<meta name="robots" content="noindex,follow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="http://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Java_简体中文 rootpage-Java_简体中文 skin-vector action-view skin-vector-legacy">
<div id="content" class="mw-body" role="main" style="margin: 0">
	<a id="top"></a>
	<div id="siteNotice" class="mw-body-content"></div>
	<div class="mw-indicators mw-body-content">
	</div>
	<h1 id="firstHeading" class="firstHeading" lang="en">Java (简体中文)</h1>
	<div id="bodyContent" class="mw-body-content">
		<div id="siteSub" class="noprint">From ArchWiki</div>
		<div id="contentSub"></div>
		<div id="contentSub2"></div>
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="#searchInput">Jump to search</a>
		<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr">
<div class="warningbox">The printable version is no longer supported and may have rendering errors. Please update your browser bookmarks and please use the default browser print function instead.</div>
<div class="mw-parser-output">
<div class="archwiki-template-meta-related-articles-start">
<p>Related articles</p>
<ul>
<li><a href="../zh-CN/Java_package_guidelines.html" title="Java package guidelines (简体中文)">Java package guidelines (简体中文)</a></li>
<li><a href="../en/Java_Runtime_Environment_fonts.html" class="mw-redirect" title="Java Runtime Environment Fonts">Java Runtime Environment Fonts</a></li>
</ul>
</div>
<p>这是来自 <a href="https://en.wikipedia.org/wiki/Java_(programming_language)" class="extiw" title="wikipedia:Java (programming language)">维基百科的文章</a>:
</p>
<dl><dd>Java是由Sun微系统公司原创开发的编程语言并且在1995年发布，用作Sun微系统公司的Java平台的核心组件。它从C和C++派生了许多语法，但有一个简洁的对象模型和更少的底层组件。Java的应用一般被编译成能在(<a href="https://en.wikipedia.org/wiki/Java_virtual_machine" class="extiw" title="wikipedia:Java virtual machine">JVM</a>)运行的字节码，并能无视计算机结构。</dd></dl>
<p>Arch Linux官方支持开源的 <a rel="nofollow" class="external text" href="https://openjdk.java.net/">OpenJDK</a> 版本7、8、10和11.所有的JVM都能无冲突的被安装，并切换到帮助脚本<code>archlinux-java</code>. 一些其他的Java环境也是可使用的，在 <a href="../zh-CN/Arch_User_Repository.html" title="Arch User Repository (简体中文)">Arch User Repository (简体中文)</a>中，但官方并不支持。
</p>
<div id="toc" class="toc" role="navigation" aria-labelledby="mw-toc-heading">
<input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none"><div class="toctitle" lang="en" dir="ltr">
<h2 id="mw-toc-heading">Contents</h2>
<span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span>
</div>
<ul>
<li class="toclevel-1 tocsection-1">
<a href="#%E5%AE%89%E8%A3%85"><span class="tocnumber">1</span> <span class="toctext">安装</span></a>
<ul>
<li class="toclevel-2 tocsection-2"><a href="#OpenJDK"><span class="tocnumber">1.1</span> <span class="toctext">OpenJDK</span></a></li>
<li class="toclevel-2 tocsection-3"><a href="#%E5%85%B6%E4%BB%96%E5%AE%9E%E7%8E%B0"><span class="tocnumber">1.2</span> <span class="toctext">其他实现</span></a></li>
<li class="toclevel-2 tocsection-4">
<a href="#%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7"><span class="tocnumber">1.3</span> <span class="toctext">开发工具</span></a>
<ul>
<li class="toclevel-3 tocsection-5"><a href="#%E5%8F%8D%E7%BC%96%E8%AF%91%E5%99%A8"><span class="tocnumber">1.3.1</span> <span class="toctext">反编译器</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1 tocsection-6">
<a href="#%E5%9C%A8JVM%E9%97%B4%E5%88%87%E6%8D%A2"><span class="tocnumber">2</span> <span class="toctext">在JVM间切换</span></a>
<ul>
<li class="toclevel-2 tocsection-7"><a href="#%E5%88%97%E5%87%BA%E5%85%BC%E5%AE%B9%E7%9A%84%E5%AE%89%E8%A3%85%E4%BA%86%E7%9A%84Java%E7%8E%AF%E5%A2%83"><span class="tocnumber">2.1</span> <span class="toctext">列出兼容的安装了的Java环境</span></a></li>
<li class="toclevel-2 tocsection-8"><a href="#%E6%94%B9%E5%8F%98%E9%BB%98%E8%AE%A4Java%E7%8E%AF%E5%A2%83"><span class="tocnumber">2.2</span> <span class="toctext">改变默认Java环境</span></a></li>
<li class="toclevel-2 tocsection-9"><a href="#%E5%8F%96%E6%B6%88%E8%AE%BE%E7%BD%AE%E7%9A%84%E9%BB%98%E8%AE%A4Java%E7%8E%AF%E5%A2%83"><span class="tocnumber">2.3</span> <span class="toctext">取消设置的默认Java环境</span></a></li>
<li class="toclevel-2 tocsection-10"><a href="#%E8%A7%A3%E5%86%B3%E9%BB%98%E8%AE%A4Java%E7%8E%AF%E5%A2%83%E7%9A%84%E9%97%AE%E9%A2%98"><span class="tocnumber">2.4</span> <span class="toctext">解决默认Java环境的问题</span></a></li>
<li class="toclevel-2 tocsection-11"><a href="#%E8%BF%90%E8%A1%8C%E9%9D%9E%E9%BB%98%E8%AE%A4Java%E7%89%88%E6%9C%AC%E7%9A%84%E7%A8%8B%E5%BA%8F"><span class="tocnumber">2.5</span> <span class="toctext">运行非默认Java版本的程序</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-12"><a href="#%E5%8C%85%E6%94%AF%E6%8C%81archlinux-java%E7%9A%84%E5%85%88%E5%86%B3%E6%9D%A1%E4%BB%B6"><span class="tocnumber">3</span> <span class="toctext">包支持archlinux-java的先决条件</span></a></li>
<li class="toclevel-1 tocsection-13">
<a href="#%E6%95%85%E9%9A%9C%E6%8E%92%E9%99%A4"><span class="tocnumber">4</span> <span class="toctext">故障排除</span></a>
<ul>
<li class="toclevel-2 tocsection-14"><a href="#MySQL"><span class="tocnumber">4.1</span> <span class="toctext">MySQL</span></a></li>
<li class="toclevel-2 tocsection-15"><a href="#IntelliJ_IDEA"><span class="tocnumber">4.2</span> <span class="toctext">IntelliJ IDEA</span></a></li>
<li class="toclevel-2 tocsection-16"><a href="#%E5%86%92%E5%85%85%E5%8F%A6%E4%B8%80%E4%B8%AA%E7%AA%97%E5%8F%A3%E7%AE%A1%E7%90%86%E5%99%A8"><span class="tocnumber">4.3</span> <span class="toctext">冒充另一个窗口管理器</span></a></li>
<li class="toclevel-2 tocsection-17"><a href="#%E9%9A%BE%E4%BB%A5%E8%BE%A8%E8%AE%A4%E7%9A%84%E5%AD%97%E4%BD%93"><span class="tocnumber">4.4</span> <span class="toctext">难以辨认的字体</span></a></li>
<li class="toclevel-2 tocsection-18"><a href="#%E4%B8%80%E4%BA%9B%E5%BA%94%E7%94%A8%E7%BC%BA%E5%B0%91%E6%96%87%E5%AD%97"><span class="tocnumber">4.5</span> <span class="toctext">一些应用缺少文字</span></a></li>
<li class="toclevel-2 tocsection-19"><a href="#%E5%BA%94%E7%94%A8%E6%9C%AA%E8%B0%83%E6%95%B4WM%E5%A4%A7%E5%B0%8F%EF%BC%8C%E8%8F%9C%E5%8D%95%E5%BF%AB%E9%80%9F%E5%85%B3%E9%97%AD"><span class="tocnumber">4.6</span> <span class="toctext">应用未调整WM大小，菜单快速关闭</span></a></li>
<li class="toclevel-2 tocsection-20"><a href="#%E5%BD%93%E8%B0%83%E8%AF%95JavaFX%E7%A8%8B%E5%BA%8F%E7%9A%84%E6%97%B6%E5%80%99%E7%B3%BB%E7%BB%9F%E5%8D%A1%E4%BD%8F"><span class="tocnumber">4.7</span> <span class="toctext">当调试JavaFX程序的时候系统卡住</span></a></li>
<li class="toclevel-2 tocsection-21"><a href="#JavaFX_%E7%9A%84_MediaPlayer_%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0%E6%8A%9B%E5%87%BA%E4%BA%86%E4%B8%80%E4%B8%AA_exception"><span class="tocnumber">4.8</span> <span class="toctext">JavaFX 的 MediaPlayer 构造函数抛出了一个 exception</span></a></li>
<li class="toclevel-2 tocsection-22"><a href="#Java%E7%A8%8B%E5%BA%8F%E6%97%A0%E6%B3%95%E6%89%93%E5%BC%80%E5%A4%96%E9%83%A8%E9%93%BE%E6%8E%A5"><span class="tocnumber">4.9</span> <span class="toctext">Java程序无法打开外部链接</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-23">
<a href="#%E5%BB%BA%E8%AE%AE%E5%92%8C%E6%8A%80%E5%B7%A7"><span class="tocnumber">5</span> <span class="toctext">建议和技巧</span></a>
<ul>
<li class="toclevel-2 tocsection-24"><a href="#%E6%9B%B4%E5%A5%BD%E7%9A%84%E5%AD%97%E4%BD%93%E6%B8%B2%E6%9F%93"><span class="tocnumber">5.1</span> <span class="toctext">更好的字体渲染</span></a></li>
<li class="toclevel-2 tocsection-25"><a href="#%E7%A6%81%E6%AD%A2%E5%91%BD%E4%BB%A4%E8%A1%8C%E7%9A%84_'Picked_up_JAVA_OPTIONS'_%E6%B6%88%E6%81%AF"><span class="tocnumber">5.2</span> <span class="toctext">禁止命令行的 'Picked up _JAVA_OPTIONS' 消息</span></a></li>
<li class="toclevel-2 tocsection-26">
<a href="#GTK_%E8%A7%86%E8%A7%89%E6%95%88%E6%9E%9C%E5%92%8C%E6%84%9F%E8%A7%89"><span class="tocnumber">5.3</span> <span class="toctext">GTK 视觉效果和感觉</span></a>
<ul>
<li class="toclevel-3 tocsection-27"><a href="#GTK3%E6%94%AF%E6%8C%81"><span class="tocnumber">5.3.1</span> <span class="toctext">GTK3支持</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-28"><a href="#%E6%9B%B4%E5%A5%BD%E7%9A%842D%E6%80%A7%E8%83%BD"><span class="tocnumber">5.4</span> <span class="toctext">更好的2D性能</span></a></li>
<li class="toclevel-2 tocsection-29"><a href="#%E9%9D%9E%E9%87%8D%E6%96%B0%E7%88%B6%E6%AF%8D%E7%AA%97%E5%8F%A3%E7%AE%A1%E7%90%86%E5%99%A8_/_%E7%81%B0%E8%89%B2%E7%AA%97%E5%8F%A3_/_%E7%A8%8B%E5%BA%8F%E8%A2%AB%E7%BB%98%E5%88%B6%E5%BE%97%E4%B8%8D%E6%81%B0%E5%BD%93"><span class="tocnumber">5.5</span> <span class="toctext">非重新父母窗口管理器 / 灰色窗口 / 程序被绘制得不恰当</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-30"><a href="#%E5%8F%82%E9%98%85"><span class="tocnumber">6</span> <span class="toctext">参阅</span></a></li>
</ul>
</div>

<h2>
<span id=".E5.AE.89.E8.A3.85"></span><span class="mw-headline" id="安装">安装</span>
</h2>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>注意：</strong> 
<ul>
<li>arch Linux官方只支持 <a href="#OpenJDK">OpenJDK</a> 实现.</li>
<li>安装之后，Java环境需要被shell(<code>$PATH</code> 变量)识别. 可以通过命令行用source处理 <code>/etc/profile</code> 或者重新登出登入桌面环境.</li>
</ul>
</div>
<p>两个 <i>公共</i> 包应该被当做依赖分别安装，他们是 <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=java-runtime-common">java-runtime-common</a></span> (包含Java运行环境（JRE）的公共文件) 和 <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=java-environment-common">java-environment-common</a></span> (包括Java开发包（JDK）的公共文件). 提供的环境文件 <code>/etc/profile.d/jre.sh</code> 指向了一个链接路径 <code>/usr/lib/jvm/default/bin</code>, 它被 <code>archlinux-java</code> 帮助脚本设置. 这个链接 <code>/usr/lib/jvm/default</code> 和 <code>/usr/lib/jvm/default-runtime</code> 应该 <b>总是</b> 被 <code>archlinux-java</code>编辑. 这用来显示和指向默认运行的Java环境，在<code>/usr/lib/jvm/java-${JAVA_MAJOR_VERSION}-${VENDOR_NAME}</code> ，或Java运行，在 <code>/usr/lib/jvm/java-${JAVA_MAJOR_VERSION}-${VENDOR_NAME}/jre</code>.
</p>
<p>大多数可执行的Java安装都在直接路径<code>/usr/bin</code>里,而其他的在 <code>$PATH</code>.
</p>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>警告：</strong> 文件 <code>/etc/profile.d/jdk.sh</code> 再也不被任何包提供了.</div>
<h3><span class="mw-headline" id="OpenJDK">OpenJDK</span></h3>
<p><a href="https://en.wikipedia.org/wiki/OpenJDK" class="extiw" title="wikipedia:OpenJDK">OpenJDK</a> 是一种Java平台、标准版（Java SE）的开源实现(Java SE).
</p>
<dl>
<dt>Headless JRE</dt>
<dd>最小的Java运行环境 - 需要被用来执行非GUI的Java程序.</dd>
<dt>Full JRE</dt>
<dd>完全的Java运行环境 - 需要用来运行JavaGUI程序，依赖于headless JRE.</dd>
<dt>JDK</dt>
<dd>
<a href="https://en.wikipedia.org/wiki/Java_Development_Kit" class="extiw" title="wikipedia:Java Development Kit">Java Development Kit</a> - 需要用来搭建Java开发环境, 依赖于 full JRE.</dd>
</dl>
<table class="wikitable">
<tbody>
<tr>
<th>版本</th>
<th>Headless JRE</th>
<th>Full JRE</th>
<th>JDK</th>
<th>文献</th>
<th>来源
</th>
</tr>
<tr>
<td><a rel="nofollow" class="external text" href="https://openjdk.java.net/projects/jdk/11/">OpenJDK 11</a></td>
<td><span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=jre-openjdk-headless">jre-openjdk-headless</a></span></td>
<td><span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=jre-openjdk">jre-openjdk</a></span></td>
<td><span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=jdk-openjdk">jdk-openjdk</a></span></td>
<td><span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=openjdk-doc">openjdk-doc</a></span></td>
<td>
<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=openjdk-src">openjdk-src</a></span>
</td>
</tr>
<tr>
<td><a rel="nofollow" class="external text" href="https://openjdk.java.net/projects/jdk/10/">OpenJDK 10</a></td>
<td>
<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=jre10-openjdk-headless">jre10-openjdk-headless</a></span><sup>[<a href="../en/Help:Procedures.html#Fix_broken_package_links" title="Help:Procedures">断开的链接</a>：package not found]</sup>
</td>
<td>
<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=jre10-openjdk">jre10-openjdk</a></span><sup>[<a href="../en/Help:Procedures.html#Fix_broken_package_links" title="Help:Procedures">断开的链接</a>：package not found]</sup>
</td>
<td>
<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=jdk10-openjdk">jdk10-openjdk</a></span><sup>[<a href="../en/Help:Procedures.html#Fix_broken_package_links" title="Help:Procedures">断开的链接</a>：package not found]</sup>
</td>
<td>
<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=openjdk10-doc">openjdk10-doc</a></span><sup>[<a href="../en/Help:Procedures.html#Fix_broken_package_links" title="Help:Procedures">断开的链接</a>：package not found]</sup>
</td>
<td>
<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=openjdk10-src">openjdk10-src</a></span><sup>[<a href="../en/Help:Procedures.html#Fix_broken_package_links" title="Help:Procedures">断开的链接</a>：package not found]</sup>
</td>
</tr>
<tr>
<td><a rel="nofollow" class="external text" href="https://openjdk.java.net/projects/jdk8/">OpenJDK 8</a></td>
<td><span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=jre8-openjdk-headless">jre8-openjdk-headless</a></span></td>
<td><span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=jre8-openjdk">jre8-openjdk</a></span></td>
<td><span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=jdk8-openjdk">jdk8-openjdk</a></span></td>
<td><span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=openjdk8-doc">openjdk8-doc</a></span></td>
<td>
<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=openjdk8-src">openjdk8-src</a></span>
</td>
</tr>
<tr>
<td><a rel="nofollow" class="external text" href="https://openjdk.java.net/projects/jdk7/">OpenJDK 7</a></td>
<td><span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=jre7-openjdk-headless">jre7-openjdk-headless</a></span></td>
<td><span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=jre7-openjdk">jre7-openjdk</a></span></td>
<td><span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=jdk7-openjdk">jdk7-openjdk</a></span></td>
<td><span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=openjdk7-doc">openjdk7-doc</a></span></td>
<td>
<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=openjdk7-src">openjdk7-src</a></span>
</td>
</tr>
</tbody>
</table>
<p><b>IcedTea-Web</b> — Java web第一步 但是是一个被弃用的Java浏览器插件.
</p>
<dl><dd>
<a rel="nofollow" class="external free" href="https://icedtea.classpath.org/wiki/IcedTea-Web">https://icedtea.classpath.org/wiki/IcedTea-Web</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=icedtea-web">icedtea-web</a></span>
</dd></dl>
<p><b>OpenJFX 8</b> — JavaFX的开源实现. 你<a rel="nofollow" class="external text" href="https://wiki.openjdk.java.net/display/OpenJFX/Repositories+and+Releases">不需要</a> 安装这个包，如果你使用Java SE的话 (下面要讲的Oracle的JRE和JDK实现). 这个包仅仅是因为担心Java开源实现的用户 (OpenJDK 项目).
</p>
<dl><dd>
<a rel="nofollow" class="external free" href="https://openjdk.java.net/projects/openjfx/">https://openjdk.java.net/projects/openjfx/</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=java-openjfx">java-openjfx</a></span>, <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=java-openjfx-doc">java-openjfx-doc</a></span>, <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=java-openjfx-src">java-openjfx-src</a></span>
</dd></dl>
<p><b>OpenJDK EA</b> — Oracle的OpenJDK为最新开发版本的早期接入.
</p>
<dl><dd>
<a rel="nofollow" class="external free" href="https://jdk.java.net">https://jdk.java.net</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/openjdk-devel/">openjdk-devel</a></span><sup><small>AUR</small></sup><sup>[<a href="../en/Help:Procedures.html#Fix_broken_package_links" title="Help:Procedures">断开的链接</a>：package not found]</sup>
</dd></dl>
<p><b>OpenJFX EA</b> — Oracle的OpenJFK为最新开发版本的早期接入.
</p>
<dl><dd>
<a rel="nofollow" class="external free" href="https://jdk.java.net/openjfx/">https://jdk.java.net/openjfx/</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/java-openjfx-devel/">java-openjfx-devel</a></span><sup><small>AUR</small></sup><sup>[<a href="../en/Help:Procedures.html#Fix_broken_package_links" title="Help:Procedures">断开的链接</a>：package not found]</sup>
</dd></dl>
<h3>
<span id=".E5.85.B6.E4.BB.96.E5.AE.9E.E7.8E.B0"></span><span class="mw-headline" id="其他实现">其他实现</span>
</h3>
<p><b>Java SE</b> — Oracle的JRE和JDK实现.
</p>
<dl><dd>
<a rel="nofollow" class="external free" href="https://www.oracle.com/technetwork/java/javase/downloads/index.html">https://www.oracle.com/technetwork/java/javase/downloads/index.html</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/jre/">jre</a></span><sup><small>AUR</small></sup> <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/jre9/">jre9</a></span><sup><small>AUR</small></sup> <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/jre8/">jre8</a></span><sup><small>AUR</small></sup> <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/jre7/">jre7</a></span><sup><small>AUR</small></sup> <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/jre6/">jre6</a></span><sup><small>AUR</small></sup> <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/jdk/">jdk</a></span><sup><small>AUR</small></sup> <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/jdk9/">jdk9</a></span><sup><small>AUR</small></sup> <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/jdk8/">jdk8</a></span><sup><small>AUR</small></sup> <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/jdk7/">jdk7</a></span><sup><small>AUR</small></sup> <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/jdk6/">jdk6</a></span><sup><small>AUR</small></sup> <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/jdk5/">jdk5</a></span><sup><small>AUR</small></sup> <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/jdk-devel/">jdk-devel</a></span><sup><small>AUR</small></sup>
</dd></dl>
<p><b>OpenJ9</b> — Eclipse的JRE实现，由IBM贡献
</p>
<dl><dd>
<a rel="nofollow" class="external free" href="https://www.eclipse.org/openj9/">https://www.eclipse.org/openj9/</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/jdk9-openj9-bin/">jdk9-openj9-bin</a></span><sup><small>AUR</small></sup> <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/jdk8-openj9-bin/">jdk8-openj9-bin</a></span><sup><small>AUR</small></sup>
</dd></dl>
<p><b>IBM J9</b> — IBM的第八版Java实现.
</p>
<dl><dd>
<a rel="nofollow" class="external free" href="https://developer.ibm.com/javasdk/">https://developer.ibm.com/javasdk/</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/jdk8-j9-bin/">jdk8-j9-bin</a></span><sup><small>AUR</small></sup> <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/jdk7-j9-bin/">jdk7-j9-bin</a></span><sup><small>AUR</small></sup> <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/jdk7r1-j9-bin/">jdk7r1-j9-bin</a></span><sup><small>AUR</small></sup>
</dd></dl>
<p><b>Parrot VM</b> — 一个对Java <a rel="nofollow" class="external autonumber" href="http://trac.parrot.org/parrot/wiki/Languages">[1]</a>提供实验支持的虚拟机 ，通过两种方式，一种是 <a rel="nofollow" class="external text" href="https://code.google.com/p/parrot-jvm/">Java VM bytecode translator</a>，另一种是<a rel="nofollow" class="external text" href="https://github.com/chrisdolan/perk">Java compiler targeting the Parrot VM</a>.
</p>
<dl><dd>
<a rel="nofollow" class="external free" href="http://www.parrot.org/">http://www.parrot.org/</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/parrot/">parrot</a></span><sup><small>AUR</small></sup>
</dd></dl>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>注意：</strong> 32比特版本的JavaSE可以通过添加前缀 <code>bin32-</code>来找到，例如 <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/bin32-jre/">bin32-jre</a></span><sup><small>AUR</small></sup> 和 <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/bin32-jdk/">bin32-jdk</a></span><sup><small>AUR</small></sup><sup>[<a href="../en/Help:Procedures.html#Fix_broken_package_links" title="Help:Procedures">断开的链接</a>：package not found]</sup>. 他们使用的是 <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/java32-runtime-common/">java32-runtime-common</a></span><sup><small>AUR</small></sup>,而这和 <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=java-runtime-common">java-runtime-common</a></span>功能一样只要添加后缀就好了<code>32</code>, 例如. <code>java32</code>. 同样的方法也适用于 <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/java32-environment-common/">java32-environment-common</a></span><sup><small>AUR</small></sup>,它只用于32比特版本的JDK包.</div>
<h3>
<span id=".E5.BC.80.E5.8F.91.E5.B7.A5.E5.85.B7"></span><span class="mw-headline" id="开发工具">开发工具</span>
</h3>
<p>对于集成开发环境，查阅<a href="../en/List_of_applications.html#Integrated_development_environments" title="List of applications">List of applications#Integrated development environments</a> 和特定的 <i>Java IDEs</i> 的子分区
</p>
<p>为了阻止逆向工程，可以使用像<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/proguard/">proguard</a></span><sup><small>AUR</small></sup>的混淆器.
</p>
<h4>
<span id=".E5.8F.8D.E7.BC.96.E8.AF.91.E5.99.A8"></span><span class="mw-headline" id="反编译器">反编译器</span>
</h4>
<ul><li>
<b>Bytecode Viewer</b> — Java逆向工程套件, 包括一个反编译器, 编辑器和调试器.</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://bytecodeviewer.com">https://bytecodeviewer.com</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/bytecode-viewer/">bytecode-viewer</a></span><sup><small>AUR</small></sup>
</dd></dl>
<ul><li>
<b>CFR</b> — Java反编译器，支持Java 9,10和更高版本的现代功能</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://www.benf.org/other/cfr/">https://www.benf.org/other/cfr/</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/cfr/">cfr</a></span><sup><small>AUR</small></sup>
</dd></dl>
<ul><li>
<b>Fernflower</b> — Java的分析反编译器, 被开发为<a href="../en/List_of_applications/Utilities.html#Java_IDEs" class="mw-redirect" title="IntelliJ IDEA">IntelliJ IDEA</a>的一部分.</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://github.com/JetBrains/intellij-community/tree/master/plugins/java-decompiler/engine">https://github.com/JetBrains/intellij-community/tree/master/plugins/java-decompiler/engine</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/fernflower-git/">fernflower-git</a></span><sup><small>AUR</small></sup>
</dd></dl>
<ul><li>
<b><a href="https://en.wikipedia.org/wiki/JAD_(software)" class="extiw" title="wikipedia:JAD (software)">JAD</a></b> — 不被维护的Java反编译器.</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://varaneckas.com/jad">https://varaneckas.com/jad</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=jad">jad</a></span>
</dd></dl>
<ul><li>
<b>JD-Core-java</b> — <a href="https://en.wikipedia.org/wiki/Java_Decompiler" class="extiw" title="wikipedia:Java Decompiler">Java反编译器]的薄包装</a>.</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://github.com/nviennot/jd-core-java">https://github.com/nviennot/jd-core-java</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/jd-core-java/">jd-core-java</a></span><sup><small>AUR</small></sup>
</dd></dl>
<ul><li>
<b>Krakatau</b> — Java的反编译器，汇编器和反汇编器.</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://github.com/Storyyeller/Krakatau">https://github.com/Storyyeller/Krakatau</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/krakatau-git/">krakatau-git</a></span><sup><small>AUR</small></sup>
</dd></dl>
<ul><li>
<b>Procyon decompiler</b> — 实验性质的Java反编译器, 被ILSpy and Mono.Cecil启发.</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://bitbucket.org/mstrobel/procyon/wiki/Java%20Decompiler">https://bitbucket.org/mstrobel/procyon/wiki/Java%20Decompiler</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/procyon-decompiler/">procyon-decompiler</a></span><sup><small>AUR</small></sup>, GUI: <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/luyten/">luyten</a></span><sup><small>AUR</small></sup>
</dd></dl>
<h2>
<span id=".E5.9C.A8JVM.E9.97.B4.E5.88.87.E6.8D.A2"></span><span class="mw-headline" id="在JVM间切换">在JVM间切换</span>
</h2>
<p>帮助脚本 <code>archlinux-java</code> 提供了如下功能:
</p>
<pre>archlinux-java &lt;COMMAND&gt;

COMMAND:
	status		List installed Java environments and enabled one
	get		Return the short name of the Java environment set as default
	set &lt;JAVA_ENV&gt;	Force &lt;JAVA_ENV&gt; as default
	unset		Unset current default Java environment
	fix		Fix an invalid/broken default Java environment configuration
</pre>
<h3>
<span id=".E5.88.97.E5.87.BA.E5.85.BC.E5.AE.B9.E7.9A.84.E5.AE.89.E8.A3.85.E4.BA.86.E7.9A.84Java.E7.8E.AF.E5.A2.83"></span><span class="mw-headline" id="列出兼容的安装了的Java环境">列出兼容的安装了的Java环境</span>
</h3>
<pre>$ archlinux-java status
</pre>
<p>例如:
</p>
<pre>$ archlinux-java status
Available Java environments:
  java-7-openjdk (default)
  java-8-openjdk/jre
</pre>
<p>标着 <i>(default)</i> 表示 <code>java-7-openjdk</code> 被设为默认. <code>java</code> 的调用和其他二进制调用都依赖于这个安装的Java.同时前面的输出表示只有OpenJDK8的JRE部分被安装了.
</p>
<h3>
<span id=".E6.94.B9.E5.8F.98.E9.BB.98.E8.AE.A4Java.E7.8E.AF.E5.A2.83"></span><span class="mw-headline" id="改变默认Java环境">改变默认Java环境</span>
</h3>
<pre># archlinux-java set &lt;JAVA_ENV_NAME&gt;
</pre>
<p>例如:
</p>
<pre># archlinux-java set java-8-openjdk/jre
</pre>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> 想看可用的 <code>&lt;JAVA_ENV_NAME&gt;</code> 名字, 使用 <code>archlinux-java status</code>.</div>
<p>注意到 <code>archlinux-java</code> 并不会让你设置一个不可用的Java环境. 在前面的例子中, <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=jre8-openjdk">jre8-openjdk</a></span> 安装了但是 <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=jdk8-openjdk">jdk8-openjdk</a></span> 并 <b>没有</b> 所以尝试设置 <code>java-8-openjdk</code> 将会失败:
</p>
<pre># archlinux-java set java-8-openjdk
'/usr/lib/jvm/java-8-openjdk' is not a valid Java environment path
</pre>
<h3>
<span id=".E5.8F.96.E6.B6.88.E8.AE.BE.E7.BD.AE.E7.9A.84.E9.BB.98.E8.AE.A4Java.E7.8E.AF.E5.A2.83"></span><span class="mw-headline" id="取消设置的默认Java环境">取消设置的默认Java环境</span>
</h3>
<p>没必要取消设置的Java环境因为安装包会让它们注意这种情况. 如果你还想这么做的话，用这条命令 <code>unset</code>:
</p>
<pre># archlinux-java unset
</pre>
<h3>
<span id=".E8.A7.A3.E5.86.B3.E9.BB.98.E8.AE.A4Java.E7.8E.AF.E5.A2.83.E7.9A.84.E9.97.AE.E9.A2.98"></span><span class="mw-headline" id="解决默认Java环境的问题">解决默认Java环境的问题</span>
</h3>
<p>如果一个不可用的Java环境链接被设置，用 <code>archlinux-java fix</code> 命令尝试修复它. 同时如果没有默认Java环境被设置，它会找可用的并尝试为你设置。官方支持的包 "OpenJDK 8" 将会比其他安装的环境被优先考虑.
</p>
<pre># archlinux-java fix
</pre>
<h3>
<span id=".E8.BF.90.E8.A1.8C.E9.9D.9E.E9.BB.98.E8.AE.A4Java.E7.89.88.E6.9C.AC.E7.9A.84.E7.A8.8B.E5.BA.8F"></span><span class="mw-headline" id="运行非默认Java版本的程序">运行非默认Java版本的程序</span>
</h3>
<p>如果你想运行其它版本而不是默认版本的程序(例如你有JRE7和JRE8同时装在系统里), 你可以把你的程序打包进一个小bash脚本里来暂时改变Java的默认版本。例如如果默认版本是JRE7而你想用JRE8:
</p>
<pre>#!/bin/sh 

export PATH=/usr/lib/jvm/java-8-openjdk/jre/bin/:$PATH
exec /path/to/application "$@"
</pre>
<h2>
<span id=".E5.8C.85.E6.94.AF.E6.8C.81archlinux-java.E7.9A.84.E5.85.88.E5.86.B3.E6.9D.A1.E4.BB.B6"></span><span class="mw-headline" id="包支持archlinux-java的先决条件">包支持<code>archlinux-java</code>的先决条件</span>
</h2>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>注意：</strong> 这条信息同样适用于 <code>archlinux32-java</code> 的32位比特Java包, 如果它们的包或者可执行名字里有 <code>32</code> ，都可适用.</div>
<p>这个分区的信息针对愿意提供包作为备份JVM给 <a href="../zh-CN/Arch_User_Repository.html" title="Arch User Repository (简体中文)">Arch User Repository (简体中文)</a> 的贡献者， 并且能够用 <code>archlinux-java</code>集成Arch Linux JVM方案. 如果要这样的话，这些包应该:
</p>
<ul>
<li>把所有文件放在这里 <code>/usr/lib/jvm/java-${JAVA_MAJOR_VERSION}-${VENDOR_NAME} </code>
</li>
<li>确认所有的 <a rel="nofollow" class="external text" href="https://archlinux.org/packages/extra/any/java-runtime-common/files/">java-runtime-common</a> 和 <a rel="nofollow" class="external text" href="https://archlinux.org/packages/extra/any/java-environment-common/files/">java-environment-common</a> 提供的可执行链接在相关包里都是可用的</li>
<li>把所有链接从 <code>/usr/bin</code> 移动到可执行文件里, 除非这些链接不属于 <a rel="nofollow" class="external text" href="https://archlinux.org/packages/extra/any/java-runtime-common/files/">java-runtime-common</a> 和 <a rel="nofollow" class="external text" href="https://archlinux.org/packages/extra/any/java-environment-common/files/">java-environment-common</a>
</li>
<li>用 <code>-${VENDOR_NAME}${JAVA_MAJOR_VERSION} </code> 的格式给手册页添加后缀 (查阅 <a rel="nofollow" class="external text" href="https://archlinux.org/packages/extra/x86_64/jre8-openjdk/files/">jre8-openjdk file list</a> 它的手册页用 <code>-openjdk8</code>做后缀)</li>
<li>不要定义任何 <a href="../zh-CN/PKGBUILD.html#conflicts" title="PKGBUILD (简体中文)">冲突</a> 和<a href="../zh-CN/PKGBUILD.html#replaces" title="PKGBUILD (简体中文)">替代</a> ，用其他的JDK, <code>java-runtime</code>, <code>java-runtime-headless</code> 和 <code>java-environment</code>
</li>
<li>在<i>安装函数</i> 里使用<code>archlinux-java</code> 脚本来把Java环境设置为默认 <b>如果没有其他可用的Java环境准备设置的话</b> (即: 这些包不应该 <b>强制</b> 被装为默认). 查阅 <a rel="nofollow" class="external text" href="https://github.com/archlinux/svntogit-packages/blob/packages/java7-openjdk/trunk">officially supported Java environment package sources</a> 做例子</li>
</ul>
<p>同时也该注意到:
</p>
<ul>
<li>包需要的 <b>任何</b> Java环境应该声明依赖，和往常一样在 <code>java-runtime</code>, <code>java-runtime-headless</code> 或者 <code>java-environment</code>里声明</li>
<li>包如果需要 <b>特定Java提供商</b> 应该在相关包里声明依赖。</li>
<li>OpenJDK 包现在应该声明 <code>provides="java-runtime-openjdk=${pkgver}"</code> 等. 这能让第三方的包在没有特定版本要求的OpenJDK里声明依赖</li>
</ul>
<h2>
<span id=".E6.95.85.E9.9A.9C.E6.8E.92.E9.99.A4"></span><span class="mw-headline" id="故障排除">故障排除</span>
</h2>
<h3><span class="mw-headline" id="MySQL">MySQL</span></h3>
<p>因为JDBC-驱动经常使用URL的端口来建立到数据库的连接, 所以通过 "远程" (i.e., MySQL不会根据默认设置监听端口)的办法应该被考虑，尽管它们可能运行在同一个主机上, 所有, 要用JDBC和MySQL的话你应该启用到MySQL的远程连接，, 在<a href="../en/MySQL.html#Grant_remote_access" title="MySQL">MySQL#Grant remote access</a><sup>[<a href="../en/ArchWiki:Requests.html#Broken_section_links" class="mw-redirect" title="ArchWiki:Requests">断开的链接</a>：无效的部分]</sup>查询指导.
</p>
<h3><span class="mw-headline" id="IntelliJ_IDEA">IntelliJ IDEA</span></h3>
<p>如果你在设置JDK的时候选择了系统的JDK，同时碰到了错误提示 `The selected directory is not a valid home for JDK`，这个时候你需要重新安装一个jdk，在IntelliJ IDEA设置jdk的时候选择新安装的JDK.
</p>
<h3>
<span id=".E5.86.92.E5.85.85.E5.8F.A6.E4.B8.80.E4.B8.AA.E7.AA.97.E5.8F.A3.E7.AE.A1.E7.90.86.E5.99.A8"></span><span class="mw-headline" id="冒充另一个窗口管理器">冒充另一个窗口管理器</span>
</h3>
<p>你可以使用 <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=wmname">wmname</a></span> ，从 <a rel="nofollow" class="external text" href="https://tools.suckless.org/x/wmname">suckless.org</a>下载，来使JVM相信你是在运行一个不同的窗口管理器. 这可以解决在窗口管理器发生的Java GUIs渲染问题， 比如说 <a href="../zh-CN/Awesome.html" title="Awesome (简体中文)">awesome (简体中文)</a> 或者 <a href="../zh-CN/Dwm.html" title="Dwm (简体中文)">Dwm (简体中文)</a> 或者 <a href="../zh-CN/Ratpoison.html" title="Ratpoison (简体中文)">Ratpoison (简体中文)</a>.
</p>
<pre>$ wmname LG3D
</pre>
<p>你必须在运行了这条命令后重启有问题的程序.
</p>
<p>这个能起作用是因为JVM包含了一个已知的、非重新父母窗口管理器的硬编码名单. 为了最大化反讽效果，一些用户喜欢冒充 <code>LG3D</code>, 一种非重新父母窗口管理器 <a href="https://en.wikipedia.org/wiki/Project_Looking_Glass" class="extiw" title="wikipedia:Project Looking Glass">由Sun公司用Java写成</a>.
</p>
<h3>
<span id=".E9.9A.BE.E4.BB.A5.E8.BE.A8.E8.AE.A4.E7.9A.84.E5.AD.97.E4.BD.93"></span><span class="mw-headline" id="难以辨认的字体">难以辨认的字体</span>
</h3>
<p>除了下述的建议 <a href="#%E6%9B%B4%E5%A5%BD%E7%9A%84%E5%AD%97%E4%BD%93%E6%B8%B2%E6%9F%93">#更好的字体渲染</a>, 可能还是有一些字体难以辨认. 如果是这样的话,有一个很好的机会能用Microsoft的字体. 在<a href="../en/Arch_User_Repository.html" class="mw-redirect" title="AUR">AUR</a>安装<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/ttf-ms-fonts/">ttf-ms-fonts</a></span><sup><small>AUR</small></sup> .
</p>
<h3>
<span id=".E4.B8.80.E4.BA.9B.E5.BA.94.E7.94.A8.E7.BC.BA.E5.B0.91.E6.96.87.E5.AD.97"></span><span class="mw-headline" id="一些应用缺少文字">一些应用缺少文字</span>
</h3>
<p>如果一些应用完全没有文字，你可以用下面的办法<a href="#%E5%BB%BA%E8%AE%AE%E5%92%8C%E6%8A%80%E5%B7%A7">#建议和技巧</a> 它在<a rel="nofollow" class="external text" href="https://bugs.archlinux.org/task/40871">FS#40871</a>里被建议.
</p>
<h3>
<span id=".E5.BA.94.E7.94.A8.E6.9C.AA.E8.B0.83.E6.95.B4WM.E5.A4.A7.E5.B0.8F.EF.BC.8C.E8.8F.9C.E5.8D.95.E5.BF.AB.E9.80.9F.E5.85.B3.E9.97.AD"></span><span class="mw-headline" id="应用未调整WM大小，菜单快速关闭">应用未调整WM大小，菜单快速关闭</span>
</h3>
<p>标准Java GUI工具包有一个非重新父母窗口管理器的硬编码名单. 如果你使用的不在名单里, 运行一些Java 程序就可能产生一些问题. 最普遍的一个问题是 "灰斑", 这发生在Java程序渲染纯灰色的盒子而不是渲染GUI的时候. 另一个问题是菜单会响应你的点击，但是立马关闭.
</p>
<p>有很多事能帮到忙:
</p>
<ul>
<li>对于 <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=jre7-openjdk">jre7-openjdk</a></span> 或者 <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=jre8-openjdk">jre8-openjdk</a></span>, 在 <code>/etc/profile.d/jre.sh</code>文件里加入一行 <code>export _JAVA_AWT_WM_NONREPARENTING=1</code> . 然后，用source命令处理 <code>/etc/profile.d/jre.sh</code> 或者重新登出登录.</li>
<li>对于 Oracle 的 JRE/JDK, 用 <a rel="nofollow" class="external text" href="https://wiki.haskell.org/Xmonad/Frequently_asked_questions#Using_SetWMName">SetWMName.</a> 然而，当使用<code>XMonad.Hooks.EwmhDesktops</code>的时候它的作用可能被取消. 这种情况下，添加</li>
</ul>
<pre>&gt;&gt; setWMName "LG3D"
</pre>
<p>到 <code>LogHook</code> 可以起作用.
</p>
<p>查阅<a rel="nofollow" class="external autonumber" href="https://wiki.haskell.org/Xmonad/Frequently_asked_questions#Problems_with_Java_applications.2C_Applet_java_console">[2]</a> 可以获取更多信息.
</p>
<h3>
<span id=".E5.BD.93.E8.B0.83.E8.AF.95JavaFX.E7.A8.8B.E5.BA.8F.E7.9A.84.E6.97.B6.E5.80.99.E7.B3.BB.E7.BB.9F.E5.8D.A1.E4.BD.8F"></span><span class="mw-headline" id="当调试JavaFX程序的时候系统卡住">当调试JavaFX程序的时候系统卡住</span>
</h3>
<p>当你调试JavaFX程序的时候系统卡住了，你可以尝试提供JVM以下选项 <code>-Dsun.awt.disablegrab=true</code>.
</p>
<p>查阅 <a rel="nofollow" class="external free" href="https://bugs.java.com/view_bug.do?bug_id=6714678">https://bugs.java.com/view_bug.do?bug_id=6714678</a>
</p>
<h3>
<span id="JavaFX_.E7.9A.84_MediaPlayer_.E6.9E.84.E9.80.A0.E5.87.BD.E6.95.B0.E6.8A.9B.E5.87.BA.E4.BA.86.E4.B8.80.E4.B8.AA_exception"></span><span class="mw-headline" id="JavaFX_的_MediaPlayer_构造函数抛出了一个_exception">JavaFX 的 MediaPlayer 构造函数抛出了一个 exception</span>
</h3>
<p>从JavaFX声音模板里创造 MediaPlayer 类的实例可能会抛出下面的exception (Oracle JDK 和 OpenJDK都会有)
</p>
<pre>... (i.e. FXMLLoader construction exceptions) ...
Caused by: MediaException: UNKNOWN : com.sun.media.jfxmedia.MediaException: Could not create player! : com.sun.media.jfxmedia.MediaException: Could not create player!
 at javafx.scene.media.MediaException.exceptionToMediaException(MediaException.java:146)
 at javafx.scene.media.MediaPlayer.init(MediaPlayer.java:511)
 at javafx.scene.media.MediaPlayer.&lt;init&gt;(MediaPlayer.java:414)
 at &lt;constructor call&gt;
...
</pre>
<p>这是JavaFX和Arch Linux库里提供的 <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=ffmpeg">ffmpeg</a></span> 构建不兼容的结果.
</p>
<p>解决办法是安装 <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/ffmpeg-compat-55/">ffmpeg-compat-55</a></span><sup><small>AUR</small></sup>.
</p>
<p>查阅 <a rel="nofollow" class="external free" href="https://www.reddit.com/r/archlinux/comments/70o8o6/using_a_javafx_mediaplayer_in_arch/">https://www.reddit.com/r/archlinux/comments/70o8o6/using_a_javafx_mediaplayer_in_arch/</a>
</p>
<h3>
<span id="Java.E7.A8.8B.E5.BA.8F.E6.97.A0.E6.B3.95.E6.89.93.E5.BC.80.E5.A4.96.E9.83.A8.E9.93.BE.E6.8E.A5"></span><span class="mw-headline" id="Java程序无法打开外部链接">Java程序无法打开外部链接</span>
</h3>
<p>如果Java程序不能打开链接到, 比如说, 你的浏览器, 安装<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=gvfs">gvfs</a></span>.这是 Desktop.Action.BROWSE 方法所必须的. 查阅 <a rel="nofollow" class="external autonumber" href="https://bugs.launchpad.net/ubuntu/+source/openjdk-8/+bug/1574879/comments/2">[3]</a>
</p>
<h2>
<span id=".E5.BB.BA.E8.AE.AE.E5.92.8C.E6.8A.80.E5.B7.A7"></span><span class="mw-headline" id="建议和技巧">建议和技巧</span>
</h2>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>注意：</strong> 这个区里提的建议在所有程序里有用,如果你用的是明确的安装的 (外部) Java 运行的话.一些程序是用个人的 (私有的) Java运行或者是自己的GUI机制, 字体渲染机制, 等等., 这样的话下面写的都不保证能起作用.</div>
<p>大多数Java程序的行为都可以通过向Java运行提供预定义变量来操控. 查阅 <a rel="nofollow" class="external text" href="https://bbs.archlinux.org/viewtopic.php?id=72892">this forum post</a>, 一种这样做的方法包括添加下面的行到你的 <code>~/.bashrc</code>文件 (或者通过 <code>/etc/profile.d/jre.sh</code> 来影响不是通过用source命令处理<code>~/.bashrc</code>来运行的程序 , 比如., 用Gnome应用师徒来运行程序):
</p>
<pre>export _JAVA_OPTIONS="-D<b>&lt;option 1&gt;</b> -D<b>&lt;option 2&gt;</b>..."
</pre>
<p>比如，用系统的反别名字体来使swing有GTK的视觉效果和感觉:
</p>
<pre>export _JAVA_OPTIONS='-Dawt.useSystemAAFontSettings=on -Dswing.aatext=true -Dswing.defaultlaf=com.sun.java.swing.plaf.gtk.GTKLookAndFeel'
</pre>
<h3>
<span id=".E6.9B.B4.E5.A5.BD.E7.9A.84.E5.AD.97.E4.BD.93.E6.B8.B2.E6.9F.93"></span><span class="mw-headline" id="更好的字体渲染">更好的字体渲染</span>
</h3>
<p>开源和闭源的Java实现都有不合适的反别名字体实现. 这可以通过以下办法来解决: <code>-Dawt.useSystemAAFontSettings=on</code>, <code>-Dswing.aatext=true</code>
</p>
<p>查阅 <a href="../en/Java_Runtime_Environment_fonts.html" title="Java Runtime Environment fonts">Java Runtime Environment fonts</a> 来获取更多信息.
</p>
<h3>
<span id=".E7.A6.81.E6.AD.A2.E5.91.BD.E4.BB.A4.E8.A1.8C.E7.9A.84_.27Picked_up_JAVA_OPTIONS.27_.E6.B6.88.E6.81.AF"></span><span class="mw-headline" id="禁止命令行的_'Picked_up_JAVA_OPTIONS'_消息">禁止命令行的 'Picked up _JAVA_OPTIONS' 消息</span>
</h3>
<p>设置 _JAVA_OPTIONS 环境变量使 java (openjdk) 写入以下形式的stderr消息: 'Picked up _JAVA_OPTIONS=...'. 要在终端中禁止这些消息，可以取消设置shell启动文件中的环境变量，并使用别名java来传递与命令行参数相同的选项:
</p>
<pre>_SILENT_JAVA_OPTIONS="$_JAVA_OPTIONS"
unset _JAVA_OPTIONS
alias java='java "$_SILENT_JAVA_OPTIONS"'
</pre>
<h3>
<span id="GTK_.E8.A7.86.E8.A7.89.E6.95.88.E6.9E.9C.E5.92.8C.E6.84.9F.E8.A7.89"></span><span class="mw-headline" id="GTK_视觉效果和感觉">GTK 视觉效果和感觉</span>
</h3>
<p>如果你的Java程序看起来很丑, 你可能想为swing组件设置默认外表和感觉:
</p>
<p><code>swing.defaultlaf=com.sun.java.swing.plaf.gtk.GTKLookAndFeel</code>.
</p>
<p>一些Java程序坚持用跨平台的金属外表和感觉.  在这些情况下，你可以通过设置下面的属性强制这些app用GTK外表和感觉:
</p>
<p><code>swing.crossplatformlaf=com.sun.java.swing.plaf.gtk.GTKLookAndFeel</code>.
</p>
<h4>
<span id="GTK3.E6.94.AF.E6.8C.81"></span><span class="mw-headline" id="GTK3支持">GTK3支持</span>
</h4>
<p>在Java的版本9之前, GTK的外观和感觉是与GTK2链接的，但是同时许多更新的桌面程序用的是GTK3. 这种GTK版本间的不兼容性可能打断程序使用Java的GUI插件，因为同一个进程里GTK2和GTK3的混合不被支持 (例如, LibreOffice 5.0). 
</p>
<p>从 <a rel="nofollow" class="external text" href="https://openjdk.java.net/jeps/283">Java 9</a>以来, GTK的外观和感觉可以和GTK的版本 <code>2</code>, <code>2.2</code> 和 <code>3</code>一起运行, 默认GTK2. 这可以通过设置下面的属性来覆盖:
</p>
<p><code>jdk.gtk.version=3</code>
</p>
<h3>
<span id=".E6.9B.B4.E5.A5.BD.E7.9A.842D.E6.80.A7.E8.83.BD"></span><span class="mw-headline" id="更好的2D性能">更好的2D性能</span>
</h3>
<p>切换到基于OpenGL的硬件加速管道会提升2D性能
</p>
<pre>export _JAVA_OPTIONS='-Dsun.java2d.opengl=true'
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>注意：</strong> 开启这项选项会导致像Jetbrains的IDE这样的软件的UI表现不正常, 让它们的窗口、弹窗和工具栏只画一部分.</div>
<h3>
<span id=".E9.9D.9E.E9.87.8D.E6.96.B0.E7.88.B6.E6.AF.8D.E7.AA.97.E5.8F.A3.E7.AE.A1.E7.90.86.E5.99.A8_.2F_.E7.81.B0.E8.89.B2.E7.AA.97.E5.8F.A3_.2F_.E7.A8.8B.E5.BA.8F.E8.A2.AB.E7.BB.98.E5.88.B6.E5.BE.97.E4.B8.8D.E6.81.B0.E5.BD.93"></span><span class="mw-headline" id="非重新父母窗口管理器_/_灰色窗口_/_程序被绘制得不恰当">非重新父母窗口管理器 / 灰色窗口 / 程序被绘制得不恰当</span>
</h3>
<p>非重新父母窗口管理器的用户应该在他们的 <code>.xinitrc</code>里设置以下环境变量
</p>
<pre>export _JAVA_AWT_WM_NONREPARENTING=1
</pre>
<p>不设置这个的话会导致Java程序被绘制得不恰当.
</p>
<h2>
<span id=".E5.8F.82.E9.98.85"></span><span class="mw-headline" id="参阅">参阅</span>
</h2>
<ul><li><a rel="nofollow" class="external text" href="https://math.hws.edu/javanotes/">Introduction to Programming Using Java</a></li></ul>
</div>
</div>
<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../zh-CN/Category:Programming_languages.html" title="Category:Programming languages (简体中文)">Programming languages (简体中文)</a></li></ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden categories: <ul>
<li><a href="../en/Category:Pages_with_broken_package_links.html" title="Category:Pages with broken package links">Pages with broken package links</a></li>
<li><a href="../en/Category:Pages_with_broken_section_links.html" title="Category:Pages with broken section links">Pages with broken section links</a></li>
</ul>
</div>
</div>
	</div>
</div>

<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
		<li>Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Java_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)&amp;oldid=646870">https://wiki.archlinux.org/index.php?title=Java_(简体中文)&amp;oldid=646870</a>"</li>
		<li id="footer-info-lastmod"> This page was last edited on 26 December 2020, at 12:02.</li>
		<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
	<br>
</ul>
	<ul id="footer-places">
		<li id="footer-places-privacy"><a href="../en/ArchWiki:Privacy_policy.html" title="ArchWiki:Privacy policy">Privacy policy</a></li>
		<li id="footer-places-about"><a href="../en/ArchWiki:About.html" title="ArchWiki:About">About ArchWiki</a></li>
		<li id="footer-places-disclaimer"><a href="../en/ArchWiki:General_disclaimer.html" title="ArchWiki:General disclaimer">Disclaimers</a></li>
	</ul>
	<ul id="footer-icons" class="noprint">
		<li id="footer-copyrightico">
	</ul>
	<div style="clear: both;"></div>
</footer>



</body>
</html>
