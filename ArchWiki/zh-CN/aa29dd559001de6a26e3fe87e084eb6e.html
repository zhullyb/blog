<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>Network configuration (简体中文)/Wireless (简体中文) - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.35.0">
<meta name="robots" content="noindex,follow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="http://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Network_configuration_简体中文_Wireless_简体中文 rootpage-Network_configuration_简体中文 skin-vector action-view skin-vector-legacy">
<div id="content" class="mw-body" role="main" style="margin: 0">
	<a id="top"></a>
	<div id="siteNotice" class="mw-body-content"></div>
	<div class="mw-indicators mw-body-content">
	</div>
	<h1 id="firstHeading" class="firstHeading" lang="en">Network configuration (简体中文)/Wireless (简体中文)</h1>
	<div id="bodyContent" class="mw-body-content">
		<div id="siteSub" class="noprint">From ArchWiki</div>
		<div id="contentSub"><span class="subpages">&lt; <a href="../zh-CN/Network_configuration.html" title="Network configuration (简体中文)">Network configuration (简体中文)</a></span></div>
		<div id="contentSub2"></div>
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="#searchInput">Jump to search</a>
		<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr">
<div class="warningbox">The printable version is no longer supported and may have rendering errors. Please update your browser bookmarks and please use the default browser print function instead.</div>
<div class="mw-parser-output">
<div class="archwiki-template-meta-related-articles-start">
<p>相关文章</p>
<ul>
<li><a href="../zh-CN/Network_configuration.html" class="mw-redirect" title="网络配置">网络配置</a></li>
<li><a href="../zh-CN/Software_access_point.html" class="mw-redirect" title="软AP">软AP</a></li>
<li><a href="../en/Ad-hoc_networking.html" title="Ad-hoc networking">Ad-hoc networking</a></li>
<li><a href="../en/Internet_sharing.html" title="Internet sharing">Internet sharing</a></li>
<li><a href="../zh-CN/Wireless_bonding.html" class="mw-redirect" title="无线网络绑定">无线网络绑定</a></li>
</ul>
</div>
<div class="noprint archwiki-template-message">
<p><a href="../File:Tango-preferences-desktop-locale.png" class="image"><img alt="Tango-preferences-desktop-locale.png" src="../File:Tango-preferences-desktop-locale.png" decoding="async" width="48" height="48"></a><b>本文或本节需要<a href="../zh-CN/ArchWiki:Contributing.html#%E7%BF%BB%E8%AF%91" title="ArchWiki:Contributing (简体中文)">翻译</a>。要贡献翻译，请访问<a href="../zh-CN/ArchWiki:Translation_Team.html" class="mw-redirect" title="ArchWiki Translation Team (简体中文)">简体中文翻译团队</a>。</b><a href="../File:Tango-preferences-desktop-locale.png" class="image"><img alt="Tango-preferences-desktop-locale.png" src="../File:Tango-preferences-desktop-locale.png" decoding="async" width="48" height="48"></a></p>
<div>
<b>附注：</b> （在 <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php/Talk:Network_configuration_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)/Wireless_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)">Talk:Network configuration (简体中文)/Wireless (简体中文)#</a> 中讨论）</div>
</div>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>翻译状态：</strong>本文是 <a href="../en/Network_configuration/Wireless.html" title="Network configuration/Wireless">Network configuration/Wireless</a> 的<a href="../zh-CN/ArchWiki:Translation_Team.html" title="ArchWiki:Translation Team (简体中文)">翻译</a>。上次翻译日期：2016-10-01。如果英文版本有所<a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php?title=Network_configuration/Wireless&amp;diff=0&amp;oldid=452586">更改</a>，则您可以帮助同步翻译。</div>
<p>配置无线网络一般分两步：第一步是识别硬件、安装正确的驱动程序并进行配置，安装盘中已经包含驱动，但是通常需要额外安装；第二步是选择一种管理无线连接的方式。这篇文章涵盖了这两方面，并提供了无线管理工具的链接地址。
</p>
<div id="toc" class="toc" role="navigation" aria-labelledby="mw-toc-heading">
<input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none"><div class="toctitle" lang="en" dir="ltr">
<h2 id="mw-toc-heading">Contents</h2>
<span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span>
</div>
<ul>
<li class="toclevel-1 tocsection-1">
<a href="#%E8%AE%BE%E5%A4%87%E9%A9%B1%E5%8A%A8"><span class="tocnumber">1</span> <span class="toctext">设备驱动</span></a>
<ul>
<li class="toclevel-2 tocsection-2"><a href="#%E6%A3%80%E6%9F%A5%E8%AE%BE%E5%A4%87%E7%8A%B6%E6%80%81"><span class="tocnumber">1.1</span> <span class="toctext">检查设备状态</span></a></li>
<li class="toclevel-2 tocsection-3"><a href="#%E5%AE%89%E8%A3%85_driver/firmware"><span class="tocnumber">1.2</span> <span class="toctext">安装 driver/firmware</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-4">
<a href="#%E6%97%A0%E7%BA%BF%E7%BD%91%E7%BB%9C%E7%AE%A1%E7%90%86"><span class="tocnumber">2</span> <span class="toctext">无线网络管理</span></a>
<ul>
<li class="toclevel-2 tocsection-5">
<a href="#%E6%89%8B%E5%8A%A8%E8%AE%BE%E7%BD%AE"><span class="tocnumber">2.1</span> <span class="toctext">手动设置</span></a>
<ul>
<li class="toclevel-3 tocsection-6"><a href="#%E8%8E%B7%E5%8F%96%E6%9C%89%E7%94%A8%E4%BF%A1%E6%81%AF"><span class="tocnumber">2.1.1</span> <span class="toctext">获取有用信息</span></a></li>
<li class="toclevel-3 tocsection-7"><a href="#%E6%BF%80%E6%B4%BB%E5%86%85%E6%A0%B8%E6%8E%A5%E5%8F%A3"><span class="tocnumber">2.1.2</span> <span class="toctext">激活内核接口</span></a></li>
<li class="toclevel-3 tocsection-8"><a href="#%E6%9F%A5%E7%9C%8B%E6%8E%A5%E5%85%A5%E7%82%B9"><span class="tocnumber">2.1.3</span> <span class="toctext">查看接入点</span></a></li>
<li class="toclevel-3 tocsection-9"><a href="#%E8%BF%90%E8%A1%8C%E6%A8%A1%E5%BC%8F"><span class="tocnumber">2.1.4</span> <span class="toctext">运行模式</span></a></li>
<li class="toclevel-3 tocsection-10"><a href="#%E5%85%B3%E8%81%94"><span class="tocnumber">2.1.5</span> <span class="toctext">关联</span></a></li>
<li class="toclevel-3 tocsection-11"><a href="#%E8%8E%B7%E5%8F%96_IP_%E5%9C%B0%E5%9D%80"><span class="tocnumber">2.1.6</span> <span class="toctext">获取 IP 地址</span></a></li>
<li class="toclevel-3 tocsection-12"><a href="#%E7%A4%BA%E4%BE%8B"><span class="tocnumber">2.1.7</span> <span class="toctext">示例</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-13">
<a href="#%E8%87%AA%E5%8A%A8%E8%AE%BE%E7%BD%AE"><span class="tocnumber">2.2</span> <span class="toctext">自动设置</span></a>
<ul>
<li class="toclevel-3 tocsection-14"><a href="#Connman"><span class="tocnumber">2.2.1</span> <span class="toctext">Connman</span></a></li>
<li class="toclevel-3 tocsection-15"><a href="#Netctl"><span class="tocnumber">2.2.2</span> <span class="toctext">Netctl</span></a></li>
<li class="toclevel-3 tocsection-16"><a href="#Wicd"><span class="tocnumber">2.2.3</span> <span class="toctext">Wicd</span></a></li>
<li class="toclevel-3 tocsection-17"><a href="#NetworkManager"><span class="tocnumber">2.2.4</span> <span class="toctext">NetworkManager</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1 tocsection-18">
<a href="#WPA2_%E4%BC%81%E4%B8%9A%E6%A8%A1%E5%BC%8F"><span class="tocnumber">3</span> <span class="toctext">WPA2 企业模式</span></a>
<ul>
<li class="toclevel-2 tocsection-19"><a href="#eduroam"><span class="tocnumber">3.1</span> <span class="toctext">eduroam</span></a></li>
<li class="toclevel-2 tocsection-20">
<a href="#%E6%89%8B%E5%B7%A5/%E8%87%AA%E5%8A%A8%E9%85%8D%E7%BD%AE"><span class="tocnumber">3.2</span> <span class="toctext">手工/自动配置</span></a>
<ul>
<li class="toclevel-3 tocsection-21"><a href="#wpa_supplicant"><span class="tocnumber">3.2.1</span> <span class="toctext">wpa_supplicant</span></a></li>
<li class="toclevel-3 tocsection-22"><a href="#NetworkManager_2"><span class="tocnumber">3.2.2</span> <span class="toctext">NetworkManager</span></a></li>
<li class="toclevel-3 tocsection-23"><a href="#connman_2"><span class="tocnumber">3.2.3</span> <span class="toctext">connman</span></a></li>
<li class="toclevel-3 tocsection-24"><a href="#netctl_2"><span class="tocnumber">3.2.4</span> <span class="toctext">netctl</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-25">
<a href="#%E6%8E%92%E9%94%99"><span class="tocnumber">3.3</span> <span class="toctext">排错</span></a>
<ul>
<li class="toclevel-3 tocsection-26"><a href="#MS-CHAPv2"><span class="tocnumber">3.3.1</span> <span class="toctext">MS-CHAPv2</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1 tocsection-27">
<a href="#%E6%8F%90%E7%A4%BA%E5%92%8C%E6%8A%80%E5%B7%A7"><span class="tocnumber">4</span> <span class="toctext">提示和技巧</span></a>
<ul>
<li class="toclevel-2 tocsection-28"><a href="#Rfkill_%E8%AF%B4%E6%98%8E"><span class="tocnumber">4.1</span> <span class="toctext">Rfkill 说明</span></a></li>
<li class="toclevel-2 tocsection-29"><a href="#%E9%81%B5%E5%BE%AA%E7%9B%91%E7%AE%A1%E5%8C%BA%E5%9F%9F%E8%A6%81%E6%B1%82"><span class="tocnumber">4.2</span> <span class="toctext">遵循监管区域要求</span></a></li>
<li class="toclevel-2 tocsection-30"><a href="#%E8%8A%82%E8%83%BD"><span class="tocnumber">4.3</span> <span class="toctext">节能</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-31">
<a href="#%E6%8E%92%E9%94%99_2"><span class="tocnumber">5</span> <span class="toctext">排错</span></a>
<ul>
<li class="toclevel-2 tocsection-32"><a href="#%E4%B8%B4%E6%97%B6%E4%B8%8A%E7%BD%91"><span class="tocnumber">5.1</span> <span class="toctext">临时上网</span></a></li>
<li class="toclevel-2 tocsection-33"><a href="#Observing_Logs"><span class="tocnumber">5.2</span> <span class="toctext">Observing Logs</span></a></li>
<li class="toclevel-2 tocsection-34"><a href="#Failed_to_get_IP_address"><span class="tocnumber">5.3</span> <span class="toctext">Failed to get IP address</span></a></li>
<li class="toclevel-2 tocsection-35"><a href="#Valid_IP_address_but_cannot_resolve_host"><span class="tocnumber">5.4</span> <span class="toctext">Valid IP address but cannot resolve host</span></a></li>
<li class="toclevel-2 tocsection-36"><a href="#Setting_RTS_and_fragmentation_thresholds"><span class="tocnumber">5.5</span> <span class="toctext">Setting RTS and fragmentation thresholds</span></a></li>
<li class="toclevel-2 tocsection-37">
<a href="#Random_disconnections"><span class="tocnumber">5.6</span> <span class="toctext">Random disconnections</span></a>
<ul>
<li class="toclevel-3 tocsection-38"><a href="#Cause_#1"><span class="tocnumber">5.6.1</span> <span class="toctext">Cause #1</span></a></li>
<li class="toclevel-3 tocsection-39"><a href="#Cause_#2"><span class="tocnumber">5.6.2</span> <span class="toctext">Cause #2</span></a></li>
<li class="toclevel-3 tocsection-40"><a href="#Cause_#3"><span class="tocnumber">5.6.3</span> <span class="toctext">Cause #3</span></a></li>
<li class="toclevel-3 tocsection-41"><a href="#Cause_#4"><span class="tocnumber">5.6.4</span> <span class="toctext">Cause #4</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1 tocsection-42">
<a href="#%E9%A9%B1%E5%8A%A8%E4%B8%8E%E5%9B%BA%E4%BB%B6%E6%8E%92%E9%94%99"><span class="tocnumber">6</span> <span class="toctext">驱动与固件排错</span></a>
<ul>
<li class="toclevel-2 tocsection-43">
<a href="#Ralink"><span class="tocnumber">6.1</span> <span class="toctext">Ralink</span></a>
<ul>
<li class="toclevel-3 tocsection-44"><a href="#rt2x00"><span class="tocnumber">6.1.1</span> <span class="toctext">rt2x00</span></a></li>
<li class="toclevel-3 tocsection-45"><a href="#rt3090"><span class="tocnumber">6.1.2</span> <span class="toctext">rt3090</span></a></li>
<li class="toclevel-3 tocsection-46"><a href="#rt3290"><span class="tocnumber">6.1.3</span> <span class="toctext">rt3290</span></a></li>
<li class="toclevel-3 tocsection-47"><a href="#rt3573"><span class="tocnumber">6.1.4</span> <span class="toctext">rt3573</span></a></li>
<li class="toclevel-3 tocsection-48"><a href="#rt5572"><span class="tocnumber">6.1.5</span> <span class="toctext">rt5572</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-49">
<a href="#Realtek"><span class="tocnumber">6.2</span> <span class="toctext">Realtek</span></a>
<ul>
<li class="toclevel-3 tocsection-50"><a href="#rtl8192cu"><span class="tocnumber">6.2.1</span> <span class="toctext">rtl8192cu</span></a></li>
<li class="toclevel-3 tocsection-51"><a href="#rtl8192e"><span class="tocnumber">6.2.2</span> <span class="toctext">rtl8192e</span></a></li>
<li class="toclevel-3 tocsection-52"><a href="#rtl8188eu"><span class="tocnumber">6.2.3</span> <span class="toctext">rtl8188eu</span></a></li>
<li class="toclevel-3 tocsection-53"><a href="#rtl8723ae/rtl8723be"><span class="tocnumber">6.2.4</span> <span class="toctext">rtl8723ae/rtl8723be</span></a></li>
<li class="toclevel-3 tocsection-54"><a href="#rtl8812au/rtl8821au"><span class="tocnumber">6.2.5</span> <span class="toctext">rtl8812au/rtl8821au</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-55">
<a href="#Atheros"><span class="tocnumber">6.3</span> <span class="toctext">Atheros</span></a>
<ul>
<li class="toclevel-3 tocsection-56"><a href="#ath5k"><span class="tocnumber">6.3.1</span> <span class="toctext">ath5k</span></a></li>
<li class="toclevel-3 tocsection-57"><a href="#ath9k"><span class="tocnumber">6.3.2</span> <span class="toctext">ath9k</span></a></li>
<li class="toclevel-3 tocsection-58">
<a href="#ath9k_2"><span class="tocnumber">6.3.3</span> <span class="toctext">ath9k</span></a>
<ul>
<li class="toclevel-4 tocsection-59"><a href="#Power_saving"><span class="tocnumber">6.3.3.1</span> <span class="toctext">Power saving</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-2 tocsection-60">
<a href="#Intel"><span class="tocnumber">6.4</span> <span class="toctext">Intel</span></a>
<ul>
<li class="toclevel-3 tocsection-61"><a href="#ipw2100_%E4%B8%8E_ipw2200"><span class="tocnumber">6.4.1</span> <span class="toctext">ipw2100 与 ipw2200</span></a></li>
<li class="toclevel-3 tocsection-62"><a href="#iwlegacy"><span class="tocnumber">6.4.2</span> <span class="toctext">iwlegacy</span></a></li>
<li class="toclevel-3 tocsection-63">
<a href="#iwlwifi"><span class="tocnumber">6.4.3</span> <span class="toctext">iwlwifi</span></a>
<ul>
<li class="toclevel-4 tocsection-64"><a href="#Bluetooth_coexistence"><span class="tocnumber">6.4.3.1</span> <span class="toctext">Bluetooth coexistence</span></a></li>
<li class="toclevel-4 tocsection-65"><a href="#%E7%A6%81%E7%94%A8_LED_%E9%97%AA%E7%83%81"><span class="tocnumber">6.4.3.2</span> <span class="toctext">禁用 LED 闪烁</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-2 tocsection-66">
<a href="#Broadcom"><span class="tocnumber">6.5</span> <span class="toctext">Broadcom</span></a>
<ul>
<li class="toclevel-3 tocsection-67"><a href="#Tenda_w322u"><span class="tocnumber">6.5.1</span> <span class="toctext">Tenda w322u</span></a></li>
<li class="toclevel-3 tocsection-68"><a href="#orinoco"><span class="tocnumber">6.5.2</span> <span class="toctext">orinoco</span></a></li>
<li class="toclevel-3 tocsection-69"><a href="#prism54"><span class="tocnumber">6.5.3</span> <span class="toctext">prism54</span></a></li>
<li class="toclevel-3 tocsection-70"><a href="#ACX100/111"><span class="tocnumber">6.5.4</span> <span class="toctext">ACX100/111</span></a></li>
<li class="toclevel-3 tocsection-71"><a href="#zd1211rw"><span class="tocnumber">6.5.5</span> <span class="toctext">zd1211rw</span></a></li>
<li class="toclevel-3 tocsection-72"><a href="#hostap_cs"><span class="tocnumber">6.5.6</span> <span class="toctext">hostap_cs</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-73">
<a href="#Other_drivers/devices"><span class="tocnumber">6.6</span> <span class="toctext">Other drivers/devices</span></a>
<ul>
<li class="toclevel-3 tocsection-74"><a href="#Tenda_w322u_2"><span class="tocnumber">6.6.1</span> <span class="toctext">Tenda w322u</span></a></li>
<li class="toclevel-3 tocsection-75"><a href="#orinoco_2"><span class="tocnumber">6.6.2</span> <span class="toctext">orinoco</span></a></li>
<li class="toclevel-3 tocsection-76"><a href="#prism54_2"><span class="tocnumber">6.6.3</span> <span class="toctext">prism54</span></a></li>
<li class="toclevel-3 tocsection-77"><a href="#ACX100/111_2"><span class="tocnumber">6.6.4</span> <span class="toctext">ACX100/111</span></a></li>
<li class="toclevel-3 tocsection-78"><a href="#zd1211rw_2"><span class="tocnumber">6.6.5</span> <span class="toctext">zd1211rw</span></a></li>
<li class="toclevel-3 tocsection-79"><a href="#hostap_cs_2"><span class="tocnumber">6.6.6</span> <span class="toctext">hostap_cs</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-80"><a href="#ndiswrapper"><span class="tocnumber">6.7</span> <span class="toctext">ndiswrapper</span></a></li>
<li class="toclevel-2 tocsection-81"><a href="#backports-patched"><span class="tocnumber">6.8</span> <span class="toctext">backports-patched</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-82"><a href="#%E5%8F%82%E8%A7%81"><span class="tocnumber">7</span> <span class="toctext">参见</span></a></li>
<li class="toclevel-1 tocsection-83"><a href="#%E5%85%B6%E4%BB%96%E8%B5%84%E6%BA%90"><span class="tocnumber">8</span> <span class="toctext">其他资源</span></a></li>
</ul>
</div>

<h2>
<span id=".E8.AE.BE.E5.A4.87.E9.A9.B1.E5.8A.A8"></span><span class="mw-headline" id="设备驱动">设备驱动</span>
</h2>
<p>默认的 Arch Linux 内核是<b>模块化</b>的，，硬件的设备驱动作为<a href="../en/Kernel_module.html" class="mw-redirect" title="Kernel modules">内核模块</a>保存在硬盘上。启动时 <a href="../en/Udev.html" title="Udev">udev</a> 会根据硬件加载不同的驱动模块，这就创建了需要的网络接口。
</p>
<p>有些无线芯片需要额外的固件，默认安装的 <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=linux-firmware">linux-firmware</a></span> 提供了很多固件。如果缺失需要的固件，请查看 <a href="#%E5%AE%89%E8%A3%85_driver/firmware">#安装 driver/firmware</a>.
</p>
<p>Udev 不是完美的，有些内核模块需要<a href="../en/Kernel_module.html#Manual_module_handling" class="mw-redirect" title="Kernel modules">手动安装</a>.  有些时候 Udev 会同时加载相互冲突的多个模块，就需要<a href="../en/Kernel_module.html#Blacklisting" class="mw-redirect" title="Kernel modules">屏蔽</a> 不需要的模块。
</p>
<h3>
<span id=".E6.A3.80.E6.9F.A5.E8.AE.BE.E5.A4.87.E7.8A.B6.E6.80.81"></span><span class="mw-headline" id="检查设备状态">检查设备状态</span>
</h3>
<p>根据设备是 PCI 还是 USB 连接，执行 <code>lspci -k</code> 或 <code>lsusb -v</code> 检查设备驱动是否已经加载：
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ lspci -k</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">06:00.0 Network controller: Intel Corporation WiFi Link 5100
	Subsystem: Intel Corporation WiFi Link 5100 AGN
	Kernel driver in use: iwlwifi
	Kernel modules: iwlwifi
</pre>
<p>如果是 USB 设备，执行 <code>dmesg | grep usbcore</code> 可以看到类似下面的输出 <code>usbcore: registered new interface driver rtl8187</code>。
</p>
<p>通过 <code>ip link</code> 查看无线 (<a href="../en/Network_configuration.html#Device_names" title="Network configuration">设备名</a><sup>[<a href="../en/ArchWiki:Requests.html#Broken_section_links" class="mw-redirect" title="ArchWiki:Requests">断开的链接</a>：无效的部分]</sup>，通常是类似 <code>wlp2s1</code>) 的设备。启用设备：
</p>
<pre># ip link set &lt;设备名&gt; up
</pre>
<p>如果设备加载，接口正常启用，说明不需要安装额外的驱动和固件。
</p>
<h3>
<span id=".E5.AE.89.E8.A3.85_driver.2Ffirmware"></span><span class="mw-headline" id="安装_driver/firmware">安装 driver/firmware</span>
</h3>
<p>错误信息<code>SIOCSIFFLAGS: No such file or directory</code> 说明需要固件才能工作, 
</p>
<p>检查内核中的固件信息：
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ dmesg | grep firmware</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[   7.148259] iwlwifi 0000:02:00.0: loaded firmware version 39.30.4.1 build 35138 op_mode iwldvm
</pre>
<p>如果没有类似的输出，先执行命令，例如<code>iwlwifi</code>，然后查找对应的错误信息：
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ dmesg | grep iwlwifi</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[   12.342694] iwlwifi 0000:02:00.0: irq 44 for MSI/MSI-X
[   12.353466] iwlwifi 0000:02:00.0: loaded firmware version 39.31.5.1 build 35138 op_mode iwldvm
[   12.430317] iwlwifi 0000:02:00.0: CONFIG_IWLWIFI_DEBUG disabled
...
[   12.430341] iwlwifi 0000:02:00.0: Detected Intel(R) Corporation WiFi Link 5100 AGN, REV=0x6B
</pre>
<p>根据获得的信息，在下面网址查找硬件支持：
</p>
<ul>
<li>查看<a rel="nofollow" class="external text" href="https://wireless.wiki.kernel.org/en/users/drivers">Linux 支持的无线驱动</a>表格并查看对应的Driver页面，此外还有一个 <a rel="nofollow" class="external text" href="https://wikidevi.com/wiki/List_of_Wi-Fi_Device_IDs_in_Linux">Linux Wi-Fi 设备 IDs 列表</a>.</li>
<li>
<a rel="nofollow" class="external text" href="https://help.ubuntu.com/community/WifiDocs/WirelessCardsSupported">Ubuntu Wiki</a> 维护了一个设备被内核和用户空间驱动支持状况的列表。</li>
<li>
<a rel="nofollow" class="external text" href="http://linux-wless.passys.nl/">Linux 无线支持页面</a> 和<a rel="nofollow" class="external text" href="http://www.linuxquestions.org/hcl/index.php?cat=10">硬件兼容性列表</a><sup title="最后检查状态：403">[<a href="https://en.wikipedia.org/wiki/Wikipedia:Link_rot" class="extiw" title="wikipedia:Wikipedia:Link rot">失效链接</a> 2020-08-04 ⓘ]</sup>(HCL)也维护了一个内核友好的设备列表。</li>
</ul>
<p>注意有些厂商的产品即使有相同的名称，实际使用的芯片却是不同的。必须通过usb-id (USB设备) 或 pci-id (PCI设备) 进行判断。
</p>
<p>如果列表中没有，可能你的设备只提供了 Windows 驱动(比如 Broadcom, 3com 等)。这时需要用 <a rel="nofollow" class="external text" href="http://ndiswrapper.sourceforge.net/wiki/index.php/List">ndiswrapper</a><sup title="最后检查状态：404">[<a href="https://en.wikipedia.org/wiki/Wikipedia:Link_rot" class="extiw" title="wikipedia:Wikipedia:Link rot">失效链接</a> 2020-08-04 ⓘ]</sup>. 
</p>
<p>Ndiswrapper 可以在 Linux 中使用 Windows 驱动。兼容性列表在 <a rel="nofollow" class="external text" href="http://ndiswrapper.sourceforge.net/mediawiki/index.php/List">这里</a><sup title="最后检查状态：404">[<a href="https://en.wikipedia.org/wiki/Wikipedia:Link_rot" class="extiw" title="wikipedia:Wikipedia:Link rot">失效链接</a> 2020-08-04 ⓘ]</sup>.  需要 Windows 中安装的 <code>.inf</code> 和 <code>.sys</code> 文件。如果有更新的网卡，请通过互联网搜索型号名称 + 'linux' 以获取更多信息。
</p>
<h2>
<span id=".E6.97.A0.E7.BA.BF.E7.BD.91.E7.BB.9C.E7.AE.A1.E7.90.86"></span><span class="mw-headline" id="无线网络管理">无线网络管理</span>
</h2>
<p>为了管理已经安装好的无线驱动，并且使无线能正常工作，需要安装一个无线连接管理工具。下面章节将帮助您确定一个最佳管理方法。
</p>
<p>过程和需要使用的工具，将依赖于下面几个因素：
</p>
<ul>
<li>配置方式，从完全手动执行每一步到软件自动管理、自动启动</li>
<li>是否使用加密及加密类型</li>
<li>是否需要区分网络配置，是否经常切换不同网络（比如手提电脑）</li>
<li>如果要在不同网络间切换，使用工具会更方便</li>
</ul>
<p>无论选的那个方案，最好先尝试手动方法。这将有助于您了解不同步骤的意义，并在出问题时解决之。 
如果可以的话（比如说你在管理你自己的无线接入点），尝试连接一个开放的无线网络来检查是否所有的配置都在正常工作。然后再尝试加密的无线接入点，比如WEP（更易于配置）或者WPA。
</p>
<p>此表列出可以使用的激活和管理无线网络的方法，按照加密和管理方式分类，给出了需要的工具。虽然还有其他办法，但这些是最常使用的：
</p>
<table class="wikitable">
<tbody>
<tr>
<th>管理方法</th>
<th>接口激活</th>
<th>无线连接管理 <br>(/=alternatives)</th>
<th>IP 地址分配 <br>(/=alternatives)
</th>
</tr>
<tr>
<td>
<a href="#%E6%89%8B%E5%8A%A8%E8%AE%BE%E7%BD%AE">手动设置</a><br>无加密或 WEP 加密</td>
<td><a href="../zh-CN/Core_utilities.html#ip" title="Core utilities (简体中文)">ip</a></td>
<td>
<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=iw">iw</a></span>/<a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=wireless_tools">iwconfig</a>
</td>
<td>
<a href="../zh-CN/Core_utilities.html#ip" title="Core utilities (简体中文)">ip</a>/<a href="../en/Dhcpcd.html" title="Dhcpcd">dhcpcd</a>/<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=dhclient">dhclient</a></span>/<a href="../en/Systemd-networkd.html" class="mw-redirect" title="Networkd">networkd</a>
</td>
</tr>
<tr>
<td>
<a href="#%E6%89%8B%E5%8A%A8%E8%AE%BE%E7%BD%AE">手动管理</a><br> WPA 或 WPA2 PSK 加密</td>
<td><a href="../zh-CN/Core_utilities.html#ip" title="Core utilities (简体中文)">ip</a></td>
<td>
<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=iw">iw</a></span>/<a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=wireless_tools">iwconfig</a> + <a href="../zh-CN/Wpa_supplicant.html" class="mw-redirect" title="WPA supplicant (简体中文)">wpa_supplicant</a>
</td>
<td>
<a href="../zh-CN/Core_utilities.html#ip" title="Core utilities (简体中文)">ip</a>/<a href="../en/Dhcpcd.html" title="Dhcpcd">dhcpcd</a>/<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=dhclient">dhclient</a></span>
</td>
</tr>
<tr>
<td>
<a href="#%E8%87%AA%E5%8A%A8%E8%AE%BE%E7%BD%AE">自动管理</a><br>支持网络配置</td>
<td colspan="3" align="center">
<a href="../zh-CN/Netctl.html" title="Netctl (简体中文)">netctl</a>、<a href="../zh-CN/Wicd.html" title="Wicd (简体中文)">Wicd</a>、<a href="../zh-CN/NetworkManager.html" title="NetworkManager (简体中文)">NetworkManager</a> 等等<br>
<p>这些工具会自动安装手动配置需要的工具。
</p>
</td>
</tr>
</tbody>
</table>
<h3>
<span id=".E6.89.8B.E5.8A.A8.E8.AE.BE.E7.BD.AE"></span><span class="mw-headline" id="手动设置">手动设置</span>
</h3>
<p>软件包 <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=wireless_tools">wireless_tools</a></span> 提供了建立无线连接的基础工具。如果你需要使用 WPA/WPA2 加密，还需要 <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=wpa_supplicant">wpa_supplicant</a></span>。 这些强大的用户空间终端工具提供了完全的控制手段。
</p>
<p>这些例子假设无线设备是 <code>wlan0</code>, 请将其替换为正确的设备名。
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>注意：</strong>  根据硬件和加密方式的不同，下面一些步骤可以省略。有些设备需要在建立关联时激活接口或扫描访问点，并提供 IP 地址。需要进行一些尝试，例如 WPA/WPA2 用户可以直接到第三步激活无线网络。</div>
<p>和其它网络接口一样，无线设备也是通过 <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=iproute2">iproute2</a></span> 软件包提供的 ip 命令进行。
</p>
<p>基本的工具如下，这些用户空间工具可以对无线连接进行完整控制。
</p>
<ul>
<li>
<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=iw">iw</a></span> - 仅支持 nl80211 标准，不支持老的 WEXT (Wireless EXTentions) 标准。如果 <i>iw</i> 没有显示网卡，可能是这个原因。</li>
<li>
<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=wireless_tools">wireless_tools</a></span> - 已经过时，但是依然广泛使用。WEXT 设备使用此工具。</li>
<li>
<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=wpa_supplicant">wpa_supplicant</a></span> - 提供 WPA/WPA2 加密支持，同时支持 nl80211 和 WEXT。</li>
</ul>
<p>下面表格给出了 <code>iw</code> 和 <code>wireless_tools</code> 命令的对比（更多示例参阅 <a rel="nofollow" class="external text" href="https://wireless.wiki.kernel.org/en/users/Documentation/iw/replace-iwconfig">这里</a>）。 
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> 
<ul>
<li>
<a href="../en/Installation_guide.html" class="mw-redirect" title="Getting and installing Arch">安装介质</a>上提供了手工管理和 <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=netctl">netctl</a></span> 管理的工具</li>
<li>示例中使用网络接口 <code>wlan0</code> 和热点 <code><i>your_essid</i></code>。</li>
<li>大部分命令需要以 <a href="../en/Users_and_groups.html" title="Users and groups">root 权限</a>执行，否则会无输出就退出。</li>
</ul>
</div> 
<table class="wikitable">
<tbody>
<tr>
<th>
<i>iw</i> 命令
</th>
<th>
<i>wireless_tools</i> 命令
</th>
<th>描述
</th>
</tr>
<tr>
<td>iw dev <i>wlan0</i> link
</td>
<td>iwconfig <i>wlan0</i>
</td>
<td>获取连接状态
</td>
</tr>
<tr>
<td>iw dev <i>wlan0</i> scan
</td>
<td>iwlist <i>wlan0</i> scan
</td>
<td>扫描可用热点
</td>
</tr>
<tr>
<td>iw dev <i>wlan0</i> set type ibss
</td>
<td>iwconfig <i>wlan0</i> mode ad-hoc
</td>
<td>设置操作模式为 <i>ad-hoc</i>.
</td>
</tr>
<tr>
<td>iw dev <i>wlan0</i> connect <i>your_essid</i>
</td>
<td>iwconfig <i>wlan0</i> essid <i>your_essid</i>
</td>
<td>连接到开放网络
</td>
</tr>
<tr>
<td>iw dev <i>wlan0</i> connect <i>your_essid</i> 2432
</td>
<td>iwconfig <i>wlan0</i> essid <i>your_essid</i> freq 2432M
</td>
<td>连接到开放网络的一个频道
</td>
</tr>
<tr>
<td>iw dev <i>wlan0</i> connect <i>your_essid</i> key 0:<i>your_key</i>
</td>
<td>iwconfig <i>wlan0</i> essid <i>your_essid</i> key <i>your_key</i>
</td>
<td>用16进制加密密码访问 WEP 加密网络
</td>
</tr>
<tr>
<td>iw dev <i>wlan0</i> connect <i>your_essid</i> key 0:<i>your_key</i>
</td>
<td>iwconfig <i>wlan0</i> essid <i>your_essid</i> key s:<i>your_key</i>
</td>
<td>用 ASCII 密码访问 WEP 加密网络.
</td>
</tr>
<tr>
<td>iw dev <i>wlan0</i> set power_save on
</td>
<td>iwconfig <i>wlan0</i> power on
</td>
<td>启用省电模式
</td>
</tr>
</tbody>
</table>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>注意：</strong> 根据硬件和加密设备的不同，有些步骤可以跳过。一些网卡需要在关联到热点前先激活或扫描热点，需要一些实验才能确定。WPA/WPA2 用户可以按照<a href="#%E5%85%B3%E8%81%94">#关联</a>中的步骤激活网络。</div>
<h4>
<span id=".E8.8E.B7.E5.8F.96.E6.9C.89.E7.94.A8.E4.BF.A1.E6.81.AF"></span><span class="mw-headline" id="获取有用信息">获取有用信息</span>
</h4>
<p><a rel="nofollow" class="external text" href="https://wireless.wiki.kernel.org/en/users/Documentation/iw">iw 官方文档</a> 包含更多示例。
</p>
<ul><li>获取接口名:</li></ul>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ iw dev</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">phy#0
	Interface <b>wlan0</b>
		ifindex 3
		wdev 0x1
		addr 12:34:56:78:9a:bc
		type managed
		channel 1 (2412 MHz), width: 40 MHz, center1: 2422 MHz
</pre>
<ul><li>检查连接状态，未连接时，可以看到：</li></ul>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ iw dev <i>wlan0</i> link</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Not connected.
</pre>
<p>连接到 AP 后可以看到：
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ iw dev <i>wlan0</i> link</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Connected to 12:34:56:78:9a:bc (on wlan0)
	SSID: MyESSID
	freq: 2412
	RX: 33016518 bytes (152703 packets)
	TX: 2024638 bytes (11477 packets)
	signal: -53 dBm
	tx bitrate: 150.0 MBit/s MCS 7 40MHz short GI

	bss flags:	short-preamble short-slot-time
	dtim period:	1
	beacon int:	100
</pre>
<ul><li>获取统计数据:</li></ul>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ iw dev <i>wlan0</i> station dump</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Station 12:34:56:78:9a:bc (on wlan0)
	inactive time:	1450 ms
	rx bytes:	24668671
	rx packets:	114373
	tx bytes:	1606991
	tx packets:	8557
	tx retries:	623
	tx failed:	1425
	signal:  	-52 dBm
	signal avg:	-53 dBm
	tx bitrate:	150.0 MBit/s MCS 7 40MHz short GI
	authorized:	yes
	authenticated:	yes
	preamble:	long
	WMM/WME:	yes
	MFP:		no
	TDLS peer:	no
</pre>
<h4>
<span id=".E6.BF.80.E6.B4.BB.E5.86.85.E6.A0.B8.E6.8E.A5.E5.8F.A3"></span><span class="mw-headline" id="激活内核接口">激活内核接口</span>
</h4>
<p>(可能需要) 一些无线网卡在使用 <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=wireless_tools">wireless_tools</a></span>前需要激活内核接口:
</p>
<pre># ip link set <i>wlan0</i> up
</pre>
<p>如果出现错误 <code>RTNETLINK answers: Operation not possible due to RF-kill</code>, 请确保硬件开关已经打开。参阅 <a href="#Rfkill_%E8%AD%A6%E5%91%8A">#Rfkill 警告</a>。
</p>
<p>要验证接口确实打开：
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"># ip link show <i>wlan0</i></pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">3: wlan0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc mq state DOWN mode DORMANT group default qlen 1000
    link/ether 12:34:56:78:9a:bc brd ff:ff:ff:ff:ff:ff
</pre>
<p><code>&lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt;</code> 中的<code>UP</code> 显示接口已经打开。 
</p>
<h4>
<span id=".E6.9F.A5.E7.9C.8B.E6.8E.A5.E5.85.A5.E7.82.B9"></span><span class="mw-headline" id="查看接入点">查看接入点</span>
</h4>
<pre># iw dev <i>wlan0</i> scan |less
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>注意：</strong> 如果显示 "Interface doesn't support scanning"，可能是忘了安装固件。有时不以 root 运行 <code>iwlist</code> 也会产生这个问题。同样无线网络可能被软禁于，请运行 <code>rfkill list all</code> 进行检查。</div>
<p>需要关注的信息:
</p>
<ul>
<li>
<b>SSID:</b> 网络的名称.</li>
<li>
<b>Signal:</b> 用 dbm (-100 to 0) 报告的无线信号强度。数值越接近零，信号越好。观察高质量连接和低质量连接的数值差异可以了解设备的信号范围。</li>
<li>
<b>Security:</b> 没有直接报告, 检查 <code>capability</code> 开头的行，如果有 <code>Privacy</code> 信息，例如 <code>capability: ESS Privacy ShortSlotTime (0x0411)</code>, 表示网络具有某种程度的保护，
<ul>
<li>如果有 <code>RSN</code> 信息，网络被 <a href="https://en.wikipedia.org/wiki/IEEE_802.11i-2004" class="extiw" title="wikipedia:IEEE 802.11i-2004">Robust Security Network</a>(WPA2) 协议保护。</li>
<li>如果有 <code>WPA</code> 信息，网络被 <a href="https://en.wikipedia.org/wiki/Wi-Fi_Protected_Access" class="extiw" title="wikipedia:Wi-Fi Protected Access">Wi-Fi Protected Access</a> 协议保护。</li>
<li>在 <code>RSN</code> 和 <code>WPA</code> 信息块中，可能看到如下信息：
<ul>
<li>
<b>Group cipher:</b> 数值包括 TKIP, CCMP, both, others.</li>
<li>
<b>Pairwise ciphers:</b> 数值包括 TKIP, CCMP, both, others. 可能和 Group cipher 数值不同.</li>
<li>
<b>Authentication suites:</b> 数值包括 PSK, 802.1x, others. 家用路由器通常可以看到 PSK (<i>i.e.</i> 密码). 在大学中，通常会链接到需要登录名和密码的 802.1x 网络。需要知道其使用的密码管理方式(例如 EAP), 封装方法 (例如 PEAP). 详情请参考 <a href="../en/Network_configuration/Wireless.html#WPA2_Enterprise" class="mw-redirect" title="WPA2 Enterprise">这里</a> 和 <a href="https://en.wikipedia.org/wiki/Authentication_protocol" class="extiw" title="wikipedia:Authentication protocol">这里</a>.</li>
</ul>
</li>
<li>如果没有看到 <code>RSN</code> 或 <code>WPA</code>，但是看到了 <code>Privacy</code>, 表示使用的是 WEP.</li>
</ul>
</li>
</ul>
<h4>
<span id=".E8.BF.90.E8.A1.8C.E6.A8.A1.E5.BC.8F"></span><span class="mw-headline" id="运行模式">运行模式</span>
</h4>
<p>设置无线网卡的操作模式，如果连接到漫游网络，需要设置操作模式为 <b>ibss</b>
</p>
<pre># iw wlan0 set type ibss
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>注意：</strong> 有些网卡需要先关闭无线接口(<code>ip link set wlan0 down</code>)才能修改模式。</div>
<h4>
<span id=".E5.85.B3.E8.81.94"></span><span class="mw-headline" id="关联">关联</span>
</h4>
<p>根据加密方式不同，需要使用密码将无线设备关联到接入点。
</p>
<p>假设要使用的接入点 ESSID 为 <code>MyEssid</code>: 
</p>
<ul><li>无加密</li></ul>
<pre># iw wlan0 connect MyEssid
</pre>
<ul><li>WEP</li></ul>
<p>使用十六进制或 ASCII 密码(格式是自动识别出来的，因为 WEP 密码长度是固定的):
</p>
<pre># iw dev wlan0 connect <i>your_essid</i> key 0:<i>your_key</i>
</pre>
<p>使用十六进制或 ASCII 密码，第三个是默认 (从0计数，共四个):
</p>
<pre># iw dev wlan0 connect <i>your_essid</i> key d:2:<i>your_key</i>
</pre>
<ul><li><b>WPA/WPA2</b></li></ul>
<pre># wpa_supplicant -i interface -c &lt;(wpa_passphrase <i>your_SSID</i> <i>your_key</i>)
</pre>
<p>假设设备使用 <code>wext</code> 驱动。如果无法工作，可能需要调整选项，参见 <a href="../zh-CN/Wpa_supplicant.html" class="mw-redirect" title="WPA supplicant (简体中文)">WPA supplicant</a>。
</p>
<p>如果连接成功，在新终端中执行后续命令或(或者通过 <code>Ctrl+c</code> 退出并使用 <code>-B</code> 参数在后台再次执行上述命令。<a href="../zh-CN/Wpa_supplicant.html" class="mw-redirect" title="WPA supplicant (简体中文)">WPA supplicant</a> 页面包含更多参数和配置文件的信息。
</p>
<p>通过下面命令确认是否连接成功：
</p>
<pre># iw dev wlan0 link
</pre>
<h4>
<span id=".E8.8E.B7.E5.8F.96_IP_.E5.9C.B0.E5.9D.80"></span><span class="mw-headline" id="获取_IP_地址">获取 IP 地址</span>
</h4>
<p>使用 DHCP：
</p>
<pre># dhcpcd wlan0
</pre>
<p>静态 IP：
</p>
<pre># ip addr add 192.168.0.2/24 dev wlan0
# ip route add default via 192.168.0.1
</pre>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>提示：</strong> <a href="../zh-CN/Dhcpcd.html" title="Dhcpcd (简体中文)">dhcpcd</a> 提供了 <a href="../zh-CN/Dhcpcd.html#%E9%92%A9%E5%AD%90" title="Dhcpcd (简体中文)">钩子</a><sup>[<a href="../en/ArchWiki:Requests.html#Broken_section_links" class="mw-redirect" title="ArchWiki:Requests">断开的链接</a>：无效的部分]</sup>, 可以使用它自动在无线接口上启动 <a href="../zh-CN/Wpa_supplicant.html" class="mw-redirect" title="WPA supplicant (简体中文)">WPA supplicant</a>。</div>
<h4>
<span id=".E7.A4.BA.E4.BE.8B"></span><span class="mw-headline" id="示例">示例</span>
</h4>
<p>下面是一个用 WPA supplicant 和 DHCP 设置无线网络的完整示例.
</p>
<pre># ip link set dev wlp13s1 up
# wpa_supplicant -B -i wlp13s1 -c /etc/wpa_supplicant/wpa_supplicant.conf
# dhcpcd wlp13s1
</pre>
<p>要关闭连接，可以禁用接口：
</p>
<pre># ip link set dev wlp13s1 down
</pre>
<p>要使用静态 IP，将 dhcpcd 命令替换为：
</p>
<pre># ip addr add 192.168.0.10/24 broadcast 192.168.0.255 dev wlp13s1
# ip route add default via 192.168.0.1
</pre>
<p>禁用接口前，需要先刷新 IP 地址和网关:
</p>
<pre># ip addr flush dev wlp13s1
# ip route flush dev wlp13s1
</pre>
<h3>
<span id=".E8.87.AA.E5.8A.A8.E8.AE.BE.E7.BD.AE"></span><span class="mw-headline" id="自动设置">自动设置</span>
</h3>
<p>有许多可选方法，但是注意它们是互斥的，不能同时运行两个守护进程。下面是比较表格：
</p>
<table class="wikitable">
<tbody>
<tr>
<th>连接管理器</th>
<th>profiles 支持</th>
<th>漫游 <br>(自动连接和重连)</th>
<th>
<a href="https://en.wikipedia.org/wiki/point-to-point_protocol" class="extiw" title="wikipedia:point-to-point protocol">PPP</a> 支持 <br>(3G modem)</th>
<th>官方 <br>GUI</th>
<th>控制台工具
</th>
</tr>
<tr>
<td><a href="../en/ConnMan.html" title="ConnMan">ConnMan</a></td>
<td>Yes</td>
<td>Yes</td>
<td>Yes</td>
<td>No</td>
<td>
<code>connmanctl</code>
</td>
</tr>
<tr>
<td><a href="../en/Netctl.html" title="Netctl">Netctl</a></td>
<td>Yes</td>
<td>Yes</td>
<td>Yes</td>
<td>No</td>
<td>
<code>netctl</code>,<code>wifi-menu</code>
</td>
</tr>
<tr>
<td><a href="../en/NetworkManager.html" title="NetworkManager">NetworkManager</a></td>
<td>Yes</td>
<td>Yes</td>
<td>Yes</td>
<td>Yes</td>
<td>
<code>nmcli</code>,<code>nmtui</code>
</td>
</tr>
<tr>
<td><a href="../en/Wicd.html" title="Wicd">Wicd</a></td>
<td>Yes</td>
<td>Yes</td>
<td>No</td>
<td>Yes</td>
<td>
<code>wicd-curses</code>
</td>
</tr>
</tbody>
</table>
<h4><span class="mw-headline" id="Connman">Connman</span></h4>
<p>ConnMan 可以替代 NetworkManager 或 Wicd, 设计上考虑低资源消耗，以上网本和其它移动设备为目标。模块化设计并利用 dbus API，提供了 wpa_supplicant 抽象. 
</p>
<p>参阅: <a href="../en/ConnMan.html" title="ConnMan">ConnMan</a>
</p>
<h4><span class="mw-headline" id="Netctl">Netctl</span></h4>
<p><i>netctl</i> 与 systemd 一起工作。基于配置文件，可以检查和连接多种网络类型。使用简单，并不比图形工具难。
参阅： <a href="../zh-CN/Netctl.html" title="Netctl (简体中文)">Netctl (简体中文)</a>
</p>
<h4><span class="mw-headline" id="Wicd">Wicd</span></h4>
<p>Wicd 是可以同时处理无线和有线网络的管理器。用 Python 和 Gtk 写成，依赖关系比 NetworkManager 少，所以是轻量级桌面的理想选择。位于<a href="../zh-CN/Official_repositories.html" class="mw-redirect" title="官方软件仓库">官方软件仓库</a>.
</p>
<p>参见: <a href="../zh-CN/Wicd.html" title="Wicd (简体中文)">Wicd (简体中文)</a>.
</p>
<h4><span class="mw-headline" id="NetworkManager">NetworkManager</span></h4>
<p>NetworkManager 是高级网络管理工具，在大部分流行发行版中使用。除了能管理有线链接，NetworkManager还提供了一个易于使用的图形界面程序来选择想要的无线移动链接。 
</p>
<p>详情请见 <a href="../zh-CN/NetworkManager.html" title="NetworkManager (简体中文)">NetworkManager (简体中文)</a>。
</p>
<h2>
<span id="WPA2_.E4.BC.81.E4.B8.9A.E6.A8.A1.E5.BC.8F"></span><span class="mw-headline" id="WPA2_企业模式">WPA2 企业模式</span>
</h2>
<p><i>WPA2 企业模式</i>是 WPA（<a rel="nofollow" class="external text" href="https://zh.wikipedia.org/wiki/WPA">Wi-Fi Protected Access</a>）的工作模式之一。It provides better security and key management than <i>WPA2 Personal</i>, and supports other enterprise-type functionality, such as VLANs and <a href="https://en.wikipedia.org/wiki/Network_Access_Protection" class="extiw" title="wikipedia:Network Access Protection">NAP</a>. However, it requires an external authentication server, called <a href="https://en.wikipedia.org/wiki/RADIUS" class="extiw" title="wikipedia:RADIUS">RADIUS</a> server to handle the authentication of users. This is in contrast to Personal mode which does not require anything beyond the wireless router or access points (APs), and uses a single passphrase or password for all users.
</p>
<p><i>WPA2 企业模式</i> 是 WPA（<a rel="nofollow" class="external text" href="https://zh.wikipedia.org/wiki/WPA">Wi-Fi Protected Access</a>）的工作模式之一。相比 <i>WPA2 Personal</i> 而言，它提供了更好的安全性和密钥管理功能，同时也提供了 VLANS 和 <a href="https://en.wikipedia.org/wiki/Network_Access_Protection" class="extiw" title="wikipedia:Network Access Protection">NAP</a> 之类的企业功能。当然，它需要额外的 <a href="https://en.wikipedia.org/wiki/RADIUS" class="extiw" title="wikipedia:RADIUS">RADIUS</a> 认证服务器来为用户提供认证服务，这就和只需要无线路由器或者接入点，所有用户都使用同一个密码的个人模式不同。
</p>
<p>The Enterprise mode enables users to log onto the Wi-Fi network with a username and password and/or a digital certificate. Since each user has a dynamic and unique encryption key, it also helps to prevent user-to-user snooping on the wireless network, and improves encryption strength.
</p>
<p>企业模式允许用户使用用户名和密码或者数字证书来登陆 Wi-Fi。因为每个用户都拥有一个动态唯一的加密密码，因此企业模式可以防止通过无限网络的用户探听，并提高加密强度。
</p>
<p>This section describes the configuration of <a href="../en/List_of_applications.html#Network_managers" title="List of applications">network clients</a> to connect to a wireless access point with WPA2 Enterprise mode. See <a href="../en/Software_access_point.html#RADIUS" title="Software access point">Software access point#RADIUS</a> for information on setting up an access point itself. 
</p>
<p>本章节讲解 <a href="../en/List_of_applications.html#Network_managers" title="List of applications">network clients</a> 使用WPA2企业模式来连接无线接入点的配置。查看 <a href="../en/Software_access_point.html#RADIUS" title="Software access point">Software access point#RADIUS</a> 来获得如何设置接入点自身的相关信息。
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>注意：</strong> Enterprise mode requires a more complex client configuration, whereas Personal mode only requires entering a passphrase when prompted. Clients likely need to install the server’s CA certificate (plus per-user certificates if using EAP-TLS), and then manually configure the wireless security and 802.1X authentication settings.</div>
<p>For a comparison of protocols see the following <a rel="nofollow" class="external text" href="http://deployingradius.com/documents/protocols/compatibility.html">table</a>.
</p>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>警告：</strong> It is possible to use WPA2 Enterprise without the client checking the server CA certificate. However, you should always seek to do so, because without authenticating the access point the connection can be subject to a man-in-the-middle attack. This may happen because while the connection handshake itself may be encrypted, the most widely used setups transmit the password itself either in plain text or the easily breakable <a href="#MS-CHAPv2">#MS-CHAPv2</a>. Hence, the client might send the password to a malicious access point which then proxies the connection.</div>
<h3><span class="mw-headline" id="eduroam">eduroam</span></h3>
<p><a href="https://en.wikipedia.org/wiki/eduroam" class="extiw" title="wikipedia:eduroam">eduroam</a> (education roaming) is an international roaming service for users in research, higher education and further education, based on WPA2 Enterprise.
</p>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>警告：</strong> 
<ul>
<li>Check connection details <b>first</b> with your institution before applying any profiles listed in this section. Example profiles are not guaranteed to work or match any security requirements.</li>
<li>When storing connection profiles unencrypted, restrict read access to the root account by specifying <code>chmod 600 <i>profile</i></code> as root.</li>
</ul>
</div>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>提示：</strong> Configuration for <a href="../en/NetworkManager.html" title="NetworkManager">NetworkManager</a> and <a href="#wpa_supplicant">#wpa_supplicant</a> can be generated with the <a rel="nofollow" class="external text" href="https://cat.eduroam.org/">eduroam Configuration Assistant Tool</a>.</div>
<h3>
<span id=".E6.89.8B.E5.B7.A5.2F.E8.87.AA.E5.8A.A8.E9.85.8D.E7.BD.AE"></span><span class="mw-headline" id="手工/自动配置">手工/自动配置</span>
</h3>
<h4><span class="mw-headline" id="wpa_supplicant">wpa_supplicant</span></h4>
<p><a href="../en/Wpa_supplicant.html#Advanced_usage" class="mw-redirect" title="WPA supplicant">WPA supplicant</a> 可直接配置并使用于dhcp客户端或systemd。 参照<code>/etc/wpa_supplicant/wpa_supplicant.conf</code> 来配置连接细节信息。
</p>
<h4><span class="mw-headline" id="NetworkManager_2">NetworkManager</span></h4>
<p><a href="../en/NetworkManager.html" title="NetworkManager">NetworkManager</a> can generate WPA2 Enterprise profiles with <a href="../en/NetworkManager.html#Front-ends" title="NetworkManager">graphical front ends</a>. <i>nmcli</i> and <i>nmtui</i> do not support this, but may use existing profiles.
</p>
<h4><span class="mw-headline" id="connman_2">connman</span></h4>
<p><a href="../en/ConnMan.html" title="ConnMan">ConnMan</a> needs a separate configuration file before <a href="../en/ConnMan.html#Wi-Fi" title="ConnMan">connecting</a> to the network. See <span class="plainlinks archwiki-template-man" title="$ man 5 connman-service.config"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/connman-service.config.5">connman-service.config(5)</a></span> and <a href="../en/ConnMan.html#Connecting_to_eduroam" title="ConnMan">ConnMan#Connecting to eduroam</a><sup>[<a href="../en/ArchWiki:Requests.html#Broken_section_links" class="mw-redirect" title="ArchWiki:Requests">断开的链接</a>：无效的部分]</sup> for details.
</p>
<h4><span class="mw-headline" id="netctl_2">netctl</span></h4>
<p><a href="../en/Netctl.html" title="Netctl">netctl</a> supports <a href="#wpa_supplicant">#wpa_supplicant</a> configuration through blocks included with <code>WPAConfigSection=</code>. See <span class="plainlinks archwiki-template-man" title="$ man 5 netctl.profile"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/netctl.profile.5">netctl.profile(5)</a></span> for details.
</p>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>警告：</strong> Special quoting rules apply: see the <code><i>SPECIAL QUOTING RULES</i></code> section in <span class="plainlinks archwiki-template-man" title="$ man 5 netctl.profile"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/netctl.profile.5">netctl.profile(5)</a></span>.</div>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>提示：</strong> Custom certificates can be specified by adding the line <code>'ca_cert="/path/to/special/certificate.cer"'</code> in <code>WPAConfigSection</code>.</div>
<h3>
<span id=".E6.8E.92.E9.94.99"></span><span class="mw-headline" id="排错">排错</span>
</h3>
<h4><span class="mw-headline" id="MS-CHAPv2">MS-CHAPv2</span></h4>
<p>WPA2-Enterprise wireless networks demanding MSCHAPv2 type-2 authentication with PEAP sometimes require <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=pptpclient">pptpclient</a></span> in addition to the stock <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=ppp">ppp</a></span> package. <a href="../en/Netctl.html" title="Netctl">netctl</a> seems to work out of the box without ppp-mppe, however. In either case, usage of MSCHAPv2 is discouraged as it is highly vulnerable, although using another method is usually not an option. See also <a rel="nofollow" class="external autonumber" href="https://www.cloudcracker.com/blog/2012/07/29/cracking-ms-chap-v2/">[1]</a><sup title="最后检查状态：domain name not resolved">[<a href="https://en.wikipedia.org/wiki/Wikipedia:Link_rot" class="extiw" title="wikipedia:Wikipedia:Link rot">失效链接</a> 2020-08-04 ⓘ]</sup> and <a rel="nofollow" class="external autonumber" href="http://research.edm.uhasselt.be/~bbonne/docs/robyns14wpa2enterprise.pdf">[2]</a><sup title="最后检查状态：404">[<a href="https://en.wikipedia.org/wiki/Wikipedia:Link_rot" class="extiw" title="wikipedia:Wikipedia:Link rot">失效链接</a> 2020-08-04 ⓘ]</sup>.
</p>
<h2>
<span id=".E6.8F.90.E7.A4.BA.E5.92.8C.E6.8A.80.E5.B7.A7"></span><span class="mw-headline" id="提示和技巧">提示和技巧</span>
</h2>
<h3>
<span id="Rfkill_.E8.AF.B4.E6.98.8E"></span><span class="mw-headline" id="Rfkill_说明">Rfkill 说明</span>
</h3>
<p>许多笔记本都有一个硬件按钮或开关用于关闭无线网卡，然而无线网卡也可以通过内核来屏蔽。这一任务可由 <i>rfkill</i> 处理。显示当前状态：
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"># rfkill list</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">0: phy0: Wireless LAN
	Soft blocked: yes
	Hard blocked: yes
</pre>
<p>如果网卡处于<i>硬件屏蔽（hard-blocked）</i>状态，请使用硬件按钮或开关来开启它。 如果无线网卡并没有被<i>硬件屏蔽</i>但处于<i>软件屏蔽（soft-blocked）</i>，请使用以下命令：
</p>
<pre># rfkill unblock wifi
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>注意：</strong> 按下硬件按钮可能会让无线网卡从硬件屏蔽，软件未屏蔽状态变为硬件未屏蔽，软件屏蔽状态。 可以通过调整 <code>rfkill</code> <a href="../zh-CN/Kernel_module.html" title="Kernel module (简体中文)">内核模块</a>的一些选项改变这一现象。</div> 
<p>切换无线网卡的硬件按钮是厂商专用的<a href="../zh-CN/Kernel_module.html" title="Kernel module (简体中文)">内核模块</a>处理的，经常是 <a rel="nofollow" class="external text" href="https://lwn.net/Articles/391230/">WMI</a> 模块。特别是非常新的硬件型号，可能还没有得到最新稳定内核的完全支持。这种情况下，在内核 bug 跟踪系统搜索信息，并将型号报告给对应厂商内核模块的维护者（如果还没有报告的话）经常会有帮助。
</p>
<p>参见 <a rel="nofollow" class="external free" href="https://askubuntu.com/questions/62166/siocsifflags-operation-not-possible-due-to-rf-kill">https://askubuntu.com/questions/62166/siocsifflags-operation-not-possible-due-to-rf-kill</a> 。
</p>
<h3>
<span id=".E9.81.B5.E5.BE.AA.E7.9B.91.E7.AE.A1.E5.8C.BA.E5.9F.9F.E8.A6.81.E6.B1.82"></span><span class="mw-headline" id="遵循监管区域要求">遵循监管区域要求</span>
</h3>
<p><a href="https://en.wikipedia.org/wiki/IEEE_802.11#Regulatory_domains_and_legal_compliance" class="extiw" title="wikipedia:IEEE 802.11">监管区域</a>用于配置无线驱动，确保对无线硬件的使用符合由 FCC、ETSI 及其他组织制定的当地法规。监管区域使用<a href="https://en.wikipedia.org/wiki/zh:ISO_3166-1%E4%BA%8C%E4%BD%8D%E5%AD%97%E6%AF%8D%E4%BB%A3%E7%A0%81" class="extiw" title="wikipedia:zh:ISO 3166-1二位字母代码">ISO 3166-1二位字母国家代码</a>。例如，美国的监管区域代码是“US”，中国则是“CN”，等等。
</p>
<p>监管区域影响无线信道的可用性。在2.4GHz波段，美国允许使用1-11信道，日本是1-14，世界上多数其它地区则是1-13。在5GHz波段，允许使用信道的规则要复杂得多。这两种情况的更详细信息见<a href="https://en.wikipedia.org/wiki/zh:WLAN%E4%BF%A1%E9%81%93%E5%88%97%E8%A1%A8" class="extiw" title="wikipedia:zh:WLAN信道列表">这一WLAN信道列表</a>。
</p>
<p>监管区域也影响对来自无线设备的<a href="https://en.wikipedia.org/wiki/Equivalent_isotropically_radiated_power" class="extiw" title="wikipedia:Equivalent isotropically radiated power">等效各向同性辐射功率（EIRP）</a>所作的限制。这衍生自发射功率（tx power）并以<a href="https://en.wikipedia.org/wiki/zh:%E5%88%86%E8%B4%9D%E6%AF%AB%E7%93%A6" class="extiw" title="wikipedia:zh:分贝毫瓦">dBm/mBm（1dBm=100mBm）或mW（对数尺度）</a>衡量。在2.4GHz波段，美国和加拿大最大限制30dBm，欧洲大部分是20dBm，世界上其他地区则是20dB-30dBm。在5GHz波段，最大值通常更低。更详细的信息请参考 <a rel="nofollow" class="external text" href="https://git.kernel.org/cgit/linux/kernel/git/linville/wireless-regdb.git/tree/db.txt">wireless-regdb</a>（EIRP dBm 值在每行第二对括号里）。
</p>
<p>错误设置监管区域可能会有用——例如，在其他信道拥挤时可以使用未用信道，或者提升发射功率以扩大传输范围。然而<b>不推荐这种做法</b>，因为可能会违反当地法规以及造成与其他无线电设备的干扰。
</p>
<p>要配置监管区域，安装 <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=crda">crda</a></span> 并重启（以重新加载 <code>cfg80211</code> 模块及所有相关驱动）。检查启动日志以确认 <code>cfg80211</code> 正在调用CRDA：
</p>
<pre>$ dmesg | grep cfg80211
</pre>
<p>以下命令可将当前监管区域设为美国：
</p>
<pre># iw reg set US
</pre>
<p>用以下命令查询：
</p>
<pre>$ iw reg get
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>注意：</strong> 
<ul>
<li>你的设备国家代码可能为“00”，它是包含了通用设置的“世界监管区域”。如果无法解除此设置，则CRDA可能配置有误。</li>
<li>根据 <a rel="nofollow" class="external text" href="https://git.kernel.org/pub/scm/linux/kernel/git/mcgrof/crda.git/tree/README">CRDA 的 README</a>，从内核版本4.15开始就不再需要它，因为内核会自动从固件加载监管数据库。然而<a rel="nofollow" class="external text" href="https://bugs.gentoo.org/462032#c17">也有说法称</a>这一加载操作需要特定的内核设置。</li>
</ul>
</div>
<p>然而设置监管区域可能不会改变您的设置。有些设备在固件/EEPROM中设置了一个监管区域，为设备规定了限制，这意味着通过软件设置监管区域<a rel="nofollow" class="external text" href="http://wiki.openwrt.org/doc/howto/wireless.utilities#iw">只能增加限制</a>而不能减少。例如，一个 CN（中国）设备可以用软件设置为 US（美国）监管区域，但由于中国的 EIRP 最大值为20dBm，设备将无法以美国的最大值30dBm进行发射。
</p>
<p>例如，查看一个 Atheros 设备的固件中是否设置了监管区域：
</p>
<pre>$ dmesg | grep ath:
</pre>
<p>对于其他芯片组，搜索“EEPROM”、“regdomain”或设备驱动的名字可能会有用。
</p>
<p>要查看监管区域更改是否成功，以及查询可用信道数和允许发射功率：
</p>
<pre>$ iw list | grep -A 15 Frequencies:
</pre>
<p>监管区域的持久设置可以通过编辑 <code>/etc/conf.d/wireless-regdom</code> 并解除相应区域的注释实现。 <code>wpa_supplicant</code> 也可以在 <code>/etc/wpa_supplicant/wpa_supplicant.conf</code> 中的 <code>country=</code> 行应用监管区域。
</p>
<p>也可以通过添加<a href="../zh-CN/Kernel_module.html#%E9%85%8D%E7%BD%AE%E6%A8%A1%E5%9D%97%E5%8F%82%E6%95%B0" title="Kernel module (简体中文)">模块参数</a>（如 <code>options cfg80211 ieee80211_regdom=EU</code>），配置 <a rel="nofollow" class="external text" href="https://wireless.wiki.kernel.org/en/developers/Documentation/cfg80211">cfg80211</a> 内核模块，从而使用指定的监管区域。然而这是一种<a rel="nofollow" class="external text" href="https://wireless.wiki.kernel.org/en/developers/Regulatory#the_ieee80211_regdom_module_parameter">老旧的监管实现</a>。
</p>
<p>更多信息请阅读 <a rel="nofollow" class="external text" href="https://wireless.wiki.kernel.org/en/developers/Regulatory/">wireless.kernel.org 监管文档</a>。
</p>
<h3>
<span id=".E8.8A.82.E8.83.BD"></span><span class="mw-headline" id="节能">节能</span>
</h3>
<p>见 <a href="../en/Power_management.html#Network_interfaces" class="mw-redirect" title="Power saving">Power saving#Network interfaces</a>。
</p>
<h2>
<span id=".E6.8E.92.E9.94.99_2"></span><span class="mw-headline" id="排错_2">排错</span>
</h2>
<p>这个单元包含一般性的问题快照(troubleshooting）和提示, 问题与设备与固件驱动并没有什么严格意义上的关系。 对于驱动与固件上的问题, 请看 <a href="#%E9%A9%B1%E5%8A%A8%E4%B8%8E%E5%9B%BA%E4%BB%B6%E6%8E%92%E9%94%99">#驱动与固件排错</a>.
</p>
<h3>
<span id=".E4.B8.B4.E6.97.B6.E4.B8.8A.E7.BD.91"></span><span class="mw-headline" id="临时上网">临时上网</span>
</h3>
<p>如果你有问题性的设备并且需要Internet访问, 例如, 下载一些软件或向社区寻求帮助, 你可以通过Android自带的USB共享网络功能。 更多信息详见[[Android tethering#USB tethering]。
</p>
<h3><span class="mw-headline" id="Observing_Logs">Observing Logs</span></h3>
<p>A good first measure to troubleshoot is to analyze the system's logfiles first. In order not to manually parse through them all, it can help to open a second terminal/console window and watch the kernels messages with 
</p>
<pre>$ dmesg -w
</pre>
<p>while performing the action, e.g. the wireless association attempt. 
</p>
<p>When using a tool for network management, the same can be done for systemd with 
</p>
<pre># journalctl -f 
</pre>
<p>Frequently a wireless error is accompanied by a deauthentication with a particular reason code, for example:   
</p>
<pre>wlan0: deauthenticating from XX:XX:XX:XX:XX:XX by local choice (reason=3)
</pre>
<p>Looking up <a rel="nofollow" class="external text" href="http://www.aboutcher.co.uk/2012/07/linux-wifi-deauthenticated-reason-codes/">the reason code</a> might give a first hint. Maybe it also helps you to look at the control message <a rel="nofollow" class="external text" href="https://wireless.wiki.kernel.org/en/developers/documentation/mac80211/auth-assoc-deauth">flowchart</a>, the journal messages will follow it. 
</p>
<p>The individual tools used in this article further provide options for more detailed debugging output, which can be used in a second step of the analysis, if required.
</p>
<h3><span class="mw-headline" id="Failed_to_get_IP_address">Failed to get IP address</span></h3>
<ul><li>If getting an IP address repeatedly fails using the default <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=dhcpcd">dhcpcd</a></span> client, try installing and using <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=dhclient">dhclient</a></span> instead. Do not forget to select <i>dhclient</i> as the primary DHCP client in your <a href="#%E8%87%AA%E5%8A%A8%E8%AE%BE%E7%BD%AE">connection manager</a>!</li></ul>
<ul><li>If you can get an IP address for a wired interface and not for a wireless interface, try disabling the wireless card's <a href="#Power_saving">power saving</a> features (specify <code>off</code> instead of <code>on</code>).</li></ul>
<ul><li>If you get a timeout error due to a <i>waiting for carrier</i> problem, then you might have to set the channel mode to <code>auto</code> for the specific device:</li></ul>
<pre># iwconfig wlan0 channel auto
</pre>
<p>Before changing the channel to auto, make sure your wireless interface is down. After it has successfully changed it, you can bring the interface up again and continue from there.
</p>
<h3><span class="mw-headline" id="Valid_IP_address_but_cannot_resolve_host">Valid IP address but cannot resolve host</span></h3>
<p>If you are on a public wireless network that may have a <a href="https://en.wikipedia.org/wiki/Captive_portal" class="extiw" title="wikipedia:Captive portal">captive portal</a>, make sure to query an HTTP page (not an HTTPS page) from your web browser, as some captive portals only redirect HTTP. If this is not the issue, it may be necessary to remove any custom DNS servers from <a href="../en/Domain_name_resolution.html" class="mw-redirect" title="Resolv.conf">resolv.conf</a>.
</p>
<h3><span class="mw-headline" id="Setting_RTS_and_fragmentation_thresholds">Setting RTS and fragmentation thresholds</span></h3>
<p>Wireless hardware disables RTS and fragmentation by default. These are two different methods of increasing throughput at the expense of bandwidth (i.e. reliability at the expense of speed). These are useful in environments with wireless noise or many adjacent access points.
</p>
<p>Packet fragmentation improves throughput by splitting up packets with size exceeding the fragmentation threshold. The maximum value (2346) effectively disables fragmentation since no packet can exceed it. The minimum value (256) maximizes throughput, but may carry a significant bandwidth cost.
</p>
<pre># iw phy0 set frag 512
</pre>
<p><a href="https://en.wikipedia.org/wiki/IEEE_802.11_RTS/CTS" class="extiw" title="wikipedia:IEEE 802.11 RTS/CTS">RTS</a> improves throughput by performing a handshake with the access point before transmitting packets with size exceeding the RTS threshold. The maximum threshold (2347) effectively disables RTS since no packet can exceed it. The minimum threshold (0) enables RTS for all packets, which is probably excessive for most situations.
</p>
<pre># iw phy0 set rts 500
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> <code>phy0</code> is the name of the wireless device as listed by <code>$ iw phy</code>.</div>
<h3><span class="mw-headline" id="Random_disconnections">Random disconnections</span></h3>
<h4>
<span id="Cause_.231"></span><span class="mw-headline" id="Cause_#1">Cause #1</span>
</h4>
<p>If dmesg says <code>wlan0: deauthenticating from MAC by local choice (reason=3)</code> and you lose your Wi-Fi connection, it is likely that you have a bit too aggressive power-saving on your Wi-Fi card<a rel="nofollow" class="external autonumber" href="http://us.generation-nt.com/answer/gentoo-user-wireless-deauthenticating-by-local-choice-help-204640041.html">[3]</a><sup title="最后检查状态：404">[<a href="https://en.wikipedia.org/wiki/Wikipedia:Link_rot" class="extiw" title="wikipedia:Wikipedia:Link rot">失效链接</a> 2020-08-04 ⓘ]</sup>. Try disabling the wireless card's <a href="#Power_saving">power saving</a> features (specify <code>off</code> instead of <code>on</code>).
</p>
<p>If your card does not support enabling/disabling power save mode, check the BIOS for power management options. Disabling PCI-Express power management in the BIOS of a Lenovo W520 resolved this issue.
</p>
<h4>
<span id="Cause_.232"></span><span class="mw-headline" id="Cause_#2">Cause #2</span>
</h4>
<p>If you are experiencing frequent disconnections and dmesg shows messages such as 
</p>
<p><code>ieee80211 phy0: wlan0: No probe response from AP xx:xx:xx:xx:xx:xx after 500ms, disconnecting</code>
</p>
<p>try changing the channel bandwidth to <code>20MHz</code> through your router's settings page.
</p>
<h4>
<span id="Cause_.233"></span><span class="mw-headline" id="Cause_#3">Cause #3</span>
</h4>
<p>On some laptop models with hardware rfkill switches (e.g., Thinkpad X200 series), due to wear or bad design, the switch (or its connection to the mainboard) might become loose over time resulting in seemingly random hardblocks/disconnects when you accidentally touch the switch or move the laptop.
There is no software solution to this, unless your switch is electrical and the BIOS offers the option to disable the switch.
If your switch is mechanical (most are), there are lots of possible solutions, most of which aim to disable the switch: Soldering the contact point on the mainboard/wifi-card, glueing or blocking the switch, using a screw nut to tighten the switch or removing it altogether.
</p>
<h4>
<span id="Cause_.234"></span><span class="mw-headline" id="Cause_#4">Cause #4</span>
</h4>
<p>Another cause for frequent disconnects or a complete failure to connect may also be a sub-standard router, incomplete settings of the router, or interference by other wireless devices. 
</p>
<p>To troubleshoot, first best try to connect to the router with no authentication. 
</p>
<p>If that works, enable WPA/WPA2 again but choose fixed and/or limited router settings. For example: 
</p>
<ul>
<li>If the router is considerably older than the wireless device you use for the client, test if it works with setting the router to one wireless mode</li>
<li>Disable mixed-mode authentication (e.g. only WPA2 with AES, or TKIP if the router is old)</li>
<li>Try a fixed/free channel rather than "auto" channel (maybe the router next door is old and interfering)</li>
<li>Disable <code>40Mhz</code> channel bandwidth (lower throughput but less likely collisions)</li>
<li>If the router has quality of service settings, check completeness of settings (e.g. Wi-Fi Multimedia (WMM) is part of optional QoS flow control. An erroneous router firmware may advertise its existence although the setting is not enabled)</li>
</ul>
<h2>
<span id=".E9.A9.B1.E5.8A.A8.E4.B8.8E.E5.9B.BA.E4.BB.B6.E6.8E.92.E9.94.99"></span><span class="mw-headline" id="驱动与固件排错">驱动与固件排错</span>
</h2>
<p>This section covers methods and procedures for installing kernel modules and <i>firmware</i> for specific chipsets, that differ from generic method.
</p>
<p>See <a href="../en/Kernel_module.html" class="mw-redirect" title="Kernel modules">Kernel modules</a> for general informations on operations with modules.
</p>
<h3><span class="mw-headline" id="Ralink">Ralink</span></h3>
<h4><span class="mw-headline" id="rt2x00">rt2x00</span></h4>
<p>Ralink 芯片组的统一驱动，代替了 <code>rt2500</code>, <code>rt61</code>, <code>rt73</code> 等。Linux 内核从 2.6.24 开始包含此驱动，但是有些设备可能需要额外固件。可以使用标准 <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=wpa_supplicant">wpa_supplicant</a></span> 和 <code>iwconfig</code> 工具配置。
</p>
<p>有些芯片组需要固件文件，可以安装软件包 <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=linux-firmware">linux-firmware</a></span>。
</p>
<p>参见: <a href="../en/Network_configuration/Wireless.html#rt2x00" class="mw-redirect" title="Using the new rt2x00 beta driver">Using the new rt2x00 beta driver</a>
</p>
<ul>
<li>Since kernel 3.0, rt2x00 includes also these drivers: <code>rt2800pci</code>, <code>rt2800usb</code>.  <code>rt2860sta</code> 被主分支驱动 <code>rt2800pci</code> 替代，<code>rt2870sta</code> 被  <code>rt2800usb</code> 替代。</li>
<li>通过 <code>iwpriv</code> 可以配置很多参数，文档在 <a rel="nofollow" class="external text" href="http://web.ralinktech.com/ralink/Home/Support/Linux.html">Ralink 源代码包</a><sup title="最后检查状态：domain name not resolved">[<a href="https://en.wikipedia.org/wiki/Wikipedia:Link_rot" class="extiw" title="wikipedia:Wikipedia:Link rot">失效链接</a> 2020-08-04 ⓘ]</sup> 中。</li>
</ul>
<h4><span class="mw-headline" id="rt3090">rt3090</span></h4>
<p>For devices which are using the rt3090 chipset it should be possible to use <code>rt2800pci</code> driver, however, is not working with this chipset very well (e.g. sometimes it's not possible to use higher rate than 2Mb/s).
</p>
<p>The best way is to use the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/rt3090-dkms/">rt3090-dkms</a></span><sup><small>AUR</small></sup><sup>[<a href="../en/Help:Procedures.html#Fix_broken_package_links" title="Help:Procedures">断开的链接</a>：package not found]</sup> driver from <a href="../en/Arch_User_Repository.html" class="mw-redirect" title="AUR">AUR</a>. Make sure to <a href="../en/Kernel_module.html#Blacklisting" class="mw-redirect" title="Kernel modules">blacklist</a> the <code>rt2800pci</code> module and setup the <code>rt3090sta</code> module to <a href="../en/Kernel_module.html#Loading" class="mw-redirect" title="Kernel modules">load</a><sup>[<a href="../en/ArchWiki:Requests.html#Broken_section_links" class="mw-redirect" title="ArchWiki:Requests">断开的链接</a>：无效的部分]</sup> at boot.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> This driver also works with rt3062 chipsets. Also the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/rt3090/">rt3090</a></span><sup><small>AUR</small></sup><sup>[<a href="../en/Help:Procedures.html#Fix_broken_package_links" title="Help:Procedures">断开的链接</a>：package not found]</sup> package is not supported by the latest kernel and has been orphaned <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/rt3090-dkms/">rt3090-dkms</a></span><sup><small>AUR</small></sup><sup>[<a href="../en/Help:Procedures.html#Fix_broken_package_links" title="Help:Procedures">断开的链接</a>：package not found]</sup> should be used instead. </div>
<h4><span class="mw-headline" id="rt3290">rt3290</span></h4>
<p>The rt3290 chipset is recognised by the kernel <code>rt2800pci</code> module. However, some users experience problems and reverting to a patched Ralink driver seems to be beneficial in these <a rel="nofollow" class="external text" href="https://bbs.archlinux.org/viewtopic.php?id=161952">cases</a>.
</p>
<h4><span class="mw-headline" id="rt3573">rt3573</span></h4>
<p>2012年新出的芯片组，需要 Ralink 的闭源驱动，有不同的厂商使用他们，参阅<a rel="nofollow" class="external text" href="https://bbs.archlinux.org/viewtopic.php?pid=1164228#p1164228">Belkin N750 示例</a> 。
</p>
<h4><span class="mw-headline" id="rt5572">rt5572</span></h4>
<p>支持 5 Gh 频率，需要 Ralink 的闭源驱动，编译指令位于<a rel="nofollow" class="external text" href="http://bernaerts.dyndns.org/linux/229-ubuntu-precise-dlink-dwa160-revb2">这里</a><sup title="最后检查状态：domain name not resolved">[<a href="https://en.wikipedia.org/wiki/Wikipedia:Link_rot" class="extiw" title="wikipedia:Wikipedia:Link rot">失效链接</a> 2020-08-04 ⓘ]</sup>
</p>
<h3><span class="mw-headline" id="Realtek">Realtek</span></h3>
<h4><span class="mw-headline" id="rtl8192cu">rtl8192cu</span></h4>
<p>The driver is now in the kernel, but many users have reported being unable to make a connection although scanning for networks does work.
</p>
<p>Package <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/8192cu-dkms/">8192cu-dkms</a></span><sup><small>AUR</small></sup> in the AUR includes many patches, try this if it doesn't work fine with the driver in kernel.
</p>
<h4><span class="mw-headline" id="rtl8192e">rtl8192e</span></h4>
<p>The driver is part of the current kernel package. 启动时可能装入模块失败，错误信息是: 
</p>
<pre>rtl819xE:ERR in CPUcheck_firmware_ready()
rtl819xE:ERR in init_firmware() step 2
rtl819xE:ERR!!! _rtl8192_up(): initialization is failed!
r8169 0000:03:00.0: eth0: link down
</pre>
<p>一个暂时的解决方法是卸载模块： 
</p>
<pre># modprobe -r r8192e_pci
</pre>
<p>等一会后，重新装入模块：
</p>
<pre># modprobe r8192e_pci
</pre>
<h4><span class="mw-headline" id="rtl8188eu">rtl8188eu</span></h4>
<p>Some dongles, like the TP-Link TL-WN725N v2 (not sure, but it seems that uses the rtl8179 chipset), use chipsets compatible with this driver. In Linux 3.12 the driver <a rel="nofollow" class="external text" href="http://lwn.net/Articles/564798/">has been moved</a> to kernel staging source tree. For older kernels use out-of-tree driver sources built with <a href="../en/Dynamic_Kernel_Module_Support.html" class="mw-redirect" title="Dkms">dkms</a> - install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/8188eu-dkms/">8188eu-dkms</a></span><sup><small>AUR</small></sup>. At the times of 3.15 kernel rtl8188eu driver is buggy and has many stability issues.
</p>
<h4>
<span id="rtl8723ae.2Frtl8723be"></span><span class="mw-headline" id="rtl8723ae/rtl8723be">rtl8723ae/rtl8723be</span>
</h4>
<p>The new <code>rtl8723ae</code> module is included in the mainline Linux kernel since version 3.6, the <code>rtl8723be</code> module since 3.15.
</p>
<p>Some users may encounter errors with powersave on this card. This is shown with occasional disconnects that are not recognized by high level network managers (<a href="../en/Netctl.html" title="Netctl">netctl</a>, <a href="../en/NetworkManager.html" title="NetworkManager">NetworkManager</a>). This error can be confirmed by running <code>dmesg -w</code> or <code>journalctl -f</code> and looking for output related to powersave and the <code>rtl8723ae</code>/<code>rtl8723be</code> module. If you are having this issue, use the <code>fwlps=0</code> kernel option, which should prevent the WiFi card from automatically sleeping and halting connection.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/modprobe.d/rtl8723ae.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">options rtl8723ae fwlps=0</pre>
<p>or
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/modprobe.d/rtl8723be.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">options rtl8723be fwlps=0</pre>
<p>如果信号质量很差，可能是一个天线不工作，无法运行在自动模式。可以用 <code>ant_sel=1</code> 或 <code>ant_sel=2</code> 内核选项强制选择天线。
</p>
<h4>
<span id="rtl8812au.2Frtl8821au"></span><span class="mw-headline" id="rtl8812au/rtl8821au">rtl8812au/rtl8821au</span>
</h4>
<p>Newer 802.11 a/b/g/n usb adapters, such as the Glam Hobby AC600 (Ourlink) may require rtl8812 or rtl8821 drivers before working.
</p>
<p>The 8812 driver can be found as <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/rtl8812au-dkms-git/">rtl8812au-dkms-git</a></span><sup><small>AUR</small></sup>.
</p>
<pre># modprobe 8812au
</pre>
<p>If that does not work (like for the AC600 dongles), try the 8812/8821 module <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/rtl8812au_rtl8821au-dkms-git/">rtl8812au_rtl8821au-dkms-git</a></span><sup><small>AUR</small></sup><sup>[<a href="../en/Help:Procedures.html#Fix_broken_package_links" title="Help:Procedures">断开的链接</a>：package not found]</sup>.
</p>
<pre># modprobe rtl8812au_rtl8821au
</pre>
<p>These require <a href="../en/Dynamic_Kernel_Module_Support.html" class="mw-redirect" title="DKMS">DKMS</a> so make sure you have your proper kernel headers installed.
</p>
<h3><span class="mw-headline" id="Atheros">Atheros</span></h3>
<pre><a rel="nofollow" class="external text" href="http://madwifi-project.org/">MadWifi team</a> 开发组维护了三个模块：
</pre>
<ul>
<li>
<code>madwifi</code> 是最老的驱动, Arch kernel 从 2.6.39.1 开始已经不再包含。</li>
<li>
<a href="#ath5k"><code>ath5k</code></a> 将逐步替代 <code>ath_pci</code>，有些芯片组使用效果很好，但有些还不能很好工作(后面有介绍)</li>
<li>
<a href="#ath9k"><code>ath9k</code></a> 是新的官方驱动，适用于新 Atheros 硬件。</li>
</ul>
<p>There are some other drivers for some Atheros devices. See <a rel="nofollow" class="external text" href="https://wireless.wiki.kernel.org/en/users/Drivers/Atheros#pci_.2f_pci-e_.2f_ahb_drivers">Linux Wireless documentation</a> for details.
</p>
<h4><span class="mw-headline" id="ath5k">ath5k</span></h4>
<p>参考:
</p>
<ul>
<li><a rel="nofollow" class="external free" href="https://wireless.wiki.kernel.org/en/users/Drivers/ath5k">https://wireless.wiki.kernel.org/en/users/Drivers/ath5k</a></li>
<li><a rel="nofollow" class="external free" href="https://wiki.debian.org/ath5k">https://wiki.debian.org/ath5k</a></li>
</ul>
<p>If you find web pages randomly loading very slow, or if the device is unable to lease an IP address, try to switch from hardware to software encryption by loading the <code>ath5k</code> module with <code>nohwcrypt=1</code> option. See <a href="../en/Kernel_module.html#Setting_module_options" class="mw-redirect" title="Kernel modules">Kernel modules#Setting module options</a> for details.
</p>
<p>有些笔记本的 LED 指示灯有问题，可以：
</p>
<pre>echo none &gt; "/sys/class/leds/ath5k-phy0::tx/trigger"
echo none &gt; "/sys/class/leds/ath5k-phy0::rx/trigger"
</pre>
<h4><span class="mw-headline" id="ath9k">ath9k</span></h4>
<p><code>ath9k</code> 是 Atheros 官方支持的驱动，支持所有带 802.11n 功能的芯片组，最大传输速度 180 Mbps. <a rel="nofollow" class="external text" href="https://wireless.wiki.kernel.org/en/users/Drivers/ath9k">这个页面</a> 列出了所有支持的硬件。
</p>
<p>工作模式：Station, AP and Adhoc.
</p>
<p><code>ath9k</code> 是官方内核的一部分。如果在极个别情况下遇到稳定性问题，可以使用 <a rel="nofollow" class="external text" href="https://wireless.wiki.kernel.org/en/users/Download">compat-wireless</a> 软件包。<a rel="nofollow" class="external text" href="https://lists.ath9k.org/mailman/listinfo/ath9k-devel">ath9k 邮件列表</a><sup title="最后检查状态：SSL error">[<a href="https://en.wikipedia.org/wiki/Wikipedia:Link_rot" class="extiw" title="wikipedia:Wikipedia:Link rot">失效链接</a> 2020-08-04 ⓘ]</sup> 提供了支持和开发的相关信息。
</p>
<p>参考:
</p>
<ul>
<li><a rel="nofollow" class="external free" href="https://wireless.wiki.kernel.org/en/users/Drivers/ath9k">https://wireless.wiki.kernel.org/en/users/Drivers/ath9k</a></li>
<li><a rel="nofollow" class="external free" href="https://wiki.debian.org/ath9k">https://wiki.debian.org/ath9k</a></li>
</ul>
<h4><span class="mw-headline" id="ath9k_2">ath9k</span></h4>
<p>External resources:
</p>
<ul>
<li><a rel="nofollow" class="external free" href="https://wireless.wiki.kernel.org/en/users/drivers/ath9k">https://wireless.wiki.kernel.org/en/users/drivers/ath9k</a></li>
<li><a rel="nofollow" class="external free" href="https://wiki.debian.org/ath9k">https://wiki.debian.org/ath9k</a></li>
</ul>
<p>As of Linux 3.15.1, some users have been experiencing a decrease in bandwidth. In some cases this can fixed by editing <code>/etc/modprobe.d/ath9k.conf</code> and adding the line:
</p>
<pre>options ath9k nohwcrypt=1
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Check with the command lsmod what module(-name) is in use and change it if named otherwise (e.g. ath9k_htc).</div>
<p>In the unlikely event that you have stability issues that trouble you, you could try using the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/backports-patched/">backports-patched</a></span><sup><small>AUR</small></sup> package. An <a rel="nofollow" class="external text" href="https://lists.ath9k.org/mailman/listinfo/ath9k-devel">ath9k mailing list</a><sup title="最后检查状态：SSL error">[<a href="https://en.wikipedia.org/wiki/Wikipedia:Link_rot" class="extiw" title="wikipedia:Wikipedia:Link rot">失效链接</a> 2020-08-04 ⓘ]</sup> exists for support and development related discussions.
</p>
<h5><span class="mw-headline" id="Power_saving">Power saving</span></h5>
<p>Although <a rel="nofollow" class="external text" href="https://wireless.wiki.kernel.org/en/users/Documentation/dynamic-power-save">Linux Wireless</a> says that dynamic power saving is enabled for Atheros ath9k single-chips newer than AR9280, for some devices (e.g. AR9285) <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=powertop">powertop</a></span> might still report that power saving is disabled. In this case enable it manually.
</p>
<p>On some devices (e.g. AR9285), enabling the power saving might result in the following error:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"># iw dev wlan0 set power_save on</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">command failed: Operation not supported (-95)
</pre>
<p>The solution is to set the <code>ps_enable=1</code> option for the <code>ath9k</code> module:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/modprobe.d/ath9k.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">options ath9k ps_enable=1</pre>
<h3><span class="mw-headline" id="Intel">Intel</span></h3>
<h4>
<span id="ipw2100_.E4.B8.8E_ipw2200"></span><span class="mw-headline" id="ipw2100_与_ipw2200">ipw2100 与 ipw2200</span>
</h4>
<p>内核完全支持，但是需要安装额外的固件。根据芯片组型号，<a href="../zh-CN/Pacman.html" title="Pacman (简体中文)">安装</a> 软件包 <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=ipw2100-fw">ipw2100-fw</a></span> 或 <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=ipw2200-fw">ipw2200-fw</a></span>。
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> You may use the following <a href="../en/Kernel_module.html#Setting_module_options" class="mw-redirect" title="Kernel modules">module options</a>:
<ul>
<li>use the <code>rtap_iface=1</code> option to enable the radiotap interface</li>
<li>use the <code>led=1</code> option to enable a front LED indicating when the wireless is connected or not</li>
</ul>
</div>
<h4><span class="mw-headline" id="iwlegacy">iwlegacy</span></h4>
<p><a rel="nofollow" class="external text" href="https://wireless.wiki.kernel.org/en/users/Drivers/iwlegacy">iwlegacy</a> is the wireless driver for Intel's 3945 and 4965 wireless chips. The firmware is included in the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=linux-firmware">linux-firmware</a></span> package.
</p>
<p><a href="../en/Udev.html" title="Udev">udev</a> should load the driver automatically, otherwise load <code>iwl3945</code> or <code>iwl4965</code> manually. See <a href="../en/Kernel_module.html" class="mw-redirect" title="Kernel modules">Kernel modules</a> for details.
</p>
<p>If you have problems connecting to networks in general or your link quality is very poor, try to disable 802.11n:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/modprobe.d/iwl4965.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">options iwl4965 11n_disable=1</pre>
<h4><span class="mw-headline" id="iwlwifi">iwlwifi</span></h4>
<p><a rel="nofollow" class="external text" href="https://wireless.wiki.kernel.org/en/users/Drivers/iwlwifi">iwlwifi</a> is the wireless driver for Intel's current wireless chips, such as 5100AGN, 5300AGN, and 5350AGN. See the <a rel="nofollow" class="external text" href="https://wireless.wiki.kernel.org/en/users/Drivers/iwlwifi#supported_devices">full list of supported devices</a>. The firmware is included in the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=linux-firmware">linux-firmware</a></span> package.
</p>
<p>If you have problems connecting to networks in general or your link quality is very poor, try to disable 802.11n and enable software encryption:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/modprobe.d/iwlwifi.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">options iwlwifi 11n_disable=1
options iwlwifi swcrypto=1</pre>
<p>If you have a problem with slow uplink speed in 802.11n mode, for example 20Mbps, try to enable antenna aggregation:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/modprobe.d/iwlwifi.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">options iwlwifi 11n_disable=8</pre>
<p>Do not be confused with the option name, when the value is set to <code>8</code> it does not disable anything but re-enables transmission antenna aggregation.<a rel="nofollow" class="external autonumber" href="http://forums.gentoo.org/viewtopic-t-996692.html?sid=81bdfa435c089360bdfd9368fe0339a9">[4]</a> <a rel="nofollow" class="external autonumber" href="https://bugzilla.kernel.org/show_bug.cgi?id=81571">[5]</a>
</p>
<p>In case this does not work for you, you may try disabling <a href="../en/Power_management.html#Network_interfaces" class="mw-redirect" title="Power saving">power saving</a> for your wireless adapter.
</p>
<p><a rel="nofollow" class="external text" href="http://ubuntuforums.org/showthread.php?t=2183486&amp;p=12845473#post12845473">Some</a> have never gotten this to work. <a rel="nofollow" class="external text" href="http://ubuntuforums.org/showthread.php?t=2205733&amp;p=12935783#post12935783">Others</a> found salvation by disabling N in their router settings after trying everything. This is known to have be the only solution on more than one occasion. The second link there mentions a 5ghz option that might be worth exploring.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> The <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=linux-lts">linux-lts</a></span>-3.14 kernel may take several minutes to load the firmware and make the wireless card ready for use. The issue is reported to be fixed in <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=linux">linux</a></span>-3.17 kernel.<a rel="nofollow" class="external autonumber" href="https://bbs.archlinux.org/viewtopic.php?id=190757">[6]</a>
</div>
<h5><span class="mw-headline" id="Bluetooth_coexistence">Bluetooth coexistence</span></h5>
<p>If you have difficulty connecting a bluetooth headset and maintaining good downlink speed, try disabling bluetooth coexistence <a rel="nofollow" class="external autonumber" href="https://wireless.wiki.kernel.org/en/users/Drivers/iwlwifi#wifibluetooth_coexistence">[7]</a>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/modprobe.d/iwlwifi.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">options iwlwifi bt_coex_active=0</pre>
<h5>
<span id=".E7.A6.81.E7.94.A8_LED_.E9.97.AA.E7.83.81"></span><span class="mw-headline" id="禁用_LED_闪烁">禁用 LED 闪烁</span>
</h5>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> This works with the <code>iwlegacy</code> and <code>iwlwifi</code> drivers.</div>
<p>默认设置中 LED 闪烁是开着的，有些人不喜欢，可以<a href="../en/Systemd.html#Temporary_files" title="Systemd">systemd-tmpfiles</a><sup>[<a href="../en/ArchWiki:Requests.html#Broken_section_links" class="mw-redirect" title="ArchWiki:Requests">断开的链接</a>：无效的部分]</sup>禁止闪烁：
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/tmpfiles.d/phy0-led.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">w /sys/class/leds/phy0-led/trigger - - - - phy0radio
</pre>
<p>Run <code>systemd-tmpfiles --create phy0-led.conf</code> for the change to take effect, or reboot.
</p>
<p>To see all the possible trigger values for this LED:
</p>
<pre># cat /sys/class/leds/phy0-led/trigger
</pre>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> If you do not have <code>/sys/class/leds/phy0-led</code>, you may try to use the <code>led_mode="1"</code> <a href="../en/Kernel_module.html#Setting_module_options" class="mw-redirect" title="Kernel modules">module option</a>. It should be valid for both <code>iwlwifi</code> and <code>iwlegacy</code> drivers.</div>
<pre># cat /sys/class/leds/phy0-led/trigger
</pre>
<h3><span class="mw-headline" id="Broadcom">Broadcom</span></h3>
<p>See <a href="../en/Broadcom_wireless.html" title="Broadcom wireless">Broadcom wireless</a>.
</p>
<h4><span class="mw-headline" id="Tenda_w322u">Tenda w322u</span></h4>
<p>Treat this Tenda card as an <code>rt2870sta</code> device. See <a href="#rt2x00">#rt2x00</a>.
</p>
<h4><span class="mw-headline" id="orinoco">orinoco</span></h4>
<p>这应当是内核的一部分，是已经被安装的。
</p>
<p>Some Orinoco chipsets are Hermes II. You can use the <code>wlags49_h2_cs</code> driver instead of <code>orinoco_cs</code> and gain WPA support. To use the driver, <a href="../en/Kernel_module.html#Blacklisting" class="mw-redirect" title="Kernel modules">blacklist</a> <code>orinoco_cs</code> first.
</p>
<h4><span class="mw-headline" id="prism54">prism54</span></h4>
<p>The driver <code>p54</code> is included in kernel, but you have to download the appropriate firmware for your card from <a rel="nofollow" class="external text" href="http://linuxwireless.org/en/users/Drivers/p54#firmware">this site</a> and install it into the <code>/usr/lib/firmware</code> directory.
</p>
<p>过时的 <code>prism54</code> 和新内核模块 <code>p54pci</code> 或 <code>p54usb</code> 同时装入造成冲突，使用 <code>lsmod | grep prism54</code> 查看是否装入了过时模块，如果是，那么就 <a href="../en/Kernel_module.html#Blacklisting" class="mw-redirect" title="Blacklisting">屏蔽</a> <code>prism54</code> 并根据上面方法修改固件名称。
</p>
<h4>
<span id="ACX100.2F111"></span><span class="mw-headline" id="ACX100/111">ACX100/111</span>
</h4>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Warning:</strong> The drivers for these devices <a rel="nofollow" class="external text" href="https://mailman.archlinux.org/pipermail/arch-dev-public/2011-June/020669.html">are broken</a> and do not work with newer kernel versions.</div>
<p>Packages: <code>tiacx</code> <code>tiacx-firmware</code> (deleted from official repositories and AUR)
</p>
<p>See <a rel="nofollow" class="external text" href="https://sourceforge.net/apps/mediawiki/acx100/index.php?title=Main_Page">official wiki</a> for details.
</p>
<h4><span class="mw-headline" id="zd1211rw">zd1211rw</span></h4>
<p><a rel="nofollow" class="external text" href="http://zd1211.wiki.sourceforge.net/"><code>zd1211rw</code></a> 是ZyDAS ZD1211 802.11b/g USB WLAN芯片的驱动，最近的版本的内核已经包括了。<a rel="nofollow" class="external text" href="http://zd1211.wiki.sourceforge.net/">zd1211rw</a> <a rel="nofollow" class="external autonumber" href="http://www.linuxwireless.org/en/users/Drivers/zd1211rw/devices%EF%BD%9C%E8%BF%99%E9%87%8C">[8]</a>有被支持的设备列表。 你只需要这样安装固件<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/zd1211-firmware/">zd1211-firmware</a></span><sup><small>AUR</small></sup>。
</p>
<h4><span class="mw-headline" id="hostap_cs">hostap_cs</span></h4>
<p><a rel="nofollow" class="external text" href="http://hostap.epitest.fi/">Host AP</a> is a Linux driver for wireless LAN cards based on Intersil's Prism2/2.5/3 chipset. The driver is included in Linux kernel.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Make sure to <a href="../en/Kernel_module.html#Blacklisting" class="mw-redirect" title="Kernel modules">blacklist</a> the <code>orinico_cs</code> driver, it may cause problems.</div>
<h3>
<span id="Other_drivers.2Fdevices"></span><span class="mw-headline" id="Other_drivers/devices">Other drivers/devices</span>
</h3>
<h4><span class="mw-headline" id="Tenda_w322u_2">Tenda w322u</span></h4>
<p>Treat this Tenda card as an <code>rt2870sta</code> device. See <a href="#rt2x00">#rt2x00</a>.
</p>
<h4><span class="mw-headline" id="orinoco_2">orinoco</span></h4>
<p>This should be a part of the kernel package and be installed already.
</p>
<p>Some Orinoco chipsets are Hermes II. You can use the <code>wlags49_h2_cs</code> driver instead of <code>orinoco_cs</code> and gain WPA support. To use the driver, <a href="../en/Kernel_module.html#Blacklisting" class="mw-redirect" title="Blacklist">blacklist</a> <code>orinoco_cs</code> first.
</p>
<h4><span class="mw-headline" id="prism54_2">prism54</span></h4>
<p>The driver <code>p54</code> is included in kernel, but you have to download the appropriate firmware for your card from <a rel="nofollow" class="external text" href="http://linuxwireless.org/en/users/Drivers/p54#firmware">this site</a> and install it into the <code>/usr/lib/firmware</code> directory.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> There is also older, deprecated driver <code>prism54</code>, which might conflict with the newer driver (<code>p54pci</code> or <code>p54usb</code>). Make sure to <a href="../en/Kernel_module.html#Blacklisting" class="mw-redirect" title="Blacklist">blacklist</a> <code>prism54</code>.</div>
<h4>
<span id="ACX100.2F111_2"></span><span class="mw-headline" id="ACX100/111_2">ACX100/111</span>
</h4>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Warning:</strong> The drivers for these devices <a rel="nofollow" class="external text" href="https://mailman.archlinux.org/pipermail/arch-dev-public/2011-June/020669.html">are broken</a> and do not work with newer kernel versions.</div>
<p>Packages: <code>tiacx</code> <code>tiacx-firmware</code> (deleted from official repositories and AUR)
</p>
<p>See <a rel="nofollow" class="external text" href="https://sourceforge.net/apps/mediawiki/acx100/index.php?title=Main_Page">official wiki</a> for details.
</p>
<h4><span class="mw-headline" id="zd1211rw_2">zd1211rw</span></h4>
<p><a rel="nofollow" class="external text" href="http://zd1211.wiki.sourceforge.net/"><code>zd1211rw</code></a> is a driver for the ZyDAS ZD1211 802.11b/g USB WLAN chipset, and it is included in recent versions of the Linux kernel. See <a rel="nofollow" class="external autonumber" href="http://www.linuxwireless.org/en/users/Drivers/zd1211rw/devices">[9]</a> for a list of supported devices. You only need to <a href="../en/Help:Reading.html#Installation_of_packages" class="mw-redirect" title="Install">install</a> the firmware for the device, provided by the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/zd1211-firmware/">zd1211-firmware</a></span><sup><small>AUR</small></sup> package.
</p>
<h4><span class="mw-headline" id="hostap_cs_2">hostap_cs</span></h4>
<p><a rel="nofollow" class="external text" href="http://hostap.epitest.fi/">Host AP</a> is a Linux driver for wireless LAN cards based on Intersil's Prism2/2.5/3 chipset. The driver is included in Linux kernel.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Make sure to <a href="../en/Kernel_module.html#Blacklisting" class="mw-redirect" title="Blacklist">blacklist</a> the <code>orinico_cs</code> driver, it may cause problems.</div>
<h3><span class="mw-headline" id="ndiswrapper">ndiswrapper</span></h3>
<p>Ndiswrapper并不是一个真正的驱动,但是如果你无法找到适合你的无线网卡驱动的适合, 它就派上用场了.有的时候, 它是非常有用的.为了使用Ndiswrapper, 你需要Windows驱动中的*.inf文件(*.sys文件应该和*.info在同一个目录中)。如果你需要从 <code>*.exe</code> 文件解压缩，你可以使用 <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=cabextract">cabextract</a></span>.
</p>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>警告：</strong> 确保使用合适架构(也就是32/64位)的驱动。</div>
<p>下面是安装ndiswrapper的几个步骤:
</p>
<p><br>	
1. 安装 <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=ndiswrapper-dkms">ndiswrapper-dkms</a></span>
2. 安装驱动到 <code>/etc/ndiswrapper/*</code>
</p>
<pre>ndiswrapper -i filename.inf
</pre>
<p>3. 列出所有的安装的驱动
</p>
<pre>ndiswrapper -l
</pre>
<p>4. 配置文件写到 <code>/etc/modprobe.d/ndiswrapper.conf</code>
</p>
<pre>ndiswrapper -m
depmod -a
</pre>
<p>现在基本上就要安装完ndiswrapper了; 依照 <a href="../en/Kernel_module.html" class="mw-redirect" title="Kernel modules">这里</a>设置启动时加载这个模块。
</p>
<pre>modprobe ndiswrapper
iwconfig
</pre>
<p>如果正常的话, 你应该可以看到wlan0接口了. 如果有问题的话, 你可以阅读：
<a rel="nofollow" class="external text" href="http://ndiswrapper.sourceforge.net/joomla/index.php?/component/option,com_openwiki/Itemid,33/id,installation/">Ndiswrapper installation wiki</a><sup title="最后检查状态：404">[<a href="https://en.wikipedia.org/wiki/Wikipedia:Link_rot" class="extiw" title="wikipedia:Wikipedia:Link rot">失效链接</a> 2020-08-04 ⓘ]</sup>.
<a rel="nofollow" class="external text" href="https://sourceforge.net/p/ndiswrapper/ndiswrapper/HowTos/">ndiswrapper howto</a> 和 <a rel="nofollow" class="external text" href="https://sourceforge.net/p/ndiswrapper/ndiswrapper/FAQ/">ndiswrapper FAQ</a>.
</p>
<h3><span class="mw-headline" id="backports-patched">backports-patched</span></h3>
<p><span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/backports-patched/">backports-patched</a></span><sup><small>AUR</small></sup> 为老内核提供了新内核中无线网卡驱动的移植，项目从 2007 年开始，以前名称是 compat-wireless, 现在重命名为 backports. 如果使用旧内核并且有无线问题，可以试试这个软件包。
</p>
<h2>
<span id=".E5.8F.82.E8.A7.81"></span><span class="mw-headline" id="参见">参见</span>
</h2>
<ul>
<li><a href="../en/Sharing_PPP_Connection.html" title="Sharing PPP Connection">Sharing PPP Connection</a></li>
<li><a href="../en/Ad-hoc_networking.html" title="Ad-hoc networking">Ad-hoc networking</a></li>
</ul>
<h2>
<span id=".E5.85.B6.E4.BB.96.E8.B5.84.E6.BA.90"></span><span class="mw-headline" id="其他资源">其他资源</span>
</h2>
<ul>
<li>
<a rel="nofollow" class="external text" href="https://www.gnome.org/projects/NetworkManager/">NetworkManager</a> - NetworkManager官方网站</li>
<li>
<a rel="nofollow" class="external text" href="http://wicd.sourceforge.net/">WICD</a> -  WICD官方网站</li>
<li><a rel="nofollow" class="external text" href="http://www.hpl.hp.com/personal/Jean_Tourrilhes/Linux/Wireless.html">一个很少能帮忙的废话连篇的howto</a></li>
<li><a rel="nofollow" class="external text" href="http://madwifi-project.org/wiki/UserDocs/FirstTimeHowTo">madwifi的安装方法，如果你在用Arch的方式安装时遇到了问题</a></li>
</ul>
</div>
</div>
<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../zh-CN/Category:Wireless_networking.html" title="Category:Wireless networking (简体中文)">Wireless networking (简体中文)</a></li></ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden categories: <ul>
<li><a href="../zh-CN/Category:Pages_or_sections_flagged_with_Template:Translateme.html" title="Category:Pages or sections flagged with Template:Translateme (简体中文)">Pages or sections flagged with Template:Translateme (简体中文)</a></li>
<li><a href="../en/Category:Pages_with_broken_section_links.html" title="Category:Pages with broken section links">Pages with broken section links</a></li>
<li><a href="../en/Category:Pages_with_dead_links.html" title="Category:Pages with dead links">Pages with dead links</a></li>
<li><a href="../en/Category:Pages_with_broken_package_links.html" title="Category:Pages with broken package links">Pages with broken package links</a></li>
</ul>
</div>
</div>
	</div>
</div>

<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
		<li>Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Network_configuration_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)/Wireless_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)&amp;oldid=648348">https://wiki.archlinux.org/index.php?title=Network_configuration_(简体中文)/Wireless_(简体中文)&amp;oldid=648348</a>"</li>
		<li id="footer-info-lastmod"> This page was last edited on 6 January 2021, at 08:49.</li>
		<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
	<br>
</ul>
	<ul id="footer-places">
		<li id="footer-places-privacy"><a href="../en/ArchWiki:Privacy_policy.html" title="ArchWiki:Privacy policy">Privacy policy</a></li>
		<li id="footer-places-about"><a href="../en/ArchWiki:About.html" title="ArchWiki:About">About ArchWiki</a></li>
		<li id="footer-places-disclaimer"><a href="../en/ArchWiki:General_disclaimer.html" title="ArchWiki:General disclaimer">Disclaimers</a></li>
	</ul>
	<ul id="footer-icons" class="noprint">
		<li id="footer-copyrightico">
	</ul>
	<div style="clear: both;"></div>
</footer>



</body>
</html>
