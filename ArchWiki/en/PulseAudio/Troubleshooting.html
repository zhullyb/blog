<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>PulseAudio/Troubleshooting - ArchWiki</title>
<link rel="stylesheet" href="../../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.35.0">
<meta name="robots" content="noindex,follow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="http://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-PulseAudio_Troubleshooting rootpage-PulseAudio skin-vector action-view skin-vector-legacy">
<div id="content" class="mw-body" role="main" style="margin: 0">
	<a id="top"></a>
	<div id="siteNotice" class="mw-body-content"></div>
	<div class="mw-indicators mw-body-content">
	</div>
	<h1 id="firstHeading" class="firstHeading" lang="en">PulseAudio/Troubleshooting</h1>
	<div id="bodyContent" class="mw-body-content">
		<div id="siteSub" class="noprint">From ArchWiki</div>
		<div id="contentSub"><span class="subpages">&lt; <a href="../../en/PulseAudio.html" title="PulseAudio">PulseAudio</a></span></div>
		<div id="contentSub2"></div>
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="#searchInput">Jump to search</a>
		<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr">
<div class="warningbox">The printable version is no longer supported and may have rendering errors. Please update your browser bookmarks and please use the default browser print function instead.</div>
<div class="mw-parser-output">
<p>See <a href="../../en/PulseAudio.html" title="PulseAudio">PulseAudio</a> for the main article.
</p>
<div id="toc" class="toc" role="navigation" aria-labelledby="mw-toc-heading">
<input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none"><div class="toctitle" lang="en" dir="ltr">
<h2 id="mw-toc-heading">Contents</h2>
<span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span>
</div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Getting_debug_output_from_pulseaudio"><span class="tocnumber">1</span> <span class="toctext">Getting debug output from pulseaudio</span></a></li>
<li class="toclevel-1 tocsection-2">
<a href="#Volume"><span class="tocnumber">2</span> <span class="toctext">Volume</span></a>
<ul>
<li class="toclevel-2 tocsection-3"><a href="#Auto-Mute_Mode"><span class="tocnumber">2.1</span> <span class="toctext">Auto-Mute Mode</span></a></li>
<li class="toclevel-2 tocsection-4"><a href="#Muted_audio_device"><span class="tocnumber">2.2</span> <span class="toctext">Muted audio device</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="#Output_stuck_muted_while_Master_is_toggled"><span class="tocnumber">2.3</span> <span class="toctext">Output stuck muted while Master is toggled</span></a></li>
<li class="toclevel-2 tocsection-6"><a href="#Muted_application"><span class="tocnumber">2.4</span> <span class="toctext">Muted application</span></a></li>
<li class="toclevel-2 tocsection-7"><a href="#Volume_adjustment_does_not_work_properly"><span class="tocnumber">2.5</span> <span class="toctext">Volume adjustment does not work properly</span></a></li>
<li class="toclevel-2 tocsection-8"><a href="#Per-application_volumes_change_when_the_Master_volume_is_adjusted"><span class="tocnumber">2.6</span> <span class="toctext">Per-application volumes change when the Master volume is adjusted</span></a></li>
<li class="toclevel-2 tocsection-9"><a href="#Volume_gets_louder_every_time_a_new_application_is_started"><span class="tocnumber">2.7</span> <span class="toctext">Volume gets louder every time a new application is started</span></a></li>
<li class="toclevel-2 tocsection-10"><a href="#Sound_output_is_only_mono_on_M-Audio_Audiophile_2496_sound_card"><span class="tocnumber">2.8</span> <span class="toctext">Sound output is only mono on M-Audio Audiophile 2496 sound card</span></a></li>
<li class="toclevel-2 tocsection-11"><a href="#No_sound_below_a_volume_cutoff_or_Clipping_on_a_particular_output_device"><span class="tocnumber">2.9</span> <span class="toctext">No sound below a volume cutoff or Clipping on a particular output device</span></a></li>
<li class="toclevel-2 tocsection-12"><a href="#Low_volume_for_internal_microphone"><span class="tocnumber">2.10</span> <span class="toctext">Low volume for internal microphone</span></a></li>
<li class="toclevel-2 tocsection-13"><a href="#Clients_alter_master_output_volume_(a.k.a._volume_jumps_to_100%_after_running_application)"><span class="tocnumber">2.11</span> <span class="toctext">Clients alter master output volume (a.k.a. volume jumps to 100% after running application)</span></a></li>
<li class="toclevel-2 tocsection-14"><a href="#No_sound_after_resume_from_suspend"><span class="tocnumber">2.12</span> <span class="toctext">No sound after resume from suspend</span></a></li>
<li class="toclevel-2 tocsection-15"><a href="#ALSA_channels_mute_when_headphones_are_plugged/unplugged_improperly"><span class="tocnumber">2.13</span> <span class="toctext">ALSA channels mute when headphones are plugged/unplugged improperly</span></a></li>
<li class="toclevel-2 tocsection-16"><a href="#Volume_resets_to_50%_every_few_seconds"><span class="tocnumber">2.14</span> <span class="toctext">Volume resets to 50% every few seconds</span></a></li>
<li class="toclevel-2 tocsection-17"><a href="#Volume_low/too_quiet_on_analog_headphones/speakers"><span class="tocnumber">2.15</span> <span class="toctext">Volume low/too quiet on analog headphones/speakers</span></a></li>
<li class="toclevel-2 tocsection-18"><a href="#Delay_when_changing_volume_using_media_keys"><span class="tocnumber">2.16</span> <span class="toctext">Delay when changing volume using media keys</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-19">
<a href="#Microphone"><span class="tocnumber">3</span> <span class="toctext">Microphone</span></a>
<ul>
<li class="toclevel-2 tocsection-20"><a href="#Microphone_not_detected_by_PulseAudio"><span class="tocnumber">3.1</span> <span class="toctext">Microphone not detected by PulseAudio</span></a></li>
<li class="toclevel-2 tocsection-21"><a href="#PulseAudio_uses_wrong_microphone"><span class="tocnumber">3.2</span> <span class="toctext">PulseAudio uses wrong microphone</span></a></li>
<li class="toclevel-2 tocsection-22"><a href="#No_microphone_on_ThinkPad_T400/T500/T420"><span class="tocnumber">3.3</span> <span class="toctext">No microphone on ThinkPad T400/T500/T420</span></a></li>
<li class="toclevel-2 tocsection-23"><a href="#No_microphone_input_on_Acer_Aspire_One_and_Lenovo_Ideapad_310-15ISK/330-15ARR"><span class="tocnumber">3.4</span> <span class="toctext">No microphone input on Acer Aspire One and Lenovo Ideapad 310-15ISK/330-15ARR</span></a></li>
<li class="toclevel-2 tocsection-24">
<a href="#Static_noise_in_microphone_recording"><span class="tocnumber">3.5</span> <span class="toctext">Static noise in microphone recording</span></a>
<ul>
<li class="toclevel-3 tocsection-25"><a href="#Determine_sound_cards_in_the_system_(1/5)"><span class="tocnumber">3.5.1</span> <span class="toctext">Determine sound cards in the system (1/5)</span></a></li>
<li class="toclevel-3 tocsection-26"><a href="#Determine_sampling_rate_of_the_sound_card_(2/5)"><span class="tocnumber">3.5.2</span> <span class="toctext">Determine sampling rate of the sound card (2/5)</span></a></li>
<li class="toclevel-3 tocsection-27"><a href="#Setting_the_sound_card's_sampling_rate_into_PulseAudio_configuration_(3/5)"><span class="tocnumber">3.5.3</span> <span class="toctext">Setting the sound card's sampling rate into PulseAudio configuration (3/5)</span></a></li>
<li class="toclevel-3 tocsection-28"><a href="#Restart_PulseAudio_to_apply_the_new_settings_(4/5)"><span class="tocnumber">3.5.4</span> <span class="toctext">Restart PulseAudio to apply the new settings (4/5)</span></a></li>
<li class="toclevel-3 tocsection-29"><a href="#Finally_check_by_recording_and_playing_it_back_(5/5)"><span class="tocnumber">3.5.5</span> <span class="toctext">Finally check by recording and playing it back (5/5)</span></a></li>
<li class="toclevel-3 tocsection-30"><a href="#Another_Possible_Cause"><span class="tocnumber">3.5.6</span> <span class="toctext">Another Possible Cause</span></a></li>
<li class="toclevel-3 tocsection-31"><a href="#If_using_a_USB_microphone"><span class="tocnumber">3.5.7</span> <span class="toctext">If using a USB microphone</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-32"><a href="#No_microphone_on_Steam_or_Skype_with_enable-remixing_=_no"><span class="tocnumber">3.6</span> <span class="toctext">No microphone on Steam or Skype with enable-remixing = no</span></a></li>
<li class="toclevel-2 tocsection-33"><a href="#Microphone_distorted_due_to_automatic_adjustment"><span class="tocnumber">3.7</span> <span class="toctext">Microphone distorted due to automatic adjustment</span></a></li>
<li class="toclevel-2 tocsection-34"><a href="#Microphone_crackling_with_Realtek_ALC892"><span class="tocnumber">3.8</span> <span class="toctext">Microphone crackling with Realtek ALC892</span></a></li>
<li class="toclevel-2 tocsection-35"><a href="#Microphone_crackling_with_Azalia_chipsets"><span class="tocnumber">3.9</span> <span class="toctext">Microphone crackling with Azalia chipsets</span></a></li>
<li class="toclevel-2 tocsection-36"><a href="#Echo_test"><span class="tocnumber">3.10</span> <span class="toctext">Echo test</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-37">
<a href="#Audio_quality"><span class="tocnumber">4</span> <span class="toctext">Audio quality</span></a>
<ul>
<li class="toclevel-2 tocsection-38">
<a href="#Enable_Echo/Noise-Cancellation"><span class="tocnumber">4.1</span> <span class="toctext">Enable Echo/Noise-Cancellation</span></a>
<ul>
<li class="toclevel-3 tocsection-39"><a href="#Possible_'aec_args'_for_'aec_method=webrtc'"><span class="tocnumber">4.1.1</span> <span class="toctext">Possible 'aec_args' for 'aec_method=webrtc'</span></a></li>
<li class="toclevel-3 tocsection-40"><a href="#Disable_audio_post_processing_in_certain_applications"><span class="tocnumber">4.1.2</span> <span class="toctext">Disable audio post processing in certain applications</span></a></li>
<li class="toclevel-3 tocsection-41"><a href="#Script_for_reloading_module-echo-cancel"><span class="tocnumber">4.1.3</span> <span class="toctext">Script for reloading module-echo-cancel</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-42"><a href="#Recurrent_neural_network_noise_suppression_(RNNoise)"><span class="tocnumber">4.2</span> <span class="toctext">Recurrent neural network noise suppression (RNNoise)</span></a></li>
<li class="toclevel-2 tocsection-43"><a href="#Glitches,_skips_or_crackling"><span class="tocnumber">4.3</span> <span class="toctext">Glitches, skips or crackling</span></a></li>
<li class="toclevel-2 tocsection-44"><a href="#Static_noise_when_using_headphones"><span class="tocnumber">4.4</span> <span class="toctext">Static noise when using headphones</span></a></li>
<li class="toclevel-2 tocsection-45">
<a href="#Setting_the_default_fragment_number_and_buffer_size_in_PulseAudio"><span class="tocnumber">4.5</span> <span class="toctext">Setting the default fragment number and buffer size in PulseAudio</span></a>
<ul>
<li class="toclevel-3 tocsection-46"><a href="#Disabling_timer-based_scheduling_(0/4)"><span class="tocnumber">4.5.1</span> <span class="toctext">Disabling timer-based scheduling (0/4)</span></a></li>
<li class="toclevel-3 tocsection-47"><a href="#Decide_on_audio_device_parameters_(1/4)"><span class="tocnumber">4.5.2</span> <span class="toctext">Decide on audio device parameters (1/4)</span></a></li>
<li class="toclevel-3 tocsection-48"><a href="#Modify_PulseAudio's_configuration_file_(2/4)"><span class="tocnumber">4.5.3</span> <span class="toctext">Modify PulseAudio's configuration file (2/4)</span></a></li>
<li class="toclevel-3 tocsection-49"><a href="#Restart_the_PulseAudio_daemon_(3/4)"><span class="tocnumber">4.5.4</span> <span class="toctext">Restart the PulseAudio daemon (3/4)</span></a></li>
<li class="toclevel-3 tocsection-50"><a href="#See_if_it_helps_(4/4)"><span class="tocnumber">4.5.5</span> <span class="toctext">See if it helps (4/4)</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-51"><a href="#Choppy_sound_with_analog_surround_sound_setup"><span class="tocnumber">4.6</span> <span class="toctext">Choppy sound with analog surround sound setup</span></a></li>
<li class="toclevel-2 tocsection-52"><a href="#Laggy_sound"><span class="tocnumber">4.7</span> <span class="toctext">Laggy sound</span></a></li>
<li class="toclevel-2 tocsection-53"><a href="#Choppy/distorted_sound"><span class="tocnumber">4.8</span> <span class="toctext">Choppy/distorted sound</span></a></li>
<li class="toclevel-2 tocsection-54"><a href="#Sound_stuttering_when_streaming_over_network"><span class="tocnumber">4.9</span> <span class="toctext">Sound stuttering when streaming over network</span></a></li>
<li class="toclevel-2 tocsection-55"><a href="#Pops_when_starting_and_stopping_playback"><span class="tocnumber">4.10</span> <span class="toctext">Pops when starting and stopping playback</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-56">
<a href="#Hardware_and_Cards"><span class="tocnumber">5</span> <span class="toctext">Hardware and Cards</span></a>
<ul>
<li class="toclevel-2 tocsection-57"><a href="#No_HDMI_sound_output_after_some_time_with_the_monitor_turned_off"><span class="tocnumber">5.1</span> <span class="toctext">No HDMI sound output after some time with the monitor turned off</span></a></li>
<li class="toclevel-2 tocsection-58"><a href="#No_HDMI_sound_using_a_headless_server"><span class="tocnumber">5.2</span> <span class="toctext">No HDMI sound using a headless server</span></a></li>
<li class="toclevel-2 tocsection-59"><a href="#No_cards"><span class="tocnumber">5.3</span> <span class="toctext">No cards</span></a></li>
<li class="toclevel-2 tocsection-60"><a href="#Starting_an_application_interrupts_other_app's_sound"><span class="tocnumber">5.4</span> <span class="toctext">Starting an application interrupts other app's sound</span></a></li>
<li class="toclevel-2 tocsection-61"><a href="#The_only_device_shown_is_%22dummy_output%22_or_newly_connected_cards_are_not_detected"><span class="tocnumber">5.5</span> <span class="toctext">The only device shown is "dummy output" or newly connected cards are not detected</span></a></li>
<li class="toclevel-2 tocsection-62"><a href="#No_HDMI_5/7.1_Selection_for_Device"><span class="tocnumber">5.6</span> <span class="toctext">No HDMI 5/7.1 Selection for Device</span></a></li>
<li class="toclevel-2 tocsection-63"><a href="#Failed_to_create_sink_input:_sink_is_suspended"><span class="tocnumber">5.7</span> <span class="toctext">Failed to create sink input: sink is suspended</span></a></li>
<li class="toclevel-2 tocsection-64"><a href="#Simultaneous_output_to_multiple_sound_cards_/_devices"><span class="tocnumber">5.8</span> <span class="toctext">Simultaneous output to multiple sound cards / devices</span></a></li>
<li class="toclevel-2 tocsection-65"><a href="#Simultaneous_output_to_multiple_sinks_on_the_same_sound_card_not_working"><span class="tocnumber">5.9</span> <span class="toctext">Simultaneous output to multiple sinks on the same sound card not working</span></a></li>
<li class="toclevel-2 tocsection-66"><a href="#Some_profiles_like_SPDIF_are_not_enabled_by_default_on_the_card"><span class="tocnumber">5.10</span> <span class="toctext">Some profiles like SPDIF are not enabled by default on the card</span></a></li>
<li class="toclevel-2 tocsection-67"><a href="#Only_S/PDIF_output_available"><span class="tocnumber">5.11</span> <span class="toctext">Only S/PDIF output available</span></a></li>
<li class="toclevel-2 tocsection-68"><a href="#Crackling_or_popping_USB_sound_issues"><span class="tocnumber">5.12</span> <span class="toctext">Crackling or popping USB sound issues</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-69">
<a href="#Bluetooth"><span class="tocnumber">6</span> <span class="toctext">Bluetooth</span></a>
<ul>
<li class="toclevel-2 tocsection-70"><a href="#Disable_Bluetooth_support"><span class="tocnumber">6.1</span> <span class="toctext">Disable Bluetooth support</span></a></li>
<li class="toclevel-2 tocsection-71"><a href="#Bluetooth_headset_replay_problems"><span class="tocnumber">6.2</span> <span class="toctext">Bluetooth headset replay problems</span></a></li>
<li class="toclevel-2 tocsection-72"><a href="#Automatically_switch_to_Bluetooth_or_USB_headset"><span class="tocnumber">6.3</span> <span class="toctext">Automatically switch to Bluetooth or USB headset</span></a></li>
<li class="toclevel-2 tocsection-73"><a href="#My_Bluetooth_device_is_paired_but_does_not_play_any_sound"><span class="tocnumber">6.4</span> <span class="toctext">My Bluetooth device is paired but does not play any sound</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-74">
<a href="#Applications"><span class="tocnumber">7</span> <span class="toctext">Applications</span></a>
<ul>
<li class="toclevel-2 tocsection-75"><a href="#Flash_content"><span class="tocnumber">7.1</span> <span class="toctext">Flash content</span></a></li>
<li class="toclevel-2 tocsection-76"><a href="#Permission_errors_bug"><span class="tocnumber">7.2</span> <span class="toctext">Permission errors bug</span></a></li>
<li class="toclevel-2 tocsection-77"><a href="#Audacity"><span class="tocnumber">7.3</span> <span class="toctext">Audacity</span></a></li>
<li class="toclevel-2 tocsection-78"><a href="#OpenAL"><span class="tocnumber">7.4</span> <span class="toctext">OpenAL</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-79">
<a href="#Other_Issues"><span class="tocnumber">8</span> <span class="toctext">Other Issues</span></a>
<ul>
<li class="toclevel-2 tocsection-80"><a href="#Bad_configuration_files"><span class="tocnumber">8.1</span> <span class="toctext">Bad configuration files</span></a></li>
<li class="toclevel-2 tocsection-81"><a href="#Cannot_update_configuration_of_sound_device_in_pavucontrol"><span class="tocnumber">8.2</span> <span class="toctext">Cannot update configuration of sound device in pavucontrol</span></a></li>
<li class="toclevel-2 tocsection-82"><a href="#Failed_to_create_sink_input:_sink_is_suspended_2"><span class="tocnumber">8.3</span> <span class="toctext">Failed to create sink input: sink is suspended</span></a></li>
<li class="toclevel-2 tocsection-83"><a href="#Pulse_overwrites_ALSA_settings"><span class="tocnumber">8.4</span> <span class="toctext">Pulse overwrites ALSA settings</span></a></li>
<li class="toclevel-2 tocsection-84">
<a href="#Daemon_startup_failed"><span class="tocnumber">8.5</span> <span class="toctext">Daemon startup failed</span></a>
<ul>
<li class="toclevel-3 tocsection-85"><a href="#Outputs_by_PulseAudio_error_status_check_utilities"><span class="tocnumber">8.5.1</span> <span class="toctext">Outputs by PulseAudio error status check utilities</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-86"><a href="#Daemon_already_running"><span class="tocnumber">8.6</span> <span class="toctext">Daemon already running</span></a></li>
<li class="toclevel-2 tocsection-87"><a href="#Subwoofer_stops_working_after_end_of_every_song"><span class="tocnumber">8.7</span> <span class="toctext">Subwoofer stops working after end of every song</span></a></li>
<li class="toclevel-2 tocsection-88"><a href="#Unable_to_select_surround_configuration_other_than_%22Surround_4.0%22"><span class="tocnumber">8.8</span> <span class="toctext">Unable to select surround configuration other than "Surround 4.0"</span></a></li>
<li class="toclevel-2 tocsection-89"><a href="#Realtime_scheduling"><span class="tocnumber">8.9</span> <span class="toctext">Realtime scheduling</span></a></li>
<li class="toclevel-2 tocsection-90"><a href="#pactl_%22invalid_option%22_error_with_negative_percentage_arguments"><span class="tocnumber">8.10</span> <span class="toctext">pactl "invalid option" error with negative percentage arguments</span></a></li>
<li class="toclevel-2 tocsection-91"><a href="#Fallback_device_is_not_respected"><span class="tocnumber">8.11</span> <span class="toctext">Fallback device is not respected</span></a></li>
<li class="toclevel-2 tocsection-92"><a href="#RTP/UDP_packet_flood"><span class="tocnumber">8.12</span> <span class="toctext">RTP/UDP packet flood</span></a></li>
<li class="toclevel-2 tocsection-93"><a href="#New_audio_source_streams_auto-select_to_%22blank%22_stream_instead_of_BT_headphones"><span class="tocnumber">8.13</span> <span class="toctext">New audio source streams auto-select to "blank" stream instead of BT headphones</span></a></li>
</ul>
</li>
</ul>
</div>

<h2><span class="mw-headline" id="Getting_debug_output_from_pulseaudio">Getting debug output from pulseaudio</span></h2>
<p>It can be useful to stop the daemon and start it in a terminal during debugging:
</p>
<pre>$ systemctl --user stop pulseaudio.socket
$ systemctl --user stop pulseaudio.service
$ pulseaudio -v
</pre>
<p>Add v's to increase verbosity.
</p>
<h2><span class="mw-headline" id="Volume">Volume</span></h2>
<p>Here you will find some hints on volume issues and why you may not hear anything.
</p>
<h3><span class="mw-headline" id="Auto-Mute_Mode">Auto-Mute Mode</span></h3>
<p><i>Auto-Mute Mode</i> is a configurable setting from <code>amixer</code>. For more information, see <a href="../../en/Advanced_Linux_Sound_Architecture.html#Disabling_auto_mute_on_startup" class="mw-redirect" title="ALSA">ALSA#Disabling auto mute on startup</a>.
</p>
<h3><span class="mw-headline" id="Muted_audio_device">Muted audio device</span></h3>
<p>If one experiences no audio output via any means while using <a href="../../en/Advanced_Linux_Sound_Architecture.html" class="mw-redirect" title="ALSA">ALSA</a>, attempt to unmute the sound card. To do this, launch <code>alsamixer</code> and make sure each column has a green <code>00</code> under it (this can be toggled by pressing <code>m</code>):
</p>
<pre>$ alsamixer -c 0
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> alsamixer will not tell you which output device is set as the default. One possible cause of no sound after install is that PulseAudio detects the wrong output device as a default. Install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=pavucontrol">pavucontrol</a></span> and check if there is any output on the pavucontrol panel when playing a <i>.wav</i> file.</div>
<h3><span class="mw-headline" id="Output_stuck_muted_while_Master_is_toggled">Output stuck muted while Master is toggled</span></h3>
<p>In setups with multiple outputs (e.g. 'Headphone' and 'Speaker') using plain amixer to toggle Master can trigger PulseAudio to mute the active output too, but it does not necessarily unmute it when Master is toggled back to be unmuted. <a rel="nofollow" class="external autonumber" href="https://lists.freedesktop.org/archives/pulseaudio-discuss/2015-December/025062.html">[1]</a> To resolve this, amixer must have the device flag set to 'pulse':
</p>
<pre>$ amixer -D pulse sset Master toggle
</pre>
<p>This will cause amixer to ask PulseAudio to do the toggling rather than toggling it directly.
Because of this, PulseAudio will correctly unmute Master as well as any applicable output.
</p>
<h3><span class="mw-headline" id="Muted_application">Muted application</span></h3>
<p>If a specific application is muted or low while all else seems to be in order, it may be due to individual <code>sink-input</code> settings. With the offending application playing audio, run:
</p>
<pre>$ pacmd list-sink-inputs
</pre>
<p>Find and make note of the <code>index</code> of the corresponding <code>sink input</code>. The <code>properties:</code> <code>application.name</code> and <code>application.process.binary</code>, among others, should help here. Ensure sane settings are present, specifically those of <code>muted</code> and <code>volume</code>.
If the sink is muted, it can be unmuted by:
</p>
<pre>$ pacmd set-sink-input-mute &lt;index&gt; false
</pre>
<p>If the volume needs adjusting, it can be set to 100% by:
</p>
<pre>$ pacmd set-sink-input-volume &lt;index&gt; 0x10000
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> If <code>pacmd</code> reports <code>0 sink input(s)</code>, double-check that the application is playing audio. If it is still absent, verify that other applications show up as sink inputs.</div>
<h3><span class="mw-headline" id="Volume_adjustment_does_not_work_properly">Volume adjustment does not work properly</span></h3>
<p>Check <code>/usr/share/alsa-card-profile/mixer/paths/analog-output.conf.common</code>.
</p>
<p>If the volume does not appear to increment/decrement properly using <code>alsamixer</code> or <code>amixer</code>, it may be due to PulseAudio having a larger number of increments (65537 to be exact). Try using larger values when changing volume (e.g. <code>amixer set Master 655+</code>).
</p>
<h3><span class="mw-headline" id="Per-application_volumes_change_when_the_Master_volume_is_adjusted">Per-application volumes change when the Master volume is adjusted</span></h3>
<p>This is because PulseAudio uses flat volumes by default, instead of relative volumes, relative to an absolute master volume. If this is found to be inconvenient, asinine, or otherwise undesireable, relative volumes can be enabled by disabling flat volumes in the PulseAudio daemon's configuration file:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/pulse/daemon.conf or ~/.config/pulse/daemon.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">flat-volumes = no</pre>
<p>and then restarting PulseAudio by executing
</p>
<pre>$ pulseaudio -k
$ pulseaudio --start
</pre>
<h3><span class="mw-headline" id="Volume_gets_louder_every_time_a_new_application_is_started">Volume gets louder every time a new application is started</span></h3>
<p>Per default, it seems as if changing the volume in an application sets the global system volume to that level instead of only affecting the respective application. Applications setting their volume on startup will therefore cause the system volume to "jump".
</p>
<p>Fix this by disabling flat volumes, as demonstrated in the previous section. When Pulse comes back after a few seconds, applications will not alter the global system volume anymore but have their own volume level again.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> A previously installed and removed pulseaudio-equalizer may leave behind remnants of the setup in <code>~/.config/pulse/default.pa</code> or <code>~/.pulse/default.pa</code> which can also cause maximized volume trouble. Comment that out as needed.</div>
<h3><span class="mw-headline" id="Sound_output_is_only_mono_on_M-Audio_Audiophile_2496_sound_card">Sound output is only mono on M-Audio Audiophile 2496 sound card</span></h3>
<p>Add the following:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/pulseaudio/default.pa</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">load-module module-alsa-sink sink_name=delta_out device=hw:M2496 format=s24le channels=10 channel_map=left,right,aux0,aux1,aux2,aux3,aux4,aux5,aux6,aux7
load-module module-alsa-source source_name=delta_in device=hw:M2496 format=s24le channels=12 channel_map=left,right,aux0,aux1,aux2,aux3,aux4,aux5,aux6,aux7,aux8,aux9
set-default-sink delta_out
set-default-source delta_in</pre>
<h3><span class="mw-headline" id="No_sound_below_a_volume_cutoff_or_Clipping_on_a_particular_output_device">No sound below a volume cutoff or Clipping on a particular output device</span></h3>
<p>Known issue (will not fix): <a rel="nofollow" class="external free" href="https://bugs.launchpad.net/ubuntu/+source/pulseaudio/+bug/223133">https://bugs.launchpad.net/ubuntu/+source/pulseaudio/+bug/223133</a>
</p>
<p>If sound does not play when PulseAudio's volume is set below a certain level, or if you hear clipping on output even at low volume (including bluetooth devices), try setting <code>ignore_dB=1</code> in <code>/etc/pulse/default.pa</code>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/pulse/default.pa</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">load-module module-udev-detect ignore_dB=1</pre>
<p>However, be aware that it may cause another bug preventing PulseAudio to unmute speakers when headphones or other audio devices are unplugged.
</p>
<h3><span class="mw-headline" id="Low_volume_for_internal_microphone">Low volume for internal microphone</span></h3>
<p>If you experience low volume on internal notebook microphone, try setting:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/pulse/default.pa</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">set-source-volume 1 300000</pre>
<h3>
<span id="Clients_alter_master_output_volume_.28a.k.a._volume_jumps_to_100.25_after_running_application.29"></span><span class="mw-headline" id="Clients_alter_master_output_volume_(a.k.a._volume_jumps_to_100%_after_running_application)">Clients alter master output volume (a.k.a. volume jumps to 100% after running application)</span>
</h3>
<p>If changing the volume in specific applications or simply running an application changes the master output volume this is likely due to flat volumes mode of pulseaudio. Before disabling it, KDE users should try lowering their system notifications volume in <i>System Settings -&gt; Application and System Notifications -&gt; Manage Notifications</i> under the <i>Player Settings</i> tab to something reasonable. Changing the <i>Event Sounds</i> volume in KMix or another volume mixer application will not help here. This should make the flat-volumes mode work out as intended, if it does not work, some other application is likely requesting 100% volume when its playing something. If all else fails, you can try to disable flat-volumes:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/pulse/daemon.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">flat-volumes = no</pre>
<p>Then restart PulseAudio daemon:
</p>
<pre># pulseaudio -k
# pulseaudio --start
</pre>
<h3><span class="mw-headline" id="No_sound_after_resume_from_suspend">No sound after resume from suspend</span></h3>
<p>If audio generally works, but stops after resume from suspend, try "reloading" PulseAudio by executing:
</p>
<pre>$ /usr/bin/pasuspender /bin/true
</pre>
<p>This is better than completely killing and restarting it (<code>pulseaudio -k</code> followed by <code>pulseaudio --start</code>), because it does not break already running applications.
</p>
<p>If the above fixes your problem, you may wish to automate it, by creating a systemd service file.
</p>
<p>1. Create the template service file in <code>/etc/systemd/system/resume-fix-pulseaudio@.service</code>:
</p>
<pre>[Unit]
Description=Fix PulseAudio after resume from suspend
After=suspend.target

[Service]
User=%I
Type=oneshot
Environment="XDG_RUNTIME_DIR=/run/user/%U"
ExecStart=/usr/bin/pasuspender /bin/true

[Install]
WantedBy=suspend.target
</pre>
<p>2. Enable it for your user account
</p>
<pre># systemctl enable resume-fix-pulseaudio@<i>YOUR_USERNAME_HERE</i>.service
</pre>
<p>3. Reload systemd
</p>
<pre># systemctl --system daemon-reload
</pre>
<h3>
<span id="ALSA_channels_mute_when_headphones_are_plugged.2Funplugged_improperly"></span><span class="mw-headline" id="ALSA_channels_mute_when_headphones_are_plugged/unplugged_improperly">ALSA channels mute when headphones are plugged/unplugged improperly</span>
</h3>
<p>If when you unplug your headphones or plug them in the audio remains muted in alsamixer on the wrong channel due to it being set to 0%, you may be able to fix it by opening <code>/etc/pulse/default.pa</code> and commenting out the line:
</p>
<pre>load-module module-switch-on-port-available
</pre>
<p>Then restart the pulseaudio backend:
</p>
<pre>$ systemctl --user restart pulseaudio
</pre>
<h3>
<span id="Volume_resets_to_50.25_every_few_seconds"></span><span class="mw-headline" id="Volume_resets_to_50%_every_few_seconds">Volume resets to 50% every few seconds</span>
</h3>
<p>Install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=alsa-tools">alsa-tools</a></span> and use:
</p>
<pre>$ hdajackretask
</pre>
<p>Set "Not Connected" to everything but the ports you are using. It seems the other unused audio ports on the motherboard interfere with the used ones.
Then if you want use the Boot Override to save this change between reboots. There is a possibility it is the Front Green Headphone that is causing the bug, if you need it override the Front Microphone to Headphone and the Front Green Headphone to "Not Connected" and use the Front Microphone port as your headphone port.
</p>
<p>More info about this problem: <a rel="nofollow" class="external autonumber" href="https://bugs.launchpad.net/ubuntu/+source/pulseaudio/+bug/1585084">[2]</a>.
</p>
<h3>
<span id="Volume_low.2Ftoo_quiet_on_analog_headphones.2Fspeakers"></span><span class="mw-headline" id="Volume_low/too_quiet_on_analog_headphones/speakers">Volume low/too quiet on analog headphones/speakers</span>
</h3>
<p>If you added the <code>ignore_dB=1</code> option earlier to the <code>load-module module-udev-detect</code> line in your <code>/etc/pulse/default.pa</code>, try removing it.
</p>
<h3><span class="mw-headline" id="Delay_when_changing_volume_using_media_keys">Delay when changing volume using media keys</span></h3>
<p>Edit <code>/etc/pulse/daemon.conf</code> and set <code>enable-deferred-volume = no</code>. This might cause some sound crackles when changing volume, in that case you might want to leave that option enabled and tweak the <code>deferred-volume-safety-margin-usec</code> and <code>deferred-volume-extra-delay-usec</code> options instead.
</p>
<h2><span class="mw-headline" id="Microphone">Microphone</span></h2>
<h3><span class="mw-headline" id="Microphone_not_detected_by_PulseAudio">Microphone not detected by PulseAudio</span></h3>
<p>Determine the card and device number of your mic:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ arecord -l</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">**** List of CAPTURE Hardware Devices ****
card 0: PCH [HDA Intel PCH], device 0: ALC269VC Analog [ALC269VC Analog]
Subdevices: 1/1
Subdevice #0: subdevice #0
</pre>
<p>In <code>hw:<i>CARD</i>,<i>DEVICE</i></code> notation, you would specify the above device as <code>hw:0,0</code>.
</p>
<p>Then, edit <code>/etc/pulse/default.pa</code> and insert a <code>load-module</code> line specifying your device as follows:
</p>
<pre>load-module module-alsa-source device=hw:0,0
# the line above should be somewhere before the line below
.ifexists module-udev-detect.so
</pre>
<p>Finally, restart pulseaudio to apply the new settings:
</p>
<pre>$ pulseaudio -k ; pulseaudio -D
</pre>
<p>If everything worked correctly, you should now see your mic show up when running <code>pavucontrol</code> (under the <code>Input Devices</code> tab).
</p>
<h3><span class="mw-headline" id="PulseAudio_uses_wrong_microphone">PulseAudio uses wrong microphone</span></h3>
<p>If PulseAudio uses the wrong microphone, and changing the Input Device with Pavucontrol did not help, take a look at alsamixer. It seems that Pavucontrol does not always set the input source correctly.
</p>
<pre>$ alsamixer
</pre>
<p>Press <code>F6</code> and choose your sound card, e.g. HDA Intel. Now press <code>F5</code> to display all items. Try to find the item: <code>Input Source</code>. With the up/down arrow keys you are able to change the input source.
</p>
<p>Now try if the correct microphone is used for recording.
</p>
<h3>
<span id="No_microphone_on_ThinkPad_T400.2FT500.2FT420"></span><span class="mw-headline" id="No_microphone_on_ThinkPad_T400/T500/T420">No microphone on ThinkPad T400/T500/T420</span>
</h3>
<p>Run:
</p>
<pre>$ alsamixer -c 0
</pre>
<p>Unmute and maximize the volume of the "Internal Mic".
</p>
<p>Once you see the device with:
</p>
<pre>$ arecord -l
</pre>
<p>you might still need to adjust the settings. The microphone and the audio jack are duplexed. Set the configuration of the internal audio in pavucontrol to <i>Analog Stereo Duplex</i>.
</p>
<h3>
<span id="No_microphone_input_on_Acer_Aspire_One_and_Lenovo_Ideapad_310-15ISK.2F330-15ARR"></span><span class="mw-headline" id="No_microphone_input_on_Acer_Aspire_One_and_Lenovo_Ideapad_310-15ISK/330-15ARR">No microphone input on Acer Aspire One and Lenovo Ideapad 310-15ISK/330-15ARR</span>
</h3>
<p>Install pavucontrol, unlink the microphone channels and turn down the left one to 0.
</p>
<p>Some applications (e.g. chromium) can change microphone levels causing the same issue, a workaround is to <a href="#Another_Possible_Cause">remap stereo input to mono</a> and use the remapped device as default.
</p>
<h3><span class="mw-headline" id="Static_noise_in_microphone_recording">Static noise in microphone recording</span></h3>
<p>If we are getting static noise in Skype, gnome-sound-recorder, arecord, etc.'s recordings, then the sound card sample rate is incorrect. That is why there is static noise in Linux microphone recordings. To fix this, we need to set the sampling rate in <code>/etc/pulse/daemon.conf</code> for the sound hardware.
</p>
<p>In addition to the guide below, since <a rel="nofollow" class="external text" href="https://www.freedesktop.org/wiki/Software/PulseAudio/Notes/11.0/">PulseAudio 11</a> it is possible to set <code>avoid-resampling = yes</code> in <a href="../../en/PulseAudio.html#daemon.conf" title="PulseAudio">daemon.conf</a>.
</p>
<h4>
<span id="Determine_sound_cards_in_the_system_.281.2F5.29"></span><span class="mw-headline" id="Determine_sound_cards_in_the_system_(1/5)">Determine sound cards in the system (1/5)</span>
</h4>
<p>This requires <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=alsa-utils">alsa-utils</a></span> and related packages to be installed:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ arecord --list-devices</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">**** List of CAPTURE Hardware Devices ****
card 0: Intel [HDA Intel], device 0: ALC888 Analog [ALC888 Analog]
  Subdevices: 1/1
  Subdevice #0: subdevice #0
card 0: Intel [HDA Intel], device 2: ALC888 Analog [ALC888 Analog]
  Subdevices: 1/1
  Subdevice #0: subdevice #0
</pre>
<p>The sound card is <code>hw:<i>x</i>,<i>y</i></code> where <code><i>x</i></code> is the card number and <code><i>y</i></code> is the device number. In the above example, it is <code>hw:0,0</code>.
</p>
<h4>
<span id="Determine_sampling_rate_of_the_sound_card_.282.2F5.29"></span><span class="mw-headline" id="Determine_sampling_rate_of_the_sound_card_(2/5)">Determine sampling rate of the sound card (2/5)</span>
</h4>
<p>We aim to find the highest sample rate supported by the <code>hw:0,0</code> sound card using a <i>trial-and-error</i> procedure starting from a low value. When the top value is reached, we got a warning message:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">arecord -f dat -r 60000 -D hw:0,0 -d 5 test.wav</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">"Recording WAVE 'test.wav' : Signed 16 bit Little Endian, Rate 60000 Hz, Stereo
Warning: rate is not accurate (requested = 60000Hz, <b>got = 44100Hz</b>)
please, try the plug plugin</pre>
<p>observe, the <code>got = 44100Hz</code>. This is the maximum sampling rate of our card.
</p>
<h4>
<span id="Setting_the_sound_card.27s_sampling_rate_into_PulseAudio_configuration_.283.2F5.29"></span><span class="mw-headline" id="Setting_the_sound_card's_sampling_rate_into_PulseAudio_configuration_(3/5)">Setting the sound card's sampling rate into PulseAudio configuration (3/5)</span>
</h4>
<p>The default sampling rate in PulseAudio:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ grep "default-sample-rate" /etc/pulse/daemon.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">; default-sample-rate = 48000</pre>
<p><code>48000</code> is disabled and needs to be changed to <code>44100</code>:
</p>
<pre># sed 's/; default-sample-rate = 48000/default-sample-rate = 44100/g' -i /etc/pulse/daemon.conf
</pre>
<h4>
<span id="Restart_PulseAudio_to_apply_the_new_settings_.284.2F5.29"></span><span class="mw-headline" id="Restart_PulseAudio_to_apply_the_new_settings_(4/5)">Restart PulseAudio to apply the new settings (4/5)</span>
</h4>
<pre>$ pulseaudio -k
$ pulseaudio --start
</pre>
<h4>
<span id="Finally_check_by_recording_and_playing_it_back_.285.2F5.29"></span><span class="mw-headline" id="Finally_check_by_recording_and_playing_it_back_(5/5)">Finally check by recording and playing it back (5/5)</span>
</h4>
<p>Let us record some voice using a microphone for, say, 10 seconds. Make sure the microphone is not muted and all
</p>
<pre>$ arecord -f cd -d 10 test-mic.wav
</pre>
<p>After 10 seconds, let us play the recording...
</p>
<pre>$ aplay test-mic.wav
</pre>
<p>Now hopefully, there is no static noise in microphone recording anymore.
</p>
<h4><span class="mw-headline" id="Another_Possible_Cause">Another Possible Cause</span></h4>
<p>Another possible cause is that your mic has two channels but only one channel can provide a valid sound signal. Some information can be found <a rel="nofollow" class="external text" href="https://github.com/MaartenBaert/ssr/issues/323#issuecomment-268230548">here</a>. The solution is to remap the stereo input to a mono input:
</p>
<p>1. Find your source name from the following command; mine is <code>alsa_input.pci-0000_00_1f.3.analog-stereo</code>
</p>
<pre>pacmd list-sources | grep 'name:.*input'
</pre>
<p>2. Edit <code>/etc/pulse/default.pa</code> and add the following lines, where INPUT_NAME is name of the input source from above step:
</p>
<pre>load-module module-remap-source source_name=record_mono master=INPUT_NAME master_channel_map=front-left channel_map=mono
set-default-source record_mono
</pre>
<p>3. Restart PulseAudio:
</p>
<pre>$ pulseaudio -k
$ pulseaudio --start
</pre>
<p>Now <code>arecord</code> hopefully works. You may still need to change the <code>RecordStream from</code> setting to <code>Remapped Built-in Audio Analog Stereo</code> of a specific application in the <code>Recording</code> tab of <code>pavucontrol</code>.
</p>
<h4><span class="mw-headline" id="If_using_a_USB_microphone">If using a USB microphone</span></h4>
<p>Try plugging it into a different port (eg: ports at the back rather than front).
</p>
<h3>
<span id="No_microphone_on_Steam_or_Skype_with_enable-remixing_.3D_no"></span><span class="mw-headline" id="No_microphone_on_Steam_or_Skype_with_enable-remixing_=_no">No microphone on Steam or Skype with enable-remixing = no</span>
</h3>
<p>When you set <code>enable-remixing = no</code> on <code>/etc/pulse/daemon.conf</code> you may find that your microphone has stopped working on certain applications like Skype or Steam. This happens because these applications capture the microphone as mono only and because remixing is disabled, Pulseaudio will no longer remix your stereo microphone to mono.
</p>
<p>To fix this you need to tell Pulseaudio to do this for you:
</p>
<p>1. Find the name of the source 
</p>
<pre># pacmd list-sources
</pre>
<p>Example output edited for brevity, the name you need is in bold:
</p>
<pre>   index: 2
       name: &lt;<b>alsa_input.pci-0000_00_14.2.analog-stereo</b>&gt;
       driver: &lt;module-alsa-card.c&gt;
       flags: HARDWARE HW_MUTE_CTRL HW_VOLUME_CTRL DECIBEL_VOLUME LATENCY DYNAMIC_LATENCY
</pre>
<p>2. Add a remap rule to <code>/etc/pulse/default.pa</code>, use the name you found with the previous command, here we will use <b>alsa_input.pci-0000_00_14.2.analog-stereo</b> as an example:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/pulse/default.pa</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">### Remap microphone to mono
load-module module-remap-source master=alsa_input.pci-0000_00_14.2.analog-stereo master_channel_map=front-left,front-right channels=2 channel_map=mono,mono</pre>
<p>3. Restart Pulseaudio
</p>
<pre># pulseaudio -k
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Pulseaudio may fail to start if you do not exit a program that was using the microphone (e.g. if you tested on Steam before modifying the file), in which case you should exit the application and manually start Pulseaudio</div>
<pre># pulseaudio --start
</pre>
<h3><span class="mw-headline" id="Microphone_distorted_due_to_automatic_adjustment">Microphone distorted due to automatic adjustment</span></h3>
<p>If your microphone volume creeps up automatically and causes the sound to be distorted, you can fix it by disabling mic boost:
</p>
<p>In all files <code>/usr/share/alsa-card-profile/mixer/paths/analog-input*.conf</code>,
</p>
<ul>
<li>Under <code>[Element Capture]</code> set <code>volume</code> to <code>zero</code>
</li>
<li>Under <code>[Element Internal Mic Boost]</code> set <code>volume</code> to <code>zero</code>.</li>
<li>Under <code>[Element Int Mic Boost]</code> set <code>volume</code>  to <code>zero</code>.</li>
<li>Under <code>[Element Mic Boost]</code> set <code>volume</code>  to <code>zero</code>.</li>
</ul>
<p>including all variations such as <code>[Element Headphone Mic Boost]</code> and <code>[Element Mic Boost (+20dB)]</code>
</p>
<p>Then restart PulseAudio:
</p>
<pre># pulseaudio -k
</pre>
<h3><span class="mw-headline" id="Microphone_crackling_with_Realtek_ALC892">Microphone crackling with Realtek ALC892</span></h3>
<p>Sometimes ALC892 chips have crackling sound while recording using a microphone. Some Pulseaudio config changes may help:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/pulse/daemon.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">resample-method = src-sinc-best-quality
default-sample-format = s16le
default-sample-rate = 48000</pre>
<p>and add the <code>use_ucm</code> option to
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/pulse/default.pa</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">load-module module-udev-detect use_ucm=0 tsched=0</pre>
<p>then restart pulseaudio.
</p>
<h3><span class="mw-headline" id="Microphone_crackling_with_Azalia_chipsets">Microphone crackling with Azalia chipsets</span></h3>
<p>Some Azalia based chips have popping/crackling noise and distortion while recording using a microphone with PulseAudio. This can be fixed by loading the <code>snd-hda-intel</code> module with <code>position_fix</code> set to an appropriate value. This tells the module to use various DMA pointer fixes. Use trial and error to determine which value works for you. (<a rel="nofollow" class="external text" href="https://wiki.sabayon.org/index.php?title=HOWTO:_Resolve_Problems_with_HDA-Intel_Sound_Cards">source</a>)
</p>
<p>Create a new <code>modprobe.d</code> config:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/modprobe.d/azalia-microphone.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">options snd-hda-intel position_fix=1</pre>
<p>Valid values for <code>position_fix</code> are:
</p>
<ul>
<li>
<code>0</code> = Auto</li>
<li>
<code>1</code> = None</li>
<li>
<code>2</code> = POSBUF</li>
<li>
<code>3</code> = FIFO size</li>
</ul>
<p>then reload your modules.
</p>
<h3><span class="mw-headline" id="Echo_test">Echo test</span></h3>
<p>If you are unsure about your microphone setup, you can hear the input from the microphone in real-time by enabling the <a rel="nofollow" class="external text" href="https://www.freedesktop.org/wiki/Software/PulseAudio/Documentation/User/Modules/#index57h3">loopback module</a> (<a rel="nofollow" class="external text" href="https://answers.launchpad.net/ubuntu/+source/pulseaudio/+question/83742">source</a>):
</p>
<pre>$ pactl load-module module-loopback
</pre>
<p>The module will show up in the <b>Recording</b> tab of the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=pavucontrol">pavucontrol</a></span> program, where the source and volume can be configured. While latency should be low, it should be sufficient to get a feeling of the sound quality as you will hear yourself speak in the microphone. To make the change permanent, add the following pulseaudio configuration:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/pulse/default.pa</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">load-module module-loopback</pre>
<p>Watch out for feedback! Be ready to lower all volumes in case the microphone picks up the output from the loudspeakers. Naturally, it is better to run such a test with headphones.
</p>
<h2><span class="mw-headline" id="Audio_quality">Audio quality</span></h2>
<h3>
<span id="Enable_Echo.2FNoise-Cancellation"></span><span class="mw-headline" id="Enable_Echo/Noise-Cancellation">Enable Echo/Noise-Cancellation</span>
</h3>
<p>Arch does not load the Pulseaudio Echo-Cancellation module by default, therefore, we have to add it in <code>/etc/pulse/default.pa</code>. First you can test if the module is present with <code>pacmd</code> and entering <code>list-modules</code>. If you cannot find a line showing <code>name: &lt;module-echo-cancel&gt;</code> you have to add 
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/pulse/default.pa</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">### Enable Echo/Noise-Cancellation
load-module module-echo-cancel use_master_format=1 aec_method=webrtc aec_args="analog_gain_control=0\ digital_gain_control=1" source_name=echoCancel_source sink_name=echoCancel_sink
set-default-source echoCancel_source
set-default-sink echoCancel_sink</pre>
<p>then restart Pulseaudio
</p>
<pre>$ pulseaudio -k
$ pulseaudio --start
</pre>
<p>and check if the module is activated by starting <code>pavucontrol</code>. Under <code>Recording</code> the input device should show <code>Echo-Cancel Source Stream from"</code>.
</p>
<p>Turning on <code>beamforming=1</code> in the aec_args can also significantly reduce background noise if you have more than one microphone (which is common on many new laptops). However, beamforming requires specifying your <code>mic_geometry</code> (see below).
</p>
<p>If you want existing streams to be automatically moved to the new sink and source, you have to load the <a href="#Automatically_switch_to_Bluetooth_or_USB_headset">module-switch-on-connect</a> with <code>ignore_virtual=no</code> before.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> If you plug in a USB sound card or headset, or you have for example a 5.1 Speaker configuration and plug in a headset on your front audio connectors after you have loaded the <code>module-echo-cancel</code>, you have to manually unload and load the <code>module-echo-cancel</code> again, because unfortunately there is no way to tell the module that it should automatically switch to the new default 'source_master' and 'source_sink'. See <a rel="nofollow" class="external autonumber" href="https://gitlab.freedesktop.org/pulseaudio/pulseaudio/issues/196">[3]</a>.</div>
<h4>
<span id="Possible_.27aec_args.27_for_.27aec_method.3Dwebrtc.27"></span><span class="mw-headline" id="Possible_'aec_args'_for_'aec_method=webrtc'">Possible 'aec_args' for 'aec_method=webrtc'</span>
</h4>
<p>Here is a list of possible 'aec_args' for 'aec_method=webrtc' with their default values <a rel="nofollow" class="external autonumber" href="https://github.com/pulseaudio/pulseaudio/blob/master/src/modules/echo-cancel/webrtc.cc">[4]</a><a rel="nofollow" class="external autonumber" href="https://www.freedesktop.org/wiki/Software/PulseAudio/Documentation/User/Modules/#index45h3">[5]</a>:
</p>
<ul>
<li>
<code>analog_gain_control=1</code> - Analog AGC - 'Automatic Gain Control' done over changing the volume directly - Will most likely lead to <a href="#Microphone_distorted_due_to_automatic_adjustment">distortions</a>.</li>
<li>
<code>digital_gain_control=0</code> - Digital AGC - 'Automatic Gain Control' done in post processing (higher CPU load).</li>
<li>
<code>experimental_agc=0</code> - Allow enabling of the webrtc experimental AGC mechanism.</li>
<li>
<code>agc_start_volume=85</code> - Initial volume when using AGC - Possible values 0-255 - A too low initial volume may prevent the AGC algorithm from ever raising the volume high enough <a rel="nofollow" class="external autonumber" href="https://www.freedesktop.org/wiki/Software/PulseAudio/Notes/9.0/">[6]</a>.</li>
<li>
<code>high_pass_filter=1</code> - ?</li>
<li>
<code>noise_suppression=1</code> - Noise suppression.</li>
<li>
<code>voice_detection=1</code> - VAD - Voice activity detection.</li>
<li>
<code>extended_filter=0</code> - The extended filter is more complex and less sensitive to incorrect delay reporting from the hardware than the regular filter. The extended filter mode is disabled by default, because it seemed produce worse results during double-talk <a rel="nofollow" class="external autonumber" href="https://www.freedesktop.org/wiki/Software/PulseAudio/Notes/9.0/">[7]</a>. Enable this option if your microphone or speaker has a larger latency, for example, if you use a wireless microphone or some HDMI TVs as speaker.</li>
<li>
<code>intelligibility_enhancer=0</code> - Some bits for webrtc intelligibility enhancer.</li>
<li>
<code>drift_compensation=0</code> - Drift compensation to allow echo cancellation between different devices (such as speakers on your laptop and the microphone on your USB webcam). - only possible with "mobile=0".</li>
<li>
<code>beamforming=0</code> - This can significantly reduce background noise. See <a rel="nofollow" class="external autonumber" href="https://www.freedesktop.org/wiki/Software/PulseAudio/Documentation/User/Modules/#index45h3">[8]</a><a rel="nofollow" class="external autonumber" href="https://arunraghavan.net/2016/06/beamforming-in-pulseaudio/">[9]</a>
<ul>
<li>
<code>mic_geometry=x1,y1,z1,x2,y2,z2</code> - Only with "beamforming=1".</li>
<li>
<code>target_direction=a,e,r</code> - Only with "beamforming=1". Note: If the module does not want to load with this argument, set azimuth (a) to the desired value, but set elevation (e) and radius (r) to 0.</li>
</ul>
</li>
<li>
<code>mobile=0</code> - ?
<ul>
<li>
<code>routing_mode=speakerphone</code> - Possible Values "quiet-earpiece-or-headset,earpiece,loud-earpiece,speakerphone,loud-speakerphone" - only valid with "mobile=1".</li>
<li>
<code>comfort_noise=1</code> - ? - only valid with "mobile=1".</li>
</ul>
</li>
</ul>
<h4><span class="mw-headline" id="Disable_audio_post_processing_in_certain_applications">Disable audio post processing in certain applications</span></h4>
<p>If you are using the <a href="#Enable_Echo/Noise-Cancellation">module-echo-cancel</a>, you probably do not want other applications to do additional audio post processing. Here is a list for disabling audio post processing in following applications:
</p>
<ul>
<li>Mumble:
<ol>
<li>Configure -&gt; Settings -&gt; Check 'Advanced' check box -&gt; Audio Input</li>
<li>Echo: Select 'Disabled'</li>
<li>Noise Suppression: Set slider to 'Off'</li>
<li>Max. Aplification: Set slider to '1.0'</li>
</ol>
</li>
<li>TeamSpeak:
<ol>
<li>Tools -&gt; Options -&gt; Capture</li>
<li>Uncheck: 'Typing attenuation', 'Remove background noise', 'Echo cancellation' and 'Echo reduction (Ducking)'</li>
</ol>
</li>
<li>Firefox: see <a href="../../en/Firefox/Tweaks.html#Disable_WebRTC_audio_post_processing" class="mw-redirect" title="Firefox tweaks">Firefox tweaks#Disable WebRTC audio post processing</a>
</li>
<li>Steam:
<ol>
<li>In window "Friends List" -&gt; Manage friends list settings (gear symbol) -&gt; VOICE -&gt; Show Advanced Settings</li>
<li>Set the following sliders to "OFF": "Echo cancellation", "Noise cancellation", "Automatic volume/gain control"</li>
</ol>
</li>
<li>Skype:
<ol><li>Tools -&gt; Settings... -&gt; Audio &amp; Video -&gt; Microphone -&gt; Automatically adjust microphone settings -&gt; off</li></ol>
</li>
</ul>
<h4><span class="mw-headline" id="Script_for_reloading_module-echo-cancel">Script for reloading module-echo-cancel</span></h4>
<p>Since the module-echo-cancel is not always needed, or must be reloaded if the source_master or sink_master has changed, it is nice to have a easy way to load or reload the module-echo-cancel.
</p>
<p><a href="../../en/Help:Reading.html#Append,_add,_create,_edit" class="mw-redirect" title="Create">Create</a> the following script and make it <a href="../../en/Help:Reading.html#Make_executable" class="mw-redirect" title="Executable">executable</a>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">echoCancelEnable.sh</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">#!/bin/bash
aecArgs="$*"
# If no "aec_args" are passed on to the script, use this "aec_args" as default:
[ -z "$aecArgs" ] &amp;&amp; aecArgs="analog_gain_control=0 digital_gain_control=1"
newSourceName="echoCancelSource"
newSinkName="echoCancelSink"

# "module-switch-on-connect" with "ignore_virtual=no" (needs PulseAudio 12 or higher) is needed to automatically move existing streams to a new (virtual) default source and sink.
if ! pactl list modules short | grep "module-switch-on-connect.*ignore_virtual=no" &gt;/dev/null 2&gt;&amp;1; then
	echo Load module \"module-switch-on-connect\" with \"ignore_virtual=no\"
	pactl unload-module module-switch-on-connect 2&gt;/dev/null
	pactl load-module module-switch-on-connect ignore_virtual=no
fi

# Reload "module-echo-cancel"
echo Reload \"module-echo-cancel\" with \"aec_args=$aecArgs\"
pactl unload-module module-echo-cancel 2&gt;/dev/null
if pactl load-module module-echo-cancel use_master_format=1 aec_method=webrtc aec_args=\"$aecArgs\" source_name=$newSourceName sink_name=$newSinkName; then
	# Set a new default source and sink, if module-echo-cancel has loaded successfully.
	pacmd set-default-source $newSourceName
	pacmd set-default-sink $newSinkName
fi
</pre>
<p>To run the script easily from the graphical environment, you can create a <a href="../../en/Desktop_entries.html" class="mw-redirect" title="Desktop launcher">desktop launcher</a> for it.
</p>
<h3>
<span id="Recurrent_neural_network_noise_suppression_.28RNNoise.29"></span><span class="mw-headline" id="Recurrent_neural_network_noise_suppression_(RNNoise)">Recurrent neural network noise suppression (RNNoise)</span>
</h3>
<p>Installing the pacakge <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/noise-suppression-for-voice/">noise-suppression-for-voice</a></span><sup><small>AUR</small></sup> will allow real-time noise suppression based on RNNoise: Learning Noise Suppression <a rel="nofollow" class="external autonumber" href="https://jmvalin.ca/demo/rnnoise/">[10]</a>. Configuration details can be found on the projects Github site <a rel="nofollow" class="external autonumber" href="https://github.com/werman/noise-suppression-for-voice">[11]</a>.
</p>
<h3>
<span id="Glitches.2C_skips_or_crackling"></span><span class="mw-headline" id="Glitches,_skips_or_crackling">Glitches, skips or crackling</span>
</h3>
<p>The newer implementation of the PulseAudio sound server uses timer-based audio scheduling instead of the traditional, interrupt-driven approach. 
</p>
<p>Timer-based scheduling may expose issues in some ALSA drivers. On the other hand, other drivers might be glitchy without it on, so check to see what works on your system. 
</p>
<p>To turn timer-based scheduling off add <code>tsched=0</code> in <code>/etc/pulse/default.pa</code>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/pulse/default.pa</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">load-module module-udev-detect tsched=0</pre>
<p>Then restart the PulseAudio server:
</p>
<pre>$ pulseaudio -k
$ pulseaudio --start
</pre>
<p>Do the reverse to enable timer-based scheduling, if not already enabled by default.
</p>
<p>If you are using Intel's <a href="https://en.wikipedia.org/wiki/IOMMU" class="extiw" title="wikipedia:IOMMU">IOMMU</a> and experience glitches and/or skips, add <code>intel_iommu=igfx_off</code> to your kernel command line.
</p>
<p>Some Intel audio cards using the <code>snd-hda-intel</code> module need the otions <code>vid=8086 pid=8ca0 snoop=0</code>. In order to set them permanently, create/modify the following file including the line below.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/modprobe.d/sound.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">options snd-hda-intel vid=8086 pid=8ca0 snoop=0</pre>
<p>Please report any such cards to <a rel="nofollow" class="external text" href="https://www.freedesktop.org/wiki/Software/PulseAudio/Backends/ALSA/BrokenDrivers/">PulseAudio Broken Sound Driver page</a>
</p>
<h3><span class="mw-headline" id="Static_noise_when_using_headphones">Static noise when using headphones</span></h3>
<p>Time-based scheduling may be causing this, disable it as explained in <a href="#Glitches,_skips_or_crackling">#Glitches, skips or crackling</a>.
</p>
<p>Another reason you are encountering static noise in your headphone jack could be ALSA's loopback mixing.
</p>
<p>Make sure you have <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=alsa-utils">alsa-utils</a></span> installed, launch <code>alsamixer</code>, then select your audio device (pressing <code>F6</code>}), navigate all the way left using the <code>left arrow</code>, and stop on <b>Loopback</b>, if <b>Enabled</b> disable it using the <code>down arrow</code>. This should not impact audio playback or microphone recording negatively, unless you require loopback mixing.
</p>
<p>Some notebook models, like Dell XPS 13 9360, suffer from <a href="../../en/Dell_XPS_13_(9360).html#Continuous_hissing_sound_with_headphones" title="Dell XPS 13 (9360)">continuous hissing sound</a> when a headphone is plugged in.
</p>
<p>Yet another reason for this symptom could be the power-saving mode of your audio device.<a rel="nofollow" class="external autonumber" href="https://askubuntu.com/a/534082">[12]</a> If you followed <a href="../../en/Power_management.html#Audio" title="Power management">Power management#Audio</a>, revert the changes and check if it solves the problem.
</p>
<h3><span class="mw-headline" id="Setting_the_default_fragment_number_and_buffer_size_in_PulseAudio">Setting the default fragment number and buffer size in PulseAudio</span></h3>
<div class="noprint archwiki-template-message">
<p><a href="../../File:Tango-edit-clear.png" class="image"><img alt="Tango-edit-clear.png" src="../../File:Tango-edit-clear.png" decoding="async" width="48" height="48"></a><b>This article or section needs language, wiki syntax or style improvements. See <a href="../../en/Help:Style.html" title="Help:Style">Help:Style</a> for reference.</b><a href="../../File:Tango-edit-clear.png" class="image"><img alt="Tango-edit-clear.png" src="../../File:Tango-edit-clear.png" decoding="async" width="48" height="48"></a></p>
<div>
<b>Reason:</b> Copied from Linux mint topic with few additions (Discuss in <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php/Talk:PulseAudio/Troubleshooting">Talk:PulseAudio/Troubleshooting#</a>)</div>
</div>
<h4>
<span id="Disabling_timer-based_scheduling_.280.2F4.29"></span><span class="mw-headline" id="Disabling_timer-based_scheduling_(0/4)">Disabling timer-based scheduling (0/4)</span>
</h4>
<p>By default, PulseAudio uses timer-based scheduling. In this mode, fixed-size fragments are not used at all, and so the default-fragments and default-fragment-size-msec parameters are ignored.
To turn timer-based scheduling off add <code>tsched=0</code> in <code>/etc/pulse/default.pa</code>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/pulse/default.pa</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">load-module module-udev-detect tsched=0</pre>
<h4>
<span id="Decide_on_audio_device_parameters_.281.2F4.29"></span><span class="mw-headline" id="Decide_on_audio_device_parameters_(1/4)">Decide on audio device parameters (1/4)</span>
</h4>
<p>Instructions below will cause PulseAudio to use a fixed size and number for audio fragments. These settings directly affect latency and power consumption. The latency is determined as <code>default-fragments * default-fragment-size-msec</code>, and the interrupt rate (i.e. how often the application is notified that some sound has indeed been played) is <code>1000 / default-fragment-size-msec</code>. The considerations are:
</p>
<ul>
<li>The total number of fragments must be within the limits accepted by the hardware. Most sound cards are OK with two or more fragments, but some require three or more.</li>
<li>Giving the sound card more fragments than strictly necessary increases the latency, does not change power consumption, and does not remove the load from the scheduler. Therefore, it is advised only in the cases when the interrupts are not reliably delivered to the CPU, and one extra fragment beyond the minimum required should always be enough.</li>
<li>Giving the sound card bigger fragments increases latency and decreases power consumption.</li>
<li>Some applications (games and VoIP) request low latency and produce glitches when PulseAudio cannot fulfill their request.</li>
<li>Setting the latency too low will put a lot of stress on the scheduler, also resulting in glitches.</li>
</ul>
<p>If one does not care about excessive power consumption, then 2 or 3 fragments, 5 ms each, are a reasonable choice.
</p>
<h4>
<span id="Modify_PulseAudio.27s_configuration_file_.282.2F4.29"></span><span class="mw-headline" id="Modify_PulseAudio's_configuration_file_(2/4)">Modify PulseAudio's configuration file (2/4)</span>
</h4>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/pulse/daemon.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">default-fragments = <b>3</b>
default-fragment-size-msec = <b>5</b></pre>
<h4>
<span id="Restart_the_PulseAudio_daemon_.283.2F4.29"></span><span class="mw-headline" id="Restart_the_PulseAudio_daemon_(3/4)">Restart the PulseAudio daemon (3/4)</span>
</h4>
<pre>$ systemctl --user restart pulseaudio.service
</pre>
<h4>
<span id="See_if_it_helps_.284.2F4.29"></span><span class="mw-headline" id="See_if_it_helps_(4/4)">See if it helps (4/4)</span>
</h4>
<p>Run your applications, listen to the sounds they produce, inspect the journal.
</p>
<p>If the skips/pops/glitches are occasional and mostly correlated to the system being highly loaded: this is a scheduler problem, the latency needs to be increased.
</p>
<p>If there is metallic sound with the wrong speed from all applications: the most common reason is that you are trying to configure the fragment size which is way too small, like 1 ms. Do not do this.
</p>
<p>If some, but not all, applications produce a constant stream of glitches: this is an application that assumes a low-latency setup. So the fragment size must be decreased so that the application request becomes valid.
</p>
<h3><span class="mw-headline" id="Choppy_sound_with_analog_surround_sound_setup">Choppy sound with analog surround sound setup</span></h3>
<p>The low-frequency effects (LFE) or Subwoofer channel is not remixed per default. To enable it the following needs to be set in <code>/etc/pulse/daemon.conf</code> :
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/pulse/daemon.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">remixing-produce-lfe = yes
remixing-consume-lfe = yes</pre>
<p>You should also consider to set a proper crossover frequency for the LFE- channel.
The crossover frequency is the frequency up to which the audio signal is rerouted to the LFE sink.
The optimal crossover frequency in Hz depends on the size of all your speakers.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/pulse/daemon.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">lfe-crossover-freq = &lt;40-200&gt;</pre>
<h3><span class="mw-headline" id="Laggy_sound">Laggy sound</span></h3>
<p>This issue is due to incorrect buffer sizes. First verify that the variables <code>default-fragments</code> and <code>default-fragment-size-msec</code> are not being set to non default values in the file <code>/etc/pulse/daemon.conf</code>. If the issue is still present, try setting them to the following values:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/pulse/daemon.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">default-fragments = 5
default-fragment-size-msec = 2</pre>
<h3>
<span id="Choppy.2Fdistorted_sound"></span><span class="mw-headline" id="Choppy/distorted_sound">Choppy/distorted sound</span>
</h3>
<p>This can result from an incorrectly set sample rate. Try the following setting:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/pulse/daemon.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">avoid-resampling = yes #(Needs <a rel="nofollow" class="external text" href="https://www.freedesktop.org/wiki/Software/PulseAudio/Notes/11.0/">PA11</a> or higher)
default-sample-rate = 48000</pre>
<p>and restart the PulseAudio server.
</p>
<p>If one experiences choppy sound in applications using <a href="https://en.wikipedia.org/wiki/OpenAL" class="extiw" title="wikipedia:OpenAL">OpenAL</a>, change the sample rate in <code>/etc/openal/alsoft.conf</code>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/openal/alsoft.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">frequency = 48000</pre>
<p>Setting the PCM volume above 0 dB can cause <a href="https://en.wikipedia.org/wiki/Clipping_(audio)" class="extiw" title="wikipedia:Clipping (audio)">clipping</a>. Running <code>alsamixer</code> will allow you to see if this is the problem and if so fix it. Note that ALSA may not <a rel="nofollow" class="external text" href="https://www.freedesktop.org/wiki/Software/PulseAudio/Documentation/User/PulseAudioStoleMyVolumes/">correctly export</a> the dB information to PulseAudio. Try the following:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/pulse/default.pa</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">load-module module-udev-detect ignore_dB=1</pre>
<p>and restart the PulseAudio server. See also <a href="#No_sound_below_a_volume_cutoff_or_Clipping_on_a_particular_output_device">#No sound below a volume cutoff or Clipping on a particular output device</a>.
</p>
<h3><span class="mw-headline" id="Sound_stuttering_when_streaming_over_network">Sound stuttering when streaming over network</span></h3>
<p>When streaming over Wi-Fi using module-native-protocol-tcp you can experience periodic sound stuttering with buffer underruns. As a workaround you can try to use rtp protocol. On sender side create rtp sink:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/pulse/default.pa</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">load-module module-null-sink sink_name=rtp
load-module module-rtp-send source=rtp.monitor</pre>
<p>and switch to it:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/pulse/default.pa</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">set-default-sink rtp</pre>
<p>On receiver side load rtp module:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/pulse/default.pa</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">load-module module-rtp-recv</pre>
<h3><span class="mw-headline" id="Pops_when_starting_and_stopping_playback">Pops when starting and stopping playback</span></h3>
<p>PulseAudio can suspend sinks after a period of inactivity. This can make an audible noise (like a crack/pop/scratch). Sometimes even when move the slider volume, or open and close windows (KDE4). This behavior is enabled in default configuration files:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/pulse/default.pa</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">load-module module-suspend-on-idle</pre>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/pulse/system.pa</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">load-module module-suspend-on-idle</pre>
<p>Commenting that line in relevant file fixes that issue. A better solution is to add the following file:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.config/pulse/default.pa</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">.include /etc/pulse/default.pa
.nofail
unload-module module-suspend-on-idle
.fail</pre>
<h2><span class="mw-headline" id="Hardware_and_Cards">Hardware and Cards</span></h2>
<h3><span class="mw-headline" id="No_HDMI_sound_output_after_some_time_with_the_monitor_turned_off">No HDMI sound output after some time with the monitor turned off</span></h3>
<p>The monitor is connected via HDMI/DisplayPort, and the audio jack is plugged in the headphone jack of the monitor, but PulseAudio insists that it is unplugged:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">pactl list sinks</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">...
hdmi-output-0: HDMI / DisplayPort (priority: 5900, not available)
...
</pre>
<p>This leads to no sound coming from HDMI output. A workaround for this is to switch to another VT and back again. If that does not work, try: turn off your monitor, switch to another VT, turn on your monitor, and switch back. This problem has been reported by ATI/Nvidia/Intel users.
</p>
<p>Another workaround could be to disable the switch-on-port-available module by commenting it in /etc/pulse/default.pa <a rel="nofollow" class="external autonumber" href="https://bugs.freedesktop.org/show_bug.cgi?id=93946#c36">[13]</a>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/pulse/default.pa</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">...
### Should be after module-*-restore but before module-*-detect
#load-module module-switch-on-port-available
...
</pre>
<h3><span class="mw-headline" id="No_HDMI_sound_using_a_headless_server">No HDMI sound using a headless server</span></h3>
<p>You might want to use HDMI audio with your a/v receiver but no display. HDMI requires a video signal, which we have from the virtual terminal. 
</p>
<p>By default, this signal is turned off after 600 seconds, thus the audio sink gets lost as well.
</p>
<p>To prevent screen blanking, add <code>consoleblank=0</code> to the kernel command line.
</p>
<h3><span class="mw-headline" id="No_cards">No cards</span></h3>
<p>If PulseAudio starts, run <code>pacmd list</code>. If no cards are reported, make sure that the ALSA devices are not in use:
</p>
<pre>$ fuser -v /dev/snd/*
$ fuser -v /dev/dsp
</pre>
<p>Make sure any applications using the pcm or dsp files are shut down before restarting PulseAudio.
</p>
<h3>
<span id="Starting_an_application_interrupts_other_app.27s_sound"></span><span class="mw-headline" id="Starting_an_application_interrupts_other_app's_sound">Starting an application interrupts other app's sound</span>
</h3>
<p>If you have trouble with some applications (such as TeamSpeak or Mumble) interrupting sound output of already running applications (such as Deadbeaf), you can solve this by commenting out the line <code>load-module module-role-cork</code> in <code>/etc/pulse/default.pa</code> like shown below:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/pulse/default.pa</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">### Cork music/video streams when a phone stream is active
# load-module module-role-cork
</pre>
<p>Then restart pulseaudio by using your normal user account with
</p>
<pre>$ pulseaudio -k
$ pulseaudio --start
</pre>
<h3>
<span id="The_only_device_shown_is_.22dummy_output.22_or_newly_connected_cards_are_not_detected"></span><span class="mw-headline" id='The_only_device_shown_is_"dummy_output"_or_newly_connected_cards_are_not_detected'>The only device shown is "dummy output" or newly connected cards are not detected</span>
</h3>
<p>If the only playback device is the Dummy Output, PulseAudio cannot access your sound devices. It is possible there is an issue with logind giving permissions, see <a href="../../en/General_troubleshooting.html#Session_permissions" title="General troubleshooting">General troubleshooting#Session permissions</a> for more information.
</p>
<p>An application might also not have been configured to work with PulseAudio. This happens with <a href="../../en/FluidSynth.html#Conflicting_with_PulseAudio" title="FluidSynth">FluidSynth</a> for example. To see which application is responsible for a direct access to the sound card via alsa, run the following command:
</p>
<pre># fuser -v /dev/snd/*
</pre>
<p>Try to close these applications. pulseaudio, if running, should take again precedence over these applications and all the applications relying on pulseaudio should work again like expected.
</p>
<h3>
<span id="No_HDMI_5.2F7.1_Selection_for_Device"></span><span class="mw-headline" id="No_HDMI_5/7.1_Selection_for_Device">No HDMI 5/7.1 Selection for Device</span>
</h3>
<p>If you are unable to select 5/7.1 channel output for a working HDMI device, then turning off "stream device reading" in <code>/etc/pulse/default.pa</code> might help. 
</p>
<p>See <a href="#Fallback_device_is_not_respected">#Fallback device is not respected</a>.
</p>
<h3><span class="mw-headline" id="Failed_to_create_sink_input:_sink_is_suspended">Failed to create sink input: sink is suspended</span></h3>
<p>If you do not have any output sound and receive dozens of errors related to a suspended sink in your <code>journalctl -b</code> log, then backup first and then delete your user-specific pulse folders:
</p>
<pre>$ rm -r ~/.pulse ~/.pulse-cookie ~/.config/pulse
</pre>
<h3>
<span id="Simultaneous_output_to_multiple_sound_cards_.2F_devices"></span><span class="mw-headline" id="Simultaneous_output_to_multiple_sound_cards_/_devices">Simultaneous output to multiple sound cards / devices</span>
</h3>
<p>Simultaneous output to two different devices can be very useful. For example, being able to send audio to your A/V receiver via your graphics card's HDMI output, while also sending the same audio through the analogue output of your motherboard's built-in audio. This is much less hassle than it used to be (in this example, we are using GNOME desktop).
</p>
<p>Using <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=paprefs">paprefs</a></span>, simply select "Add virtual output device for simultaneous output on all local sound cards" from under the "Simultaneous Output" tab. Then, under GNOME's "sound settings", select the simultaneous output you have just created.
</p>
<p>If this does not work, try adding the following to <code>~/.asoundrc</code>:
</p>
<pre>pcm.dsp {
   type plug
   slave.pcm "dmix"
}
</pre>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> Simultaneous output can also be achieved manually using alsamixer. Disable "auto mute" item, then unmute other output sources you want to hear and increase their volume.</div>
<h3><span class="mw-headline" id="Simultaneous_output_to_multiple_sinks_on_the_same_sound_card_not_working">Simultaneous output to multiple sinks on the same sound card not working</span></h3>
<p>This can be useful for users who have multiple sound sources and want to play them on different sinks/outputs. 
An example use-case for this would be if you play music and also voice chat and want to output music to speakers (in this case Digital S/PDIF) and voice to headphones. (Analog)
</p>
<p>This is sometimes auto detected by PulseAudio but not always. If you know that your sound card can output to both Analog and S/PDIF at the same time and PulseAudio does not have this option in its profiles in pavucontrol, or veromix then you probably need to create a configuration file for your sound card.
</p>
<p>More in detail you need to create a profile-set for your specific sound card.
This is done in two steps mostly.
</p>
<ul>
<li>Create udev rule to make PulseAudio choose your PulseAudio configuration file specific to the sound card.</li>
<li>Create the actual configuration.</li>
</ul>
<p>Create a pulseaudio udev rule.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> This is only an example for Asus Xonar Essence STX.
Read <a href="../../en/Udev.html" title="Udev">udev</a> to find out the correct values.</div>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Your configuration file should have lower number than the original PulseAudio rule to take effect.</div>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/usr/lib/udev/rules.d/90-pulseaudio-Xonar-STX.rules</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">ACTION=="change", SUBSYSTEM=="sound", KERNEL=="card*", \
ATTRS{subsystem_vendor}=="0x1043", ATTRS{subsystem_device}=="0x835c", ENV{PULSE_PROFILE_SET}="asus-xonar-essence-stx.conf" 
</pre>
<p>Now, create a configuration file. If you bother, you can start from scratch and make it saucy. However you can also use the default configuration file, rename it, and then add your profile there that you know works. Less pretty but also faster.
</p>
<p>To enable multiple sinks for Asus Xonar Essence STX you need only to add this in.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> <code>asus-xonar-essence-stx.conf</code> also includes all code/mappings from <code>default.conf</code>.</div>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/usr/share/alsa-card-profile/mixer/profile-sets/asus-xonar-essence-stx.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Profile analog-stereo+iec958-stereo]
description = Analog Stereo Duplex + Digital Stereo Output
input-mappings = analog-stereo
output-mappings = analog-stereo iec958-stereo
skip-probe = yes
</pre>
<p>This will auto-profile your Asus Xonar Essence STX with default profiles and add your own profile so you can have multiple sinks.
</p>
<p>You need to create another profile in the configuration file if you want to have the same functionality with AC3 Digital 5.1 output.
</p>
<p><a rel="nofollow" class="external text" href="https://www.freedesktop.org/wiki/Software/PulseAudio/Backends/ALSA/Profiles/">See PulseAudio article about profiles</a>
</p>
<h3><span class="mw-headline" id="Some_profiles_like_SPDIF_are_not_enabled_by_default_on_the_card">Some profiles like SPDIF are not enabled by default on the card</span></h3>
<p>Some profiles like IEC-958 (i.e. S/PDIF) may not be enabled by default on the selected sink. Each time the system starts up, the card profile is disabled and the pulseaudio daemon cannot select it.
You have to add the profile selection to you default.pa file. 
Verify the card and profile name with :
</p>
<pre>$ pacmd list-cards
</pre>
<p>Then edit the config to add the profile
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.config/pulse/default.pa</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">## Replace with your card name and the profile you want to activate
set-card-profile alsa_card.pci-0000_00_1b.0 output:iec958-stereo+input:analog-stereo
</pre>
<p>Pulse audio will add this profile the pool of available profiles
</p>
<h3>
<span id="Only_S.2FPDIF_output_available"></span><span class="mw-headline" id="Only_S/PDIF_output_available">Only S/PDIF output available</span>
</h3>
<p>This might happen if PulseAudio use the wrong output device. Firstly, set up proper card profile:
</p>
<pre>$ pacmd set-card-profile alsa_card.pci-0000_00_1f.3 output:analog-stereo
</pre>
<p>or
</p>
<pre>$ pacmd set-card-profile alsa_card.pci-0000_00_1f.3 output:analog-stereo+input:analog-stereo
</pre>
<p>Replace <code>alsa_card.pci-0000_00_1f.3</code> with your card, and <code>output:analog-stereo</code> or <code>output:analog-stereo+input:analog-stereo</code> with your profile, remember to choose the profile with analog. Using shell auto completion could help you a lot. One could also use check available cards and profiles with:
</p>
<pre>$ pacmd list-cards
</pre>
<p>One might also need to set sink port by:
</p>
<pre>$ pacmd set-sink-port alsa_output.pci-0000_00_1f.3.analog-stereo analog-output-headphones
</pre>
<p>Check available sink ports with:
</p>
<pre>$ pacmd list-sinks
</pre>
<p>To keep these setting, add them to PulseAudio's configuration file <code>default.pa</code>.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.config/pulse/default.pa</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">.include /etc/pulse/default.pa

set-card-profile alsa_card.pci-0000_00_1f.3 output:analog-stereo+input:analog-stereo
set-sink-port alsa_output.pci-0000_00_1f.3.analog-stereo analog-output-headphones
</pre>
<h3><span class="mw-headline" id="Crackling_or_popping_USB_sound_issues">Crackling or popping USB sound issues</span></h3>
<p>Although not related to PulseAudio, it is also possible that the card is not powered properly by it's USB port, or that it doesn't provide enough bandwidth.
</p>
<p>Try connecting the USB DAC directly to your computer's USB ports, avoiding any hubs or docks.
</p>
<h2><span class="mw-headline" id="Bluetooth">Bluetooth</span></h2>
<h3><span class="mw-headline" id="Disable_Bluetooth_support">Disable Bluetooth support</span></h3>
<p>If you do not use Bluetooth, you may experience the following error in your journal:
</p>
<pre>bluez5-util.c: GetManagedObjects() failed: org.freedesktop.DBus.Error.ServiceUnknown: The name org.bluez was not provided by any .service files
</pre>
<p>To disable Bluetooth support in PulseAudio, make sure that the following lines are commented out in the configuration file in use (<code>~/.config/pulse/default.pa</code> or <code>/etc/pulse/default.pa</code>):
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.config/pulse/default.pa</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">### Automatically load driver modules for Bluetooth hardware
#.ifexists module-bluetooth-policy.so
#load-module module-bluetooth-policy
#.endif

#.ifexists module-bluetooth-discover.so
#load-module module-bluetooth-discover
#.endif
</pre>
<h3><span class="mw-headline" id="Bluetooth_headset_replay_problems">Bluetooth headset replay problems</span></h3>
<p>Some user <a rel="nofollow" class="external text" href="https://bbs.archlinux.org/viewtopic.php?id=117420">reports</a> huge delays or even no sound when the Bluetooth connection does not send any data. This is due to the <code>module-suspend-on-idle</code> module, which automatically suspends sinks/sources on idle. As this can cause problems with headset, the responsible module can be deactivated.
</p>
<p>To disable loading of the <code>module-suspend-on-idle</code> module, comment out the following line in the configuration file in use (<code>~/.config/pulse/default.pa</code> or <code>/etc/pulse/default.pa</code>):
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.config/pulse/default.pa</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">### Automatically suspend sinks/sources that become idle for too long
#load-module module-suspend-on-idle
</pre>
<p>Finally restart PulseAudio to apply the changes.
</p>
<h3><span class="mw-headline" id="Automatically_switch_to_Bluetooth_or_USB_headset">Automatically switch to Bluetooth or USB headset</span></h3>
<p>Add the following:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/pulse/default.pa</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;"># automatically switch to newly-connected devices
load-module module-switch-on-connect
# or switch also to newly-connected virtual devices
load-module module-switch-on-connect ignore_virtual=no</pre>
<p>Since <a rel="nofollow" class="external text" href="https://www.freedesktop.org/wiki/Software/PulseAudio/Notes/11.0/">PulseAudio 11</a> USB and bluetooth devices are preferred over internal sound cards by default, but as in the above link described, you still need module-switch-on-connect to also moves existing streams to the new sink.
</p>
<p>Since <a rel="nofollow" class="external text" href="https://www.freedesktop.org/wiki/Software/PulseAudio/Notes/12.0/">PulseAudio 12</a> virtual devices are ignored by default.
If you do not want this behavior because you want to move existing streams to freshly loaded <a href="#Enable_Echo/Noise-Cancellation">module-echo-cancel</a> for example, you have to add <code>ignore_virtual=no</code>.
</p>
<h3><span class="mw-headline" id="My_Bluetooth_device_is_paired_but_does_not_play_any_sound">My Bluetooth device is paired but does not play any sound</span></h3>
<p><a href="../../en/Bluetooth_headset.html#A2DP_not_working_with_PulseAudio" title="Bluetooth headset">See the article in Bluetooth headset section</a>
</p>
<p>Starting from PulseAudio 2.99 and bluez 4.101 you should <b>avoid</b> using Socket interface. Do NOT use:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/bluetooth/audio.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[General]
Enable=Socket</pre>
<p>If you face problems with A2DP and PA 2.99 make sure you have <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=sbc">sbc</a></span> library.
</p>
<h2><span class="mw-headline" id="Applications">Applications</span></h2>
<h3><span class="mw-headline" id="Flash_content">Flash content</span></h3>
<p>Since Adobe Flash does not directly support PulseAudio, the recommended way is to <a href="../../en/PulseAudio.html#ALSA" title="PulseAudio">configure ALSA to use the virtual PulseAudio sound card</a>.
</p>
<p>If Flash audio is lagging, you may try to have Flash access ALSA directly. See <a href="../../en/PulseAudio.html#ALSA/dmix_without_grabbing_hardware_device" title="PulseAudio">PulseAudio#ALSA/dmix without grabbing hardware device</a> for details.
</p>
<h3><span class="mw-headline" id="Permission_errors_bug">Permission errors bug</span></h3>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">pulseaudio --start</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">E: [autospawn] core-util.c: Failed to create secure directory (/run/user/1000/pulse): Operation not permitted
W: [autospawn] lock-autospawn.c: Cannot access autospawn lock.
E: [pulseaudio] main.c: Failed to acquire autospawn lock
</pre>
<p>Known programs that changes permissions for <code>/run/user/<i>user id</i>/pulse</code> when using <a href="../../en/Polkit.html" title="Polkit">Polkit</a> for root elevation:
</p>
<ul><li>
<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/sakis3g/">sakis3g</a></span><sup><small>AUR</small></sup><sup>[<a href="../../en/Help:Procedures.html#Fix_broken_package_links" title="Help:Procedures">broken link</a>: package not found]</sup>
</li></ul>
<p>As a workaround, include <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=kdesu">kdesu</a></span> in a <a href="../../en/Desktop_entries.html" class="mw-redirect" title="Desktop entry">desktop entry</a>, or add <code><i>username</i> ALL=NOPASSWD: /usr/bin/<i>program_name</i></code> to <a href="../../en/Sudo.html#Configuration" class="mw-redirect" title="Sudoers">sudoers</a> to run it with <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=sudo">sudo</a></span> without a password.
</p>
<p>The other workaround is to uncomment and set <code>daemonize = yes</code> in the <code>/etc/pulse/daemon.conf</code>.
</p>
<p>See also <a rel="nofollow" class="external autonumber" href="https://bbs.archlinux.org/viewtopic.php?id=135955">[14]</a>.
</p>
<h3><span class="mw-headline" id="Audacity">Audacity</span></h3>
<p>To work with PulseAudio, Audacity requires the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=pulseaudio-alsa">pulseaudio-alsa</a></span> is installed. This provides the <code>pulse:...</code> playback and recording devices.
</p>
<p>When starting Audacity you may find that your headphones no longer work. This can be because Audacity is trying to use them as a recording device. To fix this, open Audacity, then set its recording device to <code>pulse:Internal Mic:0</code>.
</p>
<p>Under some circumstances, playback may be distorted, very fast, or freeze, as discussed in the <a rel="nofollow" class="external text" href="http://wiki.audacityteam.org/wiki/Linux_Issues#ALSA_and_other_sound_systems">Audacity Wiki's Linux Issues page</a>.
</p>
<p>The solution proposed in this page may work: start Audacity with:
</p>
<pre>$ env PULSE_LATENCY_MSEC=30 audacity
</pre>
<p>If the solution above does not fix this issue, one may wish to temporarily disable pulseaudio while running Audacity by using the <code>pasuspender</code> command:
</p>
<pre>$ pasuspender -- audacity
</pre>
<p>Then, be sure to select the appropriate ALSA input and output devices in Audacity.
</p>
<p>See also <a href="#Setting_the_default_fragment_number_and_buffer_size_in_PulseAudio">#Setting the default fragment number and buffer size in PulseAudio</a>.
</p>
<h3><span class="mw-headline" id="OpenAL">OpenAL</span></h3>
<p>Some games may prevent you from switching the output device. Trying to move the sink with <code>pactl</code> gives the following error:
</p>
<pre>pactl move-sink-input 11 alsa_output.pci-0000_01_00.1.hdmi-stereo-extra1
Failure: Invalid argument
</pre>
<p>OpenAL needs to be configured to allow moving the sink:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.alsoftrc</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[pulse]
allow-moves = true</pre>
<h2><span class="mw-headline" id="Other_Issues">Other Issues</span></h2>
<h3><span class="mw-headline" id="Bad_configuration_files">Bad configuration files</span></h3>
<p>After starting PulseAudio, if the system outputs no sound, it may be necessary to delete the contents of <code>~/.config/pulse</code> and/or <code>~/.pulse</code>. PulseAudio will automatically create new configuration files on its next start.
</p>
<h3><span class="mw-headline" id="Cannot_update_configuration_of_sound_device_in_pavucontrol">Cannot update configuration of sound device in pavucontrol</span></h3>
<p><span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=pavucontrol">pavucontrol</a></span> is a handy GUI utility for configuring PulseAudio. Under its 'Configuration' tab, you can select different profiles for each of your sound devices e.g. analogue stereo, digital output (IEC958), HDMI 5.1 Surround etc.
</p>
<p>However, you may run into an instance where selecting a different profile for a card results in the pulse daemon crashing and auto restarting without the new selection "sticking". If this occurs, use the other useful GUI tool, <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=paprefs">paprefs</a></span>, to check under the "Simultaneous Output" tab for a virtual simultaneous device. If this setting is active (checked), it will prevent you changing any card's profile in pavucontrol. Uncheck this setting, then adjust your profile in pavucontrol prior to re-enabling simultaneous output in paprefs.
</p>
<h3><span class="mw-headline" id="Failed_to_create_sink_input:_sink_is_suspended_2">Failed to create sink input: sink is suspended</span></h3>
<p>If you do not have any output sound and receive dozens of errors related to a suspended sink in your <code>journalctl -b</code> log, then backup first and then delete your user-specific pulse folders:
</p>
<pre>$ rm -r ~/.pulse ~/.pulse-cookie ~/.config/pulse
</pre>
<h3><span class="mw-headline" id="Pulse_overwrites_ALSA_settings">Pulse overwrites ALSA settings</span></h3>
<p>PulseAudio usually overwrites the ALSA settings — for example set with alsamixer — at start-up, even when the ALSA daemon is loaded. Since there seems to be no other way to restrict this behaviour, a workaround is to restore the ALSA settings again after PulseAudio has started. Add the following command to <code>.xinitrc</code> or <code>.bash_profile</code> or any other <a href="../../en/Autostarting.html" class="mw-redirect" title="Autostart">autostart</a> file:
</p>
<pre>restore_alsa() {
 while [ -z "$(pidof pulseaudio)" ]; do
  sleep 0.5
 done
 alsactl -f /var/lib/alsa/asound.state restore 
}
restore_alsa &amp;
</pre>
<h3><span class="mw-headline" id="Daemon_startup_failed">Daemon startup failed</span></h3>
<p>Try resetting PulseAudio:
</p>
<pre>$ rm -rf /tmp/pulse* ~/.pulse* ~/.config/pulse
$ pulseaudio -k
$ pulseaudio --start
</pre>
<ul>
<li>Check that options for sinks are set up correctly.</li>
<li>If you configured in default.pa to load and use the OSS modules then check with <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=lsof">lsof</a></span> that <code>/dev/dsp</code> device is not used by another application.</li>
<li>Set a preferred working resample method. Use <code>pulseaudio --dump-resample-methods</code> to see a list with all available resample methods you can use.</li>
<li>To get details about currently appeared unfixed errors or just get status of daemon use commands like <code>pax11publish -d</code> and <code>pulseaudio -v</code> where <code>v</code> option can be used multiple time to set verbosity of log output equal to the <code>--log-level[=LEVEL]</code> option where LEVEL is from 0 to 4. See the <a href="#Outputs_by_PulseAudio_error_status_check_utilities">#Outputs by PulseAudio error status check utilities</a> section.</li>
</ul>
<p>See also man pages for <span class="plainlinks archwiki-template-man" title="$ man 1 pax11publish"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/pax11publish.1">pax11publish(1)</a></span> and <span class="plainlinks archwiki-template-man" title="$ man 1 pulseaudio"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/pulseaudio.1">pulseaudio(1)</a></span> for more details.
</p>
<h4><span class="mw-headline" id="Outputs_by_PulseAudio_error_status_check_utilities">Outputs by PulseAudio error status check utilities</span></h4>
<p>If the <code>pax11publish -d</code> shows error like:
</p>
<pre>N: [pulseaudio] main.c: User-configured server at "user", refusing to start/autospawn.
</pre>
<p>then run <code>pax11publish -r</code> command then could be also good to logout and login again.
</p>
<p>If the <code>pulseaudio -vvvv</code> command shows error like:
</p>
<pre>E: [pulseaudio] module-udev-detect.c: You apparently ran out of inotify watches, probably because Tracker/Beagle took them all away. I wished people would do their homework first and fix inotify before using it for watching whole directory trees which is something the current inotify is certainly not useful for. Please make sure to drop the Tracker/Beagle guys a line complaining about their broken use of inotify.
</pre>
<p>This can be resolved temporary by:
</p>
<pre>$ echo 100000 &gt; /proc/sys/fs/inotify/max_user_watches
</pre>
<p>For permanent use save settings in the <i>99-sysctl.conf</i> file:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/sysctl.d/99-sysctl.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;"># Increase inotify max watchs per user
fs.inotify.max_user_watches = 100000</pre>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Warning:</strong> It may cause much bigger consumption of memory by kernel.</div>
<p><b>See also</b> 
</p>
<ul>
<li>
<a rel="nofollow" class="external text" href="http://www.linuxinsight.com/proc_sys_fs_inotify.html">proc_sys_fs_inotify</a><sup title="Last check status: domain name not resolved">[<a href="https://en.wikipedia.org/wiki/Wikipedia:Link_rot" class="extiw" title="wikipedia:Wikipedia:Link rot">dead link</a> 2020-04-01 ⓘ]</sup> and <a rel="nofollow" class="external text" href="http://lwn.net/Articles/604686/">dnotify, inotify</a>- more details about <i>inotify/max_user_watches</i>
</li>
<li><a rel="nofollow" class="external text" href="https://stackoverflow.com/questions/535768/what-is-a-reasonable-amount-of-inotify-watches-with-linux?answertab=votes#tab-top">reasonable amount of inotify watches with Linux</a></li>
<li>
<span class="plainlinks archwiki-template-man" title="$ man 7 inotify"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/inotify.7">inotify(7)</a></span> - man page</li>
</ul>
<h3><span class="mw-headline" id="Daemon_already_running">Daemon already running</span></h3>
<p>On some systems, PulseAudio may be started multiple times. journalctl will report:
</p>
<pre>[pulseaudio] pid.c: Daemon already running.
</pre>
<p>Make sure to use only one method of autostarting applications. <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=pulseaudio">pulseaudio</a></span> includes these files:
</p>
<ul>
<li><code>/etc/X11/xinit/xinitrc.d/pulseaudio</code></li>
<li><code>/etc/xdg/autostart/pulseaudio.desktop</code></li>
<li><code>/etc/xdg/autostart/pulseaudio-kde.desktop</code></li>
</ul>
<p>Also check user autostart files and directories, such as <a href="../../en/Xinit.html#xinitrc" class="mw-redirect" title="Xinitrc">xinitrc</a>, <code>~/.config/autostart/</code> etc.
</p>
<h3><span class="mw-headline" id="Subwoofer_stops_working_after_end_of_every_song">Subwoofer stops working after end of every song</span></h3>
<p>Known issue: <a rel="nofollow" class="external free" href="https://bugs.launchpad.net/ubuntu/+source/pulseaudio/+bug/494099">https://bugs.launchpad.net/ubuntu/+source/pulseaudio/+bug/494099</a>
</p>
<p>To fix this, <code>enable-lfe-remixing = yes</code> must be set as described in <a href="#Choppy_sound_with_analog_surround_sound_setup">#Choppy sound with analog surround sound setup</a>.
</p>
<h3>
<span id="Unable_to_select_surround_configuration_other_than_.22Surround_4.0.22"></span><span class="mw-headline" id='Unable_to_select_surround_configuration_other_than_"Surround_4.0"'>Unable to select surround configuration other than "Surround 4.0"</span>
</h3>
<p>If you are unable to set 5.1 surround output in pavucontrol because it only shows "Analog Surround 4.0 Output", open the ALSA mixer and change the output configuration there to 6 channels. Then restart pulseaudio, and pavucontrol will list many more options.
</p>
<h3><span class="mw-headline" id="Realtime_scheduling">Realtime scheduling</span></h3>
<p>If rtkit does not work, you can manually set up your system to run PulseAudio with real-time scheduling, which can help performance. To do this, add the following lines to <code>/etc/security/limits.conf</code>:
</p>
<pre>@pulse-rt - rtprio 9
@pulse-rt - nice -11
</pre>
<p>Afterwards, you need to add your user to the <code>pulse-rt</code> group:
</p>
<pre># gpasswd -a &lt;user&gt; pulse-rt
</pre>
<h3>
<span id="pactl_.22invalid_option.22_error_with_negative_percentage_arguments"></span><span class="mw-headline" id='pactl_"invalid_option"_error_with_negative_percentage_arguments'>pactl "invalid option" error with negative percentage arguments</span>
</h3>
<p><code>pactl</code> commands that take negative percentage arguments will fail with an 'invalid option' error. Use the standard shell '--' pseudo argument
to disable argument parsing before the negative argument. <i>e.g.</i> <code>pactl set-sink-volume 1 -- -5%</code>.
</p>
<h3><span class="mw-headline" id="Fallback_device_is_not_respected">Fallback device is not respected</span></h3>
<p>PulseAudio does not have a true default device. Instead it uses a <a rel="nofollow" class="external text" href="https://www.freedesktop.org/wiki/Software/PulseAudio/Documentation/User/DefaultDevice/">"fallback"</a>, which only applies to new sound streams. This means previously run applications are not affected by the newly set fallback device.
</p>
<p><span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=gnome-control-center">gnome-control-center</a></span>, <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=mate-media">mate-media</a></span> and <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/paswitch/">paswitch</a></span><sup><small>AUR</small></sup> handle this gracefully. Alternatively: 
</p>
<p>1. Move the old streams in <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=pavucontrol">pavucontrol</a></span> manually to the new sound card.
</p>
<p>2. Stop Pulse, erase the "stream-volumes" in <code>~/.config/pulse</code> and/or <code>~/.pulse</code> and restart Pulse. This also resets application volumes.
</p>
<p>3. Disable stream device reading. This may be not wanted when using different soundcards with different applications.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/pulse/default.pa</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">load-module module-stream-restore restore_device=false</pre>
<h3>
<span id="RTP.2FUDP_packet_flood"></span><span class="mw-headline" id="RTP/UDP_packet_flood">RTP/UDP packet flood</span>
</h3>
<p>In some cases the default configuration might flood the network with UDP packets.<a rel="nofollow" class="external autonumber" href="https://gitlab.freedesktop.org/pulseaudio/pulseaudio/issues/505">[15]</a> 
To fix this problem, launch <code>paprefs</code> and disable "Multicast/RTP Sender".<a rel="nofollow" class="external autonumber" href="https://bugs.launchpad.net/ubuntu/+source/pulseaudio/+bug/411688/comments/36">[16]</a>
</p>
<h3>
<span id="New_audio_source_streams_auto-select_to_.22blank.22_stream_instead_of_BT_headphones"></span><span class="mw-headline" id='New_audio_source_streams_auto-select_to_"blank"_stream_instead_of_BT_headphones'>New audio source streams auto-select to "blank" stream instead of BT headphones</span>
</h3>
<p>Example scenario: Restarting, stopping, fast forwarding a Youtube video on Firefox 68.0.1 on KDE + Arch might set the "sink" associated with it in PulseAudio to a blank state, and then output sound over laptop speakers. Inconsistently reproducible on Dell 9360. 
</p>
<p>Fix seems to be to kill and restart <code>pulseaudio</code>.
</p>
<pre>pulseaudio -k
pulseaudio --start
</pre>
</div>
</div>
<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../../en/Category:Sound.html" title="Category:Sound">Sound</a></li></ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden categories: <ul>
<li><a href="../../en/Category:Pages_or_sections_flagged_with_Template:Style.html" title="Category:Pages or sections flagged with Template:Style">Pages or sections flagged with Template:Style</a></li>
<li><a href="../../en/Category:Pages_with_broken_package_links.html" title="Category:Pages with broken package links">Pages with broken package links</a></li>
<li><a href="../../en/Category:Pages_with_dead_links.html" title="Category:Pages with dead links">Pages with dead links</a></li>
</ul>
</div>
</div>
	</div>
</div>

<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
		<li>Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=PulseAudio/Troubleshooting&amp;oldid=645219">https://wiki.archlinux.org/index.php?title=PulseAudio/Troubleshooting&amp;oldid=645219</a>"</li>
		<li id="footer-info-lastmod"> This page was last edited on 13 December 2020, at 16:19.</li>
		<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
	<br>
</ul>
	<ul id="footer-places">
		<li id="footer-places-privacy"><a href="../../en/ArchWiki:Privacy_policy.html" title="ArchWiki:Privacy policy">Privacy policy</a></li>
		<li id="footer-places-about"><a href="../../en/ArchWiki:About.html" title="ArchWiki:About">About ArchWiki</a></li>
		<li id="footer-places-disclaimer"><a href="../../en/ArchWiki:General_disclaimer.html" title="ArchWiki:General disclaimer">Disclaimers</a></li>
	</ul>
	<ul id="footer-icons" class="noprint">
		<li id="footer-copyrightico">
	</ul>
	<div style="clear: both;"></div>
</footer>



</body>
</html>
