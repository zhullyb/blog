<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>MacBookPro7,1 - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.35.0">
<meta name="robots" content="noindex,follow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="http://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-MacBookPro7_1 rootpage-MacBookPro7_1 skin-vector action-view skin-vector-legacy">
<div id="content" class="mw-body" role="main" style="margin: 0">
	<a id="top"></a>
	<div id="siteNotice" class="mw-body-content"></div>
	<div class="mw-indicators mw-body-content">
	</div>
	<h1 id="firstHeading" class="firstHeading" lang="en">MacBookPro7,1</h1>
	<div id="bodyContent" class="mw-body-content">
		<div id="siteSub" class="noprint">From ArchWiki</div>
		<div id="contentSub"></div>
		<div id="contentSub2"></div>
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="#searchInput">Jump to search</a>
		<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr">
<div class="warningbox">The printable version is no longer supported and may have rendering errors. Please update your browser bookmarks and please use the default browser print function instead.</div>
<div class="mw-parser-output">
<div class="archwiki-template-meta-related-articles-start">
<p>Related articles</p>
<ul>
<li><a href="../en/Mac.html" title="Mac">Mac</a></li>
<li><a class="mw-selflink selflink">MacBookPro7,1</a></li>
<li><a href="../en/MacBookPro8,1/8,2/8,3_(2011).html" title="MacBookPro8,1/8,2/8,3 (2011)">MacBookPro8,1/8,2/8,3 (2011)</a></li>
<li><a href="../en/MacBookPro9,2_(Mid-2012).html" title="MacBookPro9,2 (Mid-2012)">MacBookPro9,2 (Mid-2012)</a></li>
</ul>
</div>
<div class="noprint archwiki-template-message">
<p><a href="../File:Tango-edit-clear.png" class="image"><img alt="Tango-edit-clear.png" src="../File:Tango-edit-clear.png" decoding="async" width="48" height="48"></a><b>This article or section needs language, wiki syntax or style improvements. See <a href="../en/Help:Style.html" title="Help:Style">Help:Style</a> for reference.</b><a href="../File:Tango-edit-clear.png" class="image"><img alt="Tango-edit-clear.png" src="../File:Tango-edit-clear.png" decoding="async" width="48" height="48"></a></p>
<div>
<b>Reason:</b> Multiple <a href="../en/Help:Style.html" title="Help:Style">Help:Style</a> violations, wall of text duplicating other articles (Discuss in <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php/Talk:MacBookPro7,1">Talk:MacBookPro7,1#</a>)</div>
</div>
<p>This page contains tips on installing Arch Linux on a Mid 2010 13" MacBook Pro alongside a pre-existing OSX operating system.
</p>
<div id="toc" class="toc" role="navigation" aria-labelledby="mw-toc-heading">
<input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none"><div class="toctitle" lang="en" dir="ltr">
<h2 id="mw-toc-heading">Contents</h2>
<span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span>
</div>
<ul>
<li class="toclevel-1 tocsection-1">
<a href="#Preparation"><span class="tocnumber">1</span> <span class="toctext">Preparation</span></a>
<ul>
<li class="toclevel-2 tocsection-2"><a href="#Install_Boot_Manager"><span class="tocnumber">1.1</span> <span class="toctext">Install Boot Manager</span></a></li>
<li class="toclevel-2 tocsection-3"><a href="#Shrinking_Macintosh_HD"><span class="tocnumber">1.2</span> <span class="toctext">Shrinking Macintosh HD</span></a></li>
<li class="toclevel-2 tocsection-4"><a href="#EFI_vs_CSM_mode"><span class="tocnumber">1.3</span> <span class="toctext">EFI vs CSM mode</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-5">
<a href="#Installation"><span class="tocnumber">2</span> <span class="toctext">Installation</span></a>
<ul>
<li class="toclevel-2 tocsection-6">
<a href="#Dual_Boot"><span class="tocnumber">2.1</span> <span class="toctext">Dual Boot</span></a>
<ul>
<li class="toclevel-3 tocsection-7"><a href="#EFI-Mode"><span class="tocnumber">2.1.1</span> <span class="toctext">EFI-Mode</span></a></li>
<li class="toclevel-3 tocsection-8">
<a href="#CSM-Mode"><span class="tocnumber">2.1.2</span> <span class="toctext">CSM-Mode</span></a>
<ul>
<li class="toclevel-4 tocsection-9"><a href="#Can't_find_root_device"><span class="tocnumber">2.1.2.1</span> <span class="toctext">Can't find root device</span></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1 tocsection-10"><a href="#Network"><span class="tocnumber">3</span> <span class="toctext">Network</span></a></li>
<li class="toclevel-1 tocsection-11">
<a href="#Video"><span class="tocnumber">4</span> <span class="toctext">Video</span></a>
<ul>
<li class="toclevel-2 tocsection-12"><a href="#Nouveau"><span class="tocnumber">4.1</span> <span class="toctext">Nouveau</span></a></li>
<li class="toclevel-2 tocsection-13"><a href="#Nvidia"><span class="tocnumber">4.2</span> <span class="toctext">Nvidia</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-14"><a href="#Backlight_Control"><span class="tocnumber">5</span> <span class="toctext">Backlight Control</span></a></li>
<li class="toclevel-1 tocsection-15"><a href="#Fan_Control"><span class="tocnumber">6</span> <span class="toctext">Fan Control</span></a></li>
<li class="toclevel-1 tocsection-16"><a href="#Audio"><span class="tocnumber">7</span> <span class="toctext">Audio</span></a></li>
<li class="toclevel-1 tocsection-17"><a href="#Additional_Notes"><span class="tocnumber">8</span> <span class="toctext">Additional Notes</span></a></li>
</ul>
</div>

<h2><span class="mw-headline" id="Preparation">Preparation</span></h2>
<h3><span class="mw-headline" id="Install_Boot_Manager">Install Boot Manager</span></h3>
<p><b>Optional.</b> The easiest way to begin is by <a rel="nofollow" class="external text" href="http://www.rodsbooks.com/refind/">installing rEFInd</a> on Mac OSX before moving on to Arch. This will place a boot menu on startup. The config will be in your OSX partition - if this is not desirable it is possible to install it later in Arch. Keep in mind that since Apple's OS X 10.11 (El Capitan), the feature System Integrity Protection (SIP) doesn't allow for rEFInd installation in the way described on the Installing rEFInd page. See <a rel="nofollow" class="external text" href="https://www.rodsbooks.com/refind/sip.html">this site</a> for more information and installation instructions.
</p>
<h3><span class="mw-headline" id="Shrinking_Macintosh_HD">Shrinking Macintosh HD</span></h3>
<p>Using Mac OSX's disk utility, create a new partition, calculate the amount of free space required for all new partitions and shrink Macintosh HD to accommodate for this amount. Leave the new partition as free space for now.
</p>
<h3><span class="mw-headline" id="EFI_vs_CSM_mode">EFI vs CSM mode</span></h3>
<p>It's probably good to consider on forehand what the differences are and which will work best for you, especially considering the drawback EFI mode has on the NVIDIA driver.
</p>
<h2><span class="mw-headline" id="Installation">Installation</span></h2>
<p>To install an x86_64 system, follow the <a href="../en/Mac.html" title="Mac">Mac</a> EFI installation instructions.
It is recommended to read the <a href="../en/Unified_Extensible_Firmware_Interface.html" class="mw-redirect" title="UEFI">UEFI</a>, <a href="../en/Partitioning.html#GUID_Partition_Table" class="mw-redirect" title="GPT">GPT</a> and <a href="../en/Arch_boot_process.html#Boot_loader" title="Arch boot process">Arch boot process#Boot loader</a> pages before trying any of this on your machine.
Also of note, <a rel="nofollow" class="external text" href="https://gist.github.com/Apsu/4108795">GIST</a>.
</p>
<p>See notes on <b>video support</b> before attempting installation!
</p>
<p><i>The following assumes that you have somehow managed to install archlinux to a single partition on your drive, and that you still have your osx installation on a different partition.</i>
</p>
<h3><span class="mw-headline" id="Dual_Boot">Dual Boot</span></h3>
<p>If you want to dualboot osx and linux, the easiest way to do so is to use <a href="../en/REFInd.html" title="REFInd">rEFInd</a>.
rEFInd is a updated and maintained fork of <a rel="nofollow" class="external text" href="http://refit.sourceforge.net/">rEFIt</a> and should be used in its place.
</p>
<p>I've found it easiest to install rEFInd from osx. Depending on your setup, you'll either install it to your osx partition, or to the ESP partition (install.sh --esp). See <a rel="nofollow" class="external text" href="http://www.rodsbooks.com/refind/installing.html#installsh">here</a> for instructions.
Installing to the ESP partition can cause some <b>startup delay</b>, which can be overcome by simply renaming rEFInd's installation folder to "BOOT" and the executable to "bootx64.efi"<a rel="nofollow" class="external autonumber" href="http://www.rodsbooks.com/refind/installing.html#sluggish">[1]</a>
</p>
<p>Assuming that rEFInd was installed to the ESP, I've found it convenient to later mount the ESP as my "/boot" directory.
That way, by setting
</p>
<pre>scan_all_linux_kernels
</pre>
<p>in your refind.conf, rEFInd will automatically pickup the kernel. All you need to add is a "refind_linux.conf" file to the root of the ESP, containing your boot args. I use:
</p>
<pre>"Boot with defaults"    "root=/dev/sda3 rootfstype=xfs ro add_efi_memmap"
</pre>
<p>Note that my root partion is sda3 and that I use the xfs filesystem on it, yours may differ!
So my ESP partition looks like this when mounted under "/boot":
</p>
<pre>EFI/
 APPLE/
 BOOT/
  bootx64.efi
  drivers/
  icons/
  keys/
  refind.conf
initramfs-linux-fallback.img
initramfs-linux.img
refind_linux.conf
vmlinuz-linux
</pre>
<p>Note that the EFI/BOOT directory is normally named EFI/REFIND and that the bootx64.efi is normally named refind_x64.efi.
</p>
<h4><span class="mw-headline" id="EFI-Mode">EFI-Mode</span></h4>
<p>Consult <a href="../en/Unified_Extensible_Firmware_Interface.html" class="mw-redirect" title="UEFI">UEFI</a>
</p>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Warning:</strong> efibootmgr may brick your Mac firmware.</div>
<p>You should now be able to boot your mac in efi-mode via the kernel's efistub feature. rEFInd should present you with an option to do so.
See <a rel="nofollow" class="external text" href="http://www.rodsbooks.com/refind/linux.html">here</a> for more general information on the topic.
This however has some drawbacks, as mentioned in the <b>Video</b> section below. 
</p>
<h4><span class="mw-headline" id="CSM-Mode">CSM-Mode</span></h4>
<p>Booting your mac in csm- or legacy-mode provides a solution. To do so, we need a <b>hybrid mbr</b>, with at least one 'active/bootable' partition. See <a rel="nofollow" class="external text" href="http://www.rodsbooks.com/gdisk/hybrid.html">here</a> for more general information on how to setup a hybrid mbr.
Simply boot in <b>efi-mode</b>, then assuming you have three partitions, the ESP partition, an osx and a linux partition you'll need to use gdisk to set things up.
</p>
<pre># gdisk /dev/sda
</pre>
<p>Press 'p' to print your partition table, which should look somewhat like mine:
</p>
<pre>Number  Start (sector)    End (sector)  Size       Code  Name
  1              40          409639   200.0 MiB   0700  EFI System Partition
  2          409640       393186215   187.3 GiB   AF00  OSX
  3       393186216       625142414   110.6 GiB   8300  Linux filesystem
</pre>
<p>Press 'r' to enter recovery and transformation mode.
</p>
<p>Now press 'o' to print your mbr. It should only list a single partition covering the entire disk. Or depending on with which tools you used to partition your disk maybe some other entries.
</p>
<p>Press 'h' to create a new hybrid mbr. You'll be prompted for some input:
</p>
<pre>Type from one to three GPT partition numbers, separated by spaces, to be
added to the hybrid MBR, in sequence:
</pre>
<p>I chose to mirror my gpt, so I entered '1 2 3', but it should be enough to just use one partition here. In my example, this would need to be the ESP partition, so '1', but in case you don't want to use the ESP to store your kernels, this could also be the linux partition, so '3'. You decide :) 
</p>
<p>Another and maybe more secure way to mirror the gpt is only to enter '1' for the first and only partition, the EFI or boot partition. This prevents the strange behaviour of MacOS. It can happen that MacOS or its bootsystem can't find his partition and will end up in a rather long loop. Then proceed as written below.
</p>
<p>Make sure to say 'Yes' to the next promt:
</p>
<pre>Place EFI GPT (0xEE) partition first in MBR (good for GRUB)? (Y/N): y
</pre>
<p>Then set at least one partition as active/bootable:
</p>
<pre>Creating entry for GPT partition #1 (MBR partition #2)
Enter an MBR hex code (default 07): 
Set the bootable flag? (Y/N): y
</pre>
<p>Note the MBR hex code depends on the partition type, press 'l' in gdisk's main menu to list them.
</p>
<p>Press 'o' (<b>make sure you're still in the recovery menu!!!</b>) again to see your new hybrid mbr, in my case:
</p>
<pre>Number  Boot  Start Sector   End Sector   Status      Code
  1                     1           39   primary     0xEE
  2      *             40       409639   primary     0x07
  3                409640    393186215   primary     0xAF
  4             393186216    625142414   primary     0x83
</pre>
<p>Or if you choose to only mirror the first one, it can also look like this:
</p>
<pre>Number  Boot  Start Sector   End Sector   Status      Code
  1                     1           39   primary     0xEE
  2      *             40       409639   primary     0xEF
</pre>
<p>Even if the mbr table looks like this (<i>note that in the second table only the last two lines are missing</i>), the bootloader will know what to boot.
You can compare start and end sectors between the two tables if you wish.
</p>
<p>Press 'w' to write the table to disk and reboot.
</p>
<h5>
<span id="Can.27t_find_root_device"></span><span class="mw-headline" id="Can't_find_root_device">Can't find root device</span>
</h5>
<p>If booting fails, first try to use the initramfs-linux-fallback.img, as it includes more modules than your 'auto-detected' initramfs, and should allow the kernel to actually find your root partition.
You'll then need to rebuild your regular initramfs. Rebuild it with
</p>
<pre># mkinitcpio -p linux
</pre>
<p>If you're lucky, the whole booting process with the regular initramfs-linux will end up successfully, if not, then try to add the following configuration and rebuild the initramfs again.
I needed to include modules in the initramfs file. In /etc/mkinitcpio.conf:
</p>
<pre>MODULES="ata_generic libata xfs"
</pre>
<p>Note, that you'll only need xfs if your root partition is actually formatted with it, exchange it with the appropriate module for the file-system you use.
</p>
<p>Once you reboot, rEFInd should now present you with three options, two linux entries and one for osx. One linux entry will boot the kernel via efistub in <b>efi-mode</b>, the other will call syslinux(or your chosen bootloader) which then should boot the system in <b>csm-mode</b>. Do the latter from now on!
</p>
<p>The easiest way to see if you were successful, is to install the <a href="../en/NVIDIA.html" title="NVIDIA">NVIDIA</a> driver and start X.
</p>
<h2><span class="mw-headline" id="Network">Network</span></h2>
<p><a href="../en/Network_configuration/Wireless.html" class="mw-redirect" title="Wireless Setup">Wireless Setup</a> provides instructions on how to identify your card, but if your MacBook Pro 7,1 is like mine then you'll head to <a href="../en/Broadcom_wireless.html" title="Broadcom wireless">Broadcom Wireless</a> and use this command.
</p>
<pre>$ lspci -vnn -d 14e4:
</pre>
<p>If from this you discover that your full PCI-ID is <code>[14e4:432b]</code>, then the following advice applies to you: Don't waste time on the <code>b43</code> driver. I've been fiddling with it for weeks, and switching to <code>broadcom-wl</code> made all the problems go away. <code>broadcom-wl</code> might make your device names funky, but that's easily fixed with the udev rule documented on <a href="../en/Broadcom_wireless.html" title="Broadcom wireless">Broadcom Wireless</a>.
</p>
<p>I also recommend <code>netctl</code>.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Alternative solution for using b43:
<p>As of kernel version 3.17.1-2, Broadcom Wireless driver most likely won't work (ERROR @wl_cfg80211_scan :WLC_SCAN error (-22)). The only option seems to be loading the b43 driver in <a href="https://en.wikipedia.org/wiki/Programmed_input/output" class="extiw" title="wikipedia:Programmed input/output">PIO</a> mode. To enable PIO mode, install driver by following the guide at <a rel="nofollow" class="external text" href="https://wireless.wiki.kernel.org/en/users/drivers/b43">wireless.wiki.kernel.org</a>, then load the b43 kernel module with pio=1 and qos=0 parameters. To make this happen at boot, create <code>b43-firmware.conf</code> file in <code>/etc/modprobe.d/</code> and add the following lines:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">b43-firmware.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">options b43 pio=1 qos=0

blacklist wl
blacklist brcmsmac
blacklist brcmfmac
blacklist b43legacy
blacklist bcm43xx
blacklist brcm80211
</pre> 
<p><del>Although using PIO should be much slower than using <a href="https://en.wikipedia.org/wiki/Direct_memory_access" class="extiw" title="wikipedia:Direct memory access">DMA</a>, I haven't noticed any performance drop.</del> Further testing showed repetitive occurrences of noticable performance drops. Mostly expressed as rapid decrease of transfer speed, sometimes even dropped connections. It also seems that b43 driver has issues operating at 5Ghz.
</p>
<p>Some later kernels are giving me more success (without PIO), but still some wifi drops have occurred.
</p>
</div>
<h2><span class="mw-headline" id="Video">Video</span></h2>
<p>According to the <a rel="nofollow" class="external text" href="https://support.apple.com/kb/SP583?locale=en_US">Apple Product Technical Specifications</a> the MacBook Pro 7,1 has an <a rel="nofollow" class="external text" href="http://www.geforce.com/hardware/desktop-gpus/geforce-GT-320-OEM">NVIDIA GeForce GT 320M</a><sup title="Last check status: 404">[<a href="https://en.wikipedia.org/wiki/Wikipedia:Link_rot" class="extiw" title="wikipedia:Wikipedia:Link rot">dead link</a> 2020-03-30 ⓘ]</sup> in it.
</p>
<h3><span class="mw-headline" id="Nouveau">Nouveau</span></h3>
<p>Consult <a href="../en/Nouveau.html" title="Nouveau">Nouveau</a> for general info on the driver. Works out of the box, performance however is not that great and your system will get quite <i>hot</i> when running nouveau.
Will cause issues in electron based applications! Fix by adding --disable-gpu to the .shortcut!
</p>
<h3><span class="mw-headline" id="Nvidia">Nvidia</span></h3>
<p>Consult <a href="../en/NVIDIA.html" title="NVIDIA">NVIDIA</a> for general info on the driver. The drivers work out of the box when booting the mac in csm- or legacy-mode.
See <a rel="nofollow" class="external text" href="https://bbs.archlinux.org/viewtopic.php?id=162289">here</a> for some discussion on the topic.
</p>
<p>Running the drivers in <b>efi-mode</b> requires setting some PCI registers before the kernel modules get loaded, preferably using a udev hook or GRUB script. You can also use a efi shell script in REFind as stated <a rel="nofollow" class="external text" href="https://bbs.archlinux.org/viewtopic.php?pid=1833995#p1833995">here</a>. Otherwise, the screen just remains black when X starts. Follow these <a rel="nofollow" class="external text" href="https://askubuntu.com/questions/264247/proprietary-nvidia-drivers-with-efi-on-mac-to-prevent-overheating/613573#613573">instructions</a> in order to find the appropriate PCI device IDs for which to set the registers. This approach has been confirmed to work and is still being actively discussed inside the above mentioned <a rel="nofollow" class="external text" href="https://bbs.archlinux.org/viewtopic.php?pid=1522950#p1522950">thread</a>. Updated EFI Shell boot method <a rel="nofollow" class="external text" href="https://bbs.archlinux.org/viewtopic.php?pid=1910114#p1910114">here.</a> The latest NVIDIA drivers are no longer supported for this MacBook's GPU you will instead need to use these ones <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/nvidia-340xx-dkms/">nvidia-340xx-dkms</a></span><sup><small>AUR</small></sup>! Once installed create a config by running the command:
</p>
<pre># nvidia-xconfig
</pre>
<p>That will automatically generate a config for xorg (/etc/X11/xorg.conf). After that's done you will need to fix the fonts in your current DE/Window manager settings or by editing the xorg config!
</p>
<p>The NVIDIA binary driver doesn't support either simple display configuration switching or automatic monitor/display configuration on hotplug events, but this can be achieved by using autorandr and autorandr_launcher. Install autorandr first, and manually save each configuration as a profile.  autorandr_launcher can then be compiled and configured as a systemctl service.
<a rel="nofollow" class="external text" href="https://github.com/phillipberndt/autorandr">autorandr</a>
<a rel="nofollow" class="external text" href="https://github.com/smac89/autorandr-launcher">autorandr_launcher</a>
</p>
<h2><span class="mw-headline" id="Backlight_Control">Backlight Control</span></h2>
<p>When using Nvidia drivers, you can use <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/nvidia-bl-dkms/">nvidia-bl-dkms</a></span><sup><small>AUR</small></sup> to get controls in /sys/class/backlight/nvidia_backlight.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong>  <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/nvidia-bl-dkms/">nvidia-bl-dkms</a></span><sup><small>AUR</small></sup> doesn't build with kernel 5.x as of 14/3/2020 </div>
<p>You can also use <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=xorg-xbacklight">xorg-xbacklight</a></span> which sets the xrandr Backlight property usually only available on intel hardware.
</p>
<h2><span class="mw-headline" id="Fan_Control">Fan Control</span></h2>
<p>For controlling the fans I recommend using mbpfan from the AUR (<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/mbpfan-git/">mbpfan-git</a></span><sup><small>AUR</small></sup>), reasons being is that from my experience fan control isn't very great on Arch Linux by default and fans always run really loud without this package! Once you install that from the AUR add it to startup!
</p>
<pre># systemctl enable mbpfan.service
</pre>
<h2><span class="mw-headline" id="Audio">Audio</span></h2>
<p><del>In Linux kernel 5.1 (or was it 5.2?) the MacBook Pro 7,1 started having audio issues. I have yet to find a fix even though I've been looking for months. If anyone has a fix please edit this section with your fix in it. For now the temporary fix is just rolling back the kernel to Linux 4.19. To do that we need the Linux-LTS package:
<del>:<a href="../en/Help:Reading.html#Installation_of_packages" class="mw-redirect" title="Install">Install</a> the packages <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=linux-lts">linux-lts</a></span> and <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=linux-lts-headers">linux-lts-headers</a></span>.</del>
If you are using grub you need to regenerate your grub config, otherwise reconfigure your bootloader to point to /boot/vmlinuz-linux-lts.</del> Fixed since 5.4.6!
</p>
<h2><span class="mw-headline" id="Additional_Notes">Additional Notes</span></h2>
<p>For XFCE use cases:
</p>
<p>If you have issues with rebooting/power off function with XFCE power manager, add acpi=force to GRUB_CMDLINE_LINUX_DEFAULT in /etc/default/grub.
</p>
<p>Older versions of XFCE power manager will break backlight key handling if you select "handle display brightness keys" after installing nvidia driver (even after re-adding "RegistryDwords" "EnableBrightnessControl=1" to /usr/share/X11/xorg.conf.d/10-nvidia-brightness.conf)
</p>
<p>The PCI bridge values (prior to installing nvidia drivers) should be manually set in /etc/grub.d/01_enable_vga.conf
</p>
<p><a rel="nofollow" class="external text" href="https://askubuntu.com/questions/264247/proprietary-nvidia-drivers-with-efi-on-mac-to-prevent-overheating">Configuring PCI for installing NVIDIA drivers</a>
</p>
<p><a rel="nofollow" class="external text" href="https://askubuntu.com/questions/76081/brightness-not-working-after-installing-nvidia-driver">Enabling brightness function keys</a>
</p>
</div>
</div>
<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../en/Category:Apple.html" title="Category:Apple">Apple</a></li></ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden categories: <ul>
<li><a href="../en/Category:Pages_or_sections_flagged_with_Template:Style.html" title="Category:Pages or sections flagged with Template:Style">Pages or sections flagged with Template:Style</a></li>
<li><a href="../en/Category:Pages_with_dead_links.html" title="Category:Pages with dead links">Pages with dead links</a></li>
</ul>
</div>
</div>
	</div>
</div>

<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
		<li>Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=MacBookPro7,1&amp;oldid=631363">https://wiki.archlinux.org/index.php?title=MacBookPro7,1&amp;oldid=631363</a>"</li>
		<li id="footer-info-lastmod"> This page was last edited on 12 August 2020, at 08:14.</li>
		<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
	<br>
</ul>
	<ul id="footer-places">
		<li id="footer-places-privacy"><a href="../en/ArchWiki:Privacy_policy.html" title="ArchWiki:Privacy policy">Privacy policy</a></li>
		<li id="footer-places-about"><a href="../en/ArchWiki:About.html" title="ArchWiki:About">About ArchWiki</a></li>
		<li id="footer-places-disclaimer"><a href="../en/ArchWiki:General_disclaimer.html" title="ArchWiki:General disclaimer">Disclaimers</a></li>
	</ul>
	<ul id="footer-icons" class="noprint">
		<li id="footer-copyrightico">
	</ul>
	<div style="clear: both;"></div>
</footer>



</body>
</html>
