<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>Dell XPS 15 9560 - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.35.0">
<meta name="robots" content="noindex,follow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="http://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Dell_XPS_15_9560 rootpage-Dell_XPS_15_9560 skin-vector action-view skin-vector-legacy">
<div id="content" class="mw-body" role="main" style="margin: 0">
	<a id="top"></a>
	<div id="siteNotice" class="mw-body-content"></div>
	<div class="mw-indicators mw-body-content">
	</div>
	<h1 id="firstHeading" class="firstHeading" lang="en">Dell XPS 15 9560</h1>
	<div id="bodyContent" class="mw-body-content">
		<div id="siteSub" class="noprint">From ArchWiki</div>
		<div id="contentSub"></div>
		<div id="contentSub2"></div>
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="#searchInput">Jump to search</a>
		<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr">
<div class="warningbox">The printable version is no longer supported and may have rendering errors. Please update your browser bookmarks and please use the default browser print function instead.</div>
<div class="mw-parser-output">
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> This page refers to the 9560 revision of the XPS 15. Most of it also applies to the Precision 5520 and the XPS 15 9570</div>
<table class="wikitable" style="float: right;">
<tbody>
<tr>
<td><b>Device/Functionality</b></td>
<td>
<b>Status</b>
</td>
</tr>
<tr>
<td><a href="#Suspend_and_Hibernate">Suspend</a></td>
<td data-sort-value="3" style="background: #ffa; color: inherit; vertical-align: middle; text-align: center;">Buggy
</td>
</tr>
<tr>
<td><a href="#Suspend_and_Hibernate">Hibernate</a></td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Working
</td>
</tr>
<tr>
<td><a href="#Graphics">Integrated Graphics</a></td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Working
</td>
</tr>
<tr>
<td><a href="#Graphics">Discrete Nvidia Graphics</a></td>
<td data-sort-value="3" style="background: #ffa; color: inherit; vertical-align: middle; text-align: center;">Modify
</td>
</tr>
<tr>
<td><a href="#Wifi_and_Bluetooth">Wifi</a></td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Working
</td>
</tr>
<tr>
<td><a href="#Wifi_and_Bluetooth">Bluetooth</a></td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Working
</td>
</tr>
<tr>
<td><a href="#Wifi_and_Bluetooth">rfkill</a></td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Working
</td>
</tr>
<tr>
<td>Audio</td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Working
</td>
</tr>
<tr>
<td><a href="#Touchpad">Touchpad</a></td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Working
</td>
</tr>
<tr>
<td>Webcam</td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Working
</td>
</tr>
<tr>
<td>Card Reader</td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Working
</td>
</tr>
<tr>
<td>Function/Multimedia Keys</td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Working
</td>
</tr>
<tr>
<td><a href="#Power_Saving">Power Management</a></td>
<td data-sort-value="3" style="background: #ffa; color: inherit; vertical-align: middle; text-align: center;">Modify
</td>
</tr>
<tr>
<td><a href="#UEFI">EFI firmware updates</a></td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Working
</td>
</tr>
<tr>
<td><a href="#Fingerprint_reader">Fingerprint reader</a></td>
<td data-sort-value="1" style="background: #faa; color: inherit; vertical-align: middle; text-align: center;">Not working
</td>
</tr>
</tbody>
</table>
<p>This page contains recommendations for running Arch Linux on the Dell XPS 15 9560 (late 2016). With some configuration almost all the hardware is well supported. Exceptions are the fingerprint reader, occasional locks on resuming from suspend experienced by some users, and the lack of support for PRIME render offload to the discrete GPU in the Nvidia proprietary driver.
</p>
<div id="toc" class="toc" role="navigation" aria-labelledby="mw-toc-heading">
<input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none"><div class="toctitle" lang="en" dir="ltr">
<h2 id="mw-toc-heading">Contents</h2>
<span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span>
</div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#UEFI"><span class="tocnumber">1</span> <span class="toctext">UEFI</span></a></li>
<li class="toclevel-1 tocsection-2">
<a href="#Power_Management"><span class="tocnumber">2</span> <span class="toctext">Power Management</span></a>
<ul>
<li class="toclevel-2 tocsection-3"><a href="#Suspend_and_Hibernate"><span class="tocnumber">2.1</span> <span class="toctext">Suspend and Hibernate</span></a></li>
<li class="toclevel-2 tocsection-4"><a href="#Fan_and_temperature_monitoring_and_control"><span class="tocnumber">2.2</span> <span class="toctext">Fan and temperature monitoring and control</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="#Sensor_kernel_module_and_configuration"><span class="tocnumber">2.3</span> <span class="toctext">Sensor kernel module and configuration</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-6">
<a href="#Power_Saving"><span class="tocnumber">3</span> <span class="toctext">Power Saving</span></a>
<ul>
<li class="toclevel-2 tocsection-7">
<a href="#Disable_discrete_GPU"><span class="tocnumber">3.1</span> <span class="toctext">Disable discrete GPU</span></a>
<ul>
<li class="toclevel-3 tocsection-8"><a href="#bbswitch_method"><span class="tocnumber">3.1.1</span> <span class="toctext">bbswitch method</span></a></li>
<li class="toclevel-3 tocsection-9"><a href="#acpi_call_method"><span class="tocnumber">3.1.2</span> <span class="toctext">acpi_call method</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-10"><a href="#Standard_power_saving_configuration"><span class="tocnumber">3.2</span> <span class="toctext">Standard power saving configuration</span></a></li>
<li class="toclevel-2 tocsection-11"><a href="#Disable/autosuspend_of_touchscreen"><span class="tocnumber">3.3</span> <span class="toctext">Disable/autosuspend of touchscreen</span></a></li>
<li class="toclevel-2 tocsection-12"><a href="#Enable_NVME_APST"><span class="tocnumber">3.4</span> <span class="toctext">Enable NVME APST</span></a></li>
<li class="toclevel-2 tocsection-13"><a href="#Enable_power_saving_features_for_the_i915_kernel_module"><span class="tocnumber">3.5</span> <span class="toctext">Enable power saving features for the i915 kernel module</span></a></li>
<li class="toclevel-2 tocsection-14"><a href="#Wifi_and_Bluetooth"><span class="tocnumber">3.6</span> <span class="toctext">Wifi and Bluetooth</span></a></li>
<li class="toclevel-2 tocsection-15"><a href="#Undervolt_intel_CPU_and_GPU"><span class="tocnumber">3.7</span> <span class="toctext">Undervolt intel CPU and GPU</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-16">
<a href="#Graphics"><span class="tocnumber">4</span> <span class="toctext">Graphics</span></a>
<ul>
<li class="toclevel-2 tocsection-17"><a href="#Intel_card_only"><span class="tocnumber">4.1</span> <span class="toctext">Intel card only</span></a></li>
<li class="toclevel-2 tocsection-18"><a href="#Open_source_driver_with_PRIME_render_offloading"><span class="tocnumber">4.2</span> <span class="toctext">Open source driver with PRIME render offloading</span></a></li>
<li class="toclevel-2 tocsection-19"><a href="#Proprietary_driver_with_bumblebee"><span class="tocnumber">4.3</span> <span class="toctext">Proprietary driver with bumblebee</span></a></li>
<li class="toclevel-2 tocsection-20"><a href="#Proprietary_driver_with_PRIME_output_offloading"><span class="tocnumber">4.4</span> <span class="toctext">Proprietary driver with PRIME output offloading</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-21">
<a href="#Touchpad"><span class="tocnumber">5</span> <span class="toctext">Touchpad</span></a>
<ul>
<li class="toclevel-2 tocsection-22"><a href="#libinput_Driver_Configuration"><span class="tocnumber">5.1</span> <span class="toctext">libinput Driver Configuration</span></a></li>
<li class="toclevel-2 tocsection-23">
<a href="#Synaptics_Driver_Configuration"><span class="tocnumber">5.2</span> <span class="toctext">Synaptics Driver Configuration</span></a>
<ul>
<li class="toclevel-3 tocsection-24"><a href="#Configure_middle_button"><span class="tocnumber">5.2.1</span> <span class="toctext">Configure middle button</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1 tocsection-25">
<a href="#Thunderbolt_docks"><span class="tocnumber">6</span> <span class="toctext">Thunderbolt docks</span></a>
<ul>
<li class="toclevel-2 tocsection-26"><a href="#TB16"><span class="tocnumber">6.1</span> <span class="toctext">TB16</span></a></li>
<li class="toclevel-2 tocsection-27"><a href="#Dell_Docks"><span class="tocnumber">6.2</span> <span class="toctext">Dell Docks</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-28">
<a href="#Firmware_updates"><span class="tocnumber">7</span> <span class="toctext">Firmware updates</span></a>
<ul>
<li class="toclevel-2 tocsection-29"><a href="#Tooled"><span class="tocnumber">7.1</span> <span class="toctext">Tooled</span></a></li>
<li class="toclevel-2 tocsection-30"><a href="#Manual"><span class="tocnumber">7.2</span> <span class="toctext">Manual</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-31"><a href="#Fingerprint_reader"><span class="tocnumber">8</span> <span class="toctext">Fingerprint reader</span></a></li>
<li class="toclevel-1 tocsection-32">
<a href="#Troubleshooting"><span class="tocnumber">9</span> <span class="toctext">Troubleshooting</span></a>
<ul>
<li class="toclevel-2 tocsection-33"><a href="#xorg_freezes_at_startup"><span class="tocnumber">9.1</span> <span class="toctext">xorg freezes at startup</span></a></li>
<li class="toclevel-2 tocsection-34"><a href="#Audio_/_headphones"><span class="tocnumber">9.2</span> <span class="toctext">Audio / headphones</span></a></li>
<li class="toclevel-2 tocsection-35"><a href="#PCIe_Bus_Error_in_system_logs"><span class="tocnumber">9.3</span> <span class="toctext">PCIe Bus Error in system logs</span></a></li>
<li class="toclevel-2 tocsection-36"><a href="#lspci_causes_CPU_lockups"><span class="tocnumber">9.4</span> <span class="toctext">lspci causes CPU lockups</span></a></li>
<li class="toclevel-2 tocsection-37"><a href="#General_slowness_&amp;_stuttering"><span class="tocnumber">9.5</span> <span class="toctext">General slowness &amp; stuttering</span></a></li>
<li class="toclevel-2 tocsection-38"><a href="#During_Boot_time(POST),_device_attached_to_USB-C_port_does_not_working"><span class="tocnumber">9.6</span> <span class="toctext">During Boot time(POST), device attached to USB-C port does not working</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-39"><a href="#External_links"><span class="tocnumber">10</span> <span class="toctext">External links</span></a></li>
</ul>
</div>

<h2><span class="mw-headline" id="UEFI">UEFI</span></h2>
<p>Before installing it is necessary to modify some UEFI Settings. They can be accessed by pressing the F2 key repeatedly when booting.
</p>
<ul>
<li>Change the SATA Mode from the default "RAID" to "AHCI". This will allow Linux to detect the NVME SSD. If dual booting with an existing Windows installation, Windows will not boot after the change but <a rel="nofollow" class="external text" href="https://triplescomputers.com/blog/uncategorized/solution-switch-windows-10-from-raidide-to-ahci-operation/">this can be fixed without a reinstallation</a>.</li>
<li>Change Fastboot to "Thorough" in "POST Behaviour". This prevents intermittent boot failures.</li>
<li>Disable secure boot to allow Linux to boot.</li>
</ul>
<p>Installation of Arch Linux can proceed normally. Refer to the <a href="../en/Installation_guide.html" title="Installation guide">Installation guide</a> for more information.
</p>
<h2><span class="mw-headline" id="Power_Management">Power Management</span></h2>
<h3><span class="mw-headline" id="Suspend_and_Hibernate">Suspend and Hibernate</span></h3>
<p>Suspend and Hibernate work out of the box, although some users have reported <a rel="nofollow" class="external text" href="https://bbs.archlinux.org/viewtopic.php?id=223056">occasional system hangs on resuming from suspend</a>, more commonly on kernels since 4.10.
</p>
<p>The suspend function key is not printed on the keyboard, but it's actually mapped to <code>Fn</code>+<code>Insert</code>.
</p>
<h3><span class="mw-headline" id="Fan_and_temperature_monitoring_and_control">Fan and temperature monitoring and control</span></h3>
<p>Many of the thermometers can be read with <a href="../en/Lm_sensors.html" title="Lm sensors">lm_sensors</a>.
</p>
<p>Fan speeds can be monitored with <code>i8kctl</code> from <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/i8kutils-git/">i8kutils-git</a></span><sup><small>AUR</small></sup>. This laptop is not in the supported list so it is necessary to load the <code>i8k</code> kernel module with the <code>force=1</code> module option. See <a href="../en/Kernel_module.html#Setting_module_options" class="mw-redirect" title="Kernel modules">Kernel modules#Setting module options</a>. It is also possible to manually control fan speeds (at your own risk) however with manual control only a subset of the possible speeds are available (0rpm, 2500rpm, 4800rpm) instead of (0rpm, 2500rpm, 3200rpm, 3700rpm, 4800rpm, and 5100rpm) in the firmware's automatic control. See <a href="../en/Fan_speed_control.html#Dell_laptops" title="Fan speed control">Fan speed control#Dell laptops</a>.
</p>
<p>The built in fan modes can also be controlled directly by editing the setting in the bios. The <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=libsmbios">libsmbios</a></span> package provides many tools for reading and modifying certain settings on the computer. The <code>smbios-thermal-ctl</code> command can be used with the <code>--set-thermal-mode</code> flag to change the fan between modes <i>performance</i>, <i>cool-bottom</i>, <i>quiet</i> and <i>balanced</i>. For example:
</p>
<pre># smbios-thermal-ctl --set-thermal-mode quiet
</pre>
<p>this changes the fan mode to quiet, which makes the fan curve less aggressive.
</p>
<p>The thermometer on the discrete Nvidia GPU can be monitored with the <code>nvidia-smi</code> utility, which is part of <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=nvidia-utils">nvidia-utils</a></span>.
</p>
<h3><span class="mw-headline" id="Sensor_kernel_module_and_configuration">Sensor kernel module and configuration</span></h3>
<p>One avenue worth investigating is the use of the native kernel module dell-smm-hwmon:
</p>
<pre>$ modinfo dell-smm-hwmon | grep '^description'
description:    Dell laptop SMM BIOS hwmon driver
</pre>
<p>If the module won't load, try the passing the option <code>ignore_dmi=1</code> when running modprobe:
</p>
<pre># modprobe dell-smm-hwmon ignore_dmi=1
</pre>
<p>Upon successfully loading it you should see the following in your kernel logs and/or <code>dmesg</code>:
</p>
<pre>185:[    9.806060] dell_smm_hwmon: not running on a supported Dell system.
186:[    9.806061] dell_smm_hwmon: vendor=Dell Inc., model=XPS 15 9550, version=x.y.z
</pre>
<p>Now the sensors command should be able to display some useful data:
</p>
<pre>$ sensors -f 
dell_smm-virtual-0
Adapter: Virtual device
Processor Fan: 2490 RPM
Video Fan:     2501 RPM
CPU:           +105.8째F  
Ambient:       +109.4째F  
Ambient:       +104.0째F  
Other:         +104.0째F  
</pre>
<p>You can make these settings permanent by adding the following to <code>/etc/modprobe.d/dell.conf</code>:
</p>
<pre>options dell-smm-hwmon ignore_dmi=1
</pre>
<p>And also by making the the HWMON_MODULES variable appears like so in <code>/etc/conf.d/lm_sensors</code>:
</p>
<pre>HWMON_MODULES="coretemp dell-smm-hwmon"
</pre>
<h2><span class="mw-headline" id="Power_Saving">Power Saving</span></h2>
<h3><span class="mw-headline" id="Disable_discrete_GPU">Disable discrete GPU</span></h3>
<h4><span class="mw-headline" id="bbswitch_method"><code>bbswitch</code> method</span></h4>
<p>The discrete Nvidia GTX 1050 GPU is on by default and cannot be disabled in the UEFI settings. Even when idle, it uses a significant amount of power (about 7W). To disable it when not in use it is necessary to install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=bbswitch">bbswitch</a></span> and <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=bumblebee">bumblebee</a></span>, add <code>acpi_rev_override=1</code> to the <a href="../en/Kernel_parameters.html" title="Kernel parameters">Kernel parameters</a>, <a href="../en/Systemd.html#Using_units" class="mw-redirect" title="Enable">enable</a> <code>bumblebeed.service</code>, and reboot (you may need to reboot twice for the firmware to notice <code>acpi_rev_override</code>).
</p>
<pre>$ cat /proc/acpi/bbswitch
</pre>
<p>should now print
</p>
<pre>$ OFF
</pre>
<p>and
</p>
<pre>$ dmesg | grep bbswitch
</pre>
<p>should print something like
</p>
<pre>$ [    4.253642] bbswitch: loading out-of-tree module taints kernel.
$ [    4.253833] bbswitch: version 0.8
$ [    4.254093] bbswitch: Found integrated VGA device 0000:00:02.0: \_SB_.PCI0.GFX0
$ [    4.254163] bbswitch: Found discrete VGA device 0000:01:00.0: \_SB_.PCI0.PEG0.PEGP
$ [    4.254225] bbswitch: detected an Optimus _DSM function
$ [    4.254282] bbswitch: Succesfully loaded. Discrete card 0000:01:00.0 is on
$ [    4.256651] bbswitch: disabling discrete graphics
</pre>
<p><br>
</p>
<h4><span class="mw-headline" id="acpi_call_method"><code>acpi_call</code> method</span></h4>
<p>An alternative set of steps, not requiring <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=bbswitch">bbswitch</a></span> or <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=bumblebee">bumblebee</a></span> is as follows:
</p>
<ul>
<li>Install the Intel video driver using the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=xf86-video-intel">xf86-video-intel</a></span> package.</li>
<li>Blacklist the <code>nvidia</code> &amp; <code>nouveau</code> modules <a href="../en/Kernel_module.html#Blacklisting" class="mw-redirect" title="Kernel modules">Kernel modules#Blacklisting</a>
</li>
<li>Power down the GPU <a href="../en/Hybrid_graphics.html#Fully_Power_Down_Discrete_GPU" title="Hybrid graphics">with an ACPI command</a>
</li>
</ul>
<h3><span class="mw-headline" id="Standard_power_saving_configuration">Standard power saving configuration</span></h3>
<p>It is a good idea to install a tool to tune common settings to save power. See <a href="../en/Power_management.html#Userspace_tools" title="Power management">Power management#Userspace tools</a>.
</p>
<h3>
<span id="Disable.2Fautosuspend_of_touchscreen"></span><span class="mw-headline" id="Disable/autosuspend_of_touchscreen">Disable/autosuspend of touchscreen</span>
</h3>
<p>Disabling the touchscreen can be done in the UEFI settings and results in significant power savings.
If touchscreen is required it can be placed into autosuspend by <a href="../en/TLP.html" title="TLP">TLP</a> by adding <code>04f3:24a1</code> to <code>USB_WHITELIST</code> in tlp config file. The <code>USB_AUTOSUSPEND</code> must be set to 1 for this to have an effect. This will leave touchscreen enabled for usage and will consume much less battery. 
</p>
<h3><span class="mw-headline" id="Enable_NVME_APST">Enable NVME APST</span></h3>
<p>Starting from linux 4.11, NVME APST is supported and enabled by default, allowing NVME SSDs to be switched to lower power states when idle, achieving significant power savings. See <a href="../en/Solid_state_drive/NVMe.html#Power_Saving_APST" class="mw-redirect" title="Solid State Drives/NVMe">Solid State Drives/NVMe#Power Saving APST</a>. Depending on the specific SSD, it may also be necessary to adjust the <code>default_ps_max_latency_us</code> parameter to the <code>nvme_core</code> module in order to make ASPT work. This is necessary with the Toshiba THNSN5512GPUK for example.
</p>
<h3><span class="mw-headline" id="Enable_power_saving_features_for_the_i915_kernel_module">Enable power saving features for the i915 kernel module</span></h3>
<p>Passing the following options to the i915 kernel module results in significant power savings: <code>enable_fbc=1 enable_psr=1 disable_power_well=0</code>. Some users with the HD matte screen have reported that these parameters cause screen flickering. Frame buffer compression (<code>enable_fbc=1</code>) is enabled by default starting from kernel 4.11.
</p>
<h3><span class="mw-headline" id="Wifi_and_Bluetooth">Wifi and Bluetooth</span></h3>
<p>For the Precision 5520 which has an Intel 8265 wifi card, the <code>power_save</code> option for the <code>iwlwifi</code> kernel module can be set from 1 to 5 with potential power savings. See <a href="../en/Kernel_module.html#Setting_module_options" class="mw-redirect" title="Kernel modules">Kernel modules#Setting module options</a>. Bluetooth and Wifi can seperately be disabled with rfkill. See <a href="../en/Network_configuration/Wireless.html#Rfkill_caveat" class="mw-redirect" title="Wireless network configuration">Wireless network configuration#Rfkill caveat</a>.
</p>
<h3><span class="mw-headline" id="Undervolt_intel_CPU_and_GPU">Undervolt intel CPU and GPU</span></h3>
<p>It is possible to reduce the voltage supplied to the CPU and integrated intel GPU in order to reduce their power consumption. Usually some reduction is possible without any instability, depending on the specific system. Often the first signs of instability come during suspend, resume, and transitions between load and idle, not necessarily during extended periods of high load. See <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=intel-undervolt">intel-undervolt</a></span> and <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/linux-intel-undervolt-tool/">linux-intel-undervolt-tool</a></span><sup><small>AUR</small></sup> which can automate the process of undervolting on each boot/resume.
</p>
<h2><span class="mw-headline" id="Graphics">Graphics</span></h2>
<p>The integrated Intel HD 630 GPU works well out of the box. Optionally you may install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=xf86-video-intel">xf86-video-intel</a></span> but this is no longer recommended, since the built in kernel modesetting driver is more reliable. If you do not want to use the discrete Nvidia GPU, no extra setup is necessary. Otherwise there are a few options. All of the display outputs are connected to the integrated GPU so there is no need to set up output from the discrete GPU. It may be necessary to compile a custom kernel as described in <a href="#Power_Saving">#Power Saving</a>.
</p>
<h3><span class="mw-headline" id="Intel_card_only">Intel card only</span></h3>
<p>See <a href="#Disable_discrete_GPU">#Disable discrete GPU</a> above.
</p>
<h3><span class="mw-headline" id="Open_source_driver_with_PRIME_render_offloading">Open source driver with PRIME render offloading</span></h3>
<p>With this setup it is possible to use the integrated GPU by default and to offload GPU intensive applications to the discrete GPU by the use of the <code>DRI_PRIME</code> environment variable. See <a href="../en/PRIME.html" title="PRIME">PRIME</a> for details. Note that the open source Nvidia driver <a href="../en/Nouveau.html" title="Nouveau">Nouveau</a> currently <a rel="nofollow" class="external text" href="https://nouveau.freedesktop.org/wiki/CodeNames/#NV130">does not support</a> power management on Pascal GPUs such as the GTX 1050, so performance is very poor with this driver. See <a href="../en/Nouveau.html#Power_management" title="Nouveau">Nouveau#Power management</a>.
</p>
<h3><span class="mw-headline" id="Proprietary_driver_with_bumblebee">Proprietary driver with bumblebee</span></h3>
<p>With this setup the integrated GPU is used by default but some applications can be rendered on the discrete GPU with the <code>optirun</code> or <code>primusrun</code> launchers. See <a href="../en/Bumblebee.html" title="Bumblebee">Bumblebee</a> for detailed instructions. The lack of proper v-sync support means that with this method applications rendered on the discrete GPU exhibit tearing. There is also some overhead introduced as a result of moving data inefficiently between the discrete and integrated GPUs, but the Nvidia GPU performs much better than it does with Nouveau.
</p>
<h3><span class="mw-headline" id="Proprietary_driver_with_PRIME_output_offloading">Proprietary driver with PRIME output offloading</span></h3>
<p>With this setup the discrete GPU is used for all rendering and the integrated GPU is used only to display the rendered output. Power consumption is much higher during light usage because the discrete GPU cannot be disabled. Performance for graphics intensive applications is significantly better than with Bumblebee, and v-sync works due to <a rel="nofollow" class="external text" href="https://devtalk.nvidia.com/default/topic/957814/linux/prime-and-prime-synchronization/1">PRIME Synchronization</a> so tearing is eliminated. Remove <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=bumblebee">bumblebee</a></span> and follow the instructions in <a href="../en/NVIDIA_Optimus.html" title="NVIDIA Optimus">NVIDIA Optimus</a>, <a rel="nofollow" class="external text" href="http://us.download.nvidia.com/XFree86/Linux-x86_64/375.66/README/randr14.html">Nvidia README</a>, or <a rel="nofollow" class="external text" href="https://devtalk.nvidia.com/default/topic/957814/linux/prime-and-prime-synchronization/1">PRIME Synchronization thread</a> using <code>PCI:1:0:0</code> as the BusID. Add the <code>modeset=1</code> parameter to the <code>nvidia_drm</code> kernel module (on boot, not with modprobe) to enable PRIME synchronization and remove tearing (see <a href="../en/Kernel_module.html#Setting_module_options" class="mw-redirect" title="Kernel modules">Kernel modules#Setting module options</a>).
</p>
<h2><span class="mw-headline" id="Touchpad">Touchpad</span></h2>
<p>The Synaptics Touchpad's basic functionality works out of the box. Some <a href="../en/Desktop_environment.html" title="Desktop environment">desktop environments</a> ship with <a href="../en/Libinput.html" title="Libinput">libinput</a> and others with the <a href="../en/Touchpad_Synaptics.html" title="Touchpad Synaptics">xf86-input-synaptics</a> driver. You can see which package is installed by running:
</p>
<pre>pacman -Qn libinput xf86-input-synaptics
</pre>
<p>Depending on which package handles your touchpad input, the methods to extend the functionality varies.
</p>
<h3><span class="mw-headline" id="libinput_Driver_Configuration">libinput Driver Configuration</span></h3>
<p>The full documentation for <a href="../en/Libinput.html" title="Libinput">libinput</a> seemed to work quite well for this touchpad. While the driver already contains logic to process advanced multi-touch events like swipe and pinch gestures, the desktop environment or window manager might not have implemented actions for all of them yet.
</p>
<p>To get some three and four-touch gestures to work you may need to use the documentation at <a rel="nofollow" class="external text" href="https://github.com/bulletmark/libinput-gestures">libinput-gestures</a> and install the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/libinput-gestures/">libinput-gestures</a></span><sup><small>AUR</small></sup> package.
</p>
<h3><span class="mw-headline" id="Synaptics_Driver_Configuration">Synaptics Driver Configuration</span></h3>
<p>You can use <code>synclient</code> to list the touchpad's capabilities and change them for the session. 
</p>
<h4><span class="mw-headline" id="Configure_middle_button">Configure middle button</span></h4>
<p>The touchpad has a big click zone in the bottom that can be disabled or configured for 1, 2 or 3 buttons.
For example, to have most of the touchpad seen as "button 1" but the middle lower zone (middle button) and the right lower zone (right button), create <code>/etc/X11/xorg.conf.d/50-synaptics.conf</code> with content:
</p>
<pre>Section "InputClass"
   Identifier "touchpad catchall"
   Driver "synaptics"
   MatchIsTouchpad "on"
   # enable clik zone and configure 3 buttons on bottom
   Option "ClickPad" "1"
   Option "SoftButtonAreas" "60% 0 82% 0 40% 60% 82% 0"
   # other commons options than you may want to configure
   # scroll with two fingers (enabled vertically, disabled horizontally)
   Option "VertTwoFingerScroll" "1"
   Option "HorizTwoFingerScroll" "0"
   # enable tap as click: 1 finger -&gt; left button, 2 fingers -&gt; right, 3 fingers -&gt; middle
   Option "TapButton1" "1"
   Option "TapButton2" "3"
   Option "TapButton3" "2"
   # idem but for click with 1,2,3 fingers. Use "0" to disable. 
   Option "ClickFinger1" "1"
   Option "ClickFinger2" "3"
   Option "ClickFinger3" "2"
   # palm detection. These parameters somehow works, YMMV. 
   Option "PalmDetect" "1"
   Option "PalmMinWidth" "10"
   Option "PalmMinZ" "200"
EndSection
</pre>
<p>With the recent deprecation of synaptics, it is possible to use existing GUI (for instance, GNOME Tweak Tool) to change the behavior. Using gnome-tweaks, under Keyboard &amp; Mouse section, Mouse Click Emulation is set by default to "Fingers". Changing it to the "Area" option, which uses the bottom right of the touchpad for a right click, fixes the problem.
</p>
<h2><span class="mw-headline" id="Thunderbolt_docks">Thunderbolt docks</span></h2>
<h3><span class="mw-headline" id="TB16">TB16</span></h3>
<p>TB16 works fine if either Thunderbolt security is disabled in the BIOS or using <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=bolt">bolt</a></span> to temporarily authorize or permanently enroll Thunderbolt devices with Thunderbolt security activated.  Various quirks are detailed on the <a href="../en/Dell_TB16.html" title="Dell TB16">Dell TB16</a> page.
</p>
<h3><span class="mw-headline" id="Dell_Docks">Dell Docks</span></h3>
<p>Some Dell docks (tested with the D6000) experience behavior whereby the displays periodically disconnect. Unplugging and plugging the dock back in again causes the displays to come back to life, but the displays will disconnect again. The more permanent fix for this is to edit the /etc/pulse/default.pa file, and comment out the following line:
</p>
<pre>### Automatically suspend sinks/sources that become idle for too long
load-module module-suspend-on-idle
</pre>
<p>A discussion around this issue can be found <a rel="nofollow" class="external text" href="https://www.displaylink.org/forum/showthread.php?t=65476&amp;page=2">here</a>, including the discussion around fixes.
</p>
<h2><span class="mw-headline" id="Firmware_updates">Firmware updates</span></h2>
<h3><span class="mw-headline" id="Tooled">Tooled</span></h3>
<p>Firmware updates are provided by Dell and can be installed with <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=fwupd">fwupd</a></span>.
</p>
<h3><span class="mw-headline" id="Manual">Manual</span></h3>
<p>Alternatively, firmware images can be found at <a rel="nofollow" class="external text" href="https://www.dell.com/support/home/us/en/04/product-support/product/xps-15-9560-laptop/drivers">Dell support page</a> as <code>XPS_15_9560_X.Y.Z.exe</code> files.
In order to install:
</p>
<ul>
<li>Download the desired firmware from section "Dell XPS 15 9560 System BIOS"</li>
<li>Save it in <code>/boot/EFI/Dell/Bios/</code> (this path may vary, depending on your installation) or to a FAT32-formatted USB key</li>
<li>Reboot the system, and enter the boot menu by pressing repeatedly <code>F12</code> on Dell logo</li>
<li>Choose "Bios Flash Update"</li>
<li>Select the file previously saved, and start the process</li>
</ul>
<p>The process will take about five minutes, during which the system will have some reboots and push fans at maximum speed. Finally the system will reboot normally.
</p>
<h2><span class="mw-headline" id="Fingerprint_reader">Fingerprint reader</span></h2>
<p>The fingerprint reader is a Validity/Synaptics model with USB id <code>138a:0091</code>.
There is currently a working prototype of a driver capable of capturing prints, however direct integration with libfprint is unlikely due to the manner in which the matching algorithm is implemented. <a rel="nofollow" class="external autonumber" href="https://github.com/hmaarrfk/Validity91">[1]</a>.
</p>
<p>There is also some people working on drivers for various other related readers. According to them it should be fairly easy to implement a driver for this model as none of the traffic to or from the device appears to be encrypted. Nevertheless, <code>138a:0091</code> is out of the scope of the project. <a rel="nofollow" class="external autonumber" href="https://github.com/nmikhailov/Validity90">[2]</a>
</p>
<h2><span class="mw-headline" id="Troubleshooting">Troubleshooting</span></h2>
<h3><span class="mw-headline" id="xorg_freezes_at_startup">xorg freezes at startup</span></h3>
<p>If Xorg freezes as soon as it starts, even before printing any logs, and you are trying to use the Intel card with the nvidia one disabled, you need to add kernel parameter <code>acpi_rev_override=1</code> as explained in <a href="#Disable_discrete_GPU">#Disable discrete GPU</a> above.
</p>
<h3>
<span id="Audio_.2F_headphones"></span><span class="mw-headline" id="Audio_/_headphones">Audio / headphones</span>
</h3>
<p>If audio output through the headphone jack suddenly stops working and restarting the computer doesn't help, try suspending/resuming it. It may be necessary to unplug headphones before suspending and then plug them in after the computer fully wakes up (based off of <a rel="nofollow" class="external text" href="https://askubuntu.com/a/934816">this</a> AskUbuntu answer and my experience on Arch). If headphone audio seems permanently missing even after suspend/resume tricks and plugging/unplugging the cable, <code>$ alsactl restore</code> can bring it back. The last suggested thing to try is booting to Windows and muting/unmuting audio with headphones connected.
</p>
<p>If audio volume is low through the speakers/headphones, you may need to reboot into Windows and increase the volume in Windows. Then reboot into Linux and your speakers/headphones should be louder...
</p>
<h3><span class="mw-headline" id="PCIe_Bus_Error_in_system_logs">PCIe Bus Error in system logs</span></h3>
<p>If you have an NVMe disk and depending of your BIOS version (but even with 1.5.0 from october 2017), you may have a lot of system error logs like: 
</p>
<pre>Nov 25 22:36:08 xxxxx kernel: pcieport 0000:00:1c.0: PCIe Bus Error: severity=Corrected, type=Data Link Layer, id=00e0(Transmitter ID)
Nov 25 22:36:08 xxxxx kernel: pcieport 0000:00:1c.0:   device [8086:a110] error status/mask=00001000/00002000
Nov 25 22:36:08 xxxxx kernel: pcieport 0000:00:1c.0:    [12] Replay Timer Timeout
</pre>
<p>This can be corrected with the kernel boot option <code>pcie_aspm=off</code> which appears to have minimal to no affect on power consumption. If that does not work, try <code>pci=nommconf</code> (see <a rel="nofollow" class="external text" href="https://unix.stackexchange.com/questions/327730/what-causes-this-pcieport-00000003-0-pcie-bus-error-aer-bad-tlp">here</a> for explanation).
</p>
<h3><span class="mw-headline" id="lspci_causes_CPU_lockups"><code>lspci</code> causes CPU lockups</span></h3>
<p>The NVidia/nouveau driver may cause any runs of <code>lspci</code>, starting an X server, or otherwise poking the graphics card to cause at least one CPU core to lock up, as well as seeming to completely lock up PCIe access, for instance to the NVMe SSD. The kernel parameter <code>nouveau.modeset=0</code> may fix this. This is also related to the X freezes on startup (some machines may require lspci/startx to be run twice so they freeze after nouveau is taken care of); the solution in that case is to also set <code>acpi_rev_override=1</code>. <a rel="nofollow" class="external autonumber" href="https://cnly.github.io/2017/08/25/fix-system-hangs-xps-15-9560.html">[3]</a>
</p>
<h3>
<span id="General_slowness_.26_stuttering"></span><span class="mw-headline" id="General_slowness_&amp;_stuttering">General slowness &amp; stuttering</span>
</h3>
<p>If you experience a large degradation of general performance and responsiveness it may be due to the CPU getting stuck at 800mhz.  To check run <code>watch -n1 'lscpu | grep MHz'</code> and perform some tasks.  If the CPU MHz is stuck at 800 the whole time then you have the problem.
</p>
<p>To fix there are two options:
</p>
<ol>
<li>Disconnect the battery then hold the power button for 5-30 seconds</li>
<li>Drain the battery then hold the power button for 5-30 seconds</li>
</ol>
<p>After restarting run the same command again and the CPU MHz should be back to normal. <a rel="nofollow" class="external autonumber" href="https://www.dell.com/community/Laptops-General-Read-Only/Dell-XPS-9550-CPU-Multiplier-Stuck-at-8/td-p/4740654">[4]</a>
</p>
<h3>
<span id="During_Boot_time.28POST.29.2C_device_attached_to_USB-C_port_does_not_working"></span><span class="mw-headline" id="During_Boot_time(POST),_device_attached_to_USB-C_port_does_not_working">During Boot time(POST), device attached to USB-C port does not working</span>
</h3>
<p>It can be a problem in some cases when device attached to USB-C port.
</p>
<ul>
<li>Cannot enter BIOS boot menu or BIOS setup with external keyboard.</li>
<li>Cannot deal with boot loader menu.</li>
<li>Cannot boot from external USB storage.</li>
</ul>
<p>It caused by Dell system does not init USB-C port during POST by default. But it can be turned on in BIOS setup.
</p>
<ul><li>System Configureation
<ul><li>Thunderbolt Adapter Configuration
<ul><li>Enable Thunderbolt Adapter Boot Support</li></ul>
</li></ul>
</li></ul>
<h2><span class="mw-headline" id="External_links">External links</span></h2>
<ul>
<li><a rel="nofollow" class="external text" href="https://bbs.archlinux.org/viewtopic.php?id=223056">Dell XPS 15 9560 (Early 2017) Thread on the Arch Forums</a></li>
<li><a rel="nofollow" class="external text" href="https://www.reddit.com/r/Dell/comments/6s2e3w/optimizing_dell_xps_for_linux/">Optimizing Dell XPS</a></li>
<li><a rel="nofollow" class="external text" href="https://www.ultrabookreview.com/14875-fix-throttling-xps-15/">Tutorial about how to change CPU thermal paste on XPS15 to avoid throttling</a></li>
<li><a rel="nofollow" class="external autonumber" href="https://www.displaylink.org/forum/showthread.php?t=65476&amp;page=2">[5]</a></li>
<li><a rel="nofollow" class="external text" href="https://www.reddit.com/r/Dell/comments/9pdgid/configuring_the_xps_to_play_nice_with_linux/">Configuring the XPS to play nice with Linux thermal sensors (lm_sensors)</a></li>
</ul>
</div>
</div>
<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../en/Category:Dell.html" title="Category:Dell">Dell</a></li></ul>
</div></div>
	</div>
</div>

<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
		<li>Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Dell_XPS_15_9560&amp;oldid=646724">https://wiki.archlinux.org/index.php?title=Dell_XPS_15_9560&amp;oldid=646724</a>"</li>
		<li id="footer-info-lastmod"> This page was last edited on 26 December 2020, at 11:52.</li>
		<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
	<br>
</ul>
	<ul id="footer-places">
		<li id="footer-places-privacy"><a href="../en/ArchWiki:Privacy_policy.html" title="ArchWiki:Privacy policy">Privacy policy</a></li>
		<li id="footer-places-about"><a href="../en/ArchWiki:About.html" title="ArchWiki:About">About ArchWiki</a></li>
		<li id="footer-places-disclaimer"><a href="../en/ArchWiki:General_disclaimer.html" title="ArchWiki:General disclaimer">Disclaimers</a></li>
	</ul>
	<ul id="footer-icons" class="noprint">
		<li id="footer-copyrightico">
	</ul>
	<div style="clear: both;"></div>
</footer>



</body>
</html>
