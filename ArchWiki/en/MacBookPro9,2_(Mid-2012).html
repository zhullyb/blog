<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>MacBookPro9,2 (Mid-2012) - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.35.0">
<meta name="robots" content="noindex,follow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="http://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-MacBookPro9_2_Mid-2012 rootpage-MacBookPro9_2_Mid-2012 skin-vector action-view skin-vector-legacy">
<div id="content" class="mw-body" role="main" style="margin: 0">
	<a id="top"></a>
	<div id="siteNotice" class="mw-body-content"></div>
	<div class="mw-indicators mw-body-content">
	</div>
	<h1 id="firstHeading" class="firstHeading" lang="en">MacBookPro9,2 (Mid-2012)</h1>
	<div id="bodyContent" class="mw-body-content">
		<div id="siteSub" class="noprint">From ArchWiki</div>
		<div id="contentSub"></div>
		<div id="contentSub2"></div>
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="#searchInput">Jump to search</a>
		<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr">
<div class="warningbox">The printable version is no longer supported and may have rendering errors. Please update your browser bookmarks and please use the default browser print function instead.</div>
<div class="mw-parser-output">
<div class="archwiki-template-meta-related-articles-start">
<p>Related articles</p>
<ul>
<li><a href="../en/Mac.html" title="Mac">Mac</a></li>
<li><a href="../en/MacBookPro7,1.html" title="MacBookPro7,1">MacBookPro7,1</a></li>
<li><a href="../en/MacBookPro8,1/8,2/8,3_(2011).html" title="MacBookPro8,1/8,2/8,3 (2011)">MacBookPro8,1/8,2/8,3 (2011)</a></li>
<li><a class="mw-selflink selflink">MacBookPro9,2 (Mid-2012)</a></li>
</ul>
</div>
<p>This guide outlines special information on installing and configuring Arch on the more recent Macbook 9,x (Mid-2012) hardware alongside a pre-existing OSX operating system.  This requires adequate free disk space, install media (such as a USB or CD), and a wired connection for the initial steps of the install procedure.  
</p>
<p>This article is written with a dual-boot setup in mind, and does <i>not</i> cover how to replace OSX with Arch.
</p>
<p>For general help on the install preocedure see the <a href="../en/Installation_guide.html" title="Installation guide">Installation guide</a>
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Remember to back up your pre-existing OSX installation before proceeding!</div>
<div id="toc" class="toc" role="navigation" aria-labelledby="mw-toc-heading">
<input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none"><div class="toctitle" lang="en" dir="ltr">
<h2 id="mw-toc-heading">Contents</h2>
<span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span>
</div>
<ul>
<li class="toclevel-1 tocsection-1">
<a href="#Preparation"><span class="tocnumber">1</span> <span class="toctext">Preparation</span></a>
<ul>
<li class="toclevel-2 tocsection-2"><a href="#Recording_UIDs"><span class="tocnumber">1.1</span> <span class="toctext">Recording UIDs</span></a></li>
<li class="toclevel-2 tocsection-3"><a href="#Install_Boot_Manager"><span class="tocnumber">1.2</span> <span class="toctext">Install Boot Manager</span></a></li>
<li class="toclevel-2 tocsection-4"><a href="#Shrinking_Macintosh_HD"><span class="tocnumber">1.3</span> <span class="toctext">Shrinking Macintosh HD</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-5">
<a href="#Installation"><span class="tocnumber">2</span> <span class="toctext">Installation</span></a>
<ul>
<li class="toclevel-2 tocsection-6"><a href="#Preparing_installation_media"><span class="tocnumber">2.1</span> <span class="toctext">Preparing installation media</span></a></li>
<li class="toclevel-2 tocsection-7">
<a href="#Running_the_Arch_installation"><span class="tocnumber">2.2</span> <span class="toctext">Running the Arch installation</span></a>
<ul>
<li class="toclevel-3 tocsection-8"><a href="#Sample_partition_layout"><span class="tocnumber">2.2.1</span> <span class="toctext">Sample partition layout</span></a></li>
<li class="toclevel-3 tocsection-9"><a href="#Install_boot_loader"><span class="tocnumber">2.2.2</span> <span class="toctext">Install boot loader</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1 tocsection-10">
<a href="#Post_Installation"><span class="tocnumber">3</span> <span class="toctext">Post Installation</span></a>
<ul>
<li class="toclevel-2 tocsection-11"><a href="#SD_Card_Reader"><span class="tocnumber">3.1</span> <span class="toctext">SD Card Reader</span></a></li>
<li class="toclevel-2 tocsection-12"><a href="#Users"><span class="tocnumber">3.2</span> <span class="toctext">Users</span></a></li>
<li class="toclevel-2 tocsection-13"><a href="#Wireless"><span class="tocnumber">3.3</span> <span class="toctext">Wireless</span></a></li>
<li class="toclevel-2 tocsection-14">
<a href="#Inverting_FN_keys"><span class="tocnumber">3.4</span> <span class="toctext">Inverting FN keys</span></a>
<ul>
<li class="toclevel-3 tocsection-15"><a href="#Wireless_Flakiness"><span class="tocnumber">3.4.1</span> <span class="toctext">Wireless Flakiness</span></a></li>
<li class="toclevel-3 tocsection-16"><a href="#Keyboard_Backlight"><span class="tocnumber">3.4.2</span> <span class="toctext">Keyboard Backlight</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-17"><a href="#Xorg"><span class="tocnumber">3.5</span> <span class="toctext">Xorg</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-18">
<a href="#Bells_&amp;_Whistles"><span class="tocnumber">4</span> <span class="toctext">Bells &amp; Whistles</span></a>
<ul>
<li class="toclevel-2 tocsection-19">
<a href="#Emulating_OSX_Touchpad_Gestures"><span class="tocnumber">4.1</span> <span class="toctext">Emulating OSX Touchpad Gestures</span></a>
<ul>
<li class="toclevel-3 tocsection-20"><a href="#Using_synclient"><span class="tocnumber">4.1.1</span> <span class="toctext">Using synclient</span></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>

<h2><span class="mw-headline" id="Preparation">Preparation</span></h2>
<h3><span class="mw-headline" id="Recording_UIDs">Recording UIDs</span></h3>
<p>If you want to access your OSX user directories from Linux, write down the UID and GID for the users.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> OSX begins with the first user's UID at 501 while Arch defaults to 1000.</div>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Warning:</strong>  Never, <i>ever</i> change any file permissions in your OSX partition from Linux. Doing so can and will lead to serious repercussions.</div>
<h3><span class="mw-headline" id="Install_Boot_Manager">Install Boot Manager</span></h3>
<p><b>Optional.</b> The easiest way to begin is by <a rel="nofollow" class="external text" href="http://www.rodsbooks.com/refind/">installing rEFInd</a> on Mac OSX before moving on to Arch.  This will place a boot menu on startup.  The config will be in your OSX partition - if this is not desirable it is possible to install it later in Arch.  For more information consult <a href="../en/Unified_Extensible_Firmware_Interface.html" class="mw-redirect" title="UEFI">UEFI</a>.
</p>
<h3><span class="mw-headline" id="Shrinking_Macintosh_HD">Shrinking Macintosh HD</span></h3>
<p>Although nowadays Boot Camp requires a Windows installation disc before altering partitions, it is possible to do this using Mac OSX's disk utility.  Create a new partition, calculate the amount of free space required for all new partitions and shrink Macintosh HD to accommodate for this amount.  Leave the new partition as free space for now.
</p>
<h2><span class="mw-headline" id="Installation">Installation</span></h2>
<h3><span class="mw-headline" id="Preparing_installation_media">Preparing installation media</span></h3>
<p><a rel="nofollow" class="external text" href="https://archlinux.org/download/">Download Arch</a> and burn it to a USB, CD or DVD, and boot into the Arch install.
</p>
<h3><span class="mw-headline" id="Running_the_Arch_installation">Running the Arch installation</span></h3>
<p>Proceed from the Installation section in <a href="../en/Installation_guide.html#Installation" title="Installation guide">Installation guide#Installation</a>. Note that you'll need a wired connection to continue for now.
</p>
<p>The following differences will apply to MacBooks:
</p>
<h4><span class="mw-headline" id="Sample_partition_layout">Sample partition layout</span></h4>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Apple prefers having 128MB of unallocated space between partitions.  Whether or not this is completely necessary is uncertain, but if it seems like there is more than enough space available, then creating this buffer of free space may be a good idea.</div>
<pre>partition  mountpoint  size       type  label
/dev/sda1  /boot/efi   200MiB     vfat  EFI
/dev/sda2  -           ?          hfs+  Mac OS X
/dev/sda3  -           ?          hfs+  Recovery
/dev/sda4  /boot       100MiB     boot  boot
/dev/sda5  /           10GiB      ext4  root
/dev/sda6  /home       remaining  ext4  home (optional)
/dev/sda7  ?           ?          ?     shared (optional)
</pre>
<p>For sharing files between OSX and Linux, a number of filesystem options exist.  FAT32 is natively supported on all systems - however, it lacks support for filesystems larger than 2TB or files larger than 4GB.  Journaled HFS+ partitions, such as the Macintosh HD partition, will only mount read-only in Linux.  Full read-write support is available for unjournaled HFS+ filesystems.  ExFAT support can be made available by installing <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=exfat-utils">exfat-utils</a></span>.
</p>
<h4><span class="mw-headline" id="Install_boot_loader">Install boot loader</span></h4>
<p>Follow the relevant page for the chosen boot loader listed in <a href="../en/Arch_boot_process.html#Boot_loader" title="Arch boot process">Arch boot process#Boot loader</a>.
</p>
<h2><span class="mw-headline" id="Post_Installation">Post Installation</span></h2>
<p>Continue with <a href="../en/General_recommendations.html" title="General recommendations">General recommendations</a>, noting the following modifications:
</p>
<h3><span class="mw-headline" id="SD_Card_Reader">SD Card Reader</span></h3>
<p>The sdcard reader does not work properly with the highest speeds currently and may never work properly. To get it working you will have to sacrifice the ultra fast modes and use a quirk in your boot parameters.
</p>
<pre>sdhci.debug_quirks2=4
</pre>
<h3><span class="mw-headline" id="Users">Users</span></h3>
<p>If you wrote down your OSX uid's and gid's eariler, new users can be created by running:
</p>
<pre># useradd -m -u [uid] -g [gid] -G [additional_groups] -s [login_shell] [username]
</pre>
<p>In order to be able to access a OSX user's directory, only the uid and gid need to match. (usernames can differ)
</p>
<h3><span class="mw-headline" id="Wireless">Wireless</span></h3>
<p>Macbooks 8,1 to 9,2 (and possibly newer) use BCM4331 for Wifi. See <a href="../en/Broadcom_wireless.html" title="Broadcom wireless">Broadcom wireless</a> for details.
The Mac Mini 5.1 Also uses the Broadcom BCM4331 Wi-Fi Chip.
</p>
<h3><span class="mw-headline" id="Inverting_FN_keys">Inverting FN keys</span></h3>
<p>To make the FN keys function as normal FN keys, follow <a href="../en/Apple_Keyboard.html#Function_keys_do_not_work" title="Apple Keyboard">Apple Keyboard#Function keys do not work</a>.
</p>
<h4><span class="mw-headline" id="Wireless_Flakiness">Wireless Flakiness</span></h4>
<p>The only connection manager combination with BCM4331 that doesn't result in flakiness seems to be connman + disabled background scanning.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/connman/main.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[General]
BackgroundScanning = false</pre>
<p>If the solution above does not work or your wifi is extremly slow, the NetworkManager in combination with wpa_supplicant and dhclient seems to work.
</p>
<h4><span class="mw-headline" id="Keyboard_Backlight">Keyboard Backlight</span></h4>
<p>A "just works" solution is the  <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/acpibacklight/">acpibacklight</a></span><sup><small>AUR</small></sup><sup>[<a href="../en/Help:Procedures.html#Fix_broken_package_links" title="Help:Procedures">broken link</a>: package not found]</sup> package. It provides the just work case when controlling it with the keyboard shortcuts.
</p>
<h3><span class="mw-headline" id="Xorg">Xorg</span></h3>
<p>Main Page: <a href="../en/Xorg.html" title="Xorg">Xorg</a>
</p>
<p>Install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=xf86-video-intel">xf86-video-intel</a></span> and setup Xorg as you normally would.
</p>
<p>The built-in keyboard and most usb input devices will work out-of-the-box, but <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=xf86-input-synaptics">xf86-input-synaptics</a></span> is needed in order to use the built-in touchpad.
</p>
<h2>
<span id="Bells_.26_Whistles"></span><span class="mw-headline" id="Bells_&amp;_Whistles">Bells &amp; Whistles</span>
</h2>
<h3><span class="mw-headline" id="Emulating_OSX_Touchpad_Gestures">Emulating OSX Touchpad Gestures</span></h3>
<p>With a little bit of work it's possible to tweak the multitouch options on the trackpad.  This can be achieved with a combination of X11 driver settings and open source software.
</p>
<h4><span class="mw-headline" id="Using_synclient">Using synclient</span></h4>
<p><code>synclient</code> is included with the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=xf86-input-synaptics">xf86-input-synaptics</a></span> driver.  It is useful for experimenting with settings as they take effect immediately and expire at the end of an X session.  Many OSX options can be emulated without any additional software.
</p>
<p>Run <code>synclient -l</code> to have a look at all the available options.  Here are some suggestions which resemble the options found in OSX's System Preferences:
</p>
<ul>
<li>By default synaptics is configured to use a double-tap drag gesture found on older touchpads - one may argue that this is not necessary on a clickpad. <code>synclient TapAndDragGesture=0</code> will turn this off.</li>
<li>TapButtonX and ClickFingerX sets the mouse button triggered by tapping or clicking with X fingers.  set <code>TapButton2=3</code> and <code>ClickFinger2=3</code> to assign two-finger click to the right mouse button.</li>
<li>Setting the bottom-right corner click to right mouse button can be done by subtracting about 500 from <code>RightEdge</code> and <code>BottomEdge</code> and plugging the new values into <code>RightButtonAreaLeft</code> and <code>RightButtonAreaTop</code>.  If the last two options are not visible, set <code>Clickpad=1</code>.</li>
</ul>
<p>To make settings permanent, just modify <code>/etc/X11/xorg.conf.d/10-synaptics.conf</code>.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Right/Middle ButtonArea options are only recognized once the X fully loads the driver.  To work around this, create a script file <code>/usr/local/bin/synarea.sh</code> with the required synclient commands, and add the script to the X startup sequence.</div>
</div>
</div>
<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../en/Category:Apple.html" title="Category:Apple">Apple</a></li></ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden category: <ul><li><a href="../en/Category:Pages_with_broken_package_links.html" title="Category:Pages with broken package links">Pages with broken package links</a></li></ul>
</div>
</div>
	</div>
</div>

<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
		<li>Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=MacBookPro9,2_(Mid-2012)&amp;oldid=649221">https://wiki.archlinux.org/index.php?title=MacBookPro9,2_(Mid-2012)&amp;oldid=649221</a>"</li>
		<li id="footer-info-lastmod"> This page was last edited on 18 January 2021, at 21:01.</li>
		<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
	<br>
</ul>
	<ul id="footer-places">
		<li id="footer-places-privacy"><a href="../en/ArchWiki:Privacy_policy.html" title="ArchWiki:Privacy policy">Privacy policy</a></li>
		<li id="footer-places-about"><a href="../en/ArchWiki:About.html" title="ArchWiki:About">About ArchWiki</a></li>
		<li id="footer-places-disclaimer"><a href="../en/ArchWiki:General_disclaimer.html" title="ArchWiki:General disclaimer">Disclaimers</a></li>
	</ul>
	<ul id="footer-icons" class="noprint">
		<li id="footer-copyrightico">
	</ul>
	<div style="clear: both;"></div>
</footer>



</body>
</html>
