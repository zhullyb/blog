<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>HP Envy x360 13z-ag000 - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.35.0">
<meta name="robots" content="noindex,follow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="http://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-HP_Envy_x360_13z-ag000 rootpage-HP_Envy_x360_13z-ag000 skin-vector action-view skin-vector-legacy">
<div id="content" class="mw-body" role="main" style="margin: 0">
	<a id="top"></a>
	<div id="siteNotice" class="mw-body-content"></div>
	<div class="mw-indicators mw-body-content">
	</div>
	<h1 id="firstHeading" class="firstHeading" lang="en">HP Envy x360 13z-ag000</h1>
	<div id="bodyContent" class="mw-body-content">
		<div id="siteSub" class="noprint">From ArchWiki</div>
		<div id="contentSub"></div>
		<div id="contentSub2"></div>
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="#searchInput">Jump to search</a>
		<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr">
<div class="warningbox">The printable version is no longer supported and may have rendering errors. Please update your browser bookmarks and please use the default browser print function instead.</div>
<div class="mw-parser-output">
<p><br>
The HP Envy X360 13z-ag000 was released in 2018. It has variable processors/ram and displays, from a Ryzen Mobile 2300U to a 2700U, from 4GB RAM to 16GB RAM, and a 1080p display to a 4K display.
</p>
<p>The specs of my particular model are:
</p>
<ul>
<li>2500U with 16GB RAM</li>
<li>4K display</li>
<li>Realtek RTL8822BE wireless chip</li>
</ul>
<table class="wikitable" style="float: right;">
<tbody>
<tr>
<td><b>Device</b></td>
<td><b>Model</b></td>
<td><b>Status</b></td>
<td>
<b>Modules</b>
</td>
</tr>
<tr>
<td>GPU</td>
<td>AMD Vega IGPU</td>
<td style="color:green"><b>Working</b></td>
<td>xf86-video-amdgpu;  Backlight works
</td>
</tr>
<tr>
<td>Wifi</td>
<td>Realtek RTL8822BE</td>
<td style="color:green"><b>Working</b></td>
<td>r8822be
</td>
</tr>
<tr>
<td>Bluetooth</td>
<td>Realtek RTL8822BE</td>
<td style="color:green"><b>Working</b></td>
<td>btusb
</td>
</tr>
<tr>
<td>Audio</td>
<td></td>
<td style="color:green"><b>Working</b></td>
<td>snd_hda_intel
</td>
</tr>
<tr>
<td>Touchpad</td>
<td>Synaptics</td>
<td style="color:green"><b>Working</b></td>
<td>synaptics
</td>
</tr>
<tr>
<td>Camera</td>
<td>Normal 1080p + IR 336x340</td>
<td style="color:green"><b>Working</b></td>
<td>uvcvideo
</td>
</tr>
<tr>
<td>Sensors</td>
<td>STM Sensor hub</td>
<td style="color:red"><b>Not Working</b></td>
<td>On Windows used for orientation sensing and hard drive drop protection
</td>
</tr>
<tr>
<td>USB C</td>
<td>AMD xHCI Host Controller</td>
<td style="color:red"><b>Not Working</b></td>
<td>Data and DP working
</td>
</tr>
</tbody>
</table>
<div id="toc" class="toc" role="navigation" aria-labelledby="mw-toc-heading">
<input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none"><div class="toctitle" lang="en" dir="ltr">
<h2 id="mw-toc-heading">Contents</h2>
<span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span>
</div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Installing_Arch"><span class="tocnumber">1</span> <span class="toctext">Installing Arch</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#Battery_and_Power_Management"><span class="tocnumber">2</span> <span class="toctext">Battery and Power Management</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="#Display,_Video_Card"><span class="tocnumber">3</span> <span class="toctext">Display, Video Card</span></a></li>
<li class="toclevel-1 tocsection-4"><a href="#Audio"><span class="tocnumber">4</span> <span class="toctext">Audio</span></a></li>
<li class="toclevel-1 tocsection-5"><a href="#Touchscreen_and_Stylus"><span class="tocnumber">5</span> <span class="toctext">Touchscreen and Stylus</span></a></li>
<li class="toclevel-1 tocsection-6"><a href="#Orientation_Sensor"><span class="tocnumber">6</span> <span class="toctext">Orientation Sensor</span></a></li>
<li class="toclevel-1 tocsection-7"><a href="#Wireless_Networking"><span class="tocnumber">7</span> <span class="toctext">Wireless Networking</span></a></li>
<li class="toclevel-1 tocsection-8"><a href="#Bluetooth"><span class="tocnumber">8</span> <span class="toctext">Bluetooth</span></a></li>
<li class="toclevel-1 tocsection-9"><a href="#Hard_Drive"><span class="tocnumber">9</span> <span class="toctext">Hard Drive</span></a></li>
<li class="toclevel-1 tocsection-10"><a href="#Dual_Boot"><span class="tocnumber">10</span> <span class="toctext">Dual Boot</span></a></li>
</ul>
</div>

<h2><span class="mw-headline" id="Installing_Arch">Installing Arch</span></h2>
<p>This laptop has secure boot enabled by default. To start the installer you need to disable it in the UEFI. Then you can just boot the installer in UEFI mode and just install like a normal UEFI system.
</p>
<p>There appears to be an option to use your own Secureboot keys. I've not yet investigated that.
</p>
<h2><span class="mw-headline" id="Battery_and_Power_Management">Battery and Power Management</span></h2>
<p>a 4 hour battery life because of the 4K display. Currently I'm running a patched 4.17 kernel; 4.18 might improve battery life somewhat.
</p>
<h2>
<span id="Display.2C_Video_Card"></span><span class="mw-headline" id="Display,_Video_Card">Display, Video Card</span>
</h2>
<p>The integrated Vega GPU works with the AMDGPU drivers. `GDK_SCALE=2` is somewhat necessary for most applications.
</p>
<h2><span class="mw-headline" id="Audio">Audio</span></h2>
<p>The"Bang &amp; Olufsen" top-soundbar is by default disabled. You can activate it by using the "hdajackretask" utility provided by alsa-tools. More information can be found in this thread: <a rel="nofollow" class="external free" href="https://bugzilla.kernel.org/show_bug.cgi?id=189331">https://bugzilla.kernel.org/show_bug.cgi?id=189331</a>
</p>
<p>The exact pinout can be found in this attachment: <a rel="nofollow" class="external free" href="https://bugzilla.kernel.org/attachment.cgi?id=282109&amp;action=edit">https://bugzilla.kernel.org/attachment.cgi?id=282109&amp;action=edit</a>
</p>
<p><code>
</code></p>
<code><pre>   Options : [x] Show unconnected
             [ ] Set model  =  auto
             [X] Advanced ovveride
             [ ] Parser hints
</pre></code><code><pre>   Pin ID; 0x14 
   [x] Override
   Connectivity : Jack; Location : Internal; Device : Speaker; Jack : Other Analog
   Color : Unknown; Jack detection : Not present; Channel group : 5; Channel : Front
</pre></code><code><pre>   Pin ID: 0x17
   [X] Override
   Connectivity : Jack; Location : Internal; Device : Speaker; Jack : Other
   Color : Unknown; Jack detection : Not present; Channel group : 5; Channel : Back
</pre></code><code></code><p><code></code>
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> that the top-soundbar only fires when using close to the max volume.</div>
<h2><span class="mw-headline" id="Touchscreen_and_Stylus">Touchscreen and Stylus</span></h2>
<p>Kernel 4.19.5 or greater is needed. <a rel="nofollow" class="external autonumber" href="https://bugzilla.kernel.org/show_bug.cgi?id=198715#c14">[1]</a> <a rel="nofollow" class="external autonumber" href="https://cdn.kernel.org/pub/linux/kernel/v4.x/ChangeLog-4.19.5">[2]</a>
</p>
<p>The built in ELAN digitizer doesn't use the wacom driver by default, but it can be configured to do so. Switching to the wacom driver allows easier configuration of the digitizer and pen through tools like xsetwacom. This can be achieved with the following xorg configuration file:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/X11/xorg.conf.d/99-ELAN-stylus.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Section "InputClass"
    Identifier "Elan driver override"
    MatchUSBID "04f3:*"
    MatchDevicePath "/dev/input/event*"
    MatchIsTablet "true"
    Driver "wacom"
EndSection
</pre>
<p>After a reboot xsetwacom should now correctly register the device.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">xsetwacom --list devices</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">ELAN0732:00 04F3:262A stylus    	id: 13	type: STYLUS    
ELAN0732:00 04F3:262A eraser    	id: 18	type: ERASER
</pre>
<p>You can use xinput to probe the different devices and find out what actions get triggered by which buttons. For instance the "wacom bamboo ink" pen triggers the eraser device while touching the screen while maintaining the second side button pressed.
</p>
<pre>xinput test $deviceID
</pre>
<p>The following simple example script will bind rightclick to the eraser device.
</p>
<pre>device=$(xsetwacom --list | grep -i "eraser" |  awk '{print $(NF-2)}') 
xsetwacom --set "$device" button 1 3
</pre>
<p><br>
</p>
<h2><span class="mw-headline" id="Orientation_Sensor">Orientation Sensor</span></h2>
<p>No `iio` sensors are enumerated as of 4.18-rc7, with all possible iio modules compiled. `iio-sensor-proxy` returns no sensors detected.
</p>
<h2><span class="mw-headline" id="Wireless_Networking">Wireless Networking</span></h2>
<p>Works out of the box. `aspm=0` seems to prevent the card from dropping offline as much, but also worsens battery life.
</p>
<h2><span class="mw-headline" id="Bluetooth">Bluetooth</span></h2>
<p>Works out of the box with Motorola Pulse Escape on kernel 4.19.5.
</p>
<h2><span class="mw-headline" id="Hard_Drive">Hard Drive</span></h2>
<p>Built-in NVME drive works with advertised speed. Blockdevices are located at /dev/nvme0n1p*.
</p>
<h2><span class="mw-headline" id="Dual_Boot">Dual Boot</span></h2>
<p>Untested, but there shouldn't any difficulties.
</p>
<p>Tested on the 13ag-0005ng, which is identical in specs (Ryzen 5 2500U, 16GB DDR4), except for the display, which is 1080p instead of 4k. Dual Booting with Windows 10 works just like it does on other devices. No difficulties.
</p>
</div>
</div>
<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../en/Category:HP.html" title="Category:HP">HP</a></li></ul>
</div></div>
	</div>
</div>

<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
		<li>Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=HP_Envy_x360_13z-ag000&amp;oldid=598083">https://wiki.archlinux.org/index.php?title=HP_Envy_x360_13z-ag000&amp;oldid=598083</a>"</li>
		<li id="footer-info-lastmod"> This page was last edited on 19 February 2020, at 18:34.</li>
		<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
	<br>
</ul>
	<ul id="footer-places">
		<li id="footer-places-privacy"><a href="../en/ArchWiki:Privacy_policy.html" title="ArchWiki:Privacy policy">Privacy policy</a></li>
		<li id="footer-places-about"><a href="../en/ArchWiki:About.html" title="ArchWiki:About">About ArchWiki</a></li>
		<li id="footer-places-disclaimer"><a href="../en/ArchWiki:General_disclaimer.html" title="ArchWiki:General disclaimer">Disclaimers</a></li>
	</ul>
	<ul id="footer-icons" class="noprint">
		<li id="footer-copyrightico">
	</ul>
	<div style="clear: both;"></div>
</footer>



</body>
</html>
