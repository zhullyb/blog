<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>ReadyMedia - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.35.0">
<meta name="robots" content="noindex,follow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="http://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-ReadyMedia rootpage-ReadyMedia skin-vector action-view skin-vector-legacy">
<div id="content" class="mw-body" role="main" style="margin: 0">
	<a id="top"></a>
	<div id="siteNotice" class="mw-body-content"></div>
	<div class="mw-indicators mw-body-content">
	</div>
	<h1 id="firstHeading" class="firstHeading" lang="en">ReadyMedia</h1>
	<div id="bodyContent" class="mw-body-content">
		<div id="siteSub" class="noprint">From ArchWiki</div>
		<div id="contentSub"></div>
		<div id="contentSub2"></div>
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="#searchInput">Jump to search</a>
		<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr">
<div class="warningbox">The printable version is no longer supported and may have rendering errors. Please update your browser bookmarks and please use the default browser print function instead.</div>
<div class="mw-parser-output">
<p><a rel="nofollow" class="external text" href="https://sourceforge.net/projects/minidlna">ReadyMedia</a> (previously <b>MiniDLNA</b>) is server software with the aim of being fully compliant with <a href="https://en.wikipedia.org/wiki/Digital_Living_Network_Alliance" class="extiw" title="wikipedia:Digital Living Network Alliance">DLNA</a>/<a href="https://en.wikipedia.org/wiki/Universal_Plug_and_Play" class="extiw" title="wikipedia:Universal Plug and Play">UPnP</a> clients.  The MiniDNLA daemon serves media files (music, pictures, and video) to clients on a network.  Example clients include applications such as <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=totem">totem</a></span> and <a href="../en/Kodi.html" title="Kodi">Kodi</a>, and devices such as portable media players, Smartphones, Televisions, and gaming systems (such as PS3 and Xbox 360).
</p>
<p>ReadyMedia is a simple, lightweight alternative to <a href="../en/MediaTomb.html" title="MediaTomb">MediaTomb</a>, but has fewer features. It does not have a web interface for administration and must be configured by editing a text file.
</p>
<div id="toc" class="toc" role="navigation" aria-labelledby="mw-toc-heading">
<input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none"><div class="toctitle" lang="en" dir="ltr">
<h2 id="mw-toc-heading">Contents</h2>
<span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span>
</div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Installation"><span class="tocnumber">1</span> <span class="toctext">Installation</span></a></li>
<li class="toclevel-1 tocsection-2">
<a href="#Configuration_and_starting"><span class="tocnumber">2</span> <span class="toctext">Configuration and starting</span></a>
<ul>
<li class="toclevel-2 tocsection-3"><a href="#Automatic_Media_DB_Update"><span class="tocnumber">2.1</span> <span class="toctext">Automatic Media_DB Update</span></a></li>
<li class="toclevel-2 tocsection-4"><a href="#Troubleshooting_service_autostart"><span class="tocnumber">2.2</span> <span class="toctext">Troubleshooting service autostart</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="#Running_minidlna_as_your_own_user"><span class="tocnumber">2.3</span> <span class="toctext">Running minidlna as your own user</span></a></li>
<li class="toclevel-2 tocsection-6"><a href="#Running_minidlnad_without_systemd"><span class="tocnumber">2.4</span> <span class="toctext">Running minidlnad without systemd</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-7">
<a href="#Other_aspects"><span class="tocnumber">3</span> <span class="toctext">Other aspects</span></a>
<ul>
<li class="toclevel-2 tocsection-8">
<a href="#Firewall"><span class="tocnumber">3.1</span> <span class="toctext">Firewall</span></a>
<ul>
<li class="toclevel-3 tocsection-9"><a href="#iptables"><span class="tocnumber">3.1.1</span> <span class="toctext">iptables</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-10"><a href="#File_System_and_Localization"><span class="tocnumber">3.2</span> <span class="toctext">File System and Localization</span></a></li>
<li class="toclevel-2 tocsection-11"><a href="#Media_Handling"><span class="tocnumber">3.3</span> <span class="toctext">Media Handling</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-12">
<a href="#Building_a_media_server"><span class="tocnumber">4</span> <span class="toctext">Building a media server</span></a>
<ul>
<li class="toclevel-2 tocsection-13"><a href="#Automount_external_drives"><span class="tocnumber">4.1</span> <span class="toctext">Automount external drives</span></a></li>
<li class="toclevel-2 tocsection-14"><a href="#Issues"><span class="tocnumber">4.2</span> <span class="toctext">Issues</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-15">
<a href="#Troubleshooting"><span class="tocnumber">5</span> <span class="toctext">Troubleshooting</span></a>
<ul>
<li class="toclevel-2 tocsection-16"><a href="#Server_not_visible_on_Wireless_behind_a_router"><span class="tocnumber">5.1</span> <span class="toctext">Server not visible on Wireless behind a router</span></a></li>
<li class="toclevel-2 tocsection-17"><a href="#Media_directory_not_accessible"><span class="tocnumber">5.2</span> <span class="toctext">Media directory not accessible</span></a></li>
<li class="toclevel-2 tocsection-18"><a href="#DLNA_server_stops_being_visible_after_some_time_when_being_shared_on_a_bridge_device"><span class="tocnumber">5.3</span> <span class="toctext">DLNA server stops being visible after some time when being shared on a bridge device</span></a></li>
</ul>
</li>
</ul>
</div>

<h2><span class="mw-headline" id="Installation">Installation</span></h2>
<p>Install the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=minidlna">minidlna</a></span> package.
</p>
<p>If you want to use an unofficial branch which supports transcoding, install the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/readymedia-transcode-git/">readymedia-transcode-git</a></span><sup><small>AUR</small></sup> package.
</p>
<h2><span class="mw-headline" id="Configuration_and_starting">Configuration and starting</span></h2>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Warning:</strong> The current version of ReadyMedia has a serious bug: The <code>-i</code> command-line option and <code>network_interface</code> configuration option used to bind to a specific IP address does not apply to the HTTP server. Bug reported in 2017 to <a rel="nofollow" class="external text" href="https://sourceforge.net/p/minidlna/bugs/297/">upstream</a>. The webserver remains accessible on all interfaces, potentially creating a security problem if running on a publicly accessible host.</div>
<p>By default, minidlna runs as a system service (alternatively, you can <a href="#Running_minidlnad_without_systemd">run it manually</a>). It can be configured in <code>/etc/minidlna.conf</code>. Set the following necessary settings:
</p>
<pre>#network_interface=eth0                         # Self-discovers if commented (at times necessary to set)
media_dir=A,/home/user/Music                    # Mounted Media_Collection drive directories
media_dir=P,/home/user/Pictures                 # Use A, P, and V to restrict media 'type' in directory
media_dir=V,/home/user/Videos
friendly_name=Media Server                      # Optional
inotify=yes                                     # 'no' for less resources, restart required for new media
presentation_url=<a rel="nofollow" class="external free" href="http://www.mylan/index.php">http://www.mylan/index.php</a>     # or use your device static IP <a rel="nofollow" class="external free" href="http://192.168.0.14:8200/">http://192.168.0.14:8200/</a></pre>
<p>MiniDLNA runs as the <i>minidlna</i> user by default. To change the user it runs as, see <a href="#Running_minidlna_as_your_own_user">#Running minidlna as your own user</a> below.
</p>
<p>The minidlna service can be managed by <code>minidlna.service</code> <a href="../en/Systemd.html#Using_units" title="Systemd">using systemd</a>.
</p>
<h3><span class="mw-headline" id="Automatic_Media_DB_Update">Automatic Media_DB Update</span></h3>
<p>Kernel adds one <a href="https://en.wikipedia.org/wiki/Inotify" class="extiw" title="wikipedia:Inotify">inotify</a> watch per each folder/subfolder in <i>Media_Collection</i> Directories set in <code>/etc/minidlna.conf</code> to monitor changes thus allowing MiniDLNA to update <i>Media_DB</i> in real time. When MiniDLNA is run as a regular user, it does not have the ability to change the kernel's <i>inotify</i> limits. If default number of <i>inotify</i> watches is non-sufficient to have MiniDLNA monitor all your media folders, increase <i>inotify</i> watches through <code>sysctl</code> (100000 should be enough for most uses):
</p>
<pre># sysctl fs.inotify.max_user_watches=100000
</pre>
<p>To have it permanently changed, add to <code>/etc/sysctl.d/90-inotify.conf</code>
</p>
<pre># Increase inotify max watchs per user for local minidlna
fs.inotify.max_user_watches = 100000
</pre>
<p><i>inotify</i> performance may depend on device type. Some do not rescan media drives on a consistent basis or at all.  If files are added/deleted to monitored media directories, they may not be noticed until the device DLNA client is restarted.
</p>
<p>Check <i>inotify</i> updates via MiniDLNA <i>presentation_url</i> by comparing files count. If it does not change, make sure the user running MiniDLNA has <i>rw</i> access to the DB folder. If the issue persists, copy or download new files first to a non-watched by <i>inotify</i> <b>Downloads</b> folder on the same drive, and then move them to appropriate media folders, since lengthy media files copying or downloading may confuse <i>inotify</i>.
</p>
<p>You can also clean or rebuild MiniDLNA DB manually after stopping MiniDLNA daemon, or analyze its debug output (Ctrl+C to exit):
</p>
<p><a href="../en/Systemd.html#Using_units" class="mw-redirect" title="Stop">Stop</a> the MiniDLNA daemon.
</p>
<p>To rebuild Media_DB forcibly:
</p>
<pre># minidlnad -R
</pre>
<p>Stop the daemon after rebuilding Media_DB e.g. <code>killall minidlnad</code>.
</p>
<p>To run in debug mode:
</p>
<pre># minidlnad -d
</pre>
<p><code>Ctrl+C</code> to exit it.
</p>
<h3><span class="mw-headline" id="Troubleshooting_service_autostart">Troubleshooting service autostart</span></h3>
<p>Sometimes the minidlna daemon fails to start while booting. <a href="../en/NetworkManager.html#Enable_NetworkManager_Wait_Online" title="NetworkManager">NetworkManager#Enable NetworkManager Wait Online</a> solves this issue. See <a rel="nofollow" class="external text" href="https://bugs.archlinux.org/task/35325">FS#35325</a>
</p>
<h3><span class="mw-headline" id="Running_minidlna_as_your_own_user">Running minidlna as your own user</span></h3>
<p>Change <code>user</code> line in <code>/etc/minidlna.conf</code>, and change the <code>db_dir</code> and <code>log_dir</code> options to directories that are writeable by that user. If you are <a href="#Running_minidlnad_without_systemd">running without systemd</a>, this is all you need.
</p>
<p>If you are using the systemd service, <a href="../en/Systemd.html#Editing_provided_units" class="mw-redirect" title="Edit">edit</a> <code>minidlna.service</code> as it will by default run as the <code>minidlna</code> user. To do so, create a <code>/etc/systemd/system/minidlna.service.d/run-as-user.conf</code> <a href="../en/Systemd.html#Drop-in_files" class="mw-redirect" title="Drop-in file">drop-in file</a>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/system/minidlna.service.d/run-as-user.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Service]
User=<i>user</i>
Group=<i>group</i></pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> 
<ul>
<li>Add <code>ProtectHome=off</code> in the <code>[Service]</code> section if you want minidlna to be able to read/write to <code>/home/<i>user</i>/</code>, including the <code>db_dir</code> or any <code>media_dir</code>.</li>
<li>The <code>log_dir</code> is not used by the systemd service, instead use <code>journalctl -u minidlna.service</code> to view the logs.</li>
</ul>
</div>
<h3><span class="mw-headline" id="Running_minidlnad_without_systemd">Running minidlnad without systemd</span></h3>
<p>Alternatively to a system service, you can run minidlna manually. This can be useful if you want to share media but do not have administrator access to the machine.
</p>
<p>Create the necessary files and directories locally and edit the configuration:
</p>
<pre>$ install -Dm644 /etc/minidlna.conf ~/.config/minidlna/minidlna.conf
$ $EDITOR minidlna.conf
</pre>
<p>Configuring should be as above, specifically:
</p>
<pre>media_dir=/home/$USER/dir
db_dir=/home/$USER/.config/minidlna/cache
log_dir=/home/$USER/.config/minidlna
</pre>
<p>You can now start minidlna with the following command:
</p>
<pre>$ minidlnad -f /home/$USER/.config/minidlna/minidlna.conf -P /home/$USER/.config/minidlna/minidlna.pid
</pre>
<p>To autostart it at login, add the previous line to <code>~/.bash_profile</code>.
</p>
<h2><span class="mw-headline" id="Other_aspects">Other aspects</span></h2>
<p>Other aspects and MiniDLNA limitations may need to be considered beforehand to ensure satisfaction from its performance.
</p>
<h3><span class="mw-headline" id="Firewall">Firewall</span></h3>
<p>If using a firewall the the ssdp (1900/udp) and trivnet1 (8200/tcp) ports will need to be opened. For example, this can be done with arno's iptables firewall by editing <code>firewall.conf</code> and opening the ports by doing:
</p>
<pre>OPEN_TCP="8200"
OPEN_UDP="1900"
</pre>
<h4><span class="mw-headline" id="iptables">iptables</span></h4>
<p>In addition to 1900/udp and 8200/tcp, minidlna may also require allowing muliticasts. An overall configuration for <a href="../en/Iptables.html" title="Iptables">iptables</a> may therefore look like the following snippet, assuming there are separate chains which handel <a href="../en/Simple_stateful_firewall.html#Creating_necessary_chains" title="Simple stateful firewall">TCP, UDP</a> and IGMP.
</p>
<pre> -A TCP -m tcp --dport 8200 -m comment --comment minidlna -j ACCEPT
 -A UDP -d 239.255.255.250/32 -m udp --dport 1900 -m comment --comment "upnp dlna" -j ACCEPT
 -A IGMP -d 224.0.0.1/32 -m comment --comment "igmp membership queries, upnp/dlna" -j ACCEPT
 -A IGMP -d 239.0.0.0/8 -m comment --comment "igmp multicast, upnp/dlna" -j ACCEPT
</pre>
<h3><span class="mw-headline" id="File_System_and_Localization">File System and Localization</span></h3>
<p>When keeping MiniDLNA <i>Media_DB</i> on an external drive accessible in both Linux and Windows, choose proper <a href="../en/File_systems.html" class="mw-redirect" title="File system">file system</a> for it. <b>NTFS</b> preserves in Windows its Linux defaults: <i>rw</i> access for <i>root</i> user and <i>UTF8</i> font <i>encoding</i> for file names, so media titles in your language are readable when browsing <i>Media_DB</i> in terminal and media players, since most support <i>UTF8</i>. If you prefer <b>Vfat</b> (FAT32) for better USB drive compatibility with older players when hooked directly, or your <i>Media_Collection</i> drive is Vfat and has folder &amp; file names in your local language, MiniDLNA can transcode them to <i>UTF8</i> charset while scanning folders to <i>Media_DB</i>. Add to <i>Media_Collection</i> and <i>Media_DB</i> drives' mount options your FS language <a href="https://en.wikipedia.org/wiki/Code_page" class="extiw" title="wikipedia:Code page">codepage</a> for transcoding to short DOS file names, and <a href="https://en.wikipedia.org/wiki/Character_encoding" class="extiw" title="wikipedia:Character encoding">iocharset</a> for converting long file names to your terminal's locale, i.g. <i>codepage=cp866,iocharset=utf8 (or ISO-8859-5)</i>. Set <i>rw</i> permissions for all users, since <i>Vfat</i> does not preserve Linux access permissions:
</p>
<pre>UUID=6140-75F7 /media/MyDrive/Media_DB vfat user,rw,async,noatime,umask=111,dmask=000,codepage=cp866,iocharset=utf8 0 0</pre>
<p>While your <i>iocharset</i> would be present in the system with a matching <a href="../en/Locale.html" title="Locale">locale</a>, if your terminal or player supports only short file names, check if the set <i>codepage</i> is also present and enabled (like ru_RU.CP866), i.e. was included in system config when ArchLinux release was compiled, or consider recompiling the release to add it: 
</p>
<pre>ls /usr/share/fonts/encodings
</pre>
<p>MiniDLNA lists <i>Movies</i> and <i>Photos</i> by file name in its DB, and <i>Music</i> entries by <a rel="nofollow" class="external text" href="http://id3lib.sourceforge.net/id3/">ID3 tags</a> instead of file names. If Music collection was not tagged in UTF8 but in a local charset, MiniDLNA might not identify and transcode it correctly to UTF8 for display in media players, or the original tags <i>codepage(s)</i> may be absent in your system, so the tags will not be readable even when media file names are. In this case consider re-tagging your collection to <i>UTF-16BE</i> or <i>UTF-8</i> encoding with an <b>ID3 Tag Converter</b>.
</p>
<p>Picking the "right" <i>file system</i> for your <i>Media_Collection</i> is a trade-off: XFS and EXT4 show fast read/write for HDs and lower CPU load critical for small <a rel="nofollow" class="external text" href="http://archlinuxarm.org/platforms/armv5/pogoplug-series-4">Plug Computers</a> with attached storage. NTFS is most compatible with Windows when plugging a drive directly for faster copy, while network file systems like Samba, NFS or iSCSI allow import to Windows any Linux FS with slower data copy. As file fragmentation affects playback, store your Movies on a non-system drive formatted in XFS (prevents fragments), NTFS (fragment resistant and easy to defrag), or EXT4 (uses large file <i>extents</i>), and <a rel="nofollow" class="external text" href="https://trac.transmissionbt.com/ticket/849">avoid</a> EXT3 or <a href="https://en.wikipedia.org/wiki/File_Allocation_Table#Fragmentation" class="extiw" title="wikipedia:File Allocation Table">less</a> resistant FAT32. For smaller Flash drives with seldom fragmented Music and Photo files, VFAT (FAT32) and EXT4 show faster writes with less CPU load, but EXT4 may affect memory wear due to journaling, and less compatible with media players. Proper drive partitioning, block <a rel="nofollow" class="external text" href="http://lwn.net/Articles/428584/">alignment</a> and <i>mount options</i> (i.e. <i>async,noatime</i>...- choice depends on file system and memory type) can greatly <a rel="nofollow" class="external text" href="http://linux-howto-guide.blogspot.ca/2009/10/increase-usb-flash-drive-write-speed.html">accelerate</a> flash and HD drive speed among other <a href="https://en.wikipedia.org/wiki/Logical_Disk_Manager#Advantages_of_using_a_1-MiB_alignment_boundary" class="extiw" title="wikipedia:Logical Disk Manager">advantages</a>.
</p>
<h3><span class="mw-headline" id="Media_Handling">Media Handling</span></h3>
<p>MiniDLNA is aimed for small devices, so does not generate movie thumbnails to lower CPU load and DB built time. It uses either thumbs in the same folder with movie if any, or extracts them where present from media containers like MP4 or MKV with embedded Album Art tags, but not AVI. One can add thumbs (JPG 160x160 pxl or less) to media folders with a <b>Thumbnail Maker</b>, and miniDLNA will link them to media files after rescan. Larger thumbs will be resized and stored in <i>Media_DB</i> that slows scan. At one movie per folder, follow thumb naming rules in <i>minidlna.conf</i>. For multiple show episodes per folder, each thumb name should match its episode name without ext. (<i>&lt;file&gt;.cover.jpg</i> or <i>&lt;file&gt;.jpg</i>). To handle <i>MS Album Art</i> thumb names with GUID, add * to the end <i>"AlbumArt_{*".jpg</i> . MiniDLNA will list on screen only chosen media type (i.e. Movies), but will not other files in the same folder.
</p>
<p>When viewing photos, progressive and/or lossless compression JPG may not be supported by your player via DLNA. Also resize photos to "suggested photo size" by the player's docs for problem free image slideshow. DLNA spec restricts image type to JPG or PNG, and max size to 4096 x 4096 pixels - and that is if the DLNA server implementation supports the LARGE format. The next size limit down (MEDIUM) is 1024 x 768, so resizing may help to show photos correctly.
</p>
<p>To decrease system load, MiniDLNA does not transcode on the fly unsupported media files into supported by your player formats. When building <i>Media_DB</i>, it might not correctly identify whether certain formats are supported by your player, which may play via UPnP a broader formats choice. DLNA standard is quite limiting UPnP subset in media containers and codec <i>profiles</i> allowed. If you do not see on TV screen or cannot play some media files listed in <i>Media_DB</i>, check if your HD started spinning or try connecting to your media player via USB for their playback. MiniDLNA might not support choosing audio tracks, subtitles, disk chapters, list sorting, and other advanced playback features for your player model.
</p>
<h2><span class="mw-headline" id="Building_a_media_server">Building a media server</span></h2>
<p>Media served could be based on lightweight and cheap system like development board (Raspberry Pi, CubeBoard, etc.). You do not even need to put X Server on this board.
</p>
<h3><span class="mw-headline" id="Automount_external_drives">Automount external drives</span></h3>
<p>This is very useful if you want to automate the server. See <a href="../en/Udisks.html#Mount_helpers" title="Udisks">udisks#Mount helpers</a> for more information.
</p>
<h3><span class="mw-headline" id="Issues">Issues</span></h3>
<p>Media server based on MiniDLNA could face the drive re-scan issue. Ex.: external HDD you have plugged will be scanned each time again and again. This happens due to MiniDLNA removes DB records for unplugged drive. If your drive plugged all the time it is not a problem, but if you have "pluggable" media library on large external drives this could take a big while till you start watching your video.
</p>
<p>One can resolve the rescan issue by using <a rel="nofollow" class="external text" href="https://code.google.com/p/minidlna-fastscan">this minidlna fork</a>. It creates a metadata file next to each video file. This can significantly decrease the scan time for large media.
</p>
<h2><span class="mw-headline" id="Troubleshooting">Troubleshooting</span></h2>
<h3><span class="mw-headline" id="Server_not_visible_on_Wireless_behind_a_router">Server not visible on Wireless behind a router</span></h3>
<p>On some network configurations when the machine hosting MiniDLNA server is connected to the router through Ethernet, there may be problems accessing MiniDLNA server on WiFi (same router). To solve this, make sure that "Multicast Isolation" is turned off on the router. For example, on ADB / Pirelli P.RG EA4202N router, connect to the configuration page, then Settings-&gt;Bridge and VLAN-&gt;Bridge List-&gt;click edit on Bridge Ethernet WiFi-&gt;set Multicast Isolation to No-&gt;Apply.
</p>
<h3><span class="mw-headline" id="Media_directory_not_accessible">Media directory not accessible</span></h3>
<p>Please note that the default systemd service file enforces the parameter <code>ProtectHome=on</code>. If you intend to share files that reside within the <code>/home/</code> file system you may want to lessen that restriction.
You can achieve this by updating the <a href="../en/Systemd.html" title="Systemd">systemd</a> unit override file.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/system/minidlna.service.d/override.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Service]
ProtectHome=read-only</pre>
<h3><span class="mw-headline" id="DLNA_server_stops_being_visible_after_some_time_when_being_shared_on_a_bridge_device">DLNA server stops being visible after some time when being shared on a bridge device</span></h3>
<p>If you are using ReadyMedia to "broadcast" on a bridged device (such as an OpenVPN device bridged to an Ethernet device), the server may stop being seen by the clients after some time (which may vary from a few seconds to half a day).
In order to solve this you need to disable 'multicast snooping'. You can do it instantly with the following command:
</p>
<pre># echo 0 &gt;&gt; /sys/devices/virtual/net/br0/bridge/multicast_snooping
</pre>
<p>This should make the server visible to the clients *immediately*, but the change will be lost on reboot.
If this works, you can make it a permanent change by using a systemd service file. Edit the file <code>/etc/systemd/system/multicast_snooping.service</code> with the following content:
</p>
<pre>[Unit]
Description=Set multicast snoop to off
After=network-online.target

[Service]
Type=oneshot
ExecStart=/usr/bin/bash -c "echo 0 &gt;&gt; /sys/devices/virtual/net/br0/bridge/multicast_snooping"
RemainAfterExit=true
ExecStop=/usr/bin/bash -c "echo 1 &gt;&gt; /sys/devices/virtual/net/br0/bridge/multicast_snooping"
StandardOutput=journal

[Install]
WantedBy=multi-user.target
</pre>
<p>Now all you have to do is enable the service file:
</p>
<pre># systemct enable multicast_snooping.service
</pre>
<p>This approach should disable multicast_snooping on every boot.
</p>
</div>
</div>
<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../en/Category:Media_servers.html" title="Category:Media servers">Media servers</a></li></ul>
</div></div>
	</div>
</div>

<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
		<li>Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=ReadyMedia&amp;oldid=624784">https://wiki.archlinux.org/index.php?title=ReadyMedia&amp;oldid=624784</a>"</li>
		<li id="footer-info-lastmod"> This page was last edited on 11 July 2020, at 13:30.</li>
		<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
	<br>
</ul>
	<ul id="footer-places">
		<li id="footer-places-privacy"><a href="../en/ArchWiki:Privacy_policy.html" title="ArchWiki:Privacy policy">Privacy policy</a></li>
		<li id="footer-places-about"><a href="../en/ArchWiki:About.html" title="ArchWiki:About">About ArchWiki</a></li>
		<li id="footer-places-disclaimer"><a href="../en/ArchWiki:General_disclaimer.html" title="ArchWiki:General disclaimer">Disclaimers</a></li>
	</ul>
	<ul id="footer-icons" class="noprint">
		<li id="footer-copyrightico">
	</ul>
	<div style="clear: both;"></div>
</footer>



</body>
</html>
