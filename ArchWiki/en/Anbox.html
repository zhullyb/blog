<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>Anbox - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.35.0">
<meta name="robots" content="noindex,follow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="http://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Anbox rootpage-Anbox skin-vector action-view skin-vector-legacy">
<div id="content" class="mw-body" role="main" style="margin: 0">
	<a id="top"></a>
	<div id="siteNotice" class="mw-body-content"></div>
	<div class="mw-indicators mw-body-content">
	</div>
	<h1 id="firstHeading" class="firstHeading" lang="en">Anbox</h1>
	<div id="bodyContent" class="mw-body-content">
		<div id="siteSub" class="noprint">From ArchWiki</div>
		<div id="contentSub"></div>
		<div id="contentSub2"></div>
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="#searchInput">Jump to search</a>
		<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr">
<div class="warningbox">The printable version is no longer supported and may have rendering errors. Please update your browser bookmarks and please use the default browser print function instead.</div>
<div class="mw-parser-output">
<div class="archwiki-template-meta-related-articles-start">
<p>Related articles</p>
<ul>
<li><a href="../en/Linux_Containers.html" title="Linux Containers">Linux Containers</a></li>
</ul>
</div>
<p>Anbox is a <a href="../en/Linux_Containers.html" title="Linux Containers">container-based</a> software for running Android on GNU/Linux distributions.
</p>
<div id="toc" class="toc" role="navigation" aria-labelledby="mw-toc-heading">
<input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none"><div class="toctitle" lang="en" dir="ltr">
<h2 id="mw-toc-heading">Contents</h2>
<span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span>
</div>
<ul>
<li class="toclevel-1 tocsection-1">
<a href="#Prerequisite"><span class="tocnumber">1</span> <span class="toctext">Prerequisite</span></a>
<ul>
<li class="toclevel-2 tocsection-2"><a href="#Using_Linux-Zen"><span class="tocnumber">1.1</span> <span class="toctext">Using Linux-Zen</span></a></li>
<li class="toclevel-2 tocsection-3">
<a href="#Building_a_kernel"><span class="tocnumber">1.2</span> <span class="toctext">Building a kernel</span></a>
<ul>
<li class="toclevel-3 tocsection-4"><a href="#Necessary_config_options"><span class="tocnumber">1.2.1</span> <span class="toctext">Necessary config options</span></a></li>
<li class="toclevel-3 tocsection-5"><a href="#config_using_binderfs"><span class="tocnumber">1.2.2</span> <span class="toctext">config using binderfs</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-6"><a href="#Booting_the_new_kernel"><span class="tocnumber">1.3</span> <span class="toctext">Booting the new kernel</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-7">
<a href="#Installation"><span class="tocnumber">2</span> <span class="toctext">Installation</span></a>
<ul>
<li class="toclevel-2 tocsection-8"><a href="#Loading_the_modules"><span class="tocnumber">2.1</span> <span class="toctext">Loading the modules</span></a></li>
<li class="toclevel-2 tocsection-9"><a href="#Mounting_binderfs"><span class="tocnumber">2.2</span> <span class="toctext">Mounting binderfs</span></a></li>
<li class="toclevel-2 tocsection-10"><a href="#Install_Android_Image"><span class="tocnumber">2.3</span> <span class="toctext">Install Android Image</span></a></li>
<li class="toclevel-2 tocsection-11"><a href="#Install_Anbox"><span class="tocnumber">2.4</span> <span class="toctext">Install Anbox</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-12">
<a href="#Network"><span class="tocnumber">3</span> <span class="toctext">Network</span></a>
<ul>
<li class="toclevel-2 tocsection-13"><a href="#Via_NetworkManager"><span class="tocnumber">3.1</span> <span class="toctext">Via NetworkManager</span></a></li>
<li class="toclevel-2 tocsection-14"><a href="#Via_systemd-networkd"><span class="tocnumber">3.2</span> <span class="toctext">Via systemd-networkd</span></a></li>
<li class="toclevel-2 tocsection-15"><a href="#Via_anbox-bridge_script"><span class="tocnumber">3.3</span> <span class="toctext">Via anbox-bridge script</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-16">
<a href="#Usage"><span class="tocnumber">4</span> <span class="toctext">Usage</span></a>
<ul>
<li class="toclevel-2 tocsection-17">
<a href="#Installing_apps"><span class="tocnumber">4.1</span> <span class="toctext">Installing apps</span></a>
<ul>
<li class="toclevel-3 tocsection-18"><a href="#Through_adb"><span class="tocnumber">4.1.1</span> <span class="toctext">Through adb</span></a></li>
<li class="toclevel-3 tocsection-19"><a href="#Through_apps_stores"><span class="tocnumber">4.1.2</span> <span class="toctext">Through apps stores</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-20">
<a href="#Sensor_data"><span class="tocnumber">4.2</span> <span class="toctext">Sensor data</span></a>
<ul>
<li class="toclevel-3 tocsection-21"><a href="#Temperature_data"><span class="tocnumber">4.2.1</span> <span class="toctext">Temperature data</span></a></li>
<li class="toclevel-3 tocsection-22"><a href="#GPS_data"><span class="tocnumber">4.2.2</span> <span class="toctext">GPS data</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-23"><a href="#Root_shell"><span class="tocnumber">4.3</span> <span class="toctext">Root shell</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-24">
<a href="#Tips_and_tricks"><span class="tocnumber">5</span> <span class="toctext">Tips and tricks</span></a>
<ul>
<li class="toclevel-2 tocsection-25"><a href="#Android_developer_options"><span class="tocnumber">5.1</span> <span class="toctext">Android developer options</span></a></li>
<li class="toclevel-2 tocsection-26"><a href="#Getting_debugging_information"><span class="tocnumber">5.2</span> <span class="toctext">Getting debugging information</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-27">
<a href="#Troubleshooting"><span class="tocnumber">6</span> <span class="toctext">Troubleshooting</span></a>
<ul>
<li class="toclevel-2 tocsection-28"><a href="#Old_CPUs"><span class="tocnumber">6.1</span> <span class="toctext">Old CPUs</span></a></li>
<li class="toclevel-2 tocsection-29"><a href="#Old_kernels"><span class="tocnumber">6.2</span> <span class="toctext">Old kernels</span></a></li>
<li class="toclevel-2 tocsection-30"><a href="#Kernel_5.10_with_lxc_%E2%89%A4_4.0.5"><span class="tocnumber">6.3</span> <span class="toctext">Kernel 5.10 with lxc ≤ 4.0.5</span></a></li>
<li class="toclevel-2 tocsection-31"><a href="#Secure_Boot_error"><span class="tocnumber">6.4</span> <span class="toctext">Secure Boot error</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-32"><a href="#See_also"><span class="tocnumber">7</span> <span class="toctext">See also</span></a></li>
</ul>
</div>

<h2><span class="mw-headline" id="Prerequisite">Prerequisite</span></h2>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Warning:</strong> Many users were recently affected by an issue which occurs in the combination of <a href="#Kernel_5.10_with_lxc_%E2%89%A4_4.0.5">kernel 5.10 with lxc ≤ 4.0.5</a>.</div>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> The dkms modules do not work on kernels ≥5.7 anymore. Follow the instructions below instead. For older kernels see <a href="#Old_kernels">Old kernels</a>.</div>
<p>You need to run a kernel which comes with the ashmem and binder modules. They are not part of Arch Linux's default kernel, thus you need to install a kernel which ships these modules, and need to configure your bootloader to give you a way to start your system using the newly installed kernel.
</p>
<p>You have multiple options:
</p>
<h3><span class="mw-headline" id="Using_Linux-Zen">Using Linux-Zen</span></h3>
<p>The <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=linux-zen">linux-zen</a></span> kernel includes the necessary options. This might be the most comfortable way, as you do not have to compile the kernel (which takes a long time) and will receive updated versions easily, because the package is from the repository.
</p>
<h3><span class="mw-headline" id="Building_a_kernel">Building a kernel</span></h3>
<p>Alternatively, you can recompile the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=linux">linux</a></span> kernel — or any other kernel package — with the necessary options. Please read <a href="../en/Kernel.html#Compilation" title="Kernel">Kernel#Compilation</a>.
</p>
<p>You can also download the source files from <a rel="nofollow" class="external text" href="https://archlinux.org/packages/core/x86_64/linux">packages.archlinux.org</a>, change the config and run makepkg. However, as soon as you install an updated version of the kernel from the repository, your changes will be undone, thus it is better to use a different package.
</p>
<h4><span class="mw-headline" id="Necessary_config_options">Necessary config options</span></h4>
<p>Modules can either be compiled into the kernel (<code>y</code>), into modules (<code>m</code>), or not at all (<code>n</code>). Also, not all combinations in the config are possible, and some options will require other options.
</p>
<p>The config options below will will compile ashmem and binder as modules, while the last option specifies that there will be three devices created in the <code>/dev/</code> directory, when the binder module is loaded.
</p>
<pre>CONFIG_ASHMEM=m 
CONFIG_ANDROID=y
CONFIG_ANDROID_BINDER_IPC=m
CONFIG_ANDROID_BINDERFS=n
CONFIG_ANDROID_BINDER_DEVICES="binder,hwbinder,vndbinder"</pre>
<p>When building a kernel from the AUR, one can do it with these steps:
</p>
<ol>
<li>run <code>makepkg --nobuild</code>, which will download the sources, verify and extract them and run the <code>prepare()</code> function.</li>
<li>edit the <code>.config</code> file (with the dot in the filename), which is located at the base of the kernel directory.</li>
<li>at the end of the <code>prepare()</code> function was probably a command which regenerates the makefiles with information from the config, possibly <code>make olddefconfig</code>. Move that to the <code>build()</code> function, or execute it yourself.</li>
<li>run <code>makepkg --noextract</code>, which will continue from the place where <code>makepkg --nobuild</code> stopped.</li>
</ol>
<h4><span class="mw-headline" id="config_using_binderfs">config using binderfs</span></h4>
<p>Not everybody was happy with the binder module in Linux. To address the issues, binderfs was created. One has to choose between the old and the new way when compiling the kernel. With the options below one will use binderfs instead.
</p>
<p>With the kernel sources comes also a simple script to set confing options. It will not do dependency checks, just like when editing the config by hand. When being in the same directory where the <code>.config</code> file lies, one can execute the following commands.
</p>
<pre>scripts/config --module  CONFIG_ASHMEM
scripts/config --enable  CONFIG_ANDROID
scripts/config --enable  CONFIG_ANDROID_BINDER_IPC
scripts/config --enable  CONFIG_ANDROID_BINDERFS
scripts/config --set-str CONFIG_ANDROID_BINDER_DEVICES ""
</pre>
<p>This script is quite handy when building a kernel from the AUR, as it is enough to insert these lines at the right place in the PKGBUILD.
</p>
<p>You will notice that here binder is not compiled as module. The reason is, I did not find out how to. Fell invited to give it a shot, and discuss it in <a href="../en/Talk:Anbox.html" title="Talk:Anbox">Talk:Anbox</a>.
</p>
<h3><span class="mw-headline" id="Booting_the_new_kernel">Booting the new kernel</span></h3>
<p>Please refer to the wiki page of your bootloader, to find out, how to boot with the new kernel. Booting into a newer kernel (version) is one of the few occasions when you have to reboot a Linux system. You should do that before starting Anbox.
</p>
<h2><span class="mw-headline" id="Installation">Installation</span></h2>
<h3><span class="mw-headline" id="Loading_the_modules">Loading the modules</span></h3>
<p>Anbox does not load the modules on demand, starting an app will fail if they are not loaded.
</p>
<p>To load them right now, use:
</p>
<pre># modprobe -a binder-linux ashmem-linux
</pre>
<p>To load them always at boot, one can load them via the <code>systemd-modules-load.service</code>. To do so, create a file inside <code>/etc/modules-load.d/</code>, which contains the lines:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/modules-load.d/anbox.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">ashmem_linux
binder_linux
</pre>
<h3><span class="mw-headline" id="Mounting_binderfs">Mounting binderfs</span></h3>
<p>If your kernel uses binderfs, there is one more step to do: Mounting a binder filesystem.
</p>
<p>Firstly, you will need a mountpoint. By default, Anbox will look at <code>/dev/binderfs</code>. You can create that directory now, but it will be removed at boot time.
You can use <a href="../en/Systemd.html#systemd-tmpfiles_-_temporary_files" class="mw-redirect" title="Systemd-tmpfiles">systemd-tmpfiles</a> to create this directory at boot time. For that, create a file in <code>/etc/tmpfiles.d/</code> with the content:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/tmpfiles.d/anbox.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">d! /dev/binderfs 0755 root root
</pre>
<p>Secondly, you need to mount the binder filesystem. This can be done by
</p>
<pre># mount -t binder none /dev/binderfs
</pre>
<p>To mount it always at boot, add a line in the <a href="../en/Fstab.html" title="Fstab">fstab</a>. Using the option <code>nofail</code> here will not greet you with a recovery shell when you are booting a kernel without binderfs support (such as the standard kernel).
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/fstab</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">none                         /dev/binderfs binder   nofail  0      0
</pre>
<h3><span class="mw-headline" id="Install_Android_Image">Install Android Image</span></h3>
<p><a href="../en/Help:Reading.html#Installation_of_packages" class="mw-redirect" title="Install">Install</a> one of these images:
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> The images are outdated (based on Android 7.1). For now there are no newer images available from upstream. Nobody else built newer images yet either, documentation is at <a rel="nofollow" class="external text" href="https://github.com/anbox/anbox/blob/master/docs/build-android.md">build-android.md</a>.</div>
<ul>
<li>
<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/anbox-image/">anbox-image</a></span><sup><small>AUR</small></sup> (official Anbox image)</li>
<li>
<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/anbox-image-houdini/">anbox-image-houdini</a></span><sup><small>AUR</small></sup> (includes Houdini)</li>
<li>
<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/anbox-image-houdini-rooted/">anbox-image-houdini-rooted</a></span><sup><small>AUR</small></sup> (includes Houdini and SuperSU)</li>
<li>
<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/anbox-image-gapps/">anbox-image-gapps</a></span><sup><small>AUR</small></sup> (includes Houdini and OpenGApps)</li>
<li>
<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/anbox-image-gapps-rooted/">anbox-image-gapps-rooted</a></span><sup><small>AUR</small></sup> (includes Houdini, OpenGApps and SuperSU)</li>
<li>You can find more images in the <a href="../en/Arch_User_Repository.html" class="mw-redirect" title="AUR">AUR</a>, search for <a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/?K=anbox-image">anbox-image</a>.</li>
</ul>
<p>Generally, one needs Houdini to run ARM applications on a x86_64 computer, and you may want google apps, so <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/anbox-image-gapps/">anbox-image-gapps</a></span><sup><small>AUR</small></sup> would be a good way to go if you do not know what you need.
</p>
<h3><span class="mw-headline" id="Install_Anbox">Install Anbox</span></h3>
<p><a href="../en/Help:Reading.html#Installation_of_packages" class="mw-redirect" title="Install">Install</a> <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/anbox-git/">anbox-git</a></span><sup><small>AUR</small></sup>.
</p>
<p>Afterwards. <a href="../en/Systemd.html#Using_units" class="mw-redirect" title="Start/enable">start/enable</a> <code>anbox-container-manager.service</code>.
</p>
<p>You have now all the required steps done to use Anbox! In the menu of your desktop environment, you should find several entries in the category <code>Others</code>, which can now be launched.
</p>
<p>The first call will take longer. Behind the scenes, <code>anbox session-manager</code> will be launched. For testing purposes, you can also execute <code>anbox session-manager</code> manually in a terminal. That is <b>very</b> useful if anbox crashes and you want to report or fix the bug. Just launch it, and wait until it crashes (if ever).
There is also a systemd unit for users, which can be used to start the session-manager on bootup. An advantage is that you can use <code>journalctl --user -b -u anbox-session-manager</code> to find logs about what happened in case of a crash. Keep in mind though, that when it crashes and you start a new app, it will also start the session-manager, but it will be run independently from systemd. To start and enable the unit, run
</p>
<pre>$ systemctl --user enable --now anbox-session-manager.service
</pre>
<h2><span class="mw-headline" id="Network">Network</span></h2>
<h3><span class="mw-headline" id="Via_NetworkManager">Via NetworkManager</span></h3>
<p>If you are using <a href="../en/NetworkManager.html" title="NetworkManager">NetworkManager</a> you can use it to configure the networking.
</p>
<p>Execute the following command to create the bridge connection:
</p>
<pre>$ nmcli con add type bridge ifname anbox0 -- connection.id anbox-net ipv4.method shared ipv4.addresses 192.168.250.1/24
</pre>
<ul>
<li>
<code>ifname anbox0</code> specifies the bridge interface name, in this case <code>anbox0</code>. Do not change this as Anbox will only detect the bridge interface if it is named <code>anbox0</code>.</li>
<li>
<code>connection.id anbox-net</code> specifies the name of the connection to be <code>anbox-net</code> when it appears in <a href="../en/NetworkManager.html" title="NetworkManager">NetworkManager</a>. You can change this if you wish.</li>
<li>
<code>ipv4.method shared</code> instructs <a href="../en/NetworkManager.html" title="NetworkManager">NetworkManager</a> to create a NAT network and route outgoing packets according to the system routing rules. For that, the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=dnsmasq">dnsmasq</a></span> package is required. <a href="../en/Dnsmasq.html" title="Dnsmasq">dnsmasq</a> does not needs to be configured or be started as systemd service, it will be used behind the scenes by NetworkManager — if it is not available, this step will fail silently. You can leave this and the <code>ipv4.addresses</code> parameter out if you wish to attach the Anbox container directly to a specific network, see <a href="../en/Network_bridge.html#With_NetworkManager" title="Network bridge">Network bridge#With NetworkManager</a>. If you choose this option, you must also change the network configuration of the container in <code>anbox-container-manager.service</code>, see the next bullet point.</li>
<li>
<code>ipv4.addresses 192.168.250.1/24</code> specifies the default gateway and subnet of the NAT network. If you wish to change this (e.g. to <code>192.168.42.1/24</code>) you must also indicate the new subnet to anbox in the <code>anbox-container-manager.service</code> using: <code>--container-network-address=192.168.42.2/24 --container-network-gateway=192.168.42.1</code>
</li>
</ul>
<p><a href="../en/NetworkManager.html" title="NetworkManager">NetworkManager</a> will automatically setup the bridge every reboot so you only need to execute the command once.
</p>
<h3><span class="mw-headline" id="Via_systemd-networkd">Via systemd-networkd</span></h3>
<p>The package <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/anbox-git/">anbox-git</a></span><sup><small>AUR</small></sup> provides configuration files for <code>systemd-networkd</code> in <code>/usr/lib/systemd/network/</code> to enable networking in anbox.
</p>
<p>Therefore, you can <a href="../en/Systemd.html#Using_units" class="mw-redirect" title="Start/enable">start/enable</a> <code>systemd-networkd</code> before starting <code>anbox-container-manager.service</code>.
</p>
<h3><span class="mw-headline" id="Via_anbox-bridge_script">Via anbox-bridge script</span></h3>
<p>Alternatively you can use the anbox-bridge script <a rel="nofollow" class="external text" href="https://raw.githubusercontent.com/anbox/anbox/master/scripts/anbox-bridge.sh">used by the project</a>.
</p>
<p>You must execute <code>anbox-bridge</code> every time before starting <code>anbox-container-manager.service</code> in order to get network working in Anbox. The easiest solution for that is to create a drop-in file for the service.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/system/anbox-container-manager.service.d/enable-anbox-bridge.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Service]
ExecStartPre=/usr/bin/anbox-bridge start
ExecStopPost=/usr/bin/anbox-bridge stop</pre>
<h2><span class="mw-headline" id="Usage">Usage</span></h2>
<p>You can run the Android applications on your desktop's launcher on <b>Other</b> category.
</p>
<p>If you want to use <a href="../en/Android_Debug_Bridge.html" title="Android Debug Bridge">adb</a> to debug, install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=android-tools">android-tools</a></span>. The <code>anbox session-manager</code> must already be running when launching it.
</p>
<pre>$ adb shell
</pre>
<h3><span class="mw-headline" id="Installing_apps">Installing apps</span></h3>
<p>Unless you picked an image with Houdini, Anbox does not have support for ARM applications. So apps must have a x86_64 architecture.
</p>
<h4><span class="mw-headline" id="Through_adb">Through adb</span></h4>
<p>To install <code><i>/path/to/app.apk</i></code>
</p>
<pre>$ adb install <i>/path/to/app.apk</i>
</pre>
<p>To get the list of installed applications
</p>
<pre>$ adb shell pm list packages
</pre>
<p>Note that output will be similar to <code><i>package:app.name</i></code>, where <code><i>app.name</i></code> is different from the one displayed in the Anbox container.
</p>
<p>To uninstall <code><i>app.name</i></code>
</p>
<pre>$ adb uninstall <i>app.name</i>
</pre>
<p>If <code><i>app.name</i></code> is a system app
</p>
<pre>$ adb uninstall --user 0 <i>app.name</i>
</pre>
<h4><span class="mw-headline" id="Through_apps_stores">Through apps stores</span></h4>
<p>Apps can be easily installed through apps stores. In <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/anbox-image-gapps/">anbox-image-gapps</a></span><sup><small>AUR</small></sup> PlayStore is included.
</p>
<h3><span class="mw-headline" id="Sensor_data">Sensor data</span></h3>
<p>Via dbus different sensors can be set. Documentation on that can be found at
<a rel="nofollow" class="external text" href="https://github.com/anbox/anbox/blob/master/docs/dbus.md">dbus.md</a>
</p>
<h4><span class="mw-headline" id="Temperature_data">Temperature data</span></h4>
<p>That is the example from the author (PRs <a rel="nofollow" class="external text" href="https://github.com/anbox/anbox/pull/1522">#1522</a> &amp; <a rel="nofollow" class="external text" href="https://github.com/anbox/anbox/pull/1522">#1540</a>)
</p>
<pre>$ dbus-send --session --dest=org.anbox --print-reply /org/anbox org.freedesktop.DBus.Properties.Set string:org.anbox.Sensors string:Temperature variant:double:25.1
</pre>
<h4><span class="mw-headline" id="GPS_data">GPS data</span></h4>
<p>(introduced by PR <a rel="nofollow" class="external text" href="https://github.com/anbox/anbox/pull/1606">#1606</a>)
</p>
<p>GPS sensor data can also be manipulated. 
</p>
<p>If your PC has a WWAN card, you can use <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=gpsd">gpsd</a></span> and the code from the PR to feed Anbox with GPS data. You do not need to have a SIM-Card for GPS.
</p>
<p>Otherwise, you can also look at the PR to learn how to feed it fake data with the help of <a rel="nofollow" class="external autonumber" href="https://www.nmeagen.org">[1]</a>.
</p>
<h3><span class="mw-headline" id="Root_shell">Root shell</span></h3>
<p>With this <a rel="nofollow" class="external text" href="https://github.com/anbox/anbox/blob/master/scripts/anbox-shell.sh">script</a> from the Anbox project one can get a root shell inside the Android container.
</p>
<p>It is not part of the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/anbox-git/">anbox-git</a></span><sup><small>AUR</small></sup> package, and it also does not use <a href="../en/Android_Debug_Bridge.html" title="Android Debug Bridge">adb</a>.
</p>
<h2><span class="mw-headline" id="Tips_and_tricks">Tips and tricks</span></h2>
<h3><span class="mw-headline" id="Android_developer_options">Android developer options</span></h3>
<p>Some extra steps need to be done besides unlocking them the same way you do on an android phone.
When installing the <a href="#Install_Android_Image">android image</a>, some modifications to <code>products/anbox.xml</code> are required:
</p>
<ul>
<li>
<code>&lt;unavailable-feature name="android.hardware.usb.host" /&gt;</code> is the reason why they are not available.</li>
<li>
<code>&lt;feature name="android.software.backup" /&gt;</code> will be needed too, to avoid a NullPointerException.</li>
</ul>
<p>(reference: <a rel="nofollow" class="external text" href="https://github.com/anbox/anbox/issues/444">Github issue #444</a>)
</p>
<h3><span class="mw-headline" id="Getting_debugging_information">Getting debugging information</span></h3>
<p>Obviously, it is helpful to have debugging symbols in the Anbox build. For that, when <a href="#Install_Anbox">compiling Anbox</a>, add <code>options=('!strip')</code> to the PKGBUILD, as by default they are removed. And, use either <code>-DCMAKE_BUILD_TYPE=RelWithDebInfo</code> or <code>-DCMAKE_BUILD_TYPE=Debug</code> in the cmake call.
</p>
<p>But there is more to it! Anbox uses <a rel="nofollow" class="external text" href="https://github.com/anbox/anbox/tree/master/external/backward-cpp">backward-cpp</a>. If you do not delete the build files for Anbox, it will print pretty stack traces when crashing, which point out the places in the source code.
</p>
<p>Also see the remarks in <a href="#Install_Anbox">#Install Anbox</a>.
</p>
<h2><span class="mw-headline" id="Troubleshooting">Troubleshooting</span></h2>
<p>If you run into issues, take a look at the official Issue Tracker: <a rel="nofollow" class="external autonumber" href="https://github.com/anbox/anbox/issues">[2]</a>
</p>
<h3><span class="mw-headline" id="Old_CPUs">Old CPUs</span></h3>
<p>Anbox requires support for SSE 4.1/4.2 and SSSE 3, because Android wants that too.
Some older CPUs do not provide that, so you probably cannot use Anbox, see:
<a rel="nofollow" class="external text" href="https://github.com/anbox/anbox/issues/499#issuecomment-399118684">Anbox Github Issue 499</a>.
</p>
<h3><span class="mw-headline" id="Old_kernels">Old kernels</span></h3>
<p>Before the kernel modules were mainlined, they were out of tree modules, which needed to be installed seperately from the kernel (Like it is the case for the nvidia kernel modules). They are not compatible with kernel 5.7 or newer.
</p>
<p>It is still possible to use that approach with the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=linux-lts">linux-lts</a></span> or other old kernels. The package to install the modules via <a href="../en/Dynamic_Kernel_Module_Support.html" class="mw-redirect" title="DKMS">DKMS</a> is not available in the AUR anymore, but can be retrieved with <code>git clone https://aur.archlinux.org/anbox-modules-dkms</code>, or resurected from <a rel="nofollow" class="external autonumber" href="https://aur.archlinux.org/cgit/aur.git/commit/?h=anbox-git&amp;id=0c9a9385694e680f5b277ca6f9326ad5d5df7dd3">[3]</a>.
</p>
<h3>
<span id="Kernel_5.10_with_lxc_.E2.89.A4_4.0.5"></span><span class="mw-headline" id="Kernel_5.10_with_lxc_≤_4.0.5">Kernel 5.10 with lxc ≤ 4.0.5</span>
</h3>
<p>If kernel 5.10.0 - 5.10.3 is used together with <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=lxc">lxc</a></span> ≤ 4.0.5, anbox session-manager will segfault very soon. Updating either the kernel to 5.10.4 or <a href="../en/Linux_Containers.html#Incompatibility_with_linux_kernel_5.10.0" title="Linux Containers">using a newer lxc version</a> fixes this.
</p>
<h3><span class="mw-headline" id="Secure_Boot_error">Secure Boot error</span></h3>
<p>If you get this error message:
</p>
<pre>modprobe: ERROR: could not insert 'ashmem_linux': Operation not permitted
</pre>
<p><a href="../en/Unified_Extensible_Firmware_Interface/Secure_Boot.html" class="mw-redirect" title="Secure Boot">Secure Boot</a> is likely blocking the module.
You can either disable Secure Boot or sign the ashmem module yourself.
</p>
<p>More info can be found in the <a rel="nofollow" class="external text" href="https://github.com/anbox/anbox/blob/master/docs/install.md#on-ubuntu-1904-and-later">Anbox Github Docs</a>.
</p>
<h2><span class="mw-headline" id="See_also">See also</span></h2>
<ul>
<li><a rel="nofollow" class="external text" href="https://github.com/anbox/anbox">Official Anbox Github Repo</a></li>
<li><a rel="nofollow" class="external text" href="https://anbox.io/">Anbox Website</a></li>
<li><a rel="nofollow" class="external text" href="https://mm.gravedo.de/blog/posts/2020-01-21-taking-the-anbox-journey-to-the-next-level">Posting by the main Anbox developer</a></li>
<li><a rel="nofollow" class="external text" href="https://brauner.github.io/2019/01/09/android-binderfs.html">Explanation about binderfs</a></li>
</ul>
</div>
</div>
<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Categories</a>: <ul>
<li><a href="../en/Category:Virtualization.html" title="Category:Virtualization">Virtualization</a></li>
<li><a href="../en/Category:Android.html" title="Category:Android">Android</a></li>
</ul>
</div></div>
	</div>
</div>

<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
		<li>Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Anbox&amp;oldid=649072">https://wiki.archlinux.org/index.php?title=Anbox&amp;oldid=649072</a>"</li>
		<li id="footer-info-lastmod"> This page was last edited on 17 January 2021, at 00:44.</li>
		<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
	<br>
</ul>
	<ul id="footer-places">
		<li id="footer-places-privacy"><a href="../en/ArchWiki:Privacy_policy.html" title="ArchWiki:Privacy policy">Privacy policy</a></li>
		<li id="footer-places-about"><a href="../en/ArchWiki:About.html" title="ArchWiki:About">About ArchWiki</a></li>
		<li id="footer-places-disclaimer"><a href="../en/ArchWiki:General_disclaimer.html" title="ArchWiki:General disclaimer">Disclaimers</a></li>
	</ul>
	<ul id="footer-icons" class="noprint">
		<li id="footer-copyrightico">
	</ul>
	<div style="clear: both;"></div>
</footer>



</body>
</html>
