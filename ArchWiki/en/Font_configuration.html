<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>Font configuration - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.35.0">
<meta name="robots" content="noindex,follow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="http://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Font_configuration rootpage-Font_configuration skin-vector action-view skin-vector-legacy">
<div id="content" class="mw-body" role="main" style="margin: 0">
	<a id="top"></a>
	<div id="siteNotice" class="mw-body-content"></div>
	<div class="mw-indicators mw-body-content">
	</div>
	<h1 id="firstHeading" class="firstHeading" lang="en">Font configuration</h1>
	<div id="bodyContent" class="mw-body-content">
		<div id="siteSub" class="noprint">From ArchWiki</div>
		<div id="contentSub"></div>
		<div id="contentSub2"></div>
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="#searchInput">Jump to search</a>
		<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr">
<div class="warningbox">The printable version is no longer supported and may have rendering errors. Please update your browser bookmarks and please use the default browser print function instead.</div>
<div class="mw-parser-output">
<div class="archwiki-template-meta-related-articles-start">
<p>Related articles</p>
<ul>
<li><a href="../en/Font_configuration/Examples.html" title="Font configuration/Examples">Font configuration/Examples</a></li>
<li><a href="../en/Fonts.html" title="Fonts">Fonts</a></li>
<li><a href="../en/Metric-compatible_fonts.html" title="Metric-compatible fonts">Metric-compatible fonts</a></li>
<li><a href="../en/Microsoft_fonts.html" title="Microsoft fonts">Microsoft fonts</a></li>
<li><a href="../en/Java_Runtime_Environment_fonts.html" title="Java Runtime Environment fonts">Java Runtime Environment fonts</a></li>
<li><a href="../en/X_Logical_Font_Description.html" title="X Logical Font Description">X Logical Font Description</a></li>
</ul>
</div>
<p><a rel="nofollow" class="external text" href="https://www.freedesktop.org/wiki/Software/fontconfig/">Fontconfig</a> is a library designed to provide a list of available <a href="../en/Fonts.html" title="Fonts">fonts</a> to applications, and also for configuration for how fonts get rendered. The FreeType library renders the fonts, based on this configuration. The <i>freetype2</i> font rendering packages on Arch Linux include the bytecode interpreter (BCI) enabled for better font rendering especially with an LCD monitor. See <a href="#Fontconfig_configuration">#Fontconfig configuration</a> and <a href="../en/Font_configuration/Examples.html" title="Font configuration/Examples">Font configuration/Examples</a>.
</p>
<p>Though Fontconfig is used often in modern Unix and Unix-like operating systems, some applications rely on the original method of font selection and display, the <a href="../en/X_Logical_Font_Description.html" title="X Logical Font Description">X Logical Font Description</a>.
</p>
<div id="toc" class="toc" role="navigation" aria-labelledby="mw-toc-heading">
<input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none"><div class="toctitle" lang="en" dir="ltr">
<h2 id="mw-toc-heading">Contents</h2>
<span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span>
</div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Font_paths"><span class="tocnumber">1</span> <span class="toctext">Font paths</span></a></li>
<li class="toclevel-1 tocsection-2">
<a href="#Fontconfig_configuration"><span class="tocnumber">2</span> <span class="toctext">Fontconfig configuration</span></a>
<ul>
<li class="toclevel-2 tocsection-3"><a href="#Presets"><span class="tocnumber">2.1</span> <span class="toctext">Presets</span></a></li>
<li class="toclevel-2 tocsection-4"><a href="#Anti-aliasing"><span class="tocnumber">2.2</span> <span class="toctext">Anti-aliasing</span></a></li>
<li class="toclevel-2 tocsection-5">
<a href="#Hinting"><span class="tocnumber">2.3</span> <span class="toctext">Hinting</span></a>
<ul>
<li class="toclevel-3 tocsection-6"><a href="#Byte-Code_Interpreter_(BCI)"><span class="tocnumber">2.3.1</span> <span class="toctext">Byte-Code Interpreter (BCI)</span></a></li>
<li class="toclevel-3 tocsection-7"><a href="#Autohinter"><span class="tocnumber">2.3.2</span> <span class="toctext">Autohinter</span></a></li>
<li class="toclevel-3 tocsection-8"><a href="#Hintstyle"><span class="tocnumber">2.3.3</span> <span class="toctext">Hintstyle</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-9"><a href="#Pixel_alignment"><span class="tocnumber">2.4</span> <span class="toctext">Pixel alignment</span></a></li>
<li class="toclevel-2 tocsection-10">
<a href="#Subpixel_rendering"><span class="tocnumber">2.5</span> <span class="toctext">Subpixel rendering</span></a>
<ul>
<li class="toclevel-3 tocsection-11"><a href="#LCD_filter"><span class="tocnumber">2.5.1</span> <span class="toctext">LCD filter</span></a></li>
<li class="toclevel-3 tocsection-12"><a href="#Advanced_LCD_filter_specification"><span class="tocnumber">2.5.2</span> <span class="toctext">Advanced LCD filter specification</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-13"><a href="#Custom_settings_for_certain_fonts_or_font_styles"><span class="tocnumber">2.6</span> <span class="toctext">Custom settings for certain fonts or font styles</span></a></li>
<li class="toclevel-2 tocsection-14"><a href="#Replace_or_set_default_fonts"><span class="tocnumber">2.7</span> <span class="toctext">Replace or set default fonts</span></a></li>
<li class="toclevel-2 tocsection-15"><a href="#Whitelisting_and_blacklisting_fonts"><span class="tocnumber">2.8</span> <span class="toctext">Whitelisting and blacklisting fonts</span></a></li>
<li class="toclevel-2 tocsection-16"><a href="#Disable_bitmap_fonts"><span class="tocnumber">2.9</span> <span class="toctext">Disable bitmap fonts</span></a></li>
<li class="toclevel-2 tocsection-17"><a href="#Disable_scaling_of_bitmap_fonts"><span class="tocnumber">2.10</span> <span class="toctext">Disable scaling of bitmap fonts</span></a></li>
<li class="toclevel-2 tocsection-18"><a href="#Create_bold_and_italic_styles_for_incomplete_fonts"><span class="tocnumber">2.11</span> <span class="toctext">Create bold and italic styles for incomplete fonts</span></a></li>
<li class="toclevel-2 tocsection-19"><a href="#Rule_priority"><span class="tocnumber">2.12</span> <span class="toctext">Rule priority</span></a></li>
<li class="toclevel-2 tocsection-20"><a href="#Query_the_current_settings"><span class="tocnumber">2.13</span> <span class="toctext">Query the current settings</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-21"><a href="#Applications_without_fontconfig_support"><span class="tocnumber">3</span> <span class="toctext">Applications without fontconfig support</span></a></li>
<li class="toclevel-1 tocsection-22">
<a href="#Troubleshooting"><span class="tocnumber">4</span> <span class="toctext">Troubleshooting</span></a>
<ul>
<li class="toclevel-2 tocsection-23"><a href="#Force_emoji_font"><span class="tocnumber">4.1</span> <span class="toctext">Force emoji font</span></a></li>
<li class="toclevel-2 tocsection-24"><a href="#Distorted_fonts"><span class="tocnumber">4.2</span> <span class="toctext">Distorted fonts</span></a></li>
<li class="toclevel-2 tocsection-25"><a href="#Calibri,_Cambria,_Monaco,_etc._not_rendering_properly"><span class="tocnumber">4.3</span> <span class="toctext">Calibri, Cambria, Monaco, etc. not rendering properly</span></a></li>
<li class="toclevel-2 tocsection-26"><a href="#Applications_overriding_hinting"><span class="tocnumber">4.4</span> <span class="toctext">Applications overriding hinting</span></a></li>
<li class="toclevel-2 tocsection-27"><a href="#Applications_not_picking_up_hinting_from_GNOME_settings"><span class="tocnumber">4.5</span> <span class="toctext">Applications not picking up hinting from GNOME settings</span></a></li>
<li class="toclevel-2 tocsection-28"><a href="#Incorrect_hinting_in_GTK_applications"><span class="tocnumber">4.6</span> <span class="toctext">Incorrect hinting in GTK applications</span></a></li>
<li class="toclevel-2 tocsection-29"><a href="#Helvetica_font_problem_in_generated_PDFs"><span class="tocnumber">4.7</span> <span class="toctext">Helvetica font problem in generated PDFs</span></a></li>
<li class="toclevel-2 tocsection-30"><a href="#FreeType_breaking_bitmap_fonts"><span class="tocnumber">4.8</span> <span class="toctext">FreeType breaking bitmap fonts</span></a></li>
<li class="toclevel-2 tocsection-31"><a href="#Underscores_not_rendered_with_Dejavu_Monospace"><span class="tocnumber">4.9</span> <span class="toctext">Underscores not rendered with Dejavu Monospace</span></a></li>
<li class="toclevel-2 tocsection-32"><a href="#Debugging_FreeType_fonts"><span class="tocnumber">4.10</span> <span class="toctext">Debugging FreeType fonts</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-33"><a href="#See_also"><span class="tocnumber">5</span> <span class="toctext">See also</span></a></li>
</ul>
</div>

<h2><span class="mw-headline" id="Font_paths">Font paths</span></h2>
<p>For fonts to be known to applications, they must be cataloged for easy and quick access.
</p>
<p>The font paths initially known to Fontconfig are: <code>/usr/share/fonts/</code>, <code>~/.local/share/fonts</code> (and <code>~/.fonts/</code>, now deprecated). Fontconfig will scan these directories recursively. For ease of organization and installation, it is recommended to use these font paths when <a href="../en/Fonts.html#Installation" class="mw-redirect" title="Adding fonts">adding fonts</a>.
</p>
<p>To see a list of known Fontconfig fonts:
</p>
<pre>$ fc-listÂ : file
</pre>
<p>See <span class="plainlinks archwiki-template-man" title="$ man 1 fc-list"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/fc-list.1">fc-list(1)</a></span> for more output formats.
</p>
<p>Check for Xorg's known font paths by reviewing its log:
</p>
<pre>$ grep /fonts ~/.local/share/xorg/Xorg.0.log
</pre>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> 
<ul>
<li>You can also check the list of <a href="../en/Xorg.html" title="Xorg">Xorg</a>'s known font paths using the command <code>xset q</code>.</li>
<li>Use <code>/var/log/Xorg.0.log</code> if Xorg is run with root privileges.</li>
</ul>
</div>
<p>Keep in mind that Xorg does not search recursively through the <code>/usr/share/fonts/</code> directory like Fontconfig does.  To add a path, the full path must be used:
</p>
<pre>Section "Files"
    FontPath     "/usr/share/fonts/local/"
EndSection
</pre>
<p>If you want font paths to be set on a per-user basis, you can add and remove font paths from the default by adding the following line(s) to <code>~/.xinitrc</code>:
</p>
<pre>xset +fp /usr/share/fonts/local/           # Prepend a custom font path to Xorg's list of known font paths
xset -fp /usr/share/fonts/sucky_fonts/     # Remove the specified font path from Xorg's list of known font paths
</pre>
<p>To see a list of known Xorg fonts use <code>xlsfonts</code>, from the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=xorg-xlsfonts">xorg-xlsfonts</a></span> package.
</p>
<h2><span class="mw-headline" id="Fontconfig_configuration">Fontconfig configuration</span></h2>
<p>Fontconfig is documented in the <span class="plainlinks archwiki-template-man" title="$ man 5 fonts-conf"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/fonts-conf.5">fonts-conf(5)</a></span> man page.
</p>
<p>Configuration can be done per-user through <code>$XDG_CONFIG_HOME/fontconfig/fonts.conf</code> (usually <code>$HOME/.config/fontconfig/fonts.conf</code>), and globally with <code>/etc/fonts/local.conf</code>.  The settings in the per-user configuration have precedence over the global configuration.  Both these files use the same syntax.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Configuration files and directories: <code>~/.fonts.conf/</code>, <code>~/.fonts.conf.d/</code> and <code>~/.fontconfig/*.cache-*</code> are deprecated and will not be read by default in the future versions of the package. New paths are <code>$XDG_CONFIG_HOME/fontconfig/fonts.conf</code>, <code>$XDG_CONFIG_HOME/fontconfig/conf.d/NN-name.conf</code> and <code>$XDG_CACHE_HOME/fontconfig/*.cache-*</code> respectively. If using the second location, make sure the naming is valid (where <code>NN</code> is a two digit number like <code>00</code>, <code>10</code>, or <code>99</code>).</div>
<p>Fontconfig gathers all its configurations in a central file (<code>/etc/fonts/fonts.conf</code>).  This file is replaced during fontconfig updates and should not be edited.  Fontconfig-aware applications source this file to know available fonts and how they get rendered; simply restarting such applications is sufficient to load the new configuration.  This file is a conglomeration of rules from the global configuration (<code>/etc/fonts/local.conf</code>), the configured presets in <code>/etc/fonts/conf.d/</code>, and the user configuration file (<code>$XDG_CONFIG_HOME/fontconfig/fonts.conf</code>). <code>fc-cache</code> can be used to rebuild fontconfig's configuration, although changes will only be visible in newly launched applications.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> For some desktop environments (such as <a href="../en/GNOME.html" title="GNOME">GNOME</a> and <a href="../en/KDE.html" title="KDE">KDE</a>) using the <i>Font Control Panel</i> will automatically create or overwrite the user font configuration file.  For these desktop environments, it is best to match your already defined font configurations to get the expected behavior. Also ensure that the desktop <a href="../en/Locale.html" title="Locale">locale</a> settings or <i>Regional Settings</i> are supported by the configured fonts, if not the font configuration could be overidden.</div>
<p>Fontconfig configuration files use <a href="https://en.wikipedia.org/wiki/XML" class="extiw" title="wikipedia:XML">XML</a> format and need these headers:
</p>
<pre>&lt;?xml version="1.0"?&gt;
&lt;!DOCTYPE fontconfig SYSTEM "fonts.dtd"&gt;
&lt;fontconfig&gt;

  &lt;!-- settings go here --&gt;

&lt;/fontconfig&gt;
</pre>
<p>The configuration examples in this article omit these tags.
</p>
<h3><span class="mw-headline" id="Presets">Presets</span></h3>
<p>There are presets installed in the directory <code>/etc/fonts/conf.avail</code>.  They can be enabled by creating <a href="https://en.wikipedia.org/wiki/Symbolic_link" class="extiw" title="wikipedia:Symbolic link">symbolic links</a> to them, both per-user and globally, as described in <code>/etc/fonts/conf.d/README</code>.  These presets will override matching settings in their respective configuration files.
</p>
<p>For example, to enable sub-pixel RGB rendering globally:
</p>
<pre># cd /etc/fonts/conf.d
# ln -s ../conf.avail/10-sub-pixel-rgb.conf
</pre>
<p>To do the same but instead for a per-user configuration:
</p>
<pre>$ mkdir $XDG_CONFIG_HOME/fontconfig/conf.d
$ ln -s /etc/fonts/conf.avail/10-sub-pixel-rgb.conf $XDG_CONFIG_HOME/fontconfig/conf.d
</pre>
<h3><span class="mw-headline" id="Anti-aliasing">Anti-aliasing</span></h3>
<p><a href="https://en.wikipedia.org/wiki/Font_rasterization" class="extiw" title="wikipedia:Font rasterization">Font rasterization</a> converts vector font data to bitmap data so that it can be displayed. The result can appear jagged due to <a href="https://en.wikipedia.org/wiki/Aliasing" class="extiw" title="wikipedia:Aliasing">aliasing</a>. The technique known as <a href="https://en.wikipedia.org/wiki/Anti-aliasing" class="extiw" title="wikipedia:Anti-aliasing">anti-aliasing</a> can be used to increase the apparent resolution of font edges. Anti-aliasing is <b>enabled</b> by default. To disable it:
</p>
<pre>  &lt;match target="font"&gt;
    &lt;edit name="antialias" mode="assign"&gt;
      &lt;bool&gt;false&lt;/bool&gt;
    &lt;/edit&gt;
  &lt;/match&gt;
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Some applications, like <a href="../en/GNOME.html" title="GNOME">GNOME</a> may <a href="#Troubleshooting">override default anti-aliasing settings</a>.</div>
<h3><span class="mw-headline" id="Hinting">Hinting</span></h3>
<p><a href="https://en.wikipedia.org/wiki/Font_hinting" class="extiw" title="wikipedia:Font hinting">Font hinting</a> (also known as instructing) is the use of mathematical instructions to adjust the display of an outline font so that it lines up with a rasterized grid (i.e. the pixel grid of the display). Its intended effect is to make fonts appear more crisp so that they are more readable. Fonts will line up correctly without hinting when displays have around 300 <a href="https://en.wikipedia.org/wiki/Dots_per_inch" class="extiw" title="wikipedia:Dots per inch">DPI</a>.
</p>
<h4>
<span id="Byte-Code_Interpreter_.28BCI.29"></span><span class="mw-headline" id="Byte-Code_Interpreter_(BCI)">Byte-Code Interpreter (BCI)</span>
</h4>
<p>Using BCI hinting, instructions in TrueType fonts are rendered according to FreeTypes's interpreter. BCI hinting works well with fonts with good hinting instructions. Hinting is <b>enabled</b> by default. To disable it:
</p>
<pre>  &lt;match target="font"&gt;
    &lt;edit name="hinting" mode="assign"&gt;
      &lt;bool&gt;false&lt;/bool&gt;
    &lt;/edit&gt;
  &lt;/match&gt;
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> The BCI implementation can be switched in the script <code>/etc/profile.d/freetype2.sh</code>. The interpreter is set by passing the parameter <code>truetype:interpreter-version=<i>NN</i></code>, <i>NN</i> corresponding to the version chosen, to the <code>FREETYPE_PROPERTIES</code> variable in the script. The most popular values are:
<ul>
<li>35 for classic mode (emulates Windows 98),</li>
<li>36 for classic Windows ClearType style (before Windows XP),</li>
<li>38 for "Infinality" mode (highly configurable rendering, considered slow and discontinued),</li>
<li>
<b>40</b> for <a rel="nofollow" class="external text" href="https://www.freetype.org/freetype2/docs/subpixel-hinting.html">minimal mode</a> (stripped down Infinity, this is the default).</li>
</ul>
Subpixel rendering should use a subpixel BCI. For details, see <a rel="nofollow" class="external autonumber" href="https://www.freetype.org/freetype2/docs/reference/ft2-properties.html#tt_interpreter_version_xxx">[1]</a>.</div>
<h4><span class="mw-headline" id="Autohinter">Autohinter</span></h4>
<p>The autohinter attempts to do automatic hinting and disregards any existing hinting information. Originally it was the default because TrueType2 fonts were patent-protected but now that these patents have expired there is very little reason to use it. It does work better with fonts that have broken or no hinting information but it will be strongly sub-optimal for fonts with good hinting information. Generally common fonts are of the later kind so autohinter will not be useful. Autohinter is <b>disabled</b> by default. To enable it:
</p>
<pre>  &lt;match target="font"&gt;
    &lt;edit name="autohint" mode="assign"&gt;
      &lt;bool&gt;true&lt;/bool&gt;
    &lt;/edit&gt;
  &lt;/match&gt;
</pre>
<h4><span class="mw-headline" id="Hintstyle">Hintstyle</span></h4>
<p>Hintstyle is the amount of font reshaping done to line up to the grid. Hinting values are: <code>hintnone</code>, <code>hintslight</code>, <code>hintmedium</code>, and <code>hintfull</code>. <code>hintslight</code> will make the font more fuzzy to line up to the grid but will be better in retaining font shape (see <a rel="nofollow" class="external autonumber" href="https://www.freetype.org/freetype2/docs/text-rendering-general.html">[2]</a>), while <code>hintfull</code> will be a crisp font that aligns well to the pixel grid but will lose a greater amount of font shape. <code>hintslight</code> implicitly uses the autohinter in a vertical-only mode in favor of font-native information for non-CFF (<i>.otf</i>) fonts.
</p>
<p><code>hintslight</code> is the default setting. To change it:
</p>
<pre>  &lt;match target="font"&gt;
    &lt;edit name="hintstyle" mode="assign"&gt;
      &lt;const&gt;hintnone&lt;/const&gt;
    &lt;/edit&gt;
  &lt;/match&gt;
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Some applications, like <a href="../en/GNOME.html" title="GNOME">GNOME</a> may <a href="#Troubleshooting">override default hinting settings.</a>
</div>
<h3><span class="mw-headline" id="Pixel_alignment">Pixel alignment</span></h3>
<p>Most monitors manufactured today use the Red, Green, Blue (RGB) specification. Fontconfig will need to know your monitor type to be able to display your fonts correctly.  Monitors are either: <b>RGB</b> (most common), <b>BGR</b>, <b>V-RGB</b> (vertical), or <b>V-BGR</b>.  A monitor test can be found <a rel="nofollow" class="external text" href="http://www.lagom.nl/lcd-test/subpixel.php">here</a>.
</p>
<pre>  &lt;match target="font"&gt;
    &lt;edit name="rgba" mode="assign"&gt;
      &lt;const&gt;rgb&lt;/const&gt;
    &lt;/edit&gt;
  &lt;/match&gt;
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Without subpixel rendering (see below), freetype will only care about the alignment (vertical or horizontal) of the subpixels. There is no difference between <b>RGB</b> and <b>BGR</b>, for example.</div>
<h3><span class="mw-headline" id="Subpixel_rendering">Subpixel rendering</span></h3>
<p><a href="https://en.wikipedia.org/wiki/Subpixel_rendering" class="extiw" title="wikipedia:Subpixel rendering">Subpixel rendering</a> is a technique to improve sharpness of font rendering by effectively tripling the horizontal (or vertical) resolution through the use of subpixels. On Windows machines, this technique is called <a href="https://en.wikipedia.org/wiki/ClearType" class="extiw" title="wikipedia:ClearType">ClearType</a>. 
</p>
<p>FreeType2 provides two different types of subpixel rendering, called Harmony and ClearType (<code>FT_CONFIG_OPTION_SUBPIXEL_RENDERING</code>) <a rel="nofollow" class="external autonumber" href="https://www.freetype.org/freetype2/docs/reference/ft2-lcd_rendering.html">[3]</a>.
</p>
<p>An LCD filter is recommended when ClearType subpixel rendering is enabled (Harmony subpixel rendering does <b>not</b> require setting an LCD filter). See the section below on how to enable an LCD filter and its benefits.
</p>
<p>Starting from FreeType 2.10.3, Arch Linux enables ClearType subpixel rendering by default <a rel="nofollow" class="external autonumber" href="https://github.com/archlinux/svntogit-packages/commit/68a744d932ddf1d218c687ed89f5742b57385bba">[4]</a>.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Use the <code>lcdlight</code> LCD filter to get the subpixel rendering behavior prior FreeType 2.10.3, called Harmony (instead of ClearType).</div>
<h4><span class="mw-headline" id="LCD_filter">LCD filter</span></h4>
<p>When using ClearType subpixel rendering, you should enable the LCD filter, which is designed to reduce colour fringing.  This is described under <a rel="nofollow" class="external text" href="https://www.freetype.org/freetype2/docs/reference/ft2-lcd_rendering.html">LCD filtering</a> in the FreeType 2 API reference.  Different options are described under <a rel="nofollow" class="external text" href="https://www.freetype.org/freetype2/docs/reference/ft2-lcd_rendering.html#ft_lcdfilter">FT_LcdFilter</a>, and are illustrated by this <a rel="nofollow" class="external text" href="http://www.spasche.net/files/lcdfiltering/">LCD filter test</a> page.
</p>
<p>The <code>lcddefault</code> filter will work for most users. Other filters are available that can be used in special situations: <code>lcdlight</code>; a lighter filter ideal for fonts that look too bold or fuzzy, <code>lcdlegacy</code>, the original Cairo filter; and <code>lcdnone</code> to disable it entirely.
</p>
<pre>  &lt;match target="font"&gt;
    &lt;edit name="lcdfilter" mode="assign"&gt;
      &lt;const&gt;lcddefault&lt;/const&gt;
    &lt;/edit&gt;
  &lt;/match&gt;
</pre>
<h4><span class="mw-headline" id="Advanced_LCD_filter_specification">Advanced LCD filter specification</span></h4>
<p>If the available built-in LCD filters are not satisfactory, it is possible to tweak the font rendering very specifically by building a custom freetype2 package and modifying the hardcoded filters. The <a href="../en/Arch_Build_System.html" title="Arch Build System">Arch Build System</a> can be used to build and install packages from source. This requires installation of the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=asp">asp</a></span> package.
</p>
<p>Checkout the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=freetype2">freetype2</a></span> PKGBUILD and download/extract the build files:
</p>
<pre>$ asp checkout freetype2
$ cd freetype2/trunk
$ makepkg -o
</pre>
<p>Enable ClearType subpixel rendering by editing the file <code>src/freetype-VERSION/include/freetype/config/ftoption.h</code> and uncommenting the <code>FT_CONFIG_OPTION_SUBPIXEL_RENDERING</code> macro.
</p>
<p>Then, edit the file <code>src/freetype-VERSION/src/base/ftlcdfil.c</code> and look up the definition of the constant <code>default_filter[5]</code>:
</p>
<pre>static const FT_Byte  default_filter[5] =
    { 0x10, 0x40, 0x70, 0x40, 0x10 };
</pre>
<p>This constant defines a low-pass filter applied to the rendered glyph. Modify it as needed. (reference: <a rel="nofollow" class="external text" href="https://lists.nongnu.org/archive/html/freetype/2006-09/msg00069.html">freetype list discussion</a>) Save the file, build and install the custom package:
</p>
<pre>$ makepkg -e
# pacman -Rd freetype2
# pacman -U freetype2-VERSION-ARCH.pkg.tar.xz
</pre>
<p>Reboot or restart X. The lcddefault filter should now render fonts differently.
</p>
<h3><span class="mw-headline" id="Custom_settings_for_certain_fonts_or_font_styles">Custom settings for certain fonts or font styles</span></h3>
<p>The auto-hinter uses sophisticated methods for font rendering, but often makes bold fonts too wide. Fortunately, a solution can be turning off the autohinter for bold fonts while leaving it on for the rest:
</p>
<pre>...
&lt;match target="font"&gt;
    &lt;test name="weight" compare="more"&gt;
        &lt;const&gt;medium&lt;/const&gt;
    &lt;/test&gt;
    &lt;edit name="autohint" mode="assign"&gt;
        &lt;bool&gt;false&lt;/bool&gt;
    &lt;/edit&gt;
&lt;/match&gt;
...
</pre>
<p>Some fonts may not look good with BCI hinting. It can be disabled for just those fonts:
</p>
<pre>...
&lt;match target="font"&gt;
    &lt;test name="family" qual="any"&gt;
        &lt;string&gt;My Font&lt;/string&gt;
    &lt;/test&gt;
    &lt;edit name="hinting" mode="assign"&gt;
        &lt;bool&gt;false&lt;/bool&gt;
    &lt;/edit&gt;
&lt;/match&gt;
...
</pre>
<h3><span class="mw-headline" id="Replace_or_set_default_fonts">Replace or set default fonts</span></h3>
<p>The most reliable way to set a default font is to add an XML fragment similar to the one below. Using the "binding" attribute will give you better results, for example, this will cause <i>Ubuntu</i> to be used in place of <i>Georgia</i>:
</p>
<pre>...
&lt;match target="pattern"&gt;
  &lt;test qual="any" name="family"&gt;&lt;string&gt;Georgia&lt;/string&gt;&lt;/test&gt;
  &lt;edit name="family" mode="assign" binding="same"&gt;&lt;string&gt;Ubuntu&lt;/string&gt;&lt;/edit&gt;
&lt;/match&gt;
...</pre>
<p>An alternate approach is to set the "preferred" font. Fonts matching the <i>&lt;family&gt;</i> element are edited to prepend the list of <i>&lt;prefer&gt;</i>ed families before the matching <i>&lt;family&gt;</i>. This only works if the original font is not in the system, in which case the one specified will be substituted:
</p>
<pre>...
&lt;!-- Replace Helvetica with Bitstream Vera Sans Mono --&gt;
&lt;!-- Note, an alias for Helvetica should already exist in default conf files --&gt;
&lt;alias&gt;
    &lt;family&gt;Helvetica&lt;/family&gt;
    &lt;prefer&gt;
        &lt;family&gt;Bitstream Vera Sans Mono&lt;/family&gt;
    &lt;/prefer&gt;
&lt;/alias&gt;
...
</pre>
<h3><span class="mw-headline" id="Whitelisting_and_blacklisting_fonts">Whitelisting and blacklisting fonts</span></h3>
<p>The element <code>&lt;selectfont&gt;</code> is used in conjunction with the <code>&lt;acceptfont&gt;</code> and <code>&lt;rejectfont&gt;</code> elements to selectively whitelist or blacklist fonts from the resolve list and match requests. The simplest and most typical use case it to reject one font that is needed to be installed, however is getting matched for a generic font query that is causing problems within application user interfaces.
</p>
<p>First obtain the Family name as listed in the font itself:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ fc-scan .fonts/lklug.ttf --format='%{family}\n'</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">LKLUG</pre>
<p>Then use that Family name in a <code>&lt;rejectfont&gt;</code> stanza:
</p>
<pre>&lt;selectfont&gt;
    &lt;rejectfont&gt;
        &lt;pattern&gt;
            &lt;patelt name="family" &gt;
                &lt;string&gt;LKLUG&lt;/string&gt;
            &lt;/patelt&gt;
        &lt;/pattern&gt;
    &lt;/rejectfont&gt;
&lt;/selectfont&gt;
</pre>
<p>Typically when both elements are combined, <code>&lt;rejectfont&gt;</code> is first used on a more general matching glob to reject a large group (such as a whole directory), then <code>&lt;acceptfont&gt;</code> is used after it to whitelist individual fonts out of the larger blacklisted group.
</p>
<pre>&lt;selectfont&gt;
    &lt;rejectfont&gt;
        &lt;glob&gt;/usr/share/fonts/OTF/*&lt;/glob&gt;
    &lt;/rejectfont&gt;
    &lt;acceptfont&gt;
        &lt;pattern&gt;
            &lt;patelt name="family" &gt;
                &lt;string&gt;Monaco&lt;/string&gt;
            &lt;/patelt&gt;
        &lt;/pattern&gt;
    &lt;/acceptfont&gt;
&lt;/selectfont&gt;
</pre>
<h3><span class="mw-headline" id="Disable_bitmap_fonts">Disable bitmap fonts</span></h3>
<p>Bitmap fonts are sometimes used as fallbacks for missing fonts, which may cause text to be rendered pixelated or too large. Use the <code>70-no-bitmaps.conf</code> <a href="#Presets">preset</a> to disable this behavior. 
</p>
<p>To disable embedded bitmap for all fonts:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.config/fontconfig/conf.d/20-no-embedded.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">&lt;?xml version="1.0"?&gt;
&lt;!DOCTYPE fontconfig SYSTEM "fonts.dtd"&gt;
&lt;fontconfig&gt;
  &lt;match target="font"&gt;
    &lt;edit name="embeddedbitmap" mode="assign"&gt;
      &lt;bool&gt;false&lt;/bool&gt;
    &lt;/edit&gt;
  &lt;/match&gt;
&lt;/fontconfig&gt;
</pre>
<p>To disable embedded bitmap fonts for a specific font:
</p>
<pre>&lt;match target="font"&gt;
  &lt;test qual="any" name="family"&gt;
    &lt;string&gt;Monaco&lt;/string&gt;
  &lt;/test&gt;
  &lt;edit name="embeddedbitmap"&gt;
    &lt;bool&gt;false&lt;/bool&gt;
  &lt;/edit&gt;
&lt;/match&gt;
</pre>
<h3><span class="mw-headline" id="Disable_scaling_of_bitmap_fonts">Disable scaling of bitmap fonts</span></h3>
<p>To disable scaling of bitmap fonts (which often makes them blurry), remove <code>/etc/fonts/conf.d/10-scale-bitmap-fonts.conf</code>.
Note this can break the scaling of emoji fonts such as Segoe UI Emoji, making them huge.
</p>
<h3><span class="mw-headline" id="Create_bold_and_italic_styles_for_incomplete_fonts">Create bold and italic styles for incomplete fonts</span></h3>
<p>FreeType has the ability to automatically create <i>italic</i> and <b>bold</b> styles for fonts that do not have them, but only if explicitly required by the application. Given programs rarely send these requests, this section covers manually forcing generation of missing styles.
</p>
<p>Start by editing <code>/usr/share/fonts/fonts.cache-1</code> as explained below. Store a copy of the modifications on another file, because a font update with <code>fc-cache</code> will overwrite <code>/usr/share/fonts/fonts.cache-1</code>.
</p>
<p>Assuming the Dupree font is installed:
</p>
<pre>"dupree.ttf" 0 "Dupree:style=Regular:slant=0:weight=80:width=100:foundry=unknown:index=0:outline=True:<i>etc...</i>
</pre>
<p>Duplicate the line, change <code>style=Regular</code> to <code>style=Bold</code> or any other style. Also change <code>slant=0</code> to <code>slant=100</code> for italic, <code>weight=80</code> to <code>weight=200</code> for bold, or combine them for <i><b>bold italic</b></i>:
</p>
<pre>"dupree.ttf" 0 "Dupree:style=Bold Italic:slant=100:weight=200:width=100:foundry=unknown:index=0:outline=True:<i>etc...</i>
</pre>
<p>Now add necessary modifications to <code>$XDG_CONFIG_HOME/fontconfig/fonts.conf</code>:
</p>
<pre>...
&lt;match target="font"&gt;
    &lt;test name="family" qual="any"&gt;
        &lt;string&gt;Dupree&lt;/string&gt;
         &lt;!-- other fonts here .... --&gt;
     &lt;/test&gt;
     &lt;test name="weight" compare="more_eq"&gt;&lt;int&gt;140&lt;/int&gt;&lt;/test&gt;
     &lt;edit name="embolden" mode="assign"&gt;&lt;bool&gt;true&lt;/bool&gt;&lt;/edit&gt;
&lt;/match&gt;

&lt;match target="font"&gt;
    &lt;test name="family" qual="any"&gt;
        &lt;string&gt;Dupree&lt;/string&gt;
        &lt;!-- other fonts here .... --&gt;
    &lt;/test&gt;
    &lt;test name="slant" compare="more_eq"&gt;&lt;int&gt;80&lt;/int&gt;&lt;/test&gt;
    &lt;edit name="matrix" mode="assign"&gt;
        &lt;times&gt;
            &lt;name&gt;matrix&lt;/name&gt;
                &lt;matrix&gt;
                    &lt;double&gt;1&lt;/double&gt;&lt;double&gt;0.2&lt;/double&gt;
                    &lt;double&gt;0&lt;/double&gt;&lt;double&gt;1&lt;/double&gt;
                &lt;/matrix&gt;
        &lt;/times&gt;
    &lt;/edit&gt;
&lt;/match&gt;
...
</pre>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong>  Use the value <code>embolden</code> for existing bold fonts in order to make them even bolder.</div>
<h3><span class="mw-headline" id="Rule_priority">Rule priority</span></h3>
<p>Fontconfig processes files in <code>/etc/fonts/conf.d</code> in numerical order. Therefore the rules of <code>01-aaa.conf</code> and <code>02-bbb.conf</code> will have the same effect as a single <code>01-aaabbb.conf</code> file containing first the rules of <code>01-aaa</code> then the ones of <code>02-bbb</code>.
</p>
<p>Usually that means the files with the smaller prefix will have higher precedence. However, the fontconfig syntax is flexible and allows that a new rule takes precedence over an existing rule. Therefore it is recommended to <a href="#Query_the_current_settings">#Query the current settings</a> to test the result of the rule interactions.
</p>
<p>Note that the user's rules defined in <code>$XDG_CONFIG_HOME/fontconfig/fonts.conf</code> and in the directory <code>$XDG_CONFIG_HOME/fontconfig/conf.d</code> are loaded via the file <code>/etc/fonts/conf.d/50-user.conf</code> and typically take precedence over the rules defined in files starting with a higher number.
</p>
<h3><span class="mw-headline" id="Query_the_current_settings">Query the current settings</span></h3>
<p>To find out what settings are in effect, use <code>fc-match --verbose</code>. eg.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ fc-match --verbose Sans</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">family: "DejaVu Sans"(s)
hintstyle: 3(i)(s)
hinting: True(s)
...
</pre>
<p>Look up the meaning of the numbers at <span class="plainlinks archwiki-template-man" title="$ man 5 fonts-conf"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/fonts-conf.5">fonts-conf(5)</a></span> Eg. 'hintstyle: 3' means 'hintfull'
</p>
<h2><span class="mw-headline" id="Applications_without_fontconfig_support">Applications without fontconfig support</span></h2>
<p>Some applications like <a href="../en/Rxvt-unicode.html" class="mw-redirect" title="URxvt">URxvt</a> will ignore fontconfig settings. You can work around this by using <code>~/.Xresources</code>, but it is not as flexible as fontconfig. Example (see <a href="#Fontconfig_configuration">#Fontconfig configuration</a> for explanations of the options):
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.Xresources</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Xft.autohint: 0
Xft.lcdfilter: lcddefault
Xft.hintstyle: hintslight
Xft.hinting: 1
Xft.antialias: 1
Xft.rgba: rgb
</pre>
<p>Make sure the settings are loaded properly when X starts with <code>xrdb -q</code> (see <a href="../en/X_resources.html" title="X resources">X resources</a> for more information).
</p>
<h2><span class="mw-headline" id="Troubleshooting">Troubleshooting</span></h2>
<h3><span class="mw-headline" id="Force_emoji_font">Force emoji font</span></h3>
<p>Some software may lacks proper <a href="../en/Fonts.html#Emoji_and_symbols" class="mw-redirect" title="Emoji">Emoji</a> font fallback support. 
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> For <a href="../en/Firefox.html" title="Firefox">Firefox</a> see workaround on <a href="../en/Firefox.html#Font_troubleshooting" title="Firefox">Firefox#Font troubleshooting</a> instead.</div>
<p>To force emoji presentation create emoji font fallback preset for your application, to enable see <a href="#Presets">#Presets</a>. Replace <i>application</i> and <i>Noto Color Emoji</i> with your application and preferred emoji font respectively:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/fonts/conf.avail/55-emoji-prepend.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;!DOCTYPE fontconfig SYSTEM "fonts.dtd"&gt;
&lt;fontconfig&gt;
  &lt;match&gt;
    &lt;test name="prgname"&gt;
      &lt;string&gt;<i>application</i>&lt;/string&gt;
    &lt;/test&gt;
    &lt;edit name="family" mode="prepend" binding="weak"&gt;
      &lt;string&gt;<i>Noto Color Emoji</i>&lt;/string&gt;
    &lt;/edit&gt;
  &lt;/match&gt;
&lt;/fontconfig&gt;</pre>
<h3><span class="mw-headline" id="Distorted_fonts">Distorted fonts</span></h3>
<div class="noprint archwiki-template-message">
<p><a href="../File:Tango-edit-cut.png" class="image"><img alt="Tango-edit-cut.png" src="../File:Tango-edit-cut.png" decoding="async" width="48" height="48"></a><b>This section is being considered for removal.</b><a href="../File:Tango-edit-cut.png" class="image"><img alt="Tango-edit-cut.png" src="../File:Tango-edit-cut.png" decoding="async" width="48" height="48"></a></p>
<div>
<b>Reason:</b> Wrong section title, disputed claims. <a href="../en/HiDPI.html" title="HiDPI">HiDPI</a> instructions should be used instead. (Discuss in <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php/Talk:Font_configuration#Disputable_claims_regarding_DPI">Talk:Font configuration#Disputable claims regarding DPI</a>)</div>
</div>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> 96 DPI is not a standard. You should use your monitor's actual DPI to get proper font rendering, especially when using subpixel rendering.</div>
<p>If fonts are still unexpectedly large or small, poorly proportioned or simply rendering poorly, fontconfig may be using the incorrect DPI.
</p>
<p>Fontconfig should be able to detect DPI parameters as discovered by the Xorg server. You can check the automatically discovered DPI with <code>xdpyinfo</code> (provided by the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=xorg-xdpyinfo">xorg-xdpyinfo</a></span> package):
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ xdpyinfo | grep dots</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">  resolution:    102x102 dots per inch
</pre>
<p>If the DPI is detected incorrectly (usually due to an incorrect monitor <a href="https://en.wikipedia.org/wiki/Extended_Display_Identification_Data" class="extiw" title="wikipedia:Extended Display Identification Data">EDID</a>), you can specify it manually in the Xorg configuration, see <a href="../en/Xorg.html#Display_size_and_DPI" title="Xorg">Xorg#Display size and DPI</a>. This is the recommended solution, but it may not work with buggy drivers.
</p>
<p>Fontconfig will default to the Xft.dpi variable if it is set. Xft.dpi is usually set by desktop environments (usually to Xorg's DPI setting) or manually in <code>~/.Xdefaults</code> or <code>~/.Xresources</code>. Use xrdb to query for the value:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ xrdb -query | grep dpi</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Xft.dpi:	102
</pre>
<p>Those still having problems can fall back to manually setting the DPI used by fontconfig:
</p>
<pre>...
&lt;match target="pattern"&gt;
   &lt;edit name="dpi" mode="assign"&gt;&lt;double&gt;102&lt;/double&gt;&lt;/edit&gt;
&lt;/match&gt;
...
</pre>
<h3>
<span id="Calibri.2C_Cambria.2C_Monaco.2C_etc._not_rendering_properly"></span><span class="mw-headline" id="Calibri,_Cambria,_Monaco,_etc._not_rendering_properly">Calibri, Cambria, Monaco, etc. not rendering properly</span>
</h3>
<p>Some scalable fonts have embedded bitmap versions which are rendered instead, mainly at smaller sizes. Using <a href="../en/Metric-compatible_fonts.html" title="Metric-compatible fonts">Metric-compatible fonts</a> as replacements can improve the rendering in these cases. 
</p>
<p>You can also force using scalable fonts at all sizes by <a href="#Disable_bitmap_fonts">disabling embedded bitmap</a>, sacrificing some rendering quality.
</p>
<h3><span class="mw-headline" id="Applications_overriding_hinting">Applications overriding hinting</span></h3>
<p>Some applications or desktop environments may override default fontconfig hinting and anti-aliasing settings. This may happen with <a href="../en/GNOME.html" title="GNOME">GNOME</a> 3, for example while you are using Qt applications like <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=vlc">vlc</a></span> or <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=smplayer">smplayer</a></span>. Use the specific configuration program for the application in such cases. For GNOME, try <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=gnome-tweaks">gnome-tweaks</a></span>.
</p>
<h3><span class="mw-headline" id="Applications_not_picking_up_hinting_from_GNOME_settings">Applications not picking up hinting from GNOME settings</span></h3>
<p>For instance, under GNOME it sometimes happens that Firefox applies full hinting even when it's set to "none" in GNOME's settings, which results in sharp and widened fonts. In this case you would have to add hinting settings to your <code>fonts.conf</code> file:
</p>
<pre>&lt;?xml version='1.0'?&gt;
&lt;!DOCTYPE fontconfig SYSTEM 'fonts.dtd'&gt;	
&lt;fontconfig&gt;
 &lt;match target="font"&gt;
  &lt;edit mode="assign" name="hinting"&gt;
   &lt;bool&gt;false&lt;/bool&gt;
  &lt;/edit&gt;
 &lt;/match&gt;
&lt;/fontconfig&gt;
</pre>
<p>In this example, hinting is set to "grayscale".
</p>
<h3><span class="mw-headline" id="Incorrect_hinting_in_GTK_applications">Incorrect hinting in GTK applications</span></h3>
<p>In some desktop environments, especially outside <a href="../en/GNOME.html" title="GNOME">GNOME</a> and <a href="../en/KDE.html#Plasma" class="mw-redirect" title="Plasma">Plasma</a>, some GTK applications could not read font configuration properly. In order to solve this issue, install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=xsettingsd">xsettingsd</a></span> or <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/xsettingsd-git/">xsettingsd-git</a></span><sup><small>AUR</small></sup> and execute it at every system startup. See also <a href="../en/Xsettingsd.html" title="Xsettingsd">Xsettingsd</a> and <a rel="nofollow" class="external text" href="https://github.com/derat/xsettingsd/wiki/Settings">xsettingsd wiki</a> for more information. It can be configured with the following common configuration:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.xsettingsd</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Xft/Hinting 1
Xft/HintStyle "hintslight"
Xft/Antialias 1
Xft/RGBA "rgb"
</pre>
<p>If that is not working in some other applications, you could install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=xorg-xrdb">xorg-xrdb</a></span> and provide the following configuration: 
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.Xresources</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Xft.hinting: 1
Xft.hintstyle: hintslight
Xft.antialias: 1
Xft.rgba: rgb 
</pre>
<p>Then you can execute the script <code>xrdb -merge ~/.Xresources</code> at every system startup to apply the options. See also <a href="../en/X_resources.html" title="X resources">X resources</a> and <a href="#Applications_without_fontconfig_support">#Applications without fontconfig support</a>.
</p>
<h3><span class="mw-headline" id="Helvetica_font_problem_in_generated_PDFs">Helvetica font problem in generated PDFs</span></h3>
<p>If the following command
</p>
<pre>fc-match helvetica
</pre>
<p>produces
</p>
<pre>helvR12-ISO8859-1.pcf.gz: "Helvetica" "Regular"
</pre>
<p>then the bitmap font provided by <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=xorg-fonts-75dpi">xorg-fonts-75dpi</a></span> is likely to be embedded into PDFs generated by "Print to File" or "Export" in various applications. The bitmap font was probably installed as a consequence of installing the whole <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/groups/x86_64/xorg/">xorg</a></span> group (which is usually NOT recommended). To solve the pixelized font problem, you can uninstall the package. Install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=gsfonts">gsfonts</a></span> (Type 1) or <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=tex-gyre-fonts">tex-gyre-fonts</a></span> (OpenType) for corresponding free subsitute of Helvetica (and other PostScript/PDF base fonts).
</p>
<p>You may also experience similar problem when you open a PDF which requires Helvetica but does not have it embedded for viewing.
</p>
<h3><span class="mw-headline" id="FreeType_breaking_bitmap_fonts">FreeType breaking bitmap fonts</span></h3>
<p>Some users are reporting problems (<a rel="nofollow" class="external text" href="https://bugs.archlinux.org/task/52502">FS#52502</a>) with bitmap fonts having changed names after upgrading <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=freetype2">freetype2</a></span> to version 2.7.1, creating havok in terminal emulators and several other programs such as <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/dwm/">dwm</a></span><sup><small>AUR</small></sup> or <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=dmenu">dmenu</a></span> by falling back to another (different) font. This was caused by the changes to the PCF font family format, which is described in their <i>release notes</i> <a rel="nofollow" class="external autonumber" href="https://sourceforge.net/projects/freetype/files/freetype2/2.7.1/">[5]</a>. Users transitioning from the old format might want to create a <i>font alias</i> to remedy the problems, like the solution which is described in <a rel="nofollow" class="external autonumber" href="https://forum.manjaro.org/t/terminus-font-name-fix-after-freetype2-update-to-2-7-1-1/15530">[6]</a>, given here too:
</p>
<p>Assume we want to create an alias for <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=terminus-font">terminus-font</a></span>, which was renamed from <code>Terminus</code> to <code>xos4 Terminus</code> in the previously described <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=freetype2">freetype2</a></span> update:
</p>
<ul><li>Create a configuration file in <code>/etc/fonts/conf.avail/</code> for the <i>font alias</i>:</li></ul>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/fonts/conf.avail/33-TerminusPCFFont.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">&lt;?xml version="1.0"?&gt;
 &lt;!DOCTYPE fontconfig SYSTEM "fonts.dtd"&gt;
 &lt;fontconfig&gt;
     &lt;alias&gt;
         &lt;family&gt;Terminus&lt;/family&gt;
         &lt;prefer&gt;&lt;family&gt;xos4 Terminus&lt;/family&gt;&lt;/prefer&gt;
         &lt;default&gt;&lt;family&gt;fixed&lt;/family&gt;&lt;/default&gt;
     &lt;/alias&gt;
 &lt;/fontconfig&gt;
</pre>
<ul><li>Create a symbolic link towards it in the <code>/etc/fonts/conf.d</code> directory. In our example we would link as follows: <code>ln -s /etc/fonts/conf.avail/33-TerminusPCFFont.conf /etc/fonts/conf.d</code> to make the change permanent.</li></ul>
<p>Everything should now work as it did before the update, the <i>font alias</i> should not be in effect, but make sure to either reload <code>.Xresources</code> or restart the display server first so the affected programs can use the alias.
</p>
<h3><span class="mw-headline" id="Underscores_not_rendered_with_Dejavu_Monospace">Underscores not rendered with Dejavu Monospace</span></h3>
<p><a rel="nofollow" class="external text" href="https://gitlab.gnome.org/GNOME/pango/issues/392">Since Pango 1.44</a>, the underscore characters disappear with certain font sizes when using the DejaVu Sans Mono font. A workaround is to use Liberation Mono as the monospace font, see <a href="#Replace_or_set_default_fonts">#Replace or set default fonts</a>.
</p>
<h3><span class="mw-headline" id="Debugging_FreeType_fonts">Debugging FreeType fonts</span></h3>
<p><span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=freetype2-demos">freetype2-demos</a></span> provides tools for debugging FreeType font configuration. <code>ftview</code> is a GUI in which you can tweak font rendering settings with a live preview. For example:
</p>
<pre>$ ftview -e unic -d 1024x768x24 -r 96 10 /usr/share/fonts/noto/NotoSans-Regular.ttf
</pre>
<h2><span class="mw-headline" id="See_also">See also</span></h2>
<ul>
<li><a href="https://en.wikipedia.org/wiki/Fontconfig" class="extiw" title="wikipedia:Fontconfig">Wikipedia:Fontconfig</a></li>
<li>
<a rel="nofollow" class="external text" href="http://www.x.org/X11R6.8.2/doc/fonts.html">Fonts in X11R6.8.2</a> - Official Xorg font information</li>
<li><a rel="nofollow" class="external text" href="http://freetype.sourceforge.net/freetype2/">FreeType 2 overview</a></li>
<li><a rel="nofollow" class="external text" href="https://forums.gentoo.org/viewtopic-t-723341.html">Gentoo font-rendering thread</a></li>
<li><a rel="nofollow" class="external text" href="http://www.freetype.org/freetype2/docs/text-rendering-general.html">On slight hinting</a></li>
<li><a rel="nofollow" class="external text" href="https://www.freetype.org/freetype2/docs/reference/index.html#controlling-freetype-modules">FreeType 2 API Reference: Controlling FreeType Modules</a></li>
</ul>
</div>
</div>
<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../en/Category:Fonts.html" title="Category:Fonts">Fonts</a></li></ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden category: <ul><li><a href="../en/Category:Sections_flagged_with_Template:Remove.html" title="Category:Sections flagged with Template:Remove">Sections flagged with Template:Remove</a></li></ul>
</div>
</div>
	</div>
</div>

<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
		<li>Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Font_configuration&amp;oldid=639688">https://wiki.archlinux.org/index.php?title=Font_configuration&amp;oldid=639688</a>"</li>
		<li id="footer-info-lastmod"> This page was last edited on 25 October 2020, at 09:33.</li>
		<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
	<br>
</ul>
	<ul id="footer-places">
		<li id="footer-places-privacy"><a href="../en/ArchWiki:Privacy_policy.html" title="ArchWiki:Privacy policy">Privacy policy</a></li>
		<li id="footer-places-about"><a href="../en/ArchWiki:About.html" title="ArchWiki:About">About ArchWiki</a></li>
		<li id="footer-places-disclaimer"><a href="../en/ArchWiki:General_disclaimer.html" title="ArchWiki:General disclaimer">Disclaimers</a></li>
	</ul>
	<ul id="footer-icons" class="noprint">
		<li id="footer-copyrightico">
	</ul>
	<div style="clear: both;"></div>
</footer>



</body>
</html>
