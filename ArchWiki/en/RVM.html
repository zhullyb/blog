<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>RVM - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.35.0">
<meta name="robots" content="noindex,follow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="http://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-RVM rootpage-RVM skin-vector action-view skin-vector-legacy">
<div id="content" class="mw-body" role="main" style="margin: 0">
	<a id="top"></a>
	<div id="siteNotice" class="mw-body-content"></div>
	<div class="mw-indicators mw-body-content">
	</div>
	<h1 id="firstHeading" class="firstHeading" lang="en">RVM</h1>
	<div id="bodyContent" class="mw-body-content">
		<div id="siteSub" class="noprint">From ArchWiki</div>
		<div id="contentSub"></div>
		<div id="contentSub2"></div>
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="#searchInput">Jump to search</a>
		<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr">
<div class="warningbox">The printable version is no longer supported and may have rendering errors. Please update your browser bookmarks and please use the default browser print function instead.</div>
<div class="mw-parser-output">
<div class="archwiki-template-meta-related-articles-start">
<p>Related articles</p>
<ul>
<li><a href="../en/Rbenv.html" title="Rbenv">Rbenv</a></li>
<li><a href="../en/Ruby.html#Multiple_versions" class="mw-redirect" title="Chruby">Chruby</a></li>
<li><a href="../en/Ruby.html" title="Ruby">Ruby</a></li>
</ul>
</div>
<div class="noprint archwiki-template-message">
<p><a href="../File:Tango-edit-clear.png" class="image"><img alt="Tango-edit-clear.png" src="../File:Tango-edit-clear.png" decoding="async" width="48" height="48"></a><b>This article or section needs language, wiki syntax or style improvements. See <a href="../en/Help:Style.html" title="Help:Style">Help:Style</a> for reference.</b><a href="../File:Tango-edit-clear.png" class="image"><img alt="Tango-edit-clear.png" src="../File:Tango-edit-clear.png" decoding="async" width="48" height="48"></a></p>
<div>
<b>Reason:</b> Bad style. (Discuss in <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php/Talk:RVM">Talk:RVM#</a>)</div>
</div>
<p><a rel="nofollow" class="external text" href="http://rvm.io/">RVM</a> (Ruby Version Manager) is a command line tool which allows us to easily install, manage and work with multiple <a href="../en/Ruby.html" title="Ruby">Ruby</a> environments from interpreters to sets of gems.
</p>
<p>There exists a similar application that you may also want to consider: <a href="../en/Rbenv.html" title="Rbenv">rbenv</a>.
</p>
<div id="toc" class="toc" role="navigation" aria-labelledby="mw-toc-heading">
<input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none"><div class="toctitle" lang="en" dir="ltr">
<h2 id="mw-toc-heading">Contents</h2>
<span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span>
</div>
<ul>
<li class="toclevel-1 tocsection-1">
<a href="#Installing_RVM"><span class="tocnumber">1</span> <span class="toctext">Installing RVM</span></a>
<ul>
<li class="toclevel-2 tocsection-2"><a href="#Pre-requisites"><span class="tocnumber">1.1</span> <span class="toctext">Pre-requisites</span></a></li>
<li class="toclevel-2 tocsection-3"><a href="#Single-user_installation"><span class="tocnumber">1.2</span> <span class="toctext">Single-user installation</span></a></li>
<li class="toclevel-2 tocsection-4">
<a href="#Multi-user_installation"><span class="tocnumber">1.3</span> <span class="toctext">Multi-user installation</span></a>
<ul>
<li class="toclevel-3 tocsection-5"><a href="#A_cautionary_action"><span class="tocnumber">1.3.1</span> <span class="toctext">A cautionary action</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1 tocsection-6">
<a href="#Post_Installation"><span class="tocnumber">2</span> <span class="toctext">Post Installation</span></a>
<ul>
<li class="toclevel-2 tocsection-7"><a href="#Some_extras"><span class="tocnumber">2.1</span> <span class="toctext">Some extras</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-8">
<a href="#Using_RVM"><span class="tocnumber">3</span> <span class="toctext">Using RVM</span></a>
<ul>
<li class="toclevel-2 tocsection-9">
<a href="#Rubies"><span class="tocnumber">3.1</span> <span class="toctext">Rubies</span></a>
<ul>
<li class="toclevel-3 tocsection-10"><a href="#Installing_environments"><span class="tocnumber">3.1.1</span> <span class="toctext">Installing environments</span></a></li>
<li class="toclevel-3 tocsection-11"><a href="#Switching_environments"><span class="tocnumber">3.1.2</span> <span class="toctext">Switching environments</span></a></li>
<li class="toclevel-3 tocsection-12"><a href="#System_ruby"><span class="tocnumber">3.1.3</span> <span class="toctext">System ruby</span></a></li>
<li class="toclevel-3 tocsection-13"><a href="#Listing_environments"><span class="tocnumber">3.1.4</span> <span class="toctext">Listing environments</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-14">
<a href="#Gemsets"><span class="tocnumber">3.2</span> <span class="toctext">Gemsets</span></a>
<ul>
<li class="toclevel-3 tocsection-15"><a href="#Creating"><span class="tocnumber">3.2.1</span> <span class="toctext">Creating</span></a></li>
<li class="toclevel-3 tocsection-16">
<a href="#Using"><span class="tocnumber">3.2.2</span> <span class="toctext">Using</span></a>
<ul>
<li class="toclevel-4 tocsection-17"><a href="#Notes"><span class="tocnumber">3.2.2.1</span> <span class="toctext">Notes</span></a></li>
</ul>
</li>
<li class="toclevel-3 tocsection-18"><a href="#Gems"><span class="tocnumber">3.2.3</span> <span class="toctext">Gems</span></a></li>
<li class="toclevel-3 tocsection-19"><a href="#Listing"><span class="tocnumber">3.2.4</span> <span class="toctext">Listing</span></a></li>
<li class="toclevel-3 tocsection-20"><a href="#Deleting"><span class="tocnumber">3.2.5</span> <span class="toctext">Deleting</span></a></li>
<li class="toclevel-3 tocsection-21"><a href="#Emptying"><span class="tocnumber">3.2.6</span> <span class="toctext">Emptying</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-22">
<a href="#RVM"><span class="tocnumber">3.3</span> <span class="toctext">RVM</span></a>
<ul>
<li class="toclevel-3 tocsection-23"><a href="#Updating"><span class="tocnumber">3.3.1</span> <span class="toctext">Updating</span></a></li>
<li class="toclevel-3 tocsection-24"><a href="#Uninstalling"><span class="tocnumber">3.3.2</span> <span class="toctext">Uninstalling</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-25"><a href="#Further_Reading"><span class="tocnumber">3.4</span> <span class="toctext">Further Reading</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-26">
<a href="#Troubleshooting"><span class="tocnumber">4</span> <span class="toctext">Troubleshooting</span></a>
<ul>
<li class="toclevel-2 tocsection-27"><a href="#%22data_definition_has_no_type_or_storage_class%22"><span class="tocnumber">4.1</span> <span class="toctext">"data definition has no type or storage class"</span></a></li>
<li class="toclevel-2 tocsection-28"><a href="#Ruby_1.8.x_won't_compile_with_RVM"><span class="tocnumber">4.2</span> <span class="toctext">Ruby 1.8.x won't compile with RVM</span></a></li>
<li class="toclevel-2 tocsection-29"><a href="#Ruby_1.9.1_won't_compile_with_RVM"><span class="tocnumber">4.3</span> <span class="toctext">Ruby 1.9.1 won't compile with RVM</span></a></li>
<li class="toclevel-2 tocsection-30"><a href="#Ruby_2.2.2_won't_compile_with_RVM"><span class="tocnumber">4.4</span> <span class="toctext">Ruby 2.2.2 won't compile with RVM</span></a></li>
<li class="toclevel-2 tocsection-31"><a href="#Ruby_2.3.1_won't_compile_with_RVM"><span class="tocnumber">4.5</span> <span class="toctext">Ruby 2.3.1 won't compile with RVM</span></a></li>
<li class="toclevel-2 tocsection-32"><a href="#RVM_uses_wrong_OpenSSL_version"><span class="tocnumber">4.6</span> <span class="toctext">RVM uses wrong OpenSSL version</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-33"><a href="#See_Also"><span class="tocnumber">5</span> <span class="toctext">See Also</span></a></li>
</ul>
</div>

<h2><span class="mw-headline" id="Installing_RVM">Installing RVM</span></h2>
<p>The install process is very easy, and is the same for any distro, including Arch Linux. You have two choices, one system-wide, another as a user. The first is for production servers, or if you are alone on your machine, you'll need root privileges. The second is recommended for multiple users on the same machine (like a development test box). If you do not know which to choose then start with a single user installation.
</p>
<p>The upstream instructions for installing RVM should just work. The install script is aware enough to tell you what packages you need to install on Arch Linux to make different rubies work. This usually involves gcc and some other stuff needed to compile ruby.
</p>
<p>As an observation, <b>installing RVM with gem is not recommended anymore</b>. This article uses the <a rel="nofollow" class="external text" href="http://rvm.io/rvm/install/">recommended documentation</a> with minor tweaks to make it work on Arch Linux.
</p>
<h3><span class="mw-headline" id="Pre-requisites">Pre-requisites</span></h3>
<p>Before starting, you will need to <a href="../en/Help:Reading.html#Installation_of_packages" class="mw-redirect" title="Install">install</a> the following packages <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/groups/x86_64/base-devel/">base-devel</a></span>, <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=tar">tar</a></span>, <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=gzip">gzip</a></span>, <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=diffutils">diffutils</a></span>, <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=git">git</a></span> and <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=curl">curl</a></span> if not installed yet.
</p>
<h3><span class="mw-headline" id="Single-user_installation">Single-user installation</span></h3>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> This will install to your home directory only (~/.rvm), and won't touch the standard Arch ruby package, which is in /usr.</div>
<p>For most purposes, the recommended installation method is single-user, which is a self-contained RVM installation in a user's home directory.
</p>
<p>Use the script that rvm docs recommends to install. Make sure to run this script as the user for whom you want RVM installed (i.e. your normal user that you use for development).
</p>
<p>To check the script before running it, do:
</p>
<pre>$ curl -L get.rvm.io &gt; rvm-install
</pre>
<p>Inspect the file, and then run it with:
</p>
<pre>$ bash &lt; ./rvm-install
</pre>
<p>Now, close out your current shell or terminal session and open a new one to set up your PATH and the rvm function. You may attempt reloading your ~/.bash_profile with the following command:
</p>
<pre>$ source ~/.bash_profile
</pre>
<p>However, closing out your current shell or terminal and opening a new one is the preferred way for initial installations.)
</p>
<h3><span class="mw-headline" id="Multi-user_installation">Multi-user installation</span></h3>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> This will install to /usr/local/rvm, and won't touch the standard Arch ruby package, which is in /usr. </div>
<p>System-wide installation is a similar procedure to the single user install. However, instead run the install script with sudo. <b>Do not run the installer directly as root!</b>
</p>
<pre>$ sudo bash -s stable
</pre>
<p>(to install a specific version replace <i>stable</i> with, for example, <i>-- --version 1.13.0</i>)
</p>
<p>After the script has finished, add yourself and your users to the 'rvm' group. (The installer does not auto-add any users to the rvm group. Admins must do this.) For each one, repeat:
</p>
<pre># usermod -a -G rvm &lt;user&gt;
</pre>
<p><b>Group memberships are only evaluated at login time</b>. Log the users out, then back in. You too: close out your current shell or terminal session and open a new one. (You may attempt reloading your ~/.bash_profile with the following command:
</p>
<pre>$ source ~/.bash_profile
</pre>
<p>However, closing out your current shell or terminal and opening a new one is the preferred way for initial installations. Alternatively, you can use the "newgrp rvm" command and check with "id" to see whether the shell has picked up the new group membership of your user)
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Remember to change the line [ [ -s $HOME/.rvm/scripts/rvm ] ] &amp;&amp; source $HOME/.rvm/scripts/rvm to the system-wide location changing $HOME to /usr/local/</div>
<p>RVM will be automatically configured for every user on the system (in opposite to the single-user installation); this is accomplished by loading /etc/profile.d/rvm.sh on login. Arch Linux defaults to parsing /etc/profile which contains the logic to load all files residing in the /etc/profile.d/ directory.
</p>
<p>Before installing gems with multi-user rvm, make sure that /etc/gemrc does not have the line "gem: --user-install". If it does you need to comment it out otherwise the gems will install to the wrong place.
</p>
<p><b>You only use the sudo command during the install process</b>. In multi-user configurations, any operations which require sudo access must use the <i>rvmsudo</i> command which preserves the RVM environment and passes this on to sudo. There are very few cases where rvmsudo is required once the core install is completed, except for when updating RVM itself. There is never a reason to use sudo post-install. rvmsudo should only be needed for updating with
</p>
<pre>$ rvmsudo rvm get head
</pre>
<h5><span class="mw-headline" id="A_cautionary_action">A cautionary action</span></h5>
<p>In order to prevent the installation breakage by this cause, you may add this configuration to your <code>/etc/sudoers</code> file with command: <code>su -c visudo</code> (run as the root user)
</p>
<pre>## Cmnd alias specification
Cmnd_Alias RVM = /usr/local/rvm/rubies/<i>ruby_interpreter</i>/bin/gem, \
                 /usr/local/rvm/rubies/<i>another_ruby_interpreter</i>/bin/gem, \
                 /usr/local/rvm/bin/rvm

## User privilege specification
root ALL=(ALL) ALL

## Uncomment to allow members of group wheel to execute any command
%wheel ALL=(ALL) ALL, !RVM</pre>
<p>Where <code><i>ruby_interpreter</i></code> would be —for example— ruby-1.9.2-p290.
</p>
<h2><span class="mw-headline" id="Post_Installation">Post Installation</span></h2>
<p>After the installation, check everything worked with this command:
</p>
<pre>$ type rvm | head -n1
</pre>
<p>The response should be:
</p>
<pre>$ rvm is a function
</pre>
<p>If you receive rvm: not found, you may need to source your ~/.bash_profile (or wherever you put the line above):
</p>
<pre>$ . ~/.bash_profile
</pre>
<p>Check if the rvm function is working:
</p>
<pre>$ rvm notes
</pre>
<p>Finally, see if there are any dependency requirements for your installation by running:
</p>
<pre>$ rvm requirements
</pre>
<p>(Follow the returned instructions if any.)
</p>
<p><b>Very important</b>: whenever you upgrade RVM in the future, you should always run <i>rvm notes</i> and <i>rvm requirements</i> as this is usually where you will find details on any major changes and/or additional requirements <b>to ensure your installation stays working</b>.
</p>
<h3><span class="mw-headline" id="Some_extras">Some extras</span></h3>
<p>You may put in your ~/.bashrc the following lines to get some useful features:
</p>
<pre># Display the current RVM ruby selection
PS1="\$(/usr/local/rvm/bin/rvm-prompt) $PS1"

# RVM bash completion
[[ -r /usr/local/rvm/scripts/completion ]] &amp;&amp; . /usr/local/rvm/scripts/completion</pre>
<p>Or if you're running as a single user:
</p>
<pre># RVM bash completion
[[ -r "$HOME/.rvm/scripts/completion" ]] &amp;&amp; source "$HOME/.rvm/scripts/completion"</pre>
<h2><span class="mw-headline" id="Using_RVM">Using RVM</span></h2>
<p>The RVM documentation is <i>quite</i> comprehensive and explanatory. However, here are some RVM usage examples to get you started.
</p>
<h3><span class="mw-headline" id="Rubies">Rubies</span></h3>
<h4><span class="mw-headline" id="Installing_environments">Installing environments</span></h4>
<p>To see what Ruby environments are available to install, run:
</p>
<pre>$ rvm list known
</pre>
<p>To install one, run:
</p>
<pre>$ rvm install &lt;ruby_version&gt;
</pre>
<p>For example, to install Ruby 1.9.2 one would run the following command:
</p>
<pre>$ rvm install 1.9.2
</pre>
<p>This should download, configure and install Ruby 1.9.2 in the place you installed RVM. For example, if you did a single user install, it will be in ~/.rvm/rubies/1.9.2.
</p>
<p>You can define a default ruby interpreter by doing:
</p>
<pre>$ rvm use &lt;ruby_version&gt; --default
</pre>
<p>If not, the default environment will be the system ruby in /usr —if you have installed one using pacman— or none.
</p>
<h4><span class="mw-headline" id="Switching_environments">Switching environments</span></h4>
<p>To switch from one environment to another simply run:
</p>
<pre>$ rvm use &lt;ruby_version&gt;
</pre>
<p>For example to switch to Ruby 1.8.7 one would run the following command:
</p>
<pre>$ rvm 1.8.7
</pre>
<p>(As you see, the flag <i>use</i> is not really necessary.)
</p>
<p>You should get a message telling you the switch worked. It can be confirmed by running:
</p>
<pre>$ ruby --version
</pre>
<p>Note that this environment will only be used in the current shell. You can open another shell and select a different environment for that one in parallel.
</p>
<p>In case you have set a default interpreter as explained above, you can do the switch with:
</p>
<pre>$ rvm default
</pre>
<h4><span class="mw-headline" id="System_ruby">System ruby</span></h4>
<p>If you wish the ruby interpreter that is outside RVM (i.e. the one installed in /usr by the standard Arch Linux package), you can switch to it using:
</p>
<pre>$ rvm system
</pre>
<h4><span class="mw-headline" id="Listing_environments">Listing environments</span></h4>
<p>To see all installed Ruby environments, run the following command:
</p>
<pre>$ rvm list
</pre>
<p>If you've installed a few rubies, this might generate a list like so:
</p>
<pre>rvm Rubies
=&gt; ruby-1.8.7-p249 [ x86_64 ]
   ruby-1.9.2-head [ x86_64 ]
System Ruby
   system [ x86_64 ]
</pre>
<p>The ASCII arrow indicates which environment is currently enabled. In this case, it is Ruby 1.8.7. This could be confirmed by running:
</p>
<pre>$ ruby --version
ruby 1.8.7 (2010-01-10 patchlevel 249) [x86_64-linux]
</pre>
<h3><span class="mw-headline" id="Gemsets">Gemsets</span></h3>
<p>RVM has a valued feature called gemsets which enables you to store different sets of gems in compartmentalized independent ruby setups. This means that ruby, gems and irb are all separate and self-contained from the system and each other.
</p>
<h4><span class="mw-headline" id="Creating">Creating</span></h4>
<p>Gemsets must be created before being used. To create a new gemset for the current ruby, do this:
</p>
<pre>$ rvm use &lt;ruby_version&gt;
$ rvm gemset create &lt;gemset_name&gt;
</pre>
<p>Alternatively, if you prefer the shorthand syntax offered by rvm use, employ the --create option like so:
</p>
<pre>$ rvm use &lt;ruby_version&gt;@&lt;gemset_name&gt; --create
</pre>
<p>You can also specify a default gemset for a given ruby interpreter, by doing:
</p>
<pre>$ rvm use &lt;ruby_version&gt;@&lt;gemset_name&gt; --default
</pre>
<h4><span class="mw-headline" id="Using">Using</span></h4>
<p>Tip: remove gems that reside in system prior to the RVM installation with:
</p>
<pre>$ gem  list --local --no-version | awk '{print "gem uninstall " $1}' | bash
</pre>
<p>and check what's left:
</p>
<pre>$ gem list --local
</pre>
<p>To use a gemset:
</p>
<pre>$ rvm gemset use &lt;gemset_name&gt;
</pre>
<p>You can switch to a gemset as you start to use a ruby, by appending @&lt;gemset_name&gt; to the end of the ruby selector string:
</p>
<pre>$ rvm use &lt;ruby_version&gt;@&lt;gemset_name&gt;
</pre>
<h5><span class="mw-headline" id="Notes">Notes</span></h5>
<p>When you install a ruby environment, it comes with two gemsets out of the box, their names are <i>default</i> and <i>global</i>. You will usually find in the latter some pre-installed common gems, while the former always starts empty. 
</p>
<p>A little bit about where the default and global gemsets differ: When you do not use a gemset at all, you get the gems in the default set. If you use a specific gemset (say @testing), it will inherit gems from that ruby's @global. The global gemset is to allow you to share gems to all your gemsets.
</p>
<h4><span class="mw-headline" id="Gems">Gems</span></h4>
<p>Within a gemset, you can utilize usual RubyGems commands
</p>
<pre>$ gem install &lt;gem&gt;
</pre>
<p>to add,
</p>
<pre>$ gem uninstall &lt;gem&gt;
</pre>
<p>to remove gems, and
</p>
<pre>$ gem list
</pre>
<p>to view installed ones.
</p>
<p>If you are deploying to a server, or you do not want to wait around for rdoc and ri to install for each gem, you can disable them for gem installs and updates. Just add these two lines to your ~/.gemrc or /etc/gemrc:
</p>
<pre>install: --no-document
update: --no-document
</pre>
<h4><span class="mw-headline" id="Listing">Listing</span></h4>
<p>To see the name of the current gemset:
</p>
<pre>$ rvm gemset name
</pre>
<p>To list all named gemsets for the current ruby interpreter:
</p>
<pre>$ rvm gemset list
</pre>
<p>To list all named gemsets for all interpreters:
</p>
<pre>$ rvm gemset list_all
</pre>
<h4><span class="mw-headline" id="Deleting">Deleting</span></h4>
<p>This action removes the current gemset:
</p>
<pre>$ rvm gemset use &lt;gemset_name&gt;
$ rvm gemset delete &lt;gemset_name&gt;
</pre>
<p>By default, rvm deletes gemsets from the currently selected Ruby interpreter. To delete a gemset from a different interpreter, say 1.9.2, run your command this way:
</p>
<pre>$ rvm 1.9.2 do gemset delete &lt;gemset_name&gt;
</pre>
<h4><span class="mw-headline" id="Emptying">Emptying</span></h4>
<p>This action removes all gems installed in the gemset:
</p>
<pre>$ rvm gemset use &lt;gemset_name&gt;
$ rvm gemset empty &lt;gemset_name&gt;
</pre>
<h3><span class="mw-headline" id="RVM">RVM</span></h3>
<h4><span class="mw-headline" id="Updating">Updating</span></h4>
<p>To upgrade to the most recent release version:
</p>
<pre>$ rvm get latest
</pre>
<p>Upgrading to the latest repository source version (the most bugfixes):
</p>
<pre>$ rvm get head
</pre>
<p>Remember to use rvmsudo for multi-user setups. Update often!
</p>
<h4><span class="mw-headline" id="Uninstalling">Uninstalling</span></h4>
<p>Executing
</p>
<pre>$ rvm implode
</pre>
<p>is going to wipe out the RVM installation —cleanly—.
</p>
<h3><span class="mw-headline" id="Further_Reading">Further Reading</span></h3>
<p>This is just a simple introduction to switching ruby versions with RVM and managing different set of gems in different environments. There is lots more that you can do with it! For more information, consult the very comprehensive RVM documentation. <a rel="nofollow" class="external text" href="https://rvm.beginrescueend.com/rvm/basics/">This page</a> is a good place to start.
</p>
<h2><span class="mw-headline" id="Troubleshooting">Troubleshooting</span></h2>
<p>Unfortunately, some ruby patchlevels just do not play nicely with Arch Linux, and many times RVM does not choose the latest patchlevel version to install. So, you'll need to manually check on the <a rel="nofollow" class="external text" href="http://www.ruby-lang.org/en/news/">ruby website</a>, and force RVM to install it.
</p>
<h4>
<span id=".22data_definition_has_no_type_or_storage_class.22"></span><span class="mw-headline" id='"data_definition_has_no_type_or_storage_class"'>"data definition has no type or storage class"</span>
</h4>
<p>This appears to be specific to 1.8.7, but if you get this error while compiling the following steps will fix your problem:
</p>
<pre>$ cd src/ruby-1.8.7-p334/ext/dl
$ rm callback.func
$ touch callback.func
$ ruby mkcallback.rb &gt;&gt; callback.func
$ rm cbtable.func
$ touch cbtable.func
$ ruby mkcbtable.rb &gt;&gt; cbtable.func
</pre>
<p>Naturally, substitute the actual build path to your source, which will be something like ~/.rvm/src/.
</p>
<h4>
<span id="Ruby_1.8.x_won.27t_compile_with_RVM"></span><span class="mw-headline" id="Ruby_1.8.x_won't_compile_with_RVM">Ruby 1.8.x won't compile with RVM</span>
</h4>
<p>This is a known issue on Arch Linux, and is caused by a problem with openssl. Arch uses openssl 1.0, lower patchlevels of 1.8.7 assumes 0.9. 
</p>
<p>Certain patch levels may not build (p352 for example), p299 should work fine and can be installed using the following command:
</p>
<pre>$ rvm remove 1.8.7
$ rvm install 1.8.7-p299
</pre>
<p>Another approach is to install local openssl via RVM:
</p>
<pre>$ rvm pkg install openssl
$ rvm remove 1.8.7
$ rvm install 1.8.7 -C --with-openssl-dir=$HOME/.rvm/usr
</pre>
<p>It may be necessary to patch 1.8.7:
</p>
<pre>$ wget <a rel="nofollow" class="external free" href="https://gist.githubusercontent.com/waseem/0e8607e443bcd0b3e60cfad56cd9999b/raw/2083ae1cc7643174bb291fce8c25b1b643d91af7/ssl.patch">https://gist.githubusercontent.com/waseem/0e8607e443bcd0b3e60cfad56cd9999b/raw/2083ae1cc7643174bb291fce8c25b1b643d91af7/ssl.patch</a>
$ rvm remove 1.8.7
$ rvm install --patch ./ssl.patch ruby-1.8.7-p352
</pre>
<h4>
<span id="Ruby_1.9.1_won.27t_compile_with_RVM"></span><span class="mw-headline" id="Ruby_1.9.1_won't_compile_with_RVM">Ruby 1.9.1 won't compile with RVM</span>
</h4>
<p>Like with 1.8.x, earlier patchlevels do not like the OpenSSL 1.0. Then you can use the very same solution above, by installing openssl locally on RVM.
</p>
<pre>$ rvm pkg install openssl
$ rvm remove 1.9.1
$ rvm install 1.9.1 -C --with-openssl-dir=$HOME/.rvm/usr
</pre>
<p>The patchlevels &gt;p378 have a problem with gem paths, when $GEM_HOME is set. The problem is known and fixed in 1.9.2. (<a rel="nofollow" class="external free" href="http://redmine.ruby-lang.org/issues/3584">http://redmine.ruby-lang.org/issues/3584</a>). If you really need 1.9.1 please use p378.
</p>
<pre>$ rvm install 1.9.1-p378 -C --with-openssl-dir=$HOME/.rvm/usr
</pre>
<h4>
<span id="Ruby_2.2.2_won.27t_compile_with_RVM"></span><span class="mw-headline" id="Ruby_2.2.2_won't_compile_with_RVM">Ruby 2.2.2 won't compile with RVM</span>
</h4>
<p>Like with 1.8.x and 1.9.1, earlier patchlevels do not like the OpenSSL 1.0. Then you can use the very same solution above, by installing openssl locally on RVM.
</p>
<pre>$ rvm pkg install openssl
$ rvm remove 2.2.2
$ rvm install 2.2.2 -C --with-openssl-dir=$HOME/.rvm/usr
</pre>
<h4>
<span id="Ruby_2.3.1_won.27t_compile_with_RVM"></span><span class="mw-headline" id="Ruby_2.3.1_won't_compile_with_RVM">Ruby 2.3.1 won't compile with RVM</span>
</h4>
<p>Like with 1.8.x, 1.9.1 and 2.2.2, earlier patchlevels do not like the OpenSSL 1.0. Then you can use the very same solution above, by installing openssl locally on RVM.
</p>
<pre>$ rvm pkg install openssl
$ rvm remove 2.3.1
$ rvm install 2.3.1 -C --with-openssl-dir=$HOME/.rvm/usr
</pre>
<h4><span class="mw-headline" id="RVM_uses_wrong_OpenSSL_version">RVM uses wrong OpenSSL version</span></h4>
<p>Ruby versions older than 2.4 require OpenSSL 1.0 but RVM will try to build them with OpenSSL 1.1. You know this is the case if you find this line in the ~/.rvm/log/XYZ/make.log file:
</p>
<pre>/usr/include/openssl/asn1_mac.h:10:2: error: #error "This file is obsolete; please update your software."
</pre>
<p>First <a href="../en/Help:Reading.html#Installation_of_packages" class="mw-redirect" title="Install">install</a> <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=openssl-1.0">openssl-1.0</a></span> if not already installed.
</p>
<p>You can point it to the correct version like this:
</p>
<pre>$ rvm remove &lt;ruby-version&gt;
$ PKG_CONFIG_PATH=/usr/lib/openssl-1.0/pkgconfig:/usr/lib/pkgconfig rvm install &lt;ruby-version&gt;
</pre>
<p>if the above doesn't work, try changing the last command to:
</p>
<pre>PKG_CONFIG_PATH=/usr/lib/openssl-1.0/pkgconfig \
CFLAGS+=" -I/usr/include/openssl-1.0" \
LDFLAGS+=" -L/usr/lib/openssl-1.0 -lssl" \
rvm install &lt;ruby-version&gt;
</pre>
<p>Alternatively you could also use RVM to install OpenSSL as above:
</p>
<pre>$ rvm pkg install openssl
$ rvm remove 2.3.4
$ rvm install 2.3.4 -C --with-openssl-dir=$HOME/.rvm/usr
</pre>
<h2><span class="mw-headline" id="See_Also">See Also</span></h2>
<ul>
<li>
<a rel="nofollow" class="external text" href="http://rvm.io/">RVM project website</a>.</li>
<li>
<a href="../en/Ruby_on_Rails.html#The_Perfect_Rails_Setup" class="mw-redirect" title="RubyOnRails">The Perfect Rails Setup</a>.</li>
</ul>
</div>
</div>
<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../en/Category:Development.html" title="Category:Development">Development</a></li></ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden category: <ul><li><a href="../en/Category:Pages_or_sections_flagged_with_Template:Style.html" title="Category:Pages or sections flagged with Template:Style">Pages or sections flagged with Template:Style</a></li></ul>
</div>
</div>
	</div>
</div>

<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
		<li>Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=RVM&amp;oldid=633572">https://wiki.archlinux.org/index.php?title=RVM&amp;oldid=633572</a>"</li>
		<li id="footer-info-lastmod"> This page was last edited on 27 August 2020, at 09:56.</li>
		<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
	<br>
</ul>
	<ul id="footer-places">
		<li id="footer-places-privacy"><a href="../en/ArchWiki:Privacy_policy.html" title="ArchWiki:Privacy policy">Privacy policy</a></li>
		<li id="footer-places-about"><a href="../en/ArchWiki:About.html" title="ArchWiki:About">About ArchWiki</a></li>
		<li id="footer-places-disclaimer"><a href="../en/ArchWiki:General_disclaimer.html" title="ArchWiki:General disclaimer">Disclaimers</a></li>
	</ul>
	<ul id="footer-icons" class="noprint">
		<li id="footer-copyrightico">
	</ul>
	<div style="clear: both;"></div>
</footer>



</body>
</html>
