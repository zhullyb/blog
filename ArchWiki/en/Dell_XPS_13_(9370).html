<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>Dell XPS 13 (9370) - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.35.0">
<meta name="robots" content="noindex,follow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="http://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Dell_XPS_13_9370 rootpage-Dell_XPS_13_9370 skin-vector action-view skin-vector-legacy">
<div id="content" class="mw-body" role="main" style="margin: 0">
	<a id="top"></a>
	<div id="siteNotice" class="mw-body-content"></div>
	<div class="mw-indicators mw-body-content">
	</div>
	<h1 id="firstHeading" class="firstHeading" lang="en">Dell XPS 13 (9370)</h1>
	<div id="bodyContent" class="mw-body-content">
		<div id="siteSub" class="noprint">From ArchWiki</div>
		<div id="contentSub"></div>
		<div id="contentSub2"></div>
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="#searchInput">Jump to search</a>
		<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr">
<div class="warningbox">The printable version is no longer supported and may have rendering errors. Please update your browser bookmarks and please use the default browser print function instead.</div>
<div class="mw-parser-output">
<table class="wikitable" style="float: right;">
<tbody>
<tr>
<td><b>Device</b></td>
<td><b>Status</b></td>
<td>
<b>Modules</b>
</td>
</tr>
<tr>
<td>Video</td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Working</td>
<td>i915
</td>
</tr>
<tr>
<td>Wireless</td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Working</td>
<td>ath10k
</td>
</tr>
<tr>
<td>Bluetooth</td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Working</td>
<td>btusb
</td>
</tr>
<tr>
<td>Audio</td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Working</td>
<td>snd_hda_intel
</td>
</tr>
<tr>
<td>Touchpad</td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Working</td>
<td>hid_multitouch
</td>
</tr>
<tr>
<td>Webcam</td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Working ¹</td>
<td>uvcvideo
</td>
</tr>
<tr>
<td>Infrared Camera Authentication</td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Working</td>
<td>?
</td>
</tr>
<tr>
<td>USB-C / Thunderbolt 3</td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Working</td>
<td>intel_wmi_thunderbolt
</td>
</tr>
<tr>
<td>Wireless switch</td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Working</td>
<td>intel_hid
</td>
</tr>
<tr>
<td>Function/Multimedia Keys</td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Working</td>
<td>?
</td>
</tr>
<tr>
<td>Fingerprint sensor</td>
<td data-sort-value="1" style="background: #faa; color: inherit; vertical-align: middle; text-align: center;">Not working</td>
<td>?
</td>
</tr>
</tbody>
</table>
<div class="archwiki-template-meta-related-articles-start">
<p>Related articles</p>
<ul>
<li><a href="../en/Dell_XPS_13_(9333).html" title="Dell XPS 13 (9333)">Dell XPS 13 (9333)</a></li>
<li><a href="../en/Dell_XPS_13_(9343).html" title="Dell XPS 13 (9343)">Dell XPS 13 (9343)</a></li>
<li><a href="../en/Dell_XPS_13_(9350).html" title="Dell XPS 13 (9350)">Dell XPS 13 (9350)</a></li>
<li><a href="../en/Dell_XPS_13_(9360).html" title="Dell XPS 13 (9360)">Dell XPS 13 (9360)</a></li>
<li><a href="../en/Dell_XPS_13_2-in-1_(9365).html" title="Dell XPS 13 2-in-1 (9365)">Dell XPS 13 2-in-1 (9365)</a></li>
</ul>
</div>
<p>The Dell XPS 13 Early 2018 (9370) is the fifth-generation model of the XPS 13 line. The laptop was released in January 2018 in both a standard edition with Windows installed as well as a Developer Edition with Ubuntu 16.04 installed, featuring kernel 4.4 as of now. There are only minor hardware differences between them, mostly in regards to the mainboard microchip manufacturers. <a rel="nofollow" class="external text" href="https://www.dell.com/community/Linux-Developer-Systems/XPS-13-Fingerprint-reader-Linux-support/m-p/5090726/highlight/true#M7295">According to Dell</a> the fingerprint reader is not present on the Linux variant. Just like the older versions (<a href="../en/Dell_XPS_13_(9333).html" title="Dell XPS 13 (9333)">9333</a>, <a href="../en/Dell_XPS_13_(9343).html" title="Dell XPS 13 (9343)">9343</a>, <a href="../en/Dell_XPS_13_(9350).html" title="Dell XPS 13 (9350)">9350</a>, and <a href="../en/Dell_XPS_13_(9360).html" title="Dell XPS 13 (9360)">9360</a>) it is available in different hardware configurations as well. These fifth gen models includes Intel's eighth generation Kaby Lake R processors, and can be configured with up to 16GB LPDDR3 2133 MHz RAM and a 1TB PCI SSD. Unlike previous iterations, the Wi-Fi/BT module is soldered and cannot be replaced, only the Killer 1435 (QCA6174A) is available for consumers, enterprise versions with the Intel 8265 modem also exist.
</p>
<p>The installation process for Arch on the XPS 13 does not differ from any other PC. Although you might need to consider upgrading the SSD Firmware first if you have a working Windows installation (see section <a href="#Storage">#Storage</a>). For installation help, please see the <a href="../en/Installation_guide.html" title="Installation guide">Installation guide</a> and <a href="../en/Unified_Extensible_Firmware_Interface.html" class="mw-redirect" title="UEFI">UEFI</a>. This page covers the current status of hardware support on Arch, as well as post-installation recommendations.
</p>
<p>¹ The webcam works with kernel 4.17.4 or later. For earlier kernels this applies: Some users have experienced webcam firmware issues with recent models and there are <a rel="nofollow" class="external text" href="https://www.dell.com/community/Linux-General/Dell-xps-13-9370-Webcam-support/td-p/6032049">many reports of non-functional webcams on new laptops</a>. User reports indicate Dell support is responsive to replacing screens to install a webcam that uses linux-compatible UVC 1.0 rather than 1.5 firmware drivers.
</p>
<div id="toc" class="toc" role="navigation" aria-labelledby="mw-toc-heading">
<input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none"><div class="toctitle" lang="en" dir="ltr">
<h2 id="mw-toc-heading">Contents</h2>
<span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span>
</div>
<ul>
<li class="toclevel-1 tocsection-1">
<a href="#UEFI"><span class="tocnumber">1</span> <span class="toctext">UEFI</span></a>
<ul>
<li class="toclevel-2 tocsection-2"><a href="#Firmware/BIOS_Updates"><span class="tocnumber">1.1</span> <span class="toctext">Firmware/BIOS Updates</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-3">
<a href="#Display"><span class="tocnumber">2</span> <span class="toctext">Display</span></a>
<ul>
<li class="toclevel-2 tocsection-4"><a href="#Content_Adaptive_Brightness_Control"><span class="tocnumber">2.1</span> <span class="toctext">Content Adaptive Brightness Control</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-5">
<a href="#Storage"><span class="tocnumber">3</span> <span class="toctext">Storage</span></a>
<ul>
<li class="toclevel-2 tocsection-6"><a href="#Firmware"><span class="tocnumber">3.1</span> <span class="toctext">Firmware</span></a></li>
<li class="toclevel-2 tocsection-7"><a href="#Performance"><span class="tocnumber">3.2</span> <span class="toctext">Performance</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-8">
<a href="#Peripherals"><span class="tocnumber">4</span> <span class="toctext">Peripherals</span></a>
<ul>
<li class="toclevel-2 tocsection-9"><a href="#Keyboard"><span class="tocnumber">4.1</span> <span class="toctext">Keyboard</span></a></li>
<li class="toclevel-2 tocsection-10">
<a href="#Touchpad"><span class="tocnumber">4.2</span> <span class="toctext">Touchpad</span></a>
<ul>
<li class="toclevel-3 tocsection-11"><a href="#Cursor_Jump"><span class="tocnumber">4.2.1</span> <span class="toctext">Cursor Jump</span></a></li>
<li class="toclevel-3 tocsection-12"><a href="#Sensitivity"><span class="tocnumber">4.2.2</span> <span class="toctext">Sensitivity</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-13"><a href="#Webcam"><span class="tocnumber">4.3</span> <span class="toctext">Webcam</span></a></li>
<li class="toclevel-2 tocsection-14"><a href="#Infrared_camera"><span class="tocnumber">4.4</span> <span class="toctext">Infrared camera</span></a></li>
<li class="toclevel-2 tocsection-15"><a href="#Fingerprint_reader"><span class="tocnumber">4.5</span> <span class="toctext">Fingerprint reader</span></a></li>
<li class="toclevel-2 tocsection-16"><a href="#Audio"><span class="tocnumber">4.6</span> <span class="toctext">Audio</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-17">
<a href="#Connectivity"><span class="tocnumber">5</span> <span class="toctext">Connectivity</span></a>
<ul>
<li class="toclevel-2 tocsection-18"><a href="#Bluetooth"><span class="tocnumber">5.1</span> <span class="toctext">Bluetooth</span></a></li>
<li class="toclevel-2 tocsection-19"><a href="#Wifi"><span class="tocnumber">5.2</span> <span class="toctext">Wifi</span></a></li>
<li class="toclevel-2 tocsection-20"><a href="#USB_Type-C_ports"><span class="tocnumber">5.3</span> <span class="toctext">USB Type-C ports</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-21">
<a href="#Power"><span class="tocnumber">6</span> <span class="toctext">Power</span></a>
<ul>
<li class="toclevel-2 tocsection-22"><a href="#Power_Saving"><span class="tocnumber">6.1</span> <span class="toctext">Power Saving</span></a></li>
<li class="toclevel-2 tocsection-23"><a href="#Sleep"><span class="tocnumber">6.2</span> <span class="toctext">Sleep</span></a></li>
<li class="toclevel-2 tocsection-24"><a href="#Thermal_Throttling"><span class="tocnumber">6.3</span> <span class="toctext">Thermal Throttling</span></a></li>
<li class="toclevel-2 tocsection-25"><a href="#Thermal_Modes_/_Fan_profiles"><span class="tocnumber">6.4</span> <span class="toctext">Thermal Modes / Fan profiles</span></a></li>
</ul>
</li>
</ul>
</div>

<h2><span class="mw-headline" id="UEFI">UEFI</span></h2>
<p>Before installing it is necessary to modify some UEFI Settings. They can be accessed by pressing the F2 key repeatedly when booting.
</p>
<ul>
<li>Change the SATA Mode from the default "RAID" to "AHCI". This will allow Linux to detect the NVME SSD. If dual booting with an existing Windows installation, Windows will not boot after the change but <a rel="nofollow" class="external text" href="https://triplescomputers.com/blog/uncategorized/solution-switch-windows-10-from-raidide-to-ahci-operation/">this can be fixed without a reinstallation</a>.</li>
<li>Disable secure boot to allow Linux to boot.</li>
<li>To boot from a USB device attached via the USB-C to USB-A adapter included in the box, you'll need to enable Thunderbolt boot. Once enabled, F12 on boot will enter the boot menu.</li>
</ul>
<p>It is also possible to use the right USB-C port directly without any UEFI adjustment.
</p>
<p>Booting and installing from a microSD card is also possible, as long as SD Card and SD Card Boot are both enabled in the UEFI setup.
</p>
<p><span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/Dell-Command-Configure/">Dell-Command-Configure</a></span><sup><small>AUR</small></sup> can be used to modify settings without having to reboot to enter UEFI menu.  For example, to configure the battery to stop charging at 75% and only begin charging again when depleted to 60%: 
</p>
<pre> cctk --PrimaryBattChargeCfg=Custom:60-75
</pre>
<h3>
<span id="Firmware.2FBIOS_Updates"></span><span class="mw-headline" id="Firmware/BIOS_Updates">Firmware/BIOS Updates</span>
</h3>
<p>Dell provides firmware updates via Linux Vendor Firmware Service (LVFS). Refer to <a href="../en/Flashing_BIOS_from_Linux.html#fwupd" title="Flashing BIOS from Linux">Flashing BIOS from Linux#fwupd</a> for additional information. A package is readily available at <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=fwupd">fwupd</a></span>. Updates are provided for the Thunderbolt controller as well. <a rel="nofollow" class="external text" href="https://github.com/dell/thunderbolt-nvm-linux/issues/10">There is an issue</a> where the Thunderbolt version number is detected as <code>00.00</code> after reflashing (currently being investigated).
</p>
<p>Alternatively, for the BIOS update, you can simply copy the .exe file from the Dell Support page to any fat32 drive (even the boot partition seems to work). Then boot into the "BIOS Flash Update" utility by hitting F12 at boot time.
</p>
<p>Dell has also released updates to the SSD firmware, but these can only be updated from Windows, not from Linux.
</p>
<h2><span class="mw-headline" id="Display">Display</span></h2>
<p>The video should work with the <code>i915</code> driver of the current <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=linux">linux</a></span> kernel. Consult <a href="../en/Intel_graphics.html" title="Intel graphics">Intel graphics</a> for a detailed installation and configuration guide as well as for <a href="../en/Intel_graphics.html#Troubleshooting" title="Intel graphics">Intel graphics#Troubleshooting</a>.
</p>
<p>If you have the 4K (3840x2160) model, also check out <a href="../en/HiDPI.html" title="HiDPI">HiDPI</a> for UI scaling configurations.
</p>
<p>Note that the <code>enable_psr=1</code> kernel parameter appears not to work properly, at least on the touchscreen model.
</p>
<p>If the brightness of the backlight cannot be adjusted, add <code>i915.enable_dpcd_backlight=0</code> as a kernel parameter.
</p>
<h3><span class="mw-headline" id="Content_Adaptive_Brightness_Control">Content Adaptive Brightness Control</span></h3>
<p>In the XPS 13 the display panels (both FHD and 4K UHD) come with Content Adaptive Brightness Control (usually referred to as CABC or DBC, sometimes also as "EcoPower") enabled by default. While disabling required flashing the display firmware in previous generations, DBC can now be disabled in recent BIOS versions in the "Video" section. To test if DBS is enabled, go to this <a rel="nofollow" class="external text" href="https://tylerwatt12.com/dc/">test page</a>.
</p>
<h2><span class="mw-headline" id="Storage">Storage</span></h2>
<h3><span class="mw-headline" id="Firmware">Firmware</span></h3>
<p>The nvme SSD is a Toshiba KXG50ZNV256G, KXG50ZNV512G or KXG50ZNV1T02. The stock firmware version AADA4102 has severe problems when the ssd enters the lowest power state. This results in a unresponsive device (kernel complains about read-only filesystem) The problems can occur any time, but seem to have become way more common on Kernel 4.18 on battery power. <a rel="nofollow" class="external text" href="https://www.dell.com/support/home/us/en/19/drivers/driversdetails?driverid=c0pf8">Firmware Version AADA4105</a><sup title="Last check status: 404">[<a href="https://en.wikipedia.org/wiki/Wikipedia:Link_rot" class="extiw" title="wikipedia:Wikipedia:Link rot">dead link</a> 2020-03-28 ⓘ]</sup> seems to fix the problem. The firmware is available for Windows only but <a rel="nofollow" class="external text" href="https://gist.github.com/klingtnet/22ab0b907e2d9d20f98c72c93ea5dd37#gistcomment-2830279">can be updated under Linux at your own risk</a>.
</p>
<p>Note : On some devices, the nvme SSD can be a SK hynix EJ82N00301190264W (1TB) and not a Toshiba one
</p>
<p>As the upgrade is only possible under windows and as even with upgraded driver the disk may be completely undetected by the kernel because of the SSD not being responsive in the deepest sleep mode. The following kernel parameter works as a workaround, preventing the disk to enter the problematic sleep mode (see <a href="../en/Solid_state_drive/NVMe.html" title="Solid state drive/NVMe">Solid state drive/NVMe</a>):
</p>
<pre> nvme_core.default_ps_max_latency_us=6000
</pre>
<p>Note : NVMe SSD should not be issued discards :<a href="../en/Solid_state_drive/NVMe.html#Discards" title="Solid state drive/NVMe">Solid state drive/NVMe#Discards</a>
</p>
<h3><span class="mw-headline" id="Performance">Performance</span></h3>
<p>If the system becomes unresponsive when creating any kind of large file or when data is being swapped then you may need to disable Native Command Queuing by adding the the kernel param <code>libata.force=noncq</code>
</p>
<h2><span class="mw-headline" id="Peripherals">Peripherals</span></h2>
<h3><span class="mw-headline" id="Keyboard">Keyboard</span></h3>
<p>The keyboard backlight has a feature that makes it automatically turn off after a given timeout. This timeout can be adjusted by writing into <code>/sys/class/leds/dell\:\:kbd_backlight/stop_timeout</code>. For example,
</p>
<pre>echo "5m" &gt; /sys/class/leds/dell\:\:kbd_backlight/stop_timeout
</pre>
<p>This would set the timeout to 5 minutes. Note that different timeouts are maintained when the machine is connected to AC and when it's running from battery. Before BIOS 1.4.0 <a rel="nofollow" class="external text" href="https://github.com/dell/libsmbios/issues/48">there was an issue</a> that prevented the user from changing the timeout on AC. A kernel workaround was added in 4.18 and it was eventually fixed by BIOS 1.4.0.
</p>
<h3><span class="mw-headline" id="Touchpad">Touchpad</span></h3>
<h4><span class="mw-headline" id="Cursor_Jump">Cursor Jump</span></h4>
<p>The touchpad can sometimes produce a "cursor jump". Sometimes this is detected and worked around by libinput, resulting in a similar journal entry:
</p>
<pre>libinput error: event12 - DELL07E6:00 06CB:76AF Touchpad: kernel bug: Touch jump detected and discarded.
</pre>
<p>There is a <a rel="nofollow" class="external text" href="https://gitlab.freedesktop.org/libinput/libinput/issues/36">libinput bug about this</a> where the conclusion was that this is probably a hardware issue or a bug in the kernel driver.
</p>
<h4><span class="mw-headline" id="Sensitivity">Sensitivity</span></h4>
<p>By default, the <a href="../en/Libinput.html" title="Libinput">libinput</a> driver might not have the desired sensitivity. The acceleration can be changed via <a href="../en/Xinput.html" title="Xinput">xinput</a> as follows:
</p>
<pre> xinput --set-prop $(xinput | grep 'DELL.*Touchpad' | awk '{print $6}' | sed 's/id=//g') 'libinput Accel Speed' 0.5
</pre>
<h3><span class="mw-headline" id="Webcam">Webcam</span></h3>
<p><a rel="nofollow" class="external text" href="https://www.dell.com/community/Linux-General/Dell-xps-13-9370-Webcam-support/td-p/6032049">Some user support requests indicate that currently-shipping 9370 models may bundle webcams that use UVC 1.5 firmware rather than 1.0</a>, which was not supported <a rel="nofollow" class="external text" href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux-stable.git/diff/drivers/media/usb/uvc/uvc_video.c?id=v4.17.4&amp;id2=v4.17.3">prior to kernel 4.17.4</a>.
</p>
<p><a rel="nofollow" class="external text" href="https://www.dell.com/community/Linux-General/Dell-xps-13-9370-Webcam-support/td-p/6032049#.XIWx-3vI--8.link">If the webcam doesn't work after going into deep sleep</a>, you need to <a href="#Firmware/BIOS_Updates">update your bios</a> to version <a rel="nofollow" class="external text" href="https://www.dell.com/support/home/ca/en/cadhs1/product-support/product/xps-13-9370-laptop/drivers">1.5.1</a> or newer.
Some users have reported problem of the webcam being stuck at 640x480.
</p>
<h3><span class="mw-headline" id="Infrared_camera">Infrared camera</span></h3>
<p>The infrared camera can be used as an authentication method with <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/howdy/">howdy</a></span><sup><small>AUR</small></sup>
</p>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Warning:</strong> As said in howdy documentation, "DO NOT USE HOWDY AS THE SOLE AUTHENTICATION METHOD FOR YOUR SYSTEM."</div>
<p>After installing howdy, you should edit the configuration file to set the good camera for XPS 13 9370: /dev/video2. The file is located at <code>/lib/security/howdy/config.ini</code>. The device should be configured like this : <code>device_id = 2</code>.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> On the device where I tested this, the infrared camera was /dev/video2. To test if it is the right one for you, just run <code>fswebcam test.png --device /dev/video2</code> to check if the video source is the infrared one. An output file <code>test.png</code> will be generated. If it looks like an infrared image, you are ready to go.</div>
<p>To check if howdy is correctly reading your camera and detecting your face, just run <code>howdy test</code> as the root user. If your face is detected, just follow the normal setup instructions provided in the wiki page : <a href="../en/Howdy.html" title="Howdy">howdy</a>.
</p>
<p>If it is not working, you probably need to apply the fix provided here: <a rel="nofollow" class="external text" href="https://github.com/boltgolt/howdy/issues/70#issuecomment-439123621">GitHub: Error when trying to use IR sensors on Manjaro (Arch-based)</a>
</p>
<h3><span class="mw-headline" id="Fingerprint_reader">Fingerprint reader</span></h3>
<p>The fingerprint reader is not supported. There is a <a rel="nofollow" class="external text" href="https://gitlab.freedesktop.org/libfprint/libfprint/issues/43">libfprint feature request</a>.
</p>
<h3><span class="mw-headline" id="Audio">Audio</span></h3>
<p>Works correctly, but the audio controller cannot figure out what kind of device is plugged into the jack on its own. For this reason the desktop environment (eg. Gnome) will pop up a dialog where you can choose if it was a headset, or microphone, etc.
</p>
<h2><span class="mw-headline" id="Connectivity">Connectivity</span></h2>
<h3><span class="mw-headline" id="Bluetooth">Bluetooth</span></h3>
<p>The Bluetooth adapter sometimes becomes unavailable after waking up from suspend and can even stay deactivated and invisible after a warm reboot.
End of October 2018 <a rel="nofollow" class="external text" href="https://www.dell.com/community/Linux-Developer-Systems/XPS-13-9370-no-bluetooth-after-suspend/m-p/6204559#M8744">a kernel patch was announced by Dell</a>. However the issue appears to remain unresolved for at least some users.
</p>
<p>A quick workaround is rmmod btusb before suspend and insert btusb after resume.
To do this, you can put an executable script of any name in /lib/systemd/system-sleep/.
</p>
<pre>#!/bin/sh
if [ "$1" 1 "pre" ]; then
  systemctl stop bluetooth &amp;&amp; rmmod btusb
elif [ "$1" 1 "post" ]; then
  modprobe btusb &amp;&amp; systemctl start bluetooth
fi
</pre>
<p>Make sure it is executable by running <code>sudo chmod +x /lib/systemd/system-sleep/your-script.sh</code>. Credit to <a rel="nofollow" class="external text" href="https://bugs.launchpad.net/dell-sputnik/+bug/1766825/comments/26">Cyrus Lien</a> for this workaround.
</p>
<h3><span class="mw-headline" id="Wifi">Wifi</span></h3>
<p>The Wifi adapter contains a Qualcomm Atheros QCA6174 module. It should work out of the box with the <code>ath10k_pci</code> driver in recent <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=linux">linux</a></span> kernels.
</p>
<p>For any Wifi issues <a rel="nofollow" class="external text" href="https://www.dell.com/support/article/at/de/atdhs1/sln309066/killer-wireless-firmware-update-guide-for-ubuntu-systems">here</a> is a guideline provided by Dell to install the latest Killer wireless drivers.
</p>
<h3><span class="mw-headline" id="USB_Type-C_ports">USB Type-C ports</span></h3>
<p>The 9370 has only three Type-C ports (and no other ports, just an audio jack). Two of these (on the left side) support Thunderbolt 3. There is no power jack. A 45 W USB Type-C charger is included in the box. Any of the three Type-C ports can be used for charging. Since the laptop has no USB-A ports, one Dell-branded Type-C to A adapter is included.
</p>
<p>Also all three Type-C ports support DisplayPort alternate mode. It is taken care of by the firmware, so it will work even with older kernels that do not otherwise support it. To the operating system it appears as if the laptop had two DisplayPort connectors (in addition to the embedded DP that the internal screen uses). So far I've tested the following adapters. All of these will appear to the operating system as if you plugged something into one of the DP connectors.
</p>
<ul>
<li>
<a rel="nofollow" class="external text" href="https://www.club-3d.com/en/detail/2350/usb_3.1_type_c_to_displayport_1.2/">Club3D Type-C to DisplayPort 1.2 adapter</a> (tested with 1080p and 4K, both work at 60 Hz)</li>
<li>
<a rel="nofollow" class="external text" href="https://www.dell.com/en-us/shop/dell-adapter-usb-c-to-vga/apd/470-abnc/pc-accessories">Dell Type-C to VGA adapter</a> (tested with 1080p at 60 Hz)</li>
<li>
<a rel="nofollow" class="external text" href="https://www.dell.com/en-us/work/shop/dell-adapter-usb-c-to-hdmi/apd/470-abmz/pc-accessories">Dell Type-C to HDMI adapter</a> (tested with 1080p and 4K, both work at 60 Hz)</li>
<li>
<a rel="nofollow" class="external text" href="https://www.moshi.com/en/product/usb-c-to-hdmi-adapter/silver">Moshi USB-C to HDMI Adapter</a> (tested with 1080p and 4K, both work at 60 Hz)</li>
<li>
<a rel="nofollow" class="external text" href="https://www.amazon.com/gp/product/B01M0K0DL2">Cable Matters model 201048 USB-C Multiport</a> Works with XPS BIOS version 1.8.0.  (HDMI had issues under version 1.6.3.) (tested with Dell U2415 monitor at 1920x1200, keyboard and microphone on USB, Dell 45W adapter on USB-C power pass thru.  Antergos 19.1, Linux kernel 4.20)  On boot, I get warning that it is only supplying 40W, not 45W, but the battery still charges.</li>
<li>
<a rel="nofollow" class="external text" href="https://www.lenovo.com/gb/en/accessories-and-monitors/monitors/professional/P24h-10-23-8inch-Monitor-HDMI/p/61AEGAT3UK">Thinkvision P24h</a> USB, power delivery, video work.</li>
</ul>
<h2><span class="mw-headline" id="Power">Power</span></h2>
<h3><span class="mw-headline" id="Power_Saving">Power Saving</span></h3>
<p>To save more battery use <a href="../en/TLP.html" title="TLP">TLP</a> package
AND/OR <a href="../en/Powertop.html" title="Powertop">Powertop</a>.
</p>
<p>You can monitor the used power and also the temperature of your machine with the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=s-tui">s-tui</a></span> tool.
</p>
<p>To minimize the GPU's power consumption, make sure <code>i915</code> is correctly loading the firmware as described in <a href="../en/Intel_graphics.html#Enable_GuC_/_HuC_firmware_loading" title="Intel graphics">Intel graphics#Enable GuC / HuC firmware loading</a>.
</p>
<p>By default, Intel Turbo mode appears to be disabled when on battery to save power.  If this is not desired, TLP can be configured to re-enable Turbo on battery, however it is not always successful in doing so.  A solution is to use <a href="../en/Acpid.html" title="Acpid">Acpid</a> to detect AC charger disconnection and re-trigger TLP after a short delay by adding the following to <code>/etc/acpi/handler.sh</code>:
</p>
<pre>     ac_adapter)
       case "$2" in
           ACPI0003*|ACAD|ADP0)
               case "$4" in
                   00000000)
                       logger 'AC unplugged'
                       sleep 2
                       tlp true
                       ;;
                   00000001)
                       logger 'AC plugged'
                       sleep 2
                       tlp false
                       ;;
               esac
               ;;
           *)
               logger "ACPI action undefined: $2"
               ;;
       esac
</pre>
<h3><span class="mw-headline" id="Sleep">Sleep</span></h3>
<p>If the laptop seems to have an high drain when in sleep mode. As a possible workaround, you can set the machine to enter S3 deep sleep mode. Add <code>quiet mem_sleep_default=deep</code> to the <a href="../en/Kernel_parameters.html" title="Kernel parameters">Kernel parameters</a>.
</p>
<p>According to the manufacturer (see <a rel="nofollow" class="external text" href="https://bugzilla.kernel.org/show_bug.cgi?id=199689">this upstream kernel bug</a>), the machine uses S2 intentionally instead of S3, and they are working towards fixing the power drain on S2.
</p>
<p>Note: on older BIOS and/or kernel versions <a rel="nofollow" class="external text" href="https://www.spinics.net/lists/platform-driver-x86/msg15644.html">the power button cannot be used to wake the laptop from sleep</a>. In this case the Sleep button (Fn + End, or just End if you have Fn lock enabled) can still wake up the machine. This has been fixed by a BIOS update.
</p>
<h3><span class="mw-headline" id="Thermal_Throttling">Thermal Throttling</span></h3>
<p>By default thermal throttling activates around 80C resulting in maximum sustained CPU frequency around 2.4Ghz, much lower than in Dell's standard Windows installation.  
</p>
<pre>Package temperature above threshold, cpu clock throttled (total events = 971)
</pre>
<p>This can be resolved using <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=throttled">throttled</a></span> or <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=intel-undervolt">intel-undervolt</a></span>, both of which can be used to set a higher trip temperature.  Both can also be used to <a href="../en/Undervolting_CPU.html" title="Undervolting CPU">undervolt</a> to further reduce throttling, however system firmware newer than 1.12.1 <a rel="nofollow" class="external text" href="https://github.com/kitsunyan/intel-undervolt/issues/43">appear to disable this ability</a>.
</p>
<h3>
<span id="Thermal_Modes_.2F_Fan_profiles"></span><span class="mw-headline" id="Thermal_Modes_/_Fan_profiles">Thermal Modes / Fan profiles</span>
</h3>
<p>Just like in Windows by using Dell Power Manager you can set the thermal configuration and behaviour of the fans and CPU of your machine. This is done within a terminal with the commands below, or alternatively via a <a rel="nofollow" class="external text" href="https://store.kde.org/p/1282623">KDE Plasma widget</a>:
</p>
<p>To find out what thermal mode is set type:
</p>
<pre># smbios-thermal-ctl -g
</pre>
<p>To find all available thermal modes type:
</p>
<pre># smbios-thermal-ctl -i
</pre>
<p>And finally to set the desired thermal mode that you identified with the command before type:
</p>
<pre># smbios-thermal-ctl --set-thermal-mode=THERMAL_MODE
</pre>
<ul>
<li>"Quiet" and "Cool Bottom" profiles limit CPU power to 11W (18W boost) and thus reduces overall system performance.</li>
<li>"Balanced" and "Performance" profiles remove this limit.</li>
<li>Thermal profile changes may not reliably alter the CPU power limit.  When connected via Thunderbolt dock it appears to be worse.</li>
<li>In some circumstances after booting (particularly with "Quiet" profile), power may be limited to 10W.</li>
<li>Disconnecting and reconnecting power, changing thermal profile, or simply waiting may resolve these issues.</li>
</ul>
<p>For more fine-grained control of the fans, <a href="../en/Fan_speed_control.html#Dell_laptops" title="Fan speed control">i8kutils can be used</a> to specify the temperature at which either fan should activate.  This may conflict with the BIOS fan control, which can be disabled using <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/dell-bios-fan-control-git/">dell-bios-fan-control-git</a></span><sup><small>AUR</small></sup>.
</p>
</div>
</div>
<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../en/Category:Dell.html" title="Category:Dell">Dell</a></li></ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden category: <ul><li><a href="../en/Category:Pages_with_dead_links.html" title="Category:Pages with dead links">Pages with dead links</a></li></ul>
</div>
</div>
	</div>
</div>

<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
		<li>Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Dell_XPS_13_(9370)&amp;oldid=647771">https://wiki.archlinux.org/index.php?title=Dell_XPS_13_(9370)&amp;oldid=647771</a>"</li>
		<li id="footer-info-lastmod"> This page was last edited on 31 December 2020, at 16:46.</li>
		<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
	<br>
</ul>
	<ul id="footer-places">
		<li id="footer-places-privacy"><a href="../en/ArchWiki:Privacy_policy.html" title="ArchWiki:Privacy policy">Privacy policy</a></li>
		<li id="footer-places-about"><a href="../en/ArchWiki:About.html" title="ArchWiki:About">About ArchWiki</a></li>
		<li id="footer-places-disclaimer"><a href="../en/ArchWiki:General_disclaimer.html" title="ArchWiki:General disclaimer">Disclaimers</a></li>
	</ul>
	<ul id="footer-icons" class="noprint">
		<li id="footer-copyrightico">
	</ul>
	<div style="clear: both;"></div>
</footer>



</body>
</html>
