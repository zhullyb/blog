<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>Hybrid graphics - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.35.0">
<meta name="robots" content="noindex,follow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="http://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Hybrid_graphics rootpage-Hybrid_graphics skin-vector action-view skin-vector-legacy">
<div id="content" class="mw-body" role="main" style="margin: 0">
	<a id="top"></a>
	<div id="siteNotice" class="mw-body-content"></div>
	<div class="mw-indicators mw-body-content">
	</div>
	<h1 id="firstHeading" class="firstHeading" lang="en">Hybrid graphics</h1>
	<div id="bodyContent" class="mw-body-content">
		<div id="siteSub" class="noprint">From ArchWiki</div>
		<div id="contentSub"></div>
		<div id="contentSub2"></div>
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="#searchInput">Jump to search</a>
		<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr">
<div class="warningbox">The printable version is no longer supported and may have rendering errors. Please update your browser bookmarks and please use the default browser print function instead.</div>
<div class="mw-parser-output">
<p>Hybrid-graphics is a concept involving two graphics cards on same computer. Laptop manufacturers have developed new technologies involving two graphic cards with different abilities and power consumptions on a single computer. Hybrid-graphics has been developed to support both high performance and power saving use cases.
</p>
<p>There are a variety of technologies and each manufacturer developed its own solution to this problem. This technology is well supported on Windows but it's still quite experimental with Linux distributions. Here we try to explain a little about each approach and describe some community solutions to the lack of GNU/Linux systems support.
</p>
<div id="toc" class="toc" role="navigation" aria-labelledby="mw-toc-heading">
<input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none"><div class="toctitle" lang="en" dir="ltr">
<h2 id="mw-toc-heading">Contents</h2>
<span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span>
</div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#First_Generation_Hybrid_Model_(Basic_Switching)"><span class="tocnumber">1</span> <span class="toctext">First Generation Hybrid Model (Basic Switching)</span></a></li>
<li class="toclevel-1 tocsection-2">
<a href="#Dynamic_Switching_Model"><span class="tocnumber">2</span> <span class="toctext">Dynamic Switching Model</span></a>
<ul>
<li class="toclevel-2 tocsection-3">
<a href="#Fully_Power_Down_Discrete_GPU"><span class="tocnumber">2.1</span> <span class="toctext">Fully Power Down Discrete GPU</span></a>
<ul>
<li class="toclevel-3 tocsection-4"><a href="#Using_bbswitch"><span class="tocnumber">2.1.1</span> <span class="toctext">Using bbswitch</span></a></li>
<li class="toclevel-3 tocsection-5">
<a href="#Using_acpi_call"><span class="tocnumber">2.1.2</span> <span class="toctext">Using acpi_call</span></a>
<ul>
<li class="toclevel-4 tocsection-6">
<a href="#Turning_off_the_GPU_automatically"><span class="tocnumber">2.1.2.1</span> <span class="toctext">Turning off the GPU automatically</span></a>
<ul>
<li class="toclevel-5 tocsection-7"><a href="#At_boot"><span class="tocnumber">2.1.2.1.1</span> <span class="toctext">At boot</span></a></li>
<li class="toclevel-5 tocsection-8"><a href="#After_X_server_initialization"><span class="tocnumber">2.1.2.1.2</span> <span class="toctext">After X server initialization</span></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>

<h2>
<span id="First_Generation_Hybrid_Model_.28Basic_Switching.29"></span><span class="mw-headline" id="First_Generation_Hybrid_Model_(Basic_Switching)">First Generation Hybrid Model (Basic Switching)</span>
</h2>
<div class="noprint archwiki-template-message">
<p><a href="../File:Tango-edit-cut.png" class="image"><img alt="Tango-edit-cut.png" src="../File:Tango-edit-cut.png" decoding="async" width="48" height="48"></a><b>This section is being considered for removal.</b><a href="../File:Tango-edit-cut.png" class="image"><img alt="Tango-edit-cut.png" src="../File:Tango-edit-cut.png" decoding="async" width="48" height="48"></a></p>
<div>
<b>Reason:</b> Outdated, even the Wikipedia article about <a href="https://en.wikipedia.org/wiki/GPU_switching" class="extiw" title="wikipedia:GPU switching">GPU switching</a> does not describe this approach. Maybe part of this can be left as a historical note in the introduction. (Discuss in <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php/Talk:Hybrid_graphics">Talk:Hybrid graphics#</a>)</div>
</div>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Unless your notebook is from the last decade, it’s most likely using <a href="#Dynamic_Switching_Model">dynamic switching</a>.</div>
<p>The first generation of notebooks with hybrid graphics follow an approach that involves a two graphic card setup with a hardware multiplexer (<a href="https://en.wikipedia.org/wiki/Multiplexer" class="extiw" title="wikipedia:Multiplexer">MUX</a>). It allows power save and low-end 3D rendering by using an Integrated Graphics Processor (IGP) or a major power consumption with 3D rendering performance using a Dedicated/Discrete Graphics Processor (DGP). This model makes the user choose (at boot time or at login time) between the two power/graphics profiles and is almost fixed throughout the user session. The switch is done in a workflow similar to the following:
</p>
<ul>
<li>Turn off the display</li>
<li>Turn on the DGP</li>
<li>Switch the multiplexer</li>
<li>Turn off the IGP</li>
<li>Turn the display on again</li>
</ul>
<p>This switch is somewhat rough and adds some blinks and black screens in laptops that could do it "on the fly". Later approaches made the transition a little more user-friendly.
</p>
<h2><span class="mw-headline" id="Dynamic_Switching_Model">Dynamic Switching Model</span></h2>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> This model is utilized by most manufacturers as of 2016.</div>
<p>Most of the new Hybrid-graphics technologies involve two graphic cards as the <a href="#First_Generation_Hybrid_Model_(Basic_Switching)">basic switching</a> but now the DGP and IGP are plugged to a framebuffer and there is no hardware multiplexer. The IGP is always on and the DGP is switched on/off when there is a need in power-save or performance-rendering. In most cases there is no way to use <i>only</i> the DGP and all the switching and rendering is controlled by software.
At startup, the Linux kernel starts using a video mode and setting up low-level graphic drivers which will be used by the applications. Most of the Linux distributions then use X.org to create a graphical environment. Finally, a few other softwares are launched, first a login manager and then a window manager, and so on. This hierarchical system has been designed to be used in most of cases on a single graphic card.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Read <a href="../en/NVIDIA_Optimus.html" title="NVIDIA Optimus">NVIDIA Optimus</a> and <a href="../en/Bumblebee.html" title="Bumblebee">Bumblebee</a> for details about NVidia using hybrid graphics with NVidia’s proprietary driver. Read <a href="../en/PRIME.html" title="PRIME">PRIME</a> for basically everything else (like AMD Radeon and NVidia GPUs with Nouveau driver).</div>
<h3><span class="mw-headline" id="Fully_Power_Down_Discrete_GPU">Fully Power Down Discrete GPU</span></h3>
<p>You may want to turn off the high-performance graphics processor to save battery power.
</p>
<h4><span class="mw-headline" id="Using_bbswitch">Using bbswitch</span></h4>
<p>With a NVidia GPU, this can be more safely done using <a href="../en/Bumblebee.html#Power_management" class="mw-redirect" title="Bbswitch">bbswitch</a>, which consists of a kernel package that automatically issues the correct ACPI calls to disable the discrete GPU when not needed, or automatically at boot.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> bbswitch does not work with the PCI-E port power management method since kernel 4.8. See <a href="../en/Bumblebee.html#Broken_power_management_with_kernel_4.8" title="Bumblebee">Bumblebee#Broken power management with kernel 4.8</a> for details.</div>
<h4><span class="mw-headline" id="Using_acpi_call">Using acpi_call</span></h4>
<p>Otherwise, and for GPUs not supported by bbswitch, the same can be done manually installing the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=acpi_call">acpi_call</a></span> package.
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> For kernels not in the <a href="../en/Official_repositories.html" title="Official repositories">Official repositories</a>, the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=acpi_call-dkms">acpi_call-dkms</a></span> is an alternative. See also <a href="../en/Dynamic_Kernel_Module_Support.html" class="mw-redirect" title="DKMS">DKMS</a>.</div> 
<p>Once installed load the kernel module:
</p>
<pre># modprobe acpi_call
</pre>
<p>With the kernel module loaded, download and execute this script: <a rel="nofollow" class="external free" href="https://raw.githubusercontent.com/mkottman/acpi_call/master/examples/turn_off_gpu.sh">https://raw.githubusercontent.com/mkottman/acpi_call/master/examples/turn_off_gpu.sh</a>
</p>
<p>The script will go through all the known data buses and attempt to turn them off. You will get an output similar to the following: 
</p>
<pre>Trying \_SB.PCI0.P0P1.VGA._OFF: failed
Trying \_SB.PCI0.P0P2.VGA._OFF: failed
Trying \_SB_.PCI0.OVGA.ATPX: failed
Trying \_SB_.PCI0.OVGA.XTPX: failed
Trying \_SB.PCI0.P0P3.PEGP._OFF: failed
Trying \_SB.PCI0.P0P2.PEGP._OFF: failed
Trying \_SB.PCI0.P0P1.PEGP._OFF: failed
Trying \_SB.PCI0.MXR0.MXM0._OFF: failed
Trying \_SB.PCI0.PEG1.GFX0._OFF: failed
Trying \_SB.PCI0.PEG0.GFX0.DOFF: failed
Trying \_SB.PCI0.PEG1.GFX0.DOFF: failed
<b>Trying \_SB.PCI0.PEG0.PEGP._OFF: works!</b>
Trying \_SB.PCI0.XVR0.Z01I.DGOF: failed
Trying \_SB.PCI0.PEGR.GFX0._OFF: failed
Trying \_SB.PCI0.PEG.VID._OFF: failed
Trying \_SB.PCI0.PEG0.VID._OFF: failed
Trying \_SB.PCI0.P0P2.DGPU._OFF: failed
Trying \_SB.PCI0.P0P4.DGPU.DOFF: failed
Trying \_SB.PCI0.IXVE.IGPU.DGOF: failed
Trying \_SB.PCI0.RP00.VGA._PS3: failed
Trying \_SB.PCI0.RP00.VGA.P3MO: failed
Trying \_SB.PCI0.GFX0.DSM._T_0: failed
Trying \_SB.PCI0.LPC.EC.PUBS._OFF: failed
Trying \_SB.PCI0.P0P2.NVID._OFF: failed
Trying \_SB.PCI0.P0P2.VGA.PX02: failed
Trying \_SB_.PCI0.PEGP.DGFX._OFF: failed
Trying \_SB_.PCI0.VGA.PX02: failed
</pre>
<p>See the "works"? This means the script found a bus which your GPU sits on and it has now turned off the chip. To confirm this, your battery time remaining should have increased.
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong>  If you are experiencing trouble hibernating or suspending the system after disabling the GPU, try to enable it again by sending the corresponding acpi_call. See also <a href="../en/Power_management.html#Suspend.2Fresume_service_files" title="Power management">Suspend/resume service files</a>.</div>
<h5><span class="mw-headline" id="Turning_off_the_GPU_automatically">Turning off the GPU automatically</span></h5>
<p>Currently, the chip will turn back on with the next reboot. To get around this, add the kernel module to the array of modules to load at boot:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/modules-load.d/acpi_call.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">#Load 'acpi_call.ko' at boot.

acpi_call</pre>
<h6><span class="mw-headline" id="At_boot">At boot</span></h6>
<p>To turn off the GPU at boot it is possible to use <a href="../en/Systemd.html#systemd-tmpfiles_-_temporary_files" class="mw-redirect" title="Systemd-tmpfiles">systemd-tmpfiles</a>. 
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/tmpfiles.d/acpi_call.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">

w /proc/acpi/call - - - - <i>\\_SB.PCI0.PEG0.PEGP._OFF</i></pre>
<p>The above config will be loaded at boot by systemd. What it does is write the specific OFF signal to the <code>/proc/acpi/call</code> file. Obviously, replace the <code>\_SB.PCI0.PEG0.PEGP._OFF</code> with the one which works on your system (please note that you need to escape the backslash).
</p>
<h6><span class="mw-headline" id="After_X_server_initialization">After X server initialization</span></h6>
<p>On some systems, turning off the discrete GPU before the X server is initialized may hang the system. In such cases, it may be better to disable the GPU after X server initialization, which is possible with some display managers. In <a href="../en/LightDM.html" title="LightDM">LightDM</a>, for instance, the <i>display-setup-script</i> seat configuration parameter could be used to execute a script as root that disables the GPU.
</p>
</div>
</div>
<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../en/Category:Graphics.html" title="Category:Graphics">Graphics</a></li></ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden category: <ul><li><a href="../en/Category:Sections_flagged_with_Template:Remove.html" title="Category:Sections flagged with Template:Remove">Sections flagged with Template:Remove</a></li></ul>
</div>
</div>
	</div>
</div>

<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
		<li>Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Hybrid_graphics&amp;oldid=630900">https://wiki.archlinux.org/index.php?title=Hybrid_graphics&amp;oldid=630900</a>"</li>
		<li id="footer-info-lastmod"> This page was last edited on 11 August 2020, at 11:19.</li>
		<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
	<br>
</ul>
	<ul id="footer-places">
		<li id="footer-places-privacy"><a href="../en/ArchWiki:Privacy_policy.html" title="ArchWiki:Privacy policy">Privacy policy</a></li>
		<li id="footer-places-about"><a href="../en/ArchWiki:About.html" title="ArchWiki:About">About ArchWiki</a></li>
		<li id="footer-places-disclaimer"><a href="../en/ArchWiki:General_disclaimer.html" title="ArchWiki:General disclaimer">Disclaimers</a></li>
	</ul>
	<ul id="footer-icons" class="noprint">
		<li id="footer-copyrightico">
	</ul>
	<div style="clear: both;"></div>
</footer>



</body>
</html>
