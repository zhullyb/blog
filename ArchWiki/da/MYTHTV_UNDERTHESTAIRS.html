<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>MYTHTV UNDERTHESTAIRS (Dansk) - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.35.0">
<meta name="robots" content="noindex,follow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="http://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-MYTHTV_UNDERTHESTAIRS_Dansk rootpage-MYTHTV_UNDERTHESTAIRS_Dansk skin-vector action-view skin-vector-legacy">
<div id="content" class="mw-body" role="main" style="margin: 0">
	<a id="top"></a>
	<div id="siteNotice" class="mw-body-content"></div>
	<div class="mw-indicators mw-body-content">
	</div>
	<h1 id="firstHeading" class="firstHeading" lang="en">MYTHTV UNDERTHESTAIRS (Dansk)</h1>
	<div id="bodyContent" class="mw-body-content">
		<div id="siteSub" class="noprint">From ArchWiki</div>
		<div id="contentSub"></div>
		<div id="contentSub2"></div>
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="#searchInput">Jump to search</a>
		<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr">
<div class="warningbox">The printable version is no longer supported and may have rendering errors. Please update your browser bookmarks and please use the default browser print function instead.</div>
<div class="mw-parser-output">
<div class="noprint archwiki-template-message">
<p><a href="../File:Tango-view-refresh-red.png" class="image"><img alt="Tango-view-refresh-red.png" src="../File:Tango-view-refresh-red.png" decoding="async" width="48" height="48"></a><b>This article or section is out of date.</b><a href="../File:Tango-view-refresh-red.png" class="image"><img alt="Tango-view-refresh-red.png" src="../File:Tango-view-refresh-red.png" decoding="async" width="48" height="48"></a></p>
<div>
<b>Reason:</b> <span style="color:red;">please use the first argument of the template to provide a brief explanation.</span> (Discuss in <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php/Talk:MYTHTV_UNDERTHESTAIRS_(Dansk)">Talk:MYTHTV UNDERTHESTAIRS (Dansk)#</a>)</div>
</div>
<div id="toc" class="toc" role="navigation" aria-labelledby="mw-toc-heading">
<input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none"><div class="toctitle" lang="en" dir="ltr">
<h2 id="mw-toc-heading">Contents</h2>
<span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span>
</div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Introduktion"><span class="tocnumber">1</span> <span class="toctext">Introduktion</span></a></li>
<li class="toclevel-1 tocsection-2">
<a href="#Strukturen"><span class="tocnumber">2</span> <span class="toctext">Strukturen</span></a>
<ul>
<li class="toclevel-2 tocsection-3"><a href="#mythbackend"><span class="tocnumber">2.1</span> <span class="toctext">mythbackend</span></a></li>
<li class="toclevel-2 tocsection-4"><a href="#mythfrontend"><span class="tocnumber">2.2</span> <span class="toctext">mythfrontend</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-5">
<a href="#Under_Trappen_L%C3%B8sningen"><span class="tocnumber">3</span> <span class="toctext">Under Trappen Løsningen</span></a>
<ul>
<li class="toclevel-2 tocsection-6"><a href="#Forberedelser"><span class="tocnumber">3.1</span> <span class="toctext">Forberedelser</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-7"><a href="#Installation_af_MythTV"><span class="tocnumber">4</span> <span class="toctext">Installation af MythTV</span></a></li>
<li class="toclevel-1 tocsection-8"><a href="#Autostart_af_Frontend"><span class="tocnumber">5</span> <span class="toctext">Autostart af Frontend</span></a></li>
</ul>
</div>

<h2><span class="mw-headline" id="Introduktion">Introduktion</span></h2>
<p>MythTV er en samlet applikation, designet til levere fantastiske multimedie oplevelser.
Det leverer PVR-funktionen(Personal Video Recorder) til en linux baseret PC og supporterer også andre medietyper - såsom Xbox, IPhone og Windowsmobile. 
Kombineret med en stille Computer(Støjsvag) og et ordentligt TV - giver det et fantastisk alternativ til en hjemmebiograf.
</p>
<hr>
<p>Denne artikel foreskriver at man har leget med MythTV et stykke tid og forstår de muligheder og løsninger der kan være til de enkelte setup's mm.
</p>
<h2><span class="mw-headline" id="Strukturen">Strukturen</span></h2>
<p>MythTV systemet er delt op i 2dele - 1 backend og frontend, hvor hver komponent har sine egne funktioner:
</p>
<h3><span class="mw-headline" id="mythbackend">mythbackend</span></h3>
<ul>
<li>Planlæg og optager TV, samt afspille LiveTV</li>
<li>Streame video data til frontends</li>
<li>Markerer reklamepause</li>
<li>Transcode videor fra det ene format til et andet</li>
</ul>
<h3><span class="mw-headline" id="mythfrontend">mythfrontend</span></h3>
<ul>
<li>leverer en flot GUI</li>
<li>Afspiller optaget indhold</li>
<li>Leverer et interface til at planlægge optagelser</li>
</ul>
<p>Frontend og Backend kan både være på seperate maskiner i et netværk, men der kan også være flere frontends på samme system. Arkitekturen tillader nemlig en central distribuering af medier der kan nå alle steder et netværk også kan. Det er et usædvanligt flexibelt system, som også muliggør meget små strømbesparende maskiner som de perfekte frontends.
</p>
<h2>
<span id="Under_Trappen_L.C3.B8sningen"></span><span class="mw-headline" id="Under_Trappen_Løsningen">Under Trappen Løsningen</span>
</h2>
<p>Som "Undertrappen" løsningen menes der, at vores Backend bliver gemt væk "under Trappen", imens den leverer fuldt funktionsdygtigt TV/medie til hele huset. Dette skal forståes således at backend maskinen kører konstant og styrer alle optagelser,trancodninger, reklamemærkning mm, og selve frontends kobler op til Backenden og henter diverse data mm. For at forklare vores setup lidt nemmere er der et overblik her: 
</p>
  <pre>    Netværk range: 10.0.0.0/24 
    dhcp range:    10.0.0.50 - 10.0.0.100
    Masterbackend IP: 10.0.0.10
    Gateway:          10.0.0.1
  </pre>
<h3><span class="mw-headline" id="Forberedelser">Forberedelser</span></h3>
<p>For opbevaring af Musik,TV,film mm på tværs af netværket, skal man beslutte hvor man vil ligge disse data. Jeg har valgt at oprette et bibliotek /storage - hvorefter jeg kan mounte diverse diske i dette bibliotek og dermed undgå min / bliver fyldt pga musik film mm.  
</p>
  <pre>    mkdir -p /storage/music
    mkdir -p /storage/movies
    mkdir -p /storage/records
    mkdir -p /storage/pictures
  </pre>
<p>For at kunne installere og udvide ens system med de detaljer omkring musik,film mm på tværs af hele netværket - starter man med at installere NFS, som vil dele (kun linuxmaskiner) netværksdrev. 
</p>
  <pre>  # pacman -S nfs-common
  </pre>
<p>Man skal nu vælge om man vil lade MythTV køre som root eller som seperat bruger - hvor jeg har valgt en seperat bruger for at adskille det lidt.Men for at sikre systemet har jeg valgt en specifik bruger - nemlig myth
</p>
  <pre>    # adduser myth
  </pre>
<p>Derefter chown'er vi bibliotekerne vi har oprettet og gør klar til brug af disse.
</p>
  <pre>    # chown -R myth /storage
    # chmod -R 777 /storage
  </pre>
<p>Nu skal filerne så exporteres via netværket, og dette sættes op i filen /etc/export.conf - ved at tiolføje dette i filen: 
</p>
  <pre>    ###################################################
    # My shared discs for use in my MythTV system
    ###################################################
    /storage/movies         10.0.0.1/24(rw,sync,subtree_check)
    /storage/music          10.0.0.1/24(rw,sync,subtree_check)
    /storage/pictures       10.0.0.1/24(rw,sync,subtree_check)
    /storage/records        10.0.0.1/24(rw,sync,subtree_check)
  </pre>
<p>dette betyder at klienter indenfor det defineret subnet - kan mounte disse drev. Man skal også lige huske at ændre en linie i /etc/conf.d/nfs
</p>
  <pre>    STATD_OPTS="—no-notify"
  </pre>
<p>Og tilsidst skal man sikre sig at diverse host må connecte til masterbackend og adgang er muligt. Dette gøres ved at tilføje regler i /etc/hosts.allow:
</p>
  <pre>    sshd: ALL
    nfsd: ALL
    portmap: ALL
    mountd: ALL
    statd: ALL
    rquotad: ALL
    lockd: ALL
    mysqld: ALL
  </pre>
<p>Her kan man også se, adgang til MySQL er tilladt samt SSH(for adgang via konsol)
Hermed er vores share så opsat på vores CORE-server(Som jeg kalder min Backend).
</p>
<hr>
<p>Da denne er vigtig for at vi kan rippe DVD mm fra vores Frontends, da vores bruger(myth) skal have adgang til denne. Jeg roede længe med at jeg ikke kunne få adgang til denne og kunne ikke få lov til at rippe DVD'er og musik. Derfor fandt jeg ud af denne løsning.
Istedet for at skulle starte mtd(som mythtranscode hedder) som almindelig rootdaemon, skal den opstartes som vores bruger. Derfor har jeg indsat denne linie i /etc/rc.local:
</p>
  <pre>    su myth -c 'mtd -d'
  </pre>
<p>Nu skal resten af installationen foregå ligesom ved almindelig installation af backendserver <a href="../da/MYTHTV_HOWTO.html" title="MYTHTV HOWTO (Dansk)">som beskrevet her:</a> <b>(Dansk)</b> <a href="../da/MYTHTV_HOWTO.html" title="MYTHTV HOWTO (Dansk)">MYTHTV HOWTO (Dansk)</a>
</p>
<h2><span class="mw-headline" id="Installation_af_MythTV">Installation af MythTV</span></h2>
<p>Den generelle installation af MythTV, er beskrevet under Installationssiden, men da dette er en "Under trappen" løsning - er der nogle enkelte ting der skal tilpasses generelt imellem Frontends/backends. 
For det første skal vi have installeret MythTV (samme version) på alle frontends - det samme skal NFS - således at vi kan mounte de forskellige biblioteker shared fra Backend serveren:
</p>
  <pre>    mkdir -p /storage/music
    mkdir -p /storage/movies
    mkdir -p /storage/records
    mkdir -p /storage/pictures
  </pre>
<p>Husk at tilføje dette til opstartlinien i /etc/rc.conf DAEMONS, således at de starter ved boot!
</p>
<p>Mangler man at installere NFS - gøres dette ved hjælp af følgende kommando:
</p>
  <pre>  # pacman -S nfs-common
  </pre>
<p>Man skal nu vælge om man vil lade MythTV køre som root eller som seperat bruger - hvor jeg har valgt en seperat bruger for at adskille det lidt.Men for at sikre systemet har jeg valgt en specifik bruger - nemlig myth
</p>
  <pre>    # adduser myth
  </pre>
<p>Derefter chown'er vi bibliotekerne vi har oprettet og gør klar til brug af disse.
</p>
  <pre>    # chown -R myth /storage
    # chmod -R 777 /storage
  </pre>
<p>for at disse netværksdrev bliver mountet ved boot, tilføjes følgende i /etc/fstab: 
</p>
<pre>10.0.0.10:/storage/music        /storage/music                nfs        rw,sync        0        1
10.0.0.10:/storage/movies        /storage/movies                nfs        rw,sync        0        1
10.0.0.10:/storage/pictures        /storage/pictures        nfs        rw,sync        0        1
10.0.0.10:/storage/records        /storage/records        nfs        rw,sync        0        1 
</pre>
<p>Nu kan man så tjekke af di9verse drev bliver mountet med kommandoen:
</p>
<pre>$ mount -a
</pre>
<p>Det sidste man så stadig mangler på frontends også - er at få MTD til at fungere under samme bruiger som på Backend - så tilføj til /etc/rc-local
</p>
<pre>su myth -c 'mtd -d'
</pre>
<p>På alle frontends vil den reagere som om MythTV kører på localhost, og det skal vi lige ændre således at det kommer på plads - dette gøres med at editere indstillingeren i /home/myth/.mythtv/mysql.txt til at passe med jeres indstillinger - men hovedsagligt er det denne linie der er vigtigt: 
</p>
<pre>DBHostName=localhost   --&gt;  DBHostName=10.0.0.10
</pre>
<p>Men så skulle vi også kunne rippe DVD'er mm fra Frontend og alle andre steder i systemet.
</p>
<h2><span class="mw-headline" id="Autostart_af_Frontend">Autostart af Frontend</span></h2>
<p>Efter at have fået lyd,grafik mm til at fungere ordentligt i almindelig GNOME, kan vi nu sætte vores Frontend til at starte automatisk ved opstart. Under
</p>
<pre>System -&gt; Indstillinger -&gt; Sessioner
</pre>
<p>kan man nu oprette et nyt opstartsprogram.
Navn: MythFrontend
Kommando: mythfrontend  
Hvis man vil have logfil på til test eller lign, kan kommandoen istedet for være:
Kommando: mythfrontend -v all &gt; /var/log/mythfrontend.log
Således vil man nu lige skulle oprette denne fil i /var/log/ og tillade myth at skrive i den:
</p>
<pre>$ touch /var/log/mythfrontend.log
$ chmod 777 /var/log/mythfrontend.log
</pre>
<p>Det sidste man kan er så at tillade brugeren myth at logge ind automatisk. Dette gøres under
Systemer -&gt; Administration -&gt; Login skærm
. Her kan man under sikkerhed aktivere automatisk login for myth. Dermed vil Mythfrontend starte fremover hvergang der logges ind på maskinen.
Herefter kan man nu bruge sit system som en "Under trappen" installation.
</p>
</div>
</div>
<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../da/Category:Multimedia.html" title="Category:Multimedia (Dansk)">Multimedia (Dansk)</a></li></ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden category: <ul><li><a href="../en/Category:Pages_or_sections_flagged_with_Template:Out_of_date.html" title="Category:Pages or sections flagged with Template:Out of date">Pages or sections flagged with Template:Out of date</a></li></ul>
</div>
</div>
	</div>
</div>

<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
		<li>Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=MYTHTV_UNDERTHESTAIRS_(Dansk)&amp;oldid=534096">https://wiki.archlinux.org/index.php?title=MYTHTV_UNDERTHESTAIRS_(Dansk)&amp;oldid=534096</a>"</li>
		<li id="footer-info-lastmod"> This page was last edited on 12 August 2018, at 20:25.</li>
		<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
	<br>
</ul>
	<ul id="footer-places">
		<li id="footer-places-privacy"><a href="../en/ArchWiki:Privacy_policy.html" title="ArchWiki:Privacy policy">Privacy policy</a></li>
		<li id="footer-places-about"><a href="../en/ArchWiki:About.html" title="ArchWiki:About">About ArchWiki</a></li>
		<li id="footer-places-disclaimer"><a href="../en/ArchWiki:General_disclaimer.html" title="ArchWiki:General disclaimer">Disclaimers</a></li>
	</ul>
	<ul id="footer-icons" class="noprint">
		<li id="footer-copyrightico">
	</ul>
	<div style="clear: both;"></div>
</footer>



</body>
</html>
