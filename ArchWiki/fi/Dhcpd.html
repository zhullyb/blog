<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>dhcpd (Suomi) - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.35.0">
<meta name="robots" content="noindex,follow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="http://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Dhcpd_Suomi rootpage-Dhcpd_Suomi skin-vector action-view skin-vector-legacy">
<div id="content" class="mw-body" role="main" style="margin: 0">
	<a id="top"></a>
	<div id="siteNotice" class="mw-body-content"></div>
	<div class="mw-indicators mw-body-content">
	</div>
	<h1 id="firstHeading" class="firstHeading" lang="en">dhcpd (Suomi)</h1>
	<div id="bodyContent" class="mw-body-content">
		<div id="siteSub" class="noprint">From ArchWiki</div>
		<div id="contentSub"></div>
		<div id="contentSub2"></div>
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="#searchInput">Jump to search</a>
		<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr">
<div class="warningbox">The printable version is no longer supported and may have rendering errors. Please update your browser bookmarks and please use the default browser print function instead.</div>
<div class="mw-parser-output">
<p><span></span>
</p>
<div class="archwiki-template-meta-related-articles-start">
<p>Aiheeseen liittyen</p>
<ul>
<li><a href="../en/Dhcpcd.html" title="Dhcpcd">dhcpcd</a></li>
</ul>
</div>
<p>dhcpd on <a rel="nofollow" class="external text" href="http://www.isc.org/downloads/dhcp/">Internet Systems Consortiumin</a> kehittämä DHCP palvelin. Se on käytännöllinen esimerkiksi laitteelle joka toimii reitittimenä LAN verkossa.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Huomautus:</strong> <i>dhcpd</i> (DHCP <b>(server)</b> daemon) ei ole sama kuin <a href="../en/Dhcpcd.html" title="Dhcpcd">dhcpcd</a> (DHCP <b>client</b> daemon).</div>
<div id="toc" class="toc" role="navigation" aria-labelledby="mw-toc-heading">
<input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none"><div class="toctitle" lang="en" dir="ltr">
<h2 id="mw-toc-heading">Contents</h2>
<span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span>
</div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Asennus"><span class="tocnumber">1</span> <span class="toctext">Asennus</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#K%C3%A4ytt%C3%B6"><span class="tocnumber">2</span> <span class="toctext">Käyttö</span></a></li>
<li class="toclevel-1 tocsection-3">
<a href="#Konfiguraatio"><span class="tocnumber">3</span> <span class="toctext">Konfiguraatio</span></a>
<ul>
<li class="toclevel-2 tocsection-4">
<a href="#Vain_yhden_k%C3%A4ytt%C3%B6liittym%C3%A4n_kuuntelu"><span class="tocnumber">3.1</span> <span class="toctext">Vain yhden käyttöliittymän kuuntelu</span></a>
<ul>
<li class="toclevel-3 tocsection-5"><a href="#dhcpd:n_konfigurointi"><span class="tocnumber">3.1.1</span> <span class="toctext">dhcpd:n konfigurointi</span></a></li>
<li class="toclevel-3 tocsection-6"><a href="#Palvelu_tiedosto"><span class="tocnumber">3.1.2</span> <span class="toctext">Palvelu tiedosto</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-7"><a href="#K%C3%A4ytt%C3%B6_PXE:lle"><span class="tocnumber">3.2</span> <span class="toctext">Käyttö PXE:lle</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-8"><a href="#Katso_my%C3%B6s"><span class="tocnumber">4</span> <span class="toctext">Katso myös</span></a></li>
</ul>
</div>

<h2><span class="mw-headline" id="Asennus">Asennus</span></h2>
<p><a href="../fi/Help:Reading.html#Pakettien_asennus" class="mw-redirect" title="Asenna">Asenna</a> <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=dhcp">dhcp</a></span> paketti, joka löytyy <a href="../en/Official_repositories.html" title="Official repositories">virallisista pakettilähteistä</a>.
</p>
<h2>
<span id="K.C3.A4ytt.C3.B6"></span><span class="mw-headline" id="Käyttö">Käyttö</span>
</h2>
<p><i>dhcpd</i> sisältää kaksi yksikkötiedostoa <code>dhcpd4.service</code> ja <code>dhcpd6.service</code>, joita voidaan käyttää <a href="../en/Systemd.html#Using_units" class="mw-redirect" title="Enable">hallitsemaan</a> taustaprosessia. Ne käynnistävät taustaprosessin <i>kaikki</i> <a href="../en/Network_configuration.html#Network_interfaces" class="mw-redirect" title="Network interfaces">verkkokäyttöliittymät</a> IPv4 ja IPv6 vastaavasti. Katso <a href="#Vain_yhden_k%C3%A4ytt%C3%B6liittym%C3%A4n_kuuntelu">#Vain yhden käyttöliittymän kuuntelu</a> vaihtoehtoiselle ratkaisulle.
</p>
<h2><span class="mw-headline" id="Konfiguraatio">Konfiguraatio</span></h2>
<p>Ohje staattisen IPv4 osoitteen asettamiseen käyttöliittymään, jota halutaan käyttää (tässä esimerkissä <code>eth0</code>). Ensimmäiset 3 tavua tästä osoitteesta eivät saa vastata muiden käyttöliittymien osoitteiden ensimmäisiä tavuja.
</p>
<pre># ip link set up dev eth0
# ip addr add 139.96.30.100/24 dev eth0 # arbitrary address
</pre>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Vinkki:</strong> Yleisesti jotain seuraavista käytetään yksityisissä verkoissa, jotka erityisesti tätä varten on varattuna ja eivät siksi aiheuta ristiriitoja minkään hostin kanssa verkossa:
<ul>
<li>
<code>192.168/16</code> (subnet <code>192.168.0.0</code>, netmask <code>255.255.0.0</code>)</li>
<li>
<code>172.16/12</code> (subnet <code>172.16.0.0</code>, netmask <code>255.240.0.0</code>)</li>
<li>
<code>10/8</code> (suurille verkoille; subnet <code>10.0.0.0</code>, netmask <code>255.0.0.0</code>)</li>
</ul>
Katso myös <a rel="nofollow" class="external text" href="http://www.ietf.org/rfc/rfc1918.txt">RFC 1918</a>.</div>
<p>Asettaaksesi staattisen ip osoitteen bootissa, katso <a href="../fi/Network_configuration.html#Staattinen_IP_osoite" title="Network configuration (Suomi)">Network configuration (Suomi)#Staattinen IP osoite</a>.
</p>
<p>Oletus <code>dhcpd.conf</code> sisältää monia kommentoimattomia esimerkkejä, joten kopioi se:
</p>
<pre># cp /etc/dhcpd.conf /etc/dhcpd.conf.example
</pre>
<p>Minimi konfiguraatio tiedosto voi näyttää tältä:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/dhcpd.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">option domain-name-servers 8.8.8.8, 8.8.4.4;
option subnet-mask 255.255.255.0;
option routers 139.96.30.100;
subnet 139.96.30.0 netmask 255.255.255.0 {
  range 139.96.30.150 139.96.30.250;
}
</pre>
<p>Jos kiinteälle IP osoitteelle on tarve yhdessä erityisessä laitteessa, voit määrittää isäntä osat:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/dhcpd.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">option domain-name-servers 8.8.8.8, 8.8.4.4;
option subnet-mask 255.255.255.0;
option routers 139.96.30.100;
subnet 139.96.30.0 netmask 255.255.255.0 {
  range 139.96.30.150 139.96.30.250;
}
host macbookpro{
  hardware ethernet 70:56:81:22:33:44;
  fixed-address 139.96.30.199;
}
</pre>
<p><code>domain-name-servers</code> vaihtoehto sisältää DNS palvelimien osotteita joita syötetään asiakasohjelmille (client). Tässä esimerkissä käytetään Googlen julkisia DNS palvelimia. Jos tiedät paikallisia DNS palvelimia (kuten esimerkiksi palveluntarjoajan omia), voit käyttää myös niitä. Jos olet konfiguroinut oman DNS paikallisessa koneessa, käytä sen osoitetta subnetissä (kuten <code>139.96.30.100</code> aikaisemmassa esimerkissä).
</p>
<p><code>subnet-mask</code> ja <code>routers</code> määrittää subnet peitteen ja listan käytettävistä reitittimistä subnetissä. Valtaosassa tapauksia pienissä verkoissa voidaan käyttää <code>255.255.255.0</code> peitteenä ja määrittää IP osoite koneesta missä ollaan konfiguroimassa DHCP palvelinta reitittimenä.
</p>
<p><code>subnet</code> osat määrittää vaihtoehdot muille subneteille, jotka on kartoitettu verkonkäyttöliittymiin, missä<i>dhcpd</i> on käynnissä. Meidän esimerkissä tämä subnet <code>139.96.30.0/24</code> on tälle käyttöliittymälle <code>eth0</code>, mille määriteltiin joukko valittavia IP osoitteita. Osoitteet tästä joukosta asetetaan liittyville asiakasohjelmille.
</p>
<h3>
<span id="Vain_yhden_k.C3.A4ytt.C3.B6liittym.C3.A4n_kuuntelu"></span><span class="mw-headline" id="Vain_yhden_käyttöliittymän_kuuntelu">Vain yhden käyttöliittymän kuuntelu</span>
</h3>
<p>Jos tietokone on jo osana yhtä tai useampaa verkkoa, se voi ilmentyä ongelmana jos koneesi rupeaa antamaan IP osoitteita muille laitteille muista verkoista. Se voidaan tehdä joko konfiguroimalla dhcpd tai käynnistämällä se taustaprosessina <a href="../fi/Systemd.html#Yksik%C3%B6iden_k%C3%A4ytt%C3%B6" title="Systemd (Suomi)">systemctl:än</a> avulla.
</p>
<h4><span class="mw-headline" id="dhcpd:n_konfigurointi">dhcpd:n konfigurointi</span></h4>
<p>Käyttöliittymän torjumiseen täytyy luoda tyhjä esittely subnetille, joka konfiguroidaan siinä käyttöliittymässä.
</p>
<p>Tämä tehdään muokkaamalla konfiguraatio tiedosto (esimerkiksi):
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/dhcpd.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;"># No DHCP service in DMZ network (192.168.2.0/24)
subnet 192.168.2.0 netmask 255.255.255.0 {
}
</pre>
<h4><span class="mw-headline" id="Palvelu_tiedosto">Palvelu tiedosto</span></h4>
<p>Ei ole olemassa palvelu tiedostoja oletukselta, jotka käyttävät <i>dhcpd:tä</i> vain yhdessä käyttöliittymässä, jolloin sellainen pitää luoda. Aloita kopioimalla jo olemassa oleva palvelu:
</p>
<pre># cp /usr/lib/systemd/system/dhcpd4.service /etc/systemd/system/dhcpd4@.service
</pre>
<p>Sen jälkeen muokkaa ExecStart riviä sisältämään käyttöliittymä:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/system/dhcpd4@.service</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">...
[Service]
...
ExecStart=/usr/bin/dhcpd -4 -q -cf /etc/dhcpd.conf -pf /run/dhcpd4/dhcpd.pid %I
...
</pre>
<p>Tämä on mallinne yksikkö, joka sitoo sen erityiseen käyttöliittymään, esimerkiksi <code>dhcpd4@<i>eth0</i>.service</code> missä <i>eth0</i> on käyttöliittymä, jonka näkee komennolla <code>ip link</code>.
</p>
<h3>
<span id="K.C3.A4ytt.C3.B6_PXE:lle"></span><span class="mw-headline" id="Käyttö_PXE:lle">Käyttö PXE:lle</span>
</h3>
<p>PXE konfiguraatio tehdään kahdella seuraavalla asetuksella:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/dhcpd.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">next-server 192.168.0.2;
tiedostonimi "/pxelinux.0";
</pre>
<p>Tämä osa voi olla kokonaisuudessa <code>subnet</code> tai vain <code>host</code> määritelmässä. <code>next-server</code> on TFTP palvelimen IP, ja <code>tiedostonimi</code> on tiedoston nimi kuvasta josta bootataan. Enemmän tietoa löytyy <a href="../en/Preboot_Execution_Environment.html" class="mw-redirect" title="PXE">PXE</a> artikkelista.
</p>
<h2>
<span id="Katso_my.C3.B6s"></span><span class="mw-headline" id="Katso_myös">Katso myös</span>
</h2>
<ul><li><a rel="nofollow" class="external text" href="https://kb.isc.org/docs/aa-00333">ISC DHCP Dokumentaatio</a></li></ul>
</div>
</div>
<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../fi/Category:DHCP.html" title="Category:DHCP (Suomi)">DHCP (Suomi)</a></li></ul>
</div></div>
	</div>
</div>

<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
		<li>Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Dhcpd_(Suomi)&amp;oldid=646098">https://wiki.archlinux.org/index.php?title=Dhcpd_(Suomi)&amp;oldid=646098</a>"</li>
		<li id="footer-info-lastmod"> This page was last edited on 20 December 2020, at 16:16.</li>
		<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
	<br>
</ul>
	<ul id="footer-places">
		<li id="footer-places-privacy"><a href="../en/ArchWiki:Privacy_policy.html" title="ArchWiki:Privacy policy">Privacy policy</a></li>
		<li id="footer-places-about"><a href="../en/ArchWiki:About.html" title="ArchWiki:About">About ArchWiki</a></li>
		<li id="footer-places-disclaimer"><a href="../en/ArchWiki:General_disclaimer.html" title="ArchWiki:General disclaimer">Disclaimers</a></li>
	</ul>
	<ul id="footer-icons" class="noprint">
		<li id="footer-copyrightico">
	</ul>
	<div style="clear: both;"></div>
</footer>



</body>
</html>
