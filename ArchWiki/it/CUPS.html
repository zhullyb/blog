<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>CUPS (Italiano) - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.35.0">
<meta name="robots" content="noindex,follow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="http://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-CUPS_Italiano rootpage-CUPS_Italiano skin-vector action-view skin-vector-legacy">
<div id="content" class="mw-body" role="main" style="margin: 0">
	<a id="top"></a>
	<div id="siteNotice" class="mw-body-content"></div>
	<div class="mw-indicators mw-body-content">
	</div>
	<h1 id="firstHeading" class="firstHeading" lang="en">CUPS (Italiano)</h1>
	<div id="bodyContent" class="mw-body-content">
		<div id="siteSub" class="noprint">From ArchWiki</div>
		<div id="contentSub"></div>
		<div id="contentSub2"></div>
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="#searchInput">Jump to search</a>
		<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr">
<div class="warningbox">The printable version is no longer supported and may have rendering errors. Please update your browser bookmarks and please use the default browser print function instead.</div>
<div class="mw-parser-output">
<div class="archwiki-template-meta-related-articles-start">
<p>Articoli correlati</p>
<ul>
<li><a href="../en/CUPS/Printer_sharing.html" class="mw-redirect" title="CUPS printer sharing">CUPS printer sharing</a></li>
<li><a href="../en/CUPS/Printer-specific_problems.html" class="mw-redirect" title="CUPS printer-specific problems">CUPS printer-specific problems</a></li>
<li><a href="../it/Samba.html" title="Samba (Italiano)">Samba (Italiano)</a></li>
</ul>
</div>
<p>Dal sito di <a rel="nofollow" class="external text" href="https://www.cups.org/">CUPS</a><sup>[<a href="https://en.wikipedia.org/wiki/Wikipedia:Link_rot" class="extiw" title="wikipedia:Wikipedia:Link rot">link interrotto</a> 2020-08-02]</sup>:
</p>
<dl><dd>"<i><a href="https://en.wikipedia.org/wiki/it:CUPS" class="extiw" title="wikipedia:it:CUPS">CUPS</a> è il sistema di stampa, standard e open source, sviluppato da Apple Inc. per Mac OS® X e altri sistemi operativi UNIX®-like.</i>"</dd></dl>
<p>Anche se ci sono altri sistemi di stampa come LPRNG, il Common Unix Printing System è la scelta più popolare per la sua relativa facilità d'uso.
</p>
<div id="toc" class="toc" role="navigation" aria-labelledby="mw-toc-heading">
<input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none"><div class="toctitle" lang="en" dir="ltr">
<h2 id="mw-toc-heading">Contents</h2>
<span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span>
</div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Cups_Linux_Printing_workflow"><span class="tocnumber">1</span> <span class="toctext">Cups Linux Printing workflow</span></a></li>
<li class="toclevel-1 tocsection-2">
<a href="#Installare_il_client"><span class="tocnumber">2</span> <span class="toctext">Installare il client</span></a>
<ul>
<li class="toclevel-2 tocsection-3"><a href="#Configurazione_avanzata_della_rete"><span class="tocnumber">2.1</span> <span class="toctext">Configurazione avanzata della rete</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-4">
<a href="#Installare_il_server"><span class="tocnumber">3</span> <span class="toctext">Installare il server</span></a>
<ul>
<li class="toclevel-2 tocsection-5">
<a href="#Driver_per_la_stampante"><span class="tocnumber">3.1</span> <span class="toctext">Driver per la stampante</span></a>
<ul>
<li class="toclevel-3 tocsection-6"><a href="#Scaricare_il_PPD_della_stampante"><span class="tocnumber">3.1.1</span> <span class="toctext">Scaricare il PPD della stampante</span></a></li>
<li class="toclevel-3 tocsection-7"><a href="#Un'altra_risorsa_per_i_driver"><span class="tocnumber">3.1.2</span> <span class="toctext">Un'altra risorsa per i driver</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1 tocsection-8">
<a href="#Configurazione_e_supporto_hardware"><span class="tocnumber">4</span> <span class="toctext">Configurazione e supporto hardware</span></a>
<ul>
<li class="toclevel-2 tocsection-9">
<a href="#Moduli_del_kernel"><span class="tocnumber">4.1</span> <span class="toctext">Moduli del kernel</span></a>
<ul>
<li class="toclevel-3 tocsection-10"><a href="#Stampanti_USB"><span class="tocnumber">4.1.1</span> <span class="toctext">Stampanti USB</span></a></li>
<li class="toclevel-3 tocsection-11"><a href="#Auto-loading"><span class="tocnumber">4.1.2</span> <span class="toctext">Auto-loading</span></a></li>
<li class="toclevel-3 tocsection-12"><a href="#Stampanti_con_porta_parallela"><span class="tocnumber">4.1.3</span> <span class="toctext">Stampanti con porta parallela</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-13"><a href="#Stampanti_HP"><span class="tocnumber">4.2</span> <span class="toctext">Stampanti HP</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-14">
<a href="#Configurazione"><span class="tocnumber">5</span> <span class="toctext">Configurazione</span></a>
<ul>
<li class="toclevel-2 tocsection-15"><a href="#Avviare_CUPS_al_boot"><span class="tocnumber">5.1</span> <span class="toctext">Avviare CUPS al boot</span></a></li>
<li class="toclevel-2 tocsection-16">
<a href="#Interfaccia_web_e_strumenti"><span class="tocnumber">5.2</span> <span class="toctext">Interfaccia web e strumenti</span></a>
<ul>
<li class="toclevel-3 tocsection-17"><a href="#Amministrazione_di_CUPS"><span class="tocnumber">5.2.1</span> <span class="toctext">Amministrazione di CUPS</span></a></li>
<li class="toclevel-3 tocsection-18"><a href="#Accesso_remoto_all'interfaccia_web"><span class="tocnumber">5.2.2</span> <span class="toctext">Accesso remoto all'interfaccia web</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-19"><a href="#Configurazione_CLI"><span class="tocnumber">5.3</span> <span class="toctext">Configurazione CLI</span></a></li>
<li class="toclevel-2 tocsection-20"><a href="#Interfaccia_CUPS_di_GNOME"><span class="tocnumber">5.4</span> <span class="toctext">Interfaccia CUPS di GNOME</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-21">
<a href="#Stampante_virtuale_PDF"><span class="tocnumber">6</span> <span class="toctext">Stampante virtuale PDF</span></a>
<ul>
<li class="toclevel-2 tocsection-22"><a href="#Stampare_su_Postscript"><span class="tocnumber">6.1</span> <span class="toctext">Stampare su Postscript</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-23">
<a href="#Risoluzione_dei_Problemi"><span class="tocnumber">7</span> <span class="toctext">Risoluzione dei Problemi</span></a>
<ul>
<li class="toclevel-2 tocsection-24">
<a href="#Problemi_legati_all'aggiornamento"><span class="tocnumber">7.1</span> <span class="toctext">Problemi legati all'aggiornamento</span></a>
<ul>
<li class="toclevel-3 tocsection-25"><a href="#CUPS_smette_di_funzionare"><span class="tocnumber">7.1.1</span> <span class="toctext">CUPS smette di funzionare</span></a></li>
<li class="toclevel-3 tocsection-26"><a href="#Tutti_i_lavori_sono_%22fermati%22"><span class="tocnumber">7.1.2</span> <span class="toctext">Tutti i lavori sono "fermati"</span></a></li>
<li class="toclevel-3 tocsection-27"><a href="#Tutti_i_lavori_convergono_in_un_%22The_printer_is_not_responding%22"><span class="tocnumber">7.1.3</span> <span class="toctext">Tutti i lavori convergono in un "The printer is not responding"</span></a></li>
<li class="toclevel-3 tocsection-28"><a href="#La_versione_PPD_non_%C3%A8_compatibile_con_gutenprint"><span class="tocnumber">7.1.4</span> <span class="toctext">La versione PPD non è compatibile con gutenprint</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-29">
<a href="#Altro"><span class="tocnumber">7.2</span> <span class="toctext">Altro</span></a>
<ul>
<li class="toclevel-3 tocsection-30"><a href="#Errori_di_permessi_CUPS"><span class="tocnumber">7.2.1</span> <span class="toctext">Errori di permessi CUPS</span></a></li>
<li class="toclevel-3 tocsection-31"><a href="#La_stampante_HPLIP_invia_come_errore_%22/usr/lib/cups/backend/hp_failed%22"><span class="tocnumber">7.2.2</span> <span class="toctext">La stampante HPLIP invia come errore "/usr/lib/cups/backend/hp failed"</span></a></li>
<li class="toclevel-3 tocsection-32"><a href="#HPLIP_tutti_i_lavori_vengono_segnati_come_ultimati_ma_non_si_%C3%A8_riusciti_a_stampare_niente"><span class="tocnumber">7.2.3</span> <span class="toctext">HPLIP tutti i lavori vengono segnati come ultimati ma non si è riusciti a stampare niente</span></a></li>
<li class="toclevel-3 tocsection-33"><a href="#hp-toolbox_invia_come_errore,_%22Unable_to_communicate_with_device%22"><span class="tocnumber">7.2.4</span> <span class="toctext">hp-toolbox invia come errore, "Unable to communicate with device"</span></a></li>
<li class="toclevel-3 tocsection-34"><a href="#CUPS_risponde_'%22foomatic-rip%22_not_available/stopped_with_status_3'_con_una_stampante_HP"><span class="tocnumber">7.2.5</span> <span class="toctext">CUPS risponde '"foomatic-rip" not available/stopped with status 3' con una stampante HP</span></a></li>
<li class="toclevel-3 tocsection-35"><a href="#La_stampa_fallisce_segnalando_errori_di_autorizzazione"><span class="tocnumber">7.2.6</span> <span class="toctext">La stampa fallisce segnalando errori di autorizzazione</span></a></li>
<li class="toclevel-3 tocsection-36"><a href="#Pulsante_Stampa_bloccato_nelle_applicazioni_GNOME"><span class="tocnumber">7.2.7</span> <span class="toctext">Pulsante Stampa bloccato nelle applicazioni GNOME</span></a></li>
<li class="toclevel-3 tocsection-37"><a href="#Formato_supportato_sconosciuto:_application/postscript"><span class="tocnumber">7.2.8</span> <span class="toctext">Formato supportato sconosciuto: application/postscript</span></a></li>
<li class="toclevel-3 tocsection-38"><a href="#Trovare_gli_URI_per_i_server_di_stampa_Windows"><span class="tocnumber">7.2.9</span> <span class="toctext">Trovare gli URI per i server di stampa Windows</span></a></li>
<li class="toclevel-3 tocsection-39"><a href="#Errore_di_stampa_client-error-document-format-not-supported"><span class="tocnumber">7.2.10</span> <span class="toctext">Errore di stampa client-error-document-format-not-supported</span></a></li>
<li class="toclevel-3 tocsection-40"><a href="#Errore_/usr/lib/cups/backend/hp"><span class="tocnumber">7.2.11</span> <span class="toctext">Errore /usr/lib/cups/backend/hp</span></a></li>
<li class="toclevel-3 tocsection-41"><a href="#%22Unable_to_get_list_of_printer_drivers%22"><span class="tocnumber">7.2.12</span> <span class="toctext">"Unable to get list of printer drivers"</span></a></li>
<li class="toclevel-3 tocsection-42"><a href="#lp:_Error_-_Scheduler_Not_Responding"><span class="tocnumber">7.2.13</span> <span class="toctext">lp: Error - Scheduler Not Responding</span></a></li>
<li class="toclevel-3 tocsection-43"><a href="#CUPS_stampa_una_pagina_vuota_e_una_di_errore_con_HP_Laserjet"><span class="tocnumber">7.2.14</span> <span class="toctext">CUPS stampa una pagina vuota e una di errore con HP Laserjet</span></a></li>
<li class="toclevel-3 tocsection-44"><a href="#Errore:_%22Using_invalid_Host%22"><span class="tocnumber">7.2.15</span> <span class="toctext">Errore: "Using invalid Host"</span></a></li>
<li class="toclevel-3 tocsection-45"><a href="#La_stampante_non_lavora_e_restituisce_come_errore_%22Filter_Failed%22_sull'interfaccia_web_di_CUPS"><span class="tocnumber">7.2.16</span> <span class="toctext">La stampante non lavora e restituisce come errore "Filter Failed" sull'interfaccia web di CUPS</span></a></li>
<li class="toclevel-3 tocsection-46"><a href="#La_stampante_non_viene_riconosciuta_da_cups"><span class="tocnumber">7.2.17</span> <span class="toctext">La stampante non viene riconosciuta da cups</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1 tocsection-47"><a href="#Vedere_anche"><span class="tocnumber">8</span> <span class="toctext">Vedere anche</span></a></li>
</ul>
</div>

<h2><span class="mw-headline" id="Cups_Linux_Printing_workflow">Cups Linux Printing workflow</span></h2>
<p>Dalla versione 1.5.3-3 di <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=cups">cups</a></span>, Arch Linux fa uso del nuovo sistema di stampa completamente pdf-based. Per ulteriori informazioni leggere <a rel="nofollow" class="external text" href="http://www.linuxfoundation.org/collaborate/workgroups/openprinting/pdfasstandardprintjobformat">PDF standard printing job format</a> e <a rel="nofollow" class="external text" href="https://wiki.linuxfoundation.org/en/OpenPrinting/Database/CUPS-Filter-Chart">Cups filtering chart</a>. Un ottimo punto di partenza per capire meglio come viene gestito l'intero processo di stampa è <a rel="nofollow" class="external text" href="http://www.linuxfoundation.org/collaborate/workgroups/openprinting">questo articolo</a>.
</p>
<p>Ci sono due modi per configurare una stampante:
</p>
<ul>
<li>Se nella propria rete è presente un server linux per la stampa che condivide una stampante, sarà necessario installare solo il client.</li>
<li>Se la stampante è collegata direttamente al proprio sistema, o si ha accesso IPP alla stampante, sarà necessario installare un server cups localmente.</li>
</ul>
<h2><span class="mw-headline" id="Installare_il_client">Installare il client</span></h2>
<p><span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=libcups">libcups</a></span> è il solo pacchetto necessario ed è possibile installarlo con <a href="../it/Pacman.html" title="Pacman (Italiano)">pacman</a>.
Aggiungere ora l'IP del server o l'hostname nel file <code>/etc/cups/client.conf</code>. Finito! Ora ogni applicazione rileverà la stampante condivisa correttamente.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> Non è chiaro se questo passaggio funzioni correttamente con cups &gt; 1.6.x, per maggiori informazioni vedere la pagina wiki <a href="../en/CUPS/Printer_sharing.html" class="mw-redirect" title="CUPS printer sharing">CUPS printer sharing</a>.</div>
<h3><span class="mw-headline" id="Configurazione_avanzata_della_rete">Configurazione avanzata della rete</span></h3>
<p>È possibile lanciare l'istanza <i>cupsd</i>+<i>cups-browserd</i> sul proprio client con l'aiuto di <a href="../en/Avahi.html" title="Avahi">Avahi</a> per rintracciare l'IP della stampante. Tale operazione non ha senso che venga svolta su una rete domestica dove si presuppone si conosca a priori la posizione della stampante. Può invece essere molto utile in caso di grandi reti lan, dove IP e hostname della stampante sono ignoti.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> Questa caratteristica non è cambiata dalle precedenti versioni di <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=cups">cups</a></span> (&lt;1.6.x). L'unica differenza infatti è che fino a CUPS 1.5.x l'interfaccia web non necessitava del demone <a href="../en/Avahi.html" title="Avahi">avahi</a>. Per poter cercare con il browser le stampanti condivise della rete da un server cups remoto è necessario avviare anche <i>cups-browserd</i> (da cups-filters =&lt; 1.0.26).</div>
<h2><span class="mw-headline" id="Installare_il_server">Installare il server</span></h2>
<p>Sono richiesti i seguenti pacchetti che sono tutti <a href="../it/Pacman.html" title="Pacman (Italiano)">installabili</a> dai <a href="../it/Official_repositories.html" title="Official repositories (Italiano)">repositories ufficiali</a>.
</p>
<ul>
<li>
<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=cups">cups</a></span> - Il software CUPS vero e proprio (demone)</li>
<li>
<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=ghostscript">ghostscript</a></span> - L'interprete per il linguaggio PostScript</li>
<li>
<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=gsfonts">gsfonts</a></span> - I font standard GhostScript Type1</li>
</ul>
<p>Per poter usare le stampanti in rete è necessario installare <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=avahi">avahi</a></span>. Assicurarsi che <b>avahi-demon</b> prima di <b>cupsd</b>. 
</p>
<p>Se il sistema è collegato ad una stampante di rete utilizzando il protocollo <a href="../it/Samba.html" title="Samba (Italiano)">Samba</a> o se il sistema deve essere un server di stampa per i client Windows, installare anche <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=samba">samba</a></span>.
</p>
<h3><span class="mw-headline" id="Driver_per_la_stampante">Driver per la stampante</span></h3>
<p>Di seguito alcuni pacchetti per i driver. Scegliere il driver appropriato per la stampante da configurare:
</p>
<ul>
<li>
<b><span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=gutenprint">gutenprint</a></span></b> - Una raccolta di driver di alta qualità per stampanti Canon, Epson, Lexmark, Sony, Olympus, e PCL per l'utilizzo con GhostSscript, CUPS, Foomatic, e <a href="../en/GIMP.html" title="GIMP">GIMP</a>
</li>
<li>
<b><span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=foomatic-db">foomatic-db</a></span>, <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=foomatic-db-engine">foomatic-db-engine</a></span>, <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=foomatic-db-nonfree">foomatic-db-nonfree</a></span>, e <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=cups-filters">cups-filters</a></span></b> - Foomatic è un sistema basato su database per l'integrazione di driver liberi di stampanti con spooler comune in ambiente Unix. L'installazione di foomatic-filters dovrebbe risolvere eventuali problemi se gli errori nei log riportano "stopped with status 22!".</li>
<li>
<b><span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/foo2zjs/">foo2zjs</a></span><sup><small>AUR</small></sup><sup>[<a href="../en/Help:Procedures.html#Fix_broken_package_links" title="Help:Procedures">broken link</a>: package not found]</sup></b>- Driver per il protocollo Zjstreame usato dalle stampanti come la HP Laserjet 1018. Per maggiori informazioni visitare <a rel="nofollow" class="external text" href="http://foo2zjs.rkkda.com">questo sito</a>. Foo2zsj è installabile da <a href="../it/Arch_User_Repository.html" class="mw-redirect" title="AUR (Italiano)">AUR</a>.</li>
<li>
<b><span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=hplip">hplip</a></span></b> - Driver GNU/Linux per HP inkjet. Fornisce supporto per le serie DeskJet, OfficeJet, Photosmart, Business Inkjet, alcuni modelli LaserJet e alcune Brother.</li>
<li>
<b><span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=splix">splix</a></span></b> - Driver Samsung per stampanti SPL (Samsung Printer Language).</li>
<li><b><span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/samsung-unified-driver/">samsung-unified-driver</a></span><sup><small>AUR</small></sup> - Pacchetto unico per le nuove stampanti Samsung. Tale pacchetto è disponibile su <a href="../it/Arch_User_Repository.html" class="mw-redirect" title="AUR (Italiano)">AUR</a>.</b></li>
<li>
<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/hpoj/">hpoj</a></span><sup><small>AUR</small></sup> - Se si utilizza una HP Officejet, si dovrebbe installare anche questo pacchetto e seguire le istruzioni per evitare problemi. Leggere questo <a rel="nofollow" class="external text" href="https://answers.launchpad.net/hplip/+question/133425">thread</a> su launchpad/hplip per maggiori informazioni.</li>
<li>
<b><span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/ufr2/">ufr2</a></span><sup><small>AUR</small></sup><sup>[<a href="../en/Help:Procedures.html#Fix_broken_package_links" title="Help:Procedures">broken link</a>: package not found]</sup></b> or <b><span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/cndrvcups-lb/">cndrvcups-lb</a></span><sup><small>AUR</small></sup></b> - Driver Canon UFR2 con supporto per le stampanti serie LBP, iR e MF. I pacchetti sono disponibili su <a href="../it/Arch_User_Repository.html" class="mw-redirect" title="AUR (Italiano)">AUR</a>.</li>
<li>
<b><span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=cups-pdf">cups-pdf</a></span></b> - Un pacchetto che permette di configurare una stampante PDF virtuale e che genera un file PDF dai dati ricevuti in modo automatico.</li>
</ul>
<p>Se non si è sicuri di quale driver installare o se l'attuale driver non funziona, può essere più semplice installare tutti i driver, dal momento che alcuni dei nomi dei pacchetti sono fuorvianti, in quanto anche stampanti di altre marche possono essere supportate. Per esempio, la Brother HL-2140 ha bisogno del driver HPLIP installato.
</p>
<h4><span class="mw-headline" id="Scaricare_il_PPD_della_stampante">Scaricare il PPD della stampante</span></h4>
<p>A seconda della stampante, questo passo è opzionale e potrebbe non essere necessario, dal momento che l'installazione standard di CUPS include già un certo numero di file PPD (Postscript Printer Description). Inoltre, i pacchetti <i>foomatic-filters</i>, <i>gimp-print</i> e <i>hplip</i> includono a loro volta dei file PPD, che verranno rilevati automaticamente da CUPS.
</p>
<p>Ecco una spiegazione dal sito di stampa di Linux sul significato dei file PPD:
</p>
<dl><dd>"<i>Per ogni  PostScript di una stampante, i costruttori forniscono un file PPD, che contiene tutte le informazioni specifiche del particolare modello della stampante: caratteristiche di base della stampante, come ad esempio se è una stampante a colori, i caratteri, il livello PostScript, ecc, e soprattutto le opzioni configurabili dall'utente , la dimensione della carta, la risoluzione, ecc.</i>"</dd></dl>
<p>Se il PPD per la stampante <i>non</i> è già incluso in CUPS:
</p>
<ul>
<li>controllare su <a href="../it/Arch_User_Repository.html" class="mw-redirect" title="AUR (Italiano)">AUR</a> per verificare se ci sono i pacchetti per la stampante e/o produttore</li>
<li>visitare il database <a rel="nofollow" class="external text" href="http://www.openprinting.org/printers">OpenPrinting</a> e selezionare il produttore e il modello della stampante</li>
<li>visitare il sito del produttore per effettuare una ricerca dei driver per GNU/Linux</li>
</ul>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> I file PPD sono ubicati in <code>/usr/share/cups/model/</code>
</div>
<h4>
<span id="Un.27altra_risorsa_per_i_driver"></span><span class="mw-headline" id="Un'altra_risorsa_per_i_driver">Un'altra risorsa per i driver</span>
</h4>
<p><a rel="nofollow" class="external text" href="http://www.turboprint.de/english.html">Turboprint</a> è una raccolta di driver proprietari per stampanti che normalmente non avrebbero alcun supporto su GNU/Linux (Canon i*, per esempio). Sfortunatamente CUPS, magari, "marchia" con il logo di Turboprint le stampe ad alta qualità agli utenti che non hanno pagato i driver.
</p>
<h2><span class="mw-headline" id="Configurazione_e_supporto_hardware">Configurazione e supporto hardware</span></h2>
<p>Si può avere accesso alle stampanti USB in due modi : il modulo del kernel <code>usbpl</code> e <code>lilusb</code>. Il primo è il metodo classico ed è il più semplice. I dati vengono inviati alla stampante tramite un semplice stream di dati seriali. Lo stesso file ha un accesso "bidirezionale", in modo da consentire di vedere il livello di inchiostro, lo status della stampante ecc. Questo metodo funziona molto bene per le stampanti semplici, non son però supportate stampanti multifunzione, inoltre, alcuni produttori come ad esempio HP forniscono i loro backend. (Per maggiori informazioni cosultare: <a rel="nofollow" class="external text" href="http://lists.linuxfoundation.org/pipermail/printing-architecture/2012/002412.html">questo sito</a>).
</p>
<h3><span class="mw-headline" id="Moduli_del_kernel">Moduli del kernel</span></h3>
<p>Prima di utilizzare l'interfaccia web di CUPS, si devono installare i moduli del kernel. Le seguenti operazioni sono tratte dalla documentazione di Gentoo.
</p>
<p>Questa sezione può non essere necessaria a seconda del kernel utilizzato. Il modulo del kernel può essere caricato automaticamente dopo aver collegato la stampante. Utilizzare il comando <code>tail</code> (descritto più sotto) per vedere se la stampante è già stata rilevata. Anche l'utilità <code>lsmod</code> può essere utilizzata per vedere quali moduli sono stati caricati.
</p>
<h4><span class="mw-headline" id="Stampanti_USB">Stampanti USB</span></h4>
<p><b>Dalla versione 1.6.0 di cups, non dovrebbe più essere necessario blacklistare <code>usblp</code>.</b> Se si dovesse notare che mettere in blacklist tale modulo fosse l'unica soluzione ad un problema, si prega di riportare un bug all'upstream di Cups. Vedere <a rel="nofollow" class="external text" href="https://github.com/apple/cups/issues/4128">questo bug</a> per maggiori informazioni.
</p>
<p>Alcuni utenti, potrebbero comunque ancora voler mettere in blacklist il modulo <code>usblp</code>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/modprobe.d/blacklist.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">blacklist usblp</pre>
<p>Per i kernel personalizzati, potrebbe essere necessario caricare manualmente il modulo <code>usbcore</code> prima di procedere:
</p>
<pre># modprobe usbcore
</pre>
<p>Una volta che i moduli sono installati, collegare la stampante e controllare se il kernel li ha rilevati eseguendo il seguente:
</p>
<pre># tail /var/log/messages.log
</pre>
<p>o
</p>
<pre># dmesg
</pre>
<p>Se si sta utilizzando <code>usblp</code>, l'uscita dovrebbe indicare che la stampante è stata rilevata in questo modo:
</p>
<pre>Feb 19 20:17:11 kernel: printer.c: usblp0: USB Bidirectional
printer dev 2 if 0 alt 0 proto 2 vid 0x04E8 pid 0x300E
Feb 19 20:17:11 kernel: usb.c: usblp driver claimed interface cfef3920
Feb 19 20:17:11 kernel: printer.c: v0.13: USB Printer Device Class driver
</pre>
<p>Se si ha inserito <code>usblp</code> in blacklist, dovrebbe venir restituito un output simile a:
</p>
<pre>usb 3-2: new full speed USB device using uhci_hcd and address 3
usb 3-2: configuration #1 chosen from 1 choice
</pre>
<h4><span class="mw-headline" id="Auto-loading">Auto-loading</span></h4>
<p>Per caricare automaticamente al boot i moduli necessari creare il file <code>/etc/modules-load.d/printing.conf</code> che contenga:
</p>
<pre>lp
parport
parport_pc
</pre>
<h4><span class="mw-headline" id="Stampanti_con_porta_parallela">Stampanti con porta parallela</span></h4>
<p>Per l'utilizzo delle stampanti con parallela porta, si noti che la configurazione è praticamente la stessa, fatta eccezione per i moduli:
</p>
<pre># modprobe lp
# modprobe parport
# modprobe parport_pc
</pre>
<p>Ancora una volta, controllare l'installazione eseguendo:
</p>
<pre># tail /var/log/messages.log
</pre>
<p>Si dovrebbe vedere qualcosa del genere:
</p>
<pre>lp0: using parport0 (polling).
</pre>
<p>Se si utilizza un adattatore USB per porta parallela, CUPS non sarà in grado di rilevare la stampante. Per risolvere il problema, aggiungere la stampante tramite un altro tipo di connessione e quindi modificare il DeviceID in <code>/etc/cups/printers.conf</code>:
</p>
<pre>DeviceID = parallel:/dev/usb/lp0
</pre>
<h3><span class="mw-headline" id="Stampanti_HP">Stampanti HP</span></h3>
<p>Le stampanti HP possono essere settate su Linux tramtite un proprio tool. (Sono necessari <code>python-qt2</code> <code>pygobject</code>).
</p>
<p>Se si vuole usare il front-end in QT lanciare in un terminale:
</p>
<pre># hp-setup -u
</pre>
<p>Se si vuole usare il front-end CLI lanciare in un terminale:
</p>
<pre># hp-setup -i
</pre>
<h2><span class="mw-headline" id="Configurazione">Configurazione</span></h2>
<p>Ora che CUPS è installato, ci sono una varietà di opzioni su come configurare le soluzioni di stampa. Come sempre, il collaudato metodo da riga di comando è a disposizione. Allo stesso modo, diversi ambienti desktop come GNOME e KDE dispongono di utilità che possono aiutare a gestire le stampanti. Tuttavia, al fine di rendere questo processo più facile per un più vasto numero di utenti, questo articolo si focalizzerà sul metodo dell'interfaccia web di CUPS.
</p>
<p>Se si pianifica un collegamento ad una stampante di rete, piuttosto che un collegamento diretto al computer, si potrebbe leggere per prima la pagina <a href="../en/CUPS/Printer_sharing.html" class="mw-redirect" title="CUPS printer sharing">CUPS printer sharing</a>. La condivisione della stampante tra sistemi GNU/Linux è abbastanza semplice e prevede poche configurazioni, mentre la condivisione tra sistemi Windows e GNU/Linux richiede qualche sforzo in più.
</p>
<h3><span class="mw-headline" id="Avviare_CUPS_al_boot">Avviare CUPS al boot</span></h3>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Dalla versione di <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=cups">cups</a></span> 2.0.0, il servizio è stato rinominato in <code>org.cups.cupsd.socket</code>.
<p>Dopo aver installato cups, basterà abilitare e lanciare il servizio come qualsiasi demone gestito da systemd.
</p>
Se passate da una versione precedente, ricordatevi di disabilitare il servizio cups, per non lasciare link morti nell'alberatura di systemd.</div>
<p>L'integrazione con Avahi per il discover delle stampanti in lan è ora gestito come servizio separato, e può essere avviato ed abilitato utilizzando il nome del servizio: <code>cups-browsed.service</code>.
</p>
<h3><span class="mw-headline" id="Interfaccia_web_e_strumenti">Interfaccia web e strumenti</span></h3>
<p>Una volta avviato il demone, aprire un brower ed inserire nella barra dell'indirizzo:  <a rel="nofollow" class="external free" href="http://localhost:631">http://localhost:631</a> (<i>Al posto di <b>localhost</b> può essere necessario inserire il nome host presente in</i> <code>/etc/hostname</code>.
</p>
<p>A questo punto. seguire le varie procedure guidate per aggiungere la stampante. Una procedura consueta è quella di iniziare facendo click sul pulsante <i>Aggiungere stampanti e classi</i> e poi su <i>Aggiungi Stampante</i>. Quando vengono richieste le credenziali inserire quelle di root. Il nome assegnato alla stampante non è rilevante, come i campi "ubicazione"' e "descrizione". Successivamente si presenterà un elenco di stampanti tra cui scegliere. L'attuale nome della stampante sarà presente vicino all'etichetta (ad esempio <i>USB Printer #1</i> per le stampanti USB). Infine selezionare il driver appropriato per completare la configurazione.
</p>
<p>Ora, testare la configurazione premendo il menù a discesa <i>Amministrazione</i> e scegliere <i>Stampa pagina di prova</i>. Se non stampa e le configurazioni sono corrette, probabilmente il driver selezionato non è quello appropriato.
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong>  Vedere <a href="#Interfacce_alternative_per_CUPS">#Interfacce alternative per CUPS</a><sup>[<a href="../en/Help:Procedures.html#Fix_broken_section_links" title="Help:Procedures">broken link</a>: invalid section]</sup> per altri tipi di interfaccia.</div>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong>  Quando si configura una stampante USB, essa dovrebbe essere elncata nella pagina <i>Aggiungi Stampante</i>. Se è invece elencata solo una "Stampante SCSI", probabilmente CUPS ha fallito nel riconoscere la stampante.</div>
<h4><span class="mw-headline" id="Amministrazione_di_CUPS">Amministrazione di CUPS</span></h4>
<p>Per poter amministrare le stampanti tramite l'interfaccia web è necessario fornire un nome utente e la password, ad esempio: per aggiungere o rimuovere stampanti, per interrompere i processi di stampa eccetera. L'utente di default è quello appartenente al gruppo <i>sys</i> oppure root (per cambiare il gruppo modificare <code>/etc/cups/cupsd.conf</code> alla riga <i>SystemGroup</i>).
</p>
<p>Se l'utente root è stato bloccato (per esempio se si usa solo <code>sudo</code>), non sarà possibile accedere all'interfaccia di amministrazione con il proprio utente e password. In questo caso seguire quanto descritto <a rel="nofollow" class="external text" href="http://www.cups.org/articles.php?L237+T+Qprintadmin">nelle faq</a><sup>[<a href="https://en.wikipedia.org/wiki/Wikipedia:Link_rot" class="extiw" title="wikipedia:Wikipedia:Link rot">link interrotto</a> 2020-08-02]</sup> di CUPS e leggere <a rel="nofollow" class="external text" href="https://bbs.archlinux.org/viewtopic.php?id=35567">questo post sul forum internazionale</a>.
</p>
<h4>
<span id="Accesso_remoto_all.27interfaccia_web"></span><span class="mw-headline" id="Accesso_remoto_all'interfaccia_web">Accesso remoto all'interfaccia web</span>
</h4>
<p>Di default, l'interfaccia web di configurazione di CUPS è accessibile solo da <i>localhost</i>; cioè dal computer su cui è installato. Per consentire l'accesso da remoto, sarà necessario effettuare le seguenti modifiche al file <code>/etc/cups/cupsd.conf</code>. Sostituire la seguente riga:
</p>
<pre>Listen localhost:631
</pre>
<p>con
</p>
<pre>port 631
</pre>
<p>così che CUPS stia in ascolto anche per le richieste esterne.
</p>
<p>Ci sono tre livelli di accesso che possono essere garantiti:
</p>
<pre>&lt;Location /&gt;           #accesso al server
&lt;Location /admin&gt;	#accesso alla pagina di amministrazione
&lt;Location /admin/conf&gt;	#accesso alla pagina di configurazione
</pre>
<p>Per concedere ad un host remoto di accedere ad uno di questi tre livelli si dovrà aggiungere una regola di <code>Allow</code> (concessione dell'accesso) per il relativo livello. Una regola di <code>Allow</code> può essere formulata in diversi modi, ad esempio:
</p>
<pre>Allow all
Allow host.domain.com
Allow *.domain.com
Allow ip-address
Allow ip-address/netmask
</pre>
<p>Possono essere usate le regole di accesso negato (<code>Deny</code>), se si intende dare agli host della rete 192.168.1.0/255.255.255.0 il pieno accesso, il file <code>/etc/cups/cupsd.conf</code> includerà le seguenti linee:
</p>
<pre># Limita l'accesso al server....
# Il default permette solo a locahost di accedre
&lt;Location /&gt;
   Order allow,deny
   Allow From localhost
   <b>Allow From 192.168.1.0/255.255.255.0</b>
&lt;/Location&gt;

# Limita l'accesso alla pagina di amministrazione...
&lt;Location /admin&gt;
   # La cifratura è disbilitata di default
   #Encryption Required
   Order allow,deny
   Allow From localhost
   <b>Allow From 192.168.1.0/255.255.255.0</b>
&lt;/Location&gt;

# Limita l'accesso alla pagina di configurazione...
&lt;Location /admin/conf&gt;
   AuthType Basic
   Require user @SYSTEM
   Order allow,deny
   Allow From localhost
   <b>Allow From 192.168.1.0/255.255.255.0</b>
&lt;/Location&gt;
</pre>
<p>Potrebbe anche essere necessario aggiungere:
</p>
<pre>DefaultEncryption Never
</pre>
<p>Questo dovrebbe evitare l'errore: 426 - L'aggiornamento è obbligatorio quando si utilizza l'interfaccia web di CUPS da una macchina remota.
</p>
<h3><span class="mw-headline" id="Configurazione_CLI">Configurazione CLI</span></h3>
<p>CUPS può essere interamente controllato via riga di comando.
</p>
<p>Su Arch Linux, le più comuni shell permettono l'autocompletamento.
Notare però che gli switches non possono essere raggruppati.
</p>
<dl><dt>Lista dei devices</dt></dl>
<pre># lpinfo -v
</pre>
<dl><dt>Lista dei driver</dt></dl>
<pre># lpinfo -m
</pre>
<dl><dt>Aggiungere una nuova stampante</dt></dl>
<pre># lpadmin -p &lt;printer&gt; -E -v &lt;device&gt; -P &lt;ppd&gt;
</pre>
<p>&lt;printer&gt; è il nome e lo sceglie l'utente. &lt;device&gt; lo si trova con il comando 'lpinfo -i'.
Esempio:
</p>
<pre># lpadmin -p HP_DESKJET_940C -E -v "usb://HP/DESKJET%20940C?serial=CN16E6C364BH"  -P /usr/share/ppd/HP/hp-deskjet_940c.ppd.gz
</pre>
<p>Nell'esempio seguente, &lt;printer&gt; è il nome scelto in precedenza.
</p>
<dl><dt>Imposta &lt;printer&gt; come predefinita</dt></dl>
<pre>$ lpoptions -d &lt;printer&gt;
</pre>
<dl><dt>Controlla lo status della stampante</dt></dl>
<pre>$ lpstat -s
$ lpstat -p &lt;printer&gt;
</pre>
<dl><dt>Disatttiva una stampante</dt></dl>
<pre># cupsdisable &lt;printer&gt;
</pre>
<dl><dt>Attiva una stampante</dt></dl>
<pre># cupsenable &lt;printer&gt;
</pre>
<dl><dt>Rimuove una stampante</dt></dl>
<p>Rigetta ogni nuova richiesta di lavoro:
</p>
<pre># cupsreject &lt;printer&gt;
</pre>
<p>Disabilita la stampante:
</p>
<pre># cupsdisable &lt;printer&gt;
</pre>
<p>Rimuove la stampante:
</p>
<pre># lpadmin -x &lt;printer&gt;
</pre>
<dl><dt>Stampa un file</dt></dl>
<pre>$ lpr &lt;file&gt;
$ lpr -# 17 &lt;file&gt;              # stampa il file 17 volte
$ echo "Hello, world!" | lpr -p # stampa l'output del comando. Lo switch -p aggiunge l'header.
</pre>
<dl><dt>Controlla la coda di stampa</dt></dl>
<pre>$ lpq
$ lpq -a # on all printers
</pre>
<dl><dt>Cancella la coda di stampa</dt></dl>
<pre># lprm   # remove last entry only
# lprm - # remove all entries
</pre>
<h3><span class="mw-headline" id="Interfaccia_CUPS_di_GNOME">Interfaccia CUPS di GNOME</span></h3>
<p>Se si utilizza <a href="../it/GNOME.html" title="GNOME (Italiano)">GNOME</a>, una possibilità è di gestire e configurare le stampanti <a href="../it/Pacman.html" title="Pacman (Italiano)">installando</a> il pacchetto <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=system-config-printer">system-config-printer</a></span>. 
</p>
<p>Per rendere system-config-printer realmente funzionante, può rendersi necessario eseguirlo come root (sfruttando sudo o gksu), o in alternativa impostare i permessi per lasciar controllare CUPS ad un normale utente. Se si vuol affontare questa seconda scelta, <b>seguire i passaggi 1-3</b>:
</p>
<ul><li>1. Creare il gruppo, quindi aggiungere l'utente desiderato:</li></ul>
<pre># groupadd lpadmin
# usermod -aG lpadmin &lt;username&gt;
</pre>
<ul><li>2. Aggiungere "lpadmin" (senza le virgolette) a questa linea nel file <code>/etc/cups/cupsd.conf</code>
</li></ul>
<pre>SystemGroup sys root &lt;inserire qui&gt;
</pre>
<ul><li>3. Riavviare CUPS, effettuare il logout, quindi nuovamente il login (o, in alternativa, riavviare il computer)</li></ul>
<pre># systemctl restart cupsd</pre>
<p>Gli utenti <a href="../it/KDE.html" title="KDE (Italiano)">KDE</a> possono gestire le stampanti nel Centro di Controllo. Entrambi gli utenti (GNOME o KDE), dovrebbero riferirsi alla documentazione dei rispettivi <i>Desktop Environment</i>  per maggiori informazioni su come gestire l'interfaccia.
</p>
<p>Un'altra interfaccia utile è <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/gtklp/">gtklp</a></span><sup><small>AUR</small></sup> disponibile su <a href="../it/Arch_User_Repository.html" class="mw-redirect" title="AUR (Italiano)">AUR</a>.
</p>
<h2><span class="mw-headline" id="Stampante_virtuale_PDF">Stampante virtuale PDF</span></h2>
<p><span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=cups-pdf">cups-pdf</a></span> è un pacchetto interessante, che permette all'utente di impostare una stampante virtuale, la quale genera PDF da qualsiasi dato le venga inviato. Ovviamente questo pacchetto non è strettamente necessario, ma può rivelarsi discretamente utile.
</p>
<p>Dopo l'installazione settare la stampante dalla web interface di cups: <a rel="nofollow" class="external text" href="http://localhost:631/">http://localhost:631/</a> e selezionare:
</p>
<pre>Administration -&gt; Add Printer
Select CUPS-PDF (Virtual PDF), choose for the make and  driver:
Make:	Generic
Driver:	Generic CUPS-PDF Printer
</pre>
<p>I documenti PDF generati si vanno ad allocare in una sottocartella di <code>/var/spool/cups-pdf</code>. Generalmente, la sottocartella porta il nome dell'utente che ha richiesto la creazione dei documenti contenuti. Un piccolo trucco per trovare i documenti stampati in formato PDF con più facilità: Modificare /etc/cups/cups-pdf.conf cambiando la riga
</p>
<pre>#Out /var/spool/cups-pdf/${USER}
</pre>
<p>a
</p>
<pre>Out /home/${USER}
</pre>
<h3><span class="mw-headline" id="Stampare_su_Postscript">Stampare su Postscript</span></h3>
<p>Generare documenti PDF in applicazioni come OpenOffice è un'operazione molto semplice; spesso basta premere un pulsante. Diversamente, generare file Postscript da un documento può richiedere qualche attenzione in più. Per applicazioni come OpenOffice, nelle quali stampare con kprinter è un vero problema, esiste una valida via di fuga. CUPS-PDF (stampante virtuale di PDF) crea, nel suo processo di elaborazione, un file Postscript che viene poi convertito nel PDF richiesto alla stampa. Per generare un file Postscript attraverso CUPS-PDF, ciò di cui si ha bisogno è di catturare il file Postscript intermedio creato da CUPS-PDF. Questo risultato può essere facilmente raggiunto selezionando l'opzione "Stampa su file" nella finestra di stampa. Dopo aver selezionato "Stampa su file", scegliere il nome del file, la sua estensione, quindi cliccare su "Stampa".
Questa procedura è utile per fax, stampe da ufficio, ecc...
</p>
<h2><span class="mw-headline" id="Risoluzione_dei_Problemi">Risoluzione dei Problemi</span></h2>
<p>Il modo migliore per far funzionare la stampante consiste nell'impostare  "LogLevel" in <code>/etc/cups/cupsd.conf</code> così:
</p>
<pre>LogLevel debug
</pre>
<p>E quindi controllare i dati dal file <code>/var/log/cups/error_log</code> in questo modo:
</p>
<pre># tail -n 100 -f /var/log/cups/error_log
</pre>
<p>I caratteri alla sinistra del risultato stanno per: 
</p>
<ul>
<li>D=Debug</li>
<li>E=Errore</li>
<li>I=Informazioni</li>
<li>E così via</li>
</ul>
<p>Questi file potrebbero anche dimostrarsi utili: 
</p>
<ul>
<li>
<code>/var/log/cups/page_log</code> -  Riproduce un nuovo appunto ogni volta che la stampa avviene correttamente</li>
<li>
<code>/var/log/cups/access_log</code> - Elenca tutta l'attività del server cupsd http1.1</li>
</ul>
<p>Naturalmente, è importante conoscere come funziona CUPS per far fronte ad eventuali problemi:
</p>
<ol>
<li>Un'applicazione manda un file .ps (PostScript, un linguaggio script che indica come deve apparire la pagina) a CUPS quando l'opzione "stampa" viene selezionata  (ciò avviene con la maggior parte dei programmi).</li>
<li>CUPS quindi analizza il file PPD della stampante (file di descrizione della stampante) e trova i filtri necessari per convertire il file .ps nel linguaggio comprensibile alla stampante (come PJL, PCL), solitamente GhostScript.</li>
<li>GhostScript riceve l'input e capisce quali filtri debba usare, quindi li applica e converte il file .ps nel formato compreso dalla stampante.</li>
<li>Quindi manda un back-end. Ad esempio, se la stampante è connessa tramite porta USB, utilizza il back-end USB.</li>
</ol>
<p>Si stampi un documento e si analizzi <code>error_log</code> per avere un'immagine più dettagliate e corretta del processo di stampa. 
</p>
<h3>
<span id="Problemi_legati_all.27aggiornamento"></span><span class="mw-headline" id="Problemi_legati_all'aggiornamento">Problemi legati all'aggiornamento</span>
</h3>
<p><i>Problemi che appaiono dopo che i pacchetti CUPS e i relativi programmi vengono aggiornati ad una versione più recente</i>
</p>
<h4><span class="mw-headline" id="CUPS_smette_di_funzionare">CUPS smette di funzionare</span></h4>
<p>Potrebbe succedere che a seguito di un aggiornamento ci siano dei cambiamenti nei file di congifurazione. Messaggi come "404 - page not found" potrebbero apparire provando ad amministrare CUPS via localhost:631, ad esempio.
</p>
<p>Per usare la nuova configurazione, copiare <code>/etc/cups/cupsd.conf.default</code> in <code>/etc/cups/cupsd.conf</code> (salvare la vecchia configurazione se necessario) e riavviare CUPS per abilitare le nuove configurazioni.
</p>
<h4>
<span id="Tutti_i_lavori_sono_.22fermati.22"></span><span class="mw-headline" id='Tutti_i_lavori_sono_"fermati"'>Tutti i lavori sono "fermati"</span>
</h4>
<p>Se tutti i lavori inviati alla stampante risultano "stopped", si elimini la stampante e quindi la si riaggiunga.
Si usi <a rel="nofollow" class="external text" href="http://localhost:631">l'interfaccia web di CUPS</a>, si vada in Stampante &gt; Elimina Stampante.
</p>
<p>Per controllare la configurazione della stampante di vada in <i>Stampanti</i>, quindi <i>Modificare Stampante</i>. Trascrivere le informazioni mostrate, selezionare 'Modificare Stampante' per procedere alle pagine successive, e così via. 
</p>
<h4>
<span id="Tutti_i_lavori_convergono_in_un_.22The_printer_is_not_responding.22"></span><span class="mw-headline" id='Tutti_i_lavori_convergono_in_un_"The_printer_is_not_responding"'>Tutti i lavori convergono in un "The printer is not responding"</span>
</h4>
<p>Sulle stampanti di rete si dovrebbe verificare che il nome che CUPS utilizza come URI di connessione si risolva in IP della stampante tramite DNS. Ad esempio, se la connessione della stampante si presenta così:
</p>
<pre>lpd://BRN_020554/BINARY_P1
</pre>
<p>l'hostname "BRN_020554" deve risolvere l'IP della stampante dal server che esegue CUPS
</p>
<h4>
<span id="La_versione_PPD_non_.C3.A8_compatibile_con_gutenprint"></span><span class="mw-headline" id="La_versione_PPD_non_è_compatibile_con_gutenprint">La versione PPD non è compatibile con gutenprint</span>
</h4>
<p>Lanciare:
</p>
<pre># /usr/sbin/cups-genppdupdate
</pre>
<p>e riavviare CUPS (come evidenziato dal messaggio post-installazione di guternprint)
</p>
<h3><span class="mw-headline" id="Altro">Altro</span></h3>
<h5><span class="mw-headline" id="Errori_di_permessi_CUPS">Errori di permessi CUPS</span></h5>
<ul><li>Alcuni utenti risolvono errori del tipo 'NT_STATUS_ACCESS_DENIED' (client Windows) usando una sintassi leggermente diversa:</li></ul>
<pre>smb://workgroup/username:password@hostname/printer_name
</pre>
<ul><li>Qualche volta, l'intero dispositivo ha permessi sbagliati:</li></ul>
<pre># ls /dev/usb/
lp0
# chgrp lp /dev/usb/lp0
</pre>
<h4>
<span id="La_stampante_HPLIP_invia_come_errore_.22.2Fusr.2Flib.2Fcups.2Fbackend.2Fhp_failed.22"></span><span class="mw-headline" id='La_stampante_HPLIP_invia_come_errore_"/usr/lib/cups/backend/hp_failed"'>La stampante HPLIP invia come errore "/usr/lib/cups/backend/hp failed"</span>
</h4>
<p>Assicurarsi d'aver installato dbus e di averlo avviato. Se ci fossero ancora problemi, avviare il service di avahi-daemons.
</p>
<p>Provare ad aggiungere la stampante come Stampante di Rete (Network Printer) usando il protocollo http://. Generare l'URI della stampante con <code>hp-makeuri</code>.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> C'è la possibilità che si renda necessario cambiare i permessi di CUPS. Si segua quanto scritto <a href="#Permessi_del_device_node">qui</a><sup>[<a href="../en/Help:Procedures.html#Fix_broken_section_links" title="Help:Procedures">broken link</a>: invalid section]</sup>.</div>
<h4>
<span id="HPLIP_tutti_i_lavori_vengono_segnati_come_ultimati_ma_non_si_.C3.A8_riusciti_a_stampare_niente"></span><span class="mw-headline" id="HPLIP_tutti_i_lavori_vengono_segnati_come_ultimati_ma_non_si_è_riusciti_a_stampare_niente">HPLIP tutti i lavori vengono segnati come ultimati ma non si è riusciti a stampare niente</span>
</h4>
<p>Questo succede su stampanti HP quando viene selezionato il vecchio driver <code>hpijs</code> (ad esempio per le stampati della serie Deskjet D1600). Quindi, quando si aggiunge una stampante, selezionare il driver <code>hpcups</code>.
</p>
<p>Alcune stampanti, come le HP Laserjet, richiedono che il proprio firmware venga scaricato ad ogni accensione. Esiste un workaround, lanciare il comando:
</p>
<pre># hp-firmware -n
</pre>
<h4>
<span id="hp-toolbox_invia_come_errore.2C_.22Unable_to_communicate_with_device.22"></span><span class="mw-headline" id='hp-toolbox_invia_come_errore,_"Unable_to_communicate_with_device"'>hp-toolbox invia come errore, "Unable to communicate with device"</span>
</h4>
<p>Se lanciando hp-toolbox come utente normale si ottiene:
</p>
<pre># hp-toolbox
# error: Unable to communicate with device (code=12): hp:/usb/&lt;printer id&gt;
</pre>
<p>o, "<code>Unable to communicate with device"</code>", allora potrebbe essere necessario <a href="../it/Users_and_groups.html#Gestione_dei_gruppi" class="mw-redirect" title="Utenti e Gruppi">aggiungere l'utente al gruppo lp</a>.
</p>
<p>Questo può tornare utile anche per stampanti come la P1102 che fornisce un virtual cd-rom con i driver per MS-Windows. Il device compare e scompare. In questo caso provare i pacchetti da <a href="../it/Arch_User_Repository.html" class="mw-redirect" title="AUR (Italiano)">AUR</a> <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/usb-modeswitch/">usb-modeswitch</a></span><sup><small>AUR</small></sup><sup>[<a href="../en/Help:Procedures.html#Fix_broken_package_links" title="Help:Procedures">broken link</a>: package not found]</sup> and <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/usb-modeswitch-data/">usb-modeswitch-data</a></span><sup><small>AUR</small></sup><sup>[<a href="../en/Help:Procedures.html#Fix_broken_package_links" title="Help:Procedures">broken link</a>: package not found]</sup>, che permettono uno "switch off" di "Smart Drive" (la regola di udev inclusa in questi pacchetti).
</p>
<p>Questo potrebbe succedere anche se il demone <a href="../en/Avahi.html" title="Avahi">avahi-daemon</a> non è avviato.
</p>
<h4>
<span id="CUPS_risponde_.27.22foomatic-rip.22_not_available.2Fstopped_with_status_3.27_con_una_stampante_HP"></span><span class="mw-headline" id="CUPS_risponde_'&quot;foomatic-rip&quot;_not_available/stopped_with_status_3'_con_una_stampante_HP">CUPS risponde '"foomatic-rip" not available/stopped with status 3' con una stampante HP</span>
</h4>
<p>Se si riceve qualsiasi dei seguenti messaggi d'errore in <code>/var/log/cups/error_log</code> durante l'utilizzo di una stampante HP, con i lavori che sembrano essere avviati mentre invece non vengo terminati e il loro stato è impostato a 'stopped':
</p>
<pre>Filter "foomatic-rip" for printer "&lt;printer_name&gt;" not available: No such file or director
</pre>
<p>o:
</p>
<pre>PID 5771 (/usr/lib/cups/filter/foomatic-rip) stopped with status 3!
</pre>
<p>assicurarsi che <b><span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=hplip">hplip</a></span></b> sia stato installato, in aggiunta al  <a href="#Installazione">pacchetto menzionato sopra</a><sup>[<a href="../en/Help:Procedures.html#Fix_broken_section_links" title="Help:Procedures">broken link</a>: invalid section]</sup>, <b>net-snmp</b> è anche necessario. Si veda <a rel="nofollow" class="external text" href="https://bbs.archlinux.org/viewtopic.php?id=65615">questo post nel forum internazionale</a>.
</p>
<h4><span class="mw-headline" id="La_stampa_fallisce_segnalando_errori_di_autorizzazione">La stampa fallisce segnalando errori di autorizzazione</span></h4>
<p>Se l'utente è stato aggiunto al gruppo lp, e gli è permesso stampare (impostato in <code>cupsd.conf</code>), allora il probema si trova nel file <code>/etc/cups/printers.conf</code>. Questa potrebbe essere la linea colpevole:
</p>
<pre>AuthInfoRequired negotiate
</pre>
<p>La si commenti e si riavvii CUPS.
</p>
<h4><span class="mw-headline" id="Pulsante_Stampa_bloccato_nelle_applicazioni_GNOME">Pulsante Stampa bloccato nelle applicazioni GNOME</span></h4>
<dl><dd><i><small>Fonte (in inglese): <a rel="nofollow" class="external text" href="https://bbs.archlinux.org/viewtopic.php?id=70418">Non posso stampare nelle applicazioni GNOME. - Arch Forums</a></small></i></dd></dl>
<p>Assicurarsi che il pacchetto <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/libgnomeprint/">libgnomeprint</a></span><sup><small>AUR</small></sup> sia installato.
</p>
<p>Modificare il file <code>/etc/cups/cupsd.conf</code>, aggiungendo
</p>
<pre># HostNameLookups Double
</pre>
<p>Riavviare quindi CUPS:
</p>
<pre># systemctl restart cupsd
</pre>
<h4>
<span id="Formato_supportato_sconosciuto:_application.2Fpostscript"></span><span class="mw-headline" id="Formato_supportato_sconosciuto:_application/postscript">Formato supportato sconosciuto: application/postscript</span>
</h4>
<p>Commentare le linee:
</p>
<pre>application/octet-stream        application/vnd.cups-raw        0      -
</pre>
<p>nel file <code>/etc/cups/mime.convs</code>, e:
</p>
<pre>application/octet-stream
</pre>
<p>in <code>/etc/cups/mime.types</code>.
</p>
<h4><span class="mw-headline" id="Trovare_gli_URI_per_i_server_di_stampa_Windows">Trovare gli URI per i server di stampa Windows</span></h4>
<p>Spesso Windows è poco intuitivo nella definizione esatta degli URI (la posizione dei dispositivi).Se si riscontrano problemi nello specificare la corretta posizione di un dispositivo in CUPS, eseguire il seguente comando per mostrare una lista di tutte le condivisioni disponibili per un dato utente di Windows:
</p>
<pre>$ smbtree -U <i>utentewindows</i>
</pre>
<p>Questo comando mostrerà ogni risorsa condivisa disponibile per il dato utente di Windows sulla rete LAN, dato come prerequisito che Samba sia installato e correttamente funzionante. L'output dovrebbe essere simile al qui proposto:
</p>
<pre> WORKGROUP
	\\REGULATOR-PC   		
		\\REGULATOR-PC\Z              	
		\\REGULATOR-PC\Public         	
		\\REGULATOR-PC\print$         	Printer Drivers
		\\REGULATOR-PC\G              	
		\\REGULATOR-PC\EPSON Stylus CX8400 Series	EPSON Stylus CX8400 Series</pre>
<p>Ciò di cui si ha bisogno nell'esempio è la prima parte dell'ultima riga, la risorsa che coincide con la descrizione della stampante. In questo caso, per mandare in stampa la EPSON Stylus, bisogna inserire come URI:
</p>
<pre>smb://username.password@REGULATOR-PC/EPSON Stylus CX8400 Series
</pre>
<p>in CUPS. Si noti che negli URI gli spazi bianchi sono permessi, mentre gli back-slash (\) vanno sostituiti con gli slash classici (/).
Nel caso in cui ci siano dei problemi provare a sostituire gli spazi con <code>%20</code>.
</p>
<h4><span class="mw-headline" id="Errore_di_stampa_client-error-document-format-not-supported">Errore di stampa client-error-document-format-not-supported</span></h4>
<p>Provare a installare i pacchetti foomatic e utilizzare un driver foomatic.
</p>
<h4>
<span id="Errore_.2Fusr.2Flib.2Fcups.2Fbackend.2Fhp"></span><span class="mw-headline" id="Errore_/usr/lib/cups/backend/hp">Errore /usr/lib/cups/backend/hp</span>
</h4>
<p>Modificare
</p>
<pre> SystemGroup sys root
</pre>
<p>con
</p>
<pre> SystemGroup lp root
</pre>
<p>in /etc/cups/cupsd.conf
</p>
<h4>
<span id=".22Unable_to_get_list_of_printer_drivers.22"></span><span class="mw-headline" id='"Unable_to_get_list_of_printer_drivers"'>"Unable to get list of printer drivers"</span>
</h4>
<p>Provare a riumuovere i driver Footmatic.
</p>
<h4><span class="mw-headline" id="lp:_Error_-_Scheduler_Not_Responding">lp: Error - Scheduler Not Responding</span></h4>
<p>Se si riceve questo errore durante la stampa di un documento, provare con questo comando:
</p>
<pre>$ lp document-to-print
</pre>
<p>Provare a settare la variabile d'ambiente CUPS_SERVER:
</p>
<pre>$ export CUPS_SERVER=localhost
</pre>
<p>Se quest'ultimo passaggio funziona, è possibile rendere permanente tale modifica aggiungendo la linea <code>export CUPS_SERVER=localhost</code> nel file <code>~/.bash_profile</code> o nel relativo file della propria shell, come ad esempio <code>~/.zprofile</code> e si usa <a href="../en/Zsh.html" title="Zsh">Zsh</a>.
</p>
<h4><span class="mw-headline" id="CUPS_stampa_una_pagina_vuota_e_una_di_errore_con_HP_Laserjet">CUPS stampa una pagina vuota e una di errore con HP Laserjet</span></h4>
<p>Questo è un bug conosciuto di cups. La prima pagina risulta essere bianca, la seconda riporta:
</p>
<pre>ERROR:
invalidaccess
OFFENDING COMMAND:
filter
STACK:
/SubFileDecode
endstream
...
</pre>
<p>Per risolvere dare questo comando da root:
</p>
<pre>#  lpadmin -p &lt;printer&gt; -o pdftops-renderer-default=pdftops
</pre>
<h4>
<span id="Errore:_.22Using_invalid_Host.22"></span><span class="mw-headline" id='Errore:_"Using_invalid_Host"'>Errore: "Using invalid Host"</span>
</h4>
<p>Aggiungere <code>ServerAlias*</code> in <code>cupsd.conf</code>.
</p>
<h4>
<span id="La_stampante_non_lavora_e_restituisce_come_errore_.22Filter_Failed.22_sull.27interfaccia_web_di_CUPS"></span><span class="mw-headline" id="La_stampante_non_lavora_e_restituisce_come_errore_&quot;Filter_Failed&quot;_sull'interfaccia_web_di_CUPS">La stampante non lavora e restituisce come errore "Filter Failed" sull'interfaccia web di CUPS</span>
</h4>
<p>Cambiare permessi sulla porta USB:
Cercare bus e device number con lsusb e dare un:
</p>
<pre># chmod 0666 /dev/bus/usb/&lt;bus number&gt;/&lt;device number&gt;
</pre>
<h4><span class="mw-headline" id="La_stampante_non_viene_riconosciuta_da_cups">La stampante non viene riconosciuta da cups</span></h4>
<p>Se la propria stampante non viene riconosciuta da CUPS (ovvero non è presente nella lista che si ha cliccando sul pulsante "Add Printers" dell'interfaccia web di CUPS), provare questo metodo (suggerito <a rel="nofollow" class="external text" href="https://bbs.archlinux.org/viewtopic.php?pid=1037279#p1037279">sul forum internazionale</a>):
</p>
<ol>
<li>Fermare cups</li>
<li>Creare questa regola di udev: <code>/etc/udev/rules.d/10-cups_device_link.rules</code>
</li>
</ol>
<p>che contenga: 
</p>
<pre>KERNEL=="lp[0-9]", SYMLINK+="%k", GROUP="lp"}}
</pre>
<ol>
<li>Scollegare e ricollegare la stampante.</li>
<li>Riavviare cups.</li>
</ol>
<h2><span class="mw-headline" id="Vedere_anche">Vedere anche</span></h2>
<ul>
<li>
<a rel="nofollow" class="external text" href="http://localhost:631/documentation.html">Documentazione Ufficiale di CUPS</a>, <i>Installata Localmente</i>
</li>
<li>
<a rel="nofollow" class="external text" href="https://www.cups.org/">Sito ufficiale di CUPS</a><sup>[<a href="https://en.wikipedia.org/wiki/Wikipedia:Link_rot" class="extiw" title="wikipedia:Wikipedia:Link rot">link interrotto</a> 2020-08-02]</sup>
</li>
<li>
<a rel="nofollow" class="external text" href="http://www.linuxprinting.org/">Linux Printing</a>, <i><a rel="nofollow" class="external text" href="http://www.linuxfoundation.org">The Linux Foundation</a></i>
</li>
<li>
<a rel="nofollow" class="external text" href="http://www.gentoo.org/doc/en/printing-howto.xml">Guida alla stampa di Gentoo</a>, <i><a rel="nofollow" class="external text" href="http://www.gentoo.org/doc/en">Documentazione di Gentoo</a></i>
</li>
<li><a rel="nofollow" class="external text" href="https://bbs.archlinux.org/">Forum internazionale di Arch Linux</a></li>
</ul>
</div>
</div>
<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../it/Category:Printers.html" title="Category:Printers (Italiano)">Printers (Italiano)</a></li></ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden categories: <ul>
<li><a href="../en/Category:Pages_with_broken_package_links.html" title="Category:Pages with broken package links">Pages with broken package links</a></li>
<li><a href="../en/Category:Pages_with_broken_section_links.html" title="Category:Pages with broken section links">Pages with broken section links</a></li>
</ul>
</div>
</div>
	</div>
</div>

<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
		<li>Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=CUPS_(Italiano)&amp;oldid=628387">https://wiki.archlinux.org/index.php?title=CUPS_(Italiano)&amp;oldid=628387</a>"</li>
		<li id="footer-info-lastmod"> This page was last edited on 2 August 2020, at 11:48.</li>
		<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
	<br>
</ul>
	<ul id="footer-places">
		<li id="footer-places-privacy"><a href="../en/ArchWiki:Privacy_policy.html" title="ArchWiki:Privacy policy">Privacy policy</a></li>
		<li id="footer-places-about"><a href="../en/ArchWiki:About.html" title="ArchWiki:About">About ArchWiki</a></li>
		<li id="footer-places-disclaimer"><a href="../en/ArchWiki:General_disclaimer.html" title="ArchWiki:General disclaimer">Disclaimers</a></li>
	</ul>
	<ul id="footer-icons" class="noprint">
		<li id="footer-copyrightico">
	</ul>
	<div style="clear: both;"></div>
</footer>



</body>
</html>
