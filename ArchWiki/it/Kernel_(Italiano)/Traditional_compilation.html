<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>Kernel (Italiano)/Traditional compilation (Italiano) - ArchWiki</title>
<link rel="stylesheet" href="../../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.35.0">
<meta name="robots" content="noindex,follow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="http://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Kernel_Italiano_Traditional_compilation_Italiano rootpage-Kernel_Italiano skin-vector action-view skin-vector-legacy">
<div id="content" class="mw-body" role="main" style="margin: 0">
	<a id="top"></a>
	<div id="siteNotice" class="mw-body-content"></div>
	<div class="mw-indicators mw-body-content">
	</div>
	<h1 id="firstHeading" class="firstHeading" lang="en">Kernel (Italiano)/Traditional compilation (Italiano)</h1>
	<div id="bodyContent" class="mw-body-content">
		<div id="siteSub" class="noprint">From ArchWiki</div>
		<div id="contentSub"><span class="subpages">&lt; <a href="../../it/Kernel.html" title="Kernel (Italiano)">Kernel (Italiano)</a></span></div>
		<div id="contentSub2"></div>
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="#searchInput">Jump to search</a>
		<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr">
<div class="warningbox">The printable version is no longer supported and may have rendering errors. Please update your browser bookmarks and please use the default browser print function instead.</div>
<div class="mw-parser-output">
<p>Il riepilogo in basso è utile per compilare kernel personalizzati da <b>kernel.org sources</b>. Questo metodo di compilazione dei kernel è un metodo tradizionale comune a tutte le distribuzioni; comunque è anche presente un metodo per installare in modo pulito il kernel personalizzato con makepkg.
</p>
<p>Alternativamente, si puù usare ABS per compilare ed installare il proprio kernel; vedere: <a href="../../it/Kernel.html#Compilazione" class="mw-redirect" title="Kernels (Italiano)">Kernels (Italiano)#Compilazione</a>. Usare l'esistente PKGBUILD di <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=linux">linux</a></span> automatizzerà quasi tutto il processo e si otterrà un pacchetto. Tuttavia, alcuni utenti Arch preferiscono la via <i>tradizionale</i>.
</p>
<div id="toc" class="toc" role="navigation" aria-labelledby="mw-toc-heading">
<input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none"><div class="toctitle" lang="en" dir="ltr">
<h2 id="mw-toc-heading">Contents</h2>
<span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span>
</div>
<ul>
<li class="toclevel-1 tocsection-1">
<a href="#Recupero_dei_sorgenti"><span class="tocnumber">1</span> <span class="toctext">Recupero dei sorgenti</span></a>
<ul>
<li class="toclevel-2 tocsection-2"><a href="#Riguardo_/usr/src/"><span class="tocnumber">1.1</span> <span class="toctext">Riguardo /usr/src/</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-3">
<a href="#Configurazione"><span class="tocnumber">2</span> <span class="toctext">Configurazione</span></a>
<ul>
<li class="toclevel-2 tocsection-4"><a href="#Ottenere_un_file_.config"><span class="tocnumber">2.1</span> <span class="toctext">Ottenere un file .config</span></a></li>
<li class="toclevel-2 tocsection-5">
<a href="#Configurare_il_proprio_kernel"><span class="tocnumber">2.2</span> <span class="toctext">Configurare il proprio kernel</span></a>
<ul>
<li class="toclevel-3 tocsection-6"><a href="#Versione_locale"><span class="tocnumber">2.2.1</span> <span class="toctext">Versione locale</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1 tocsection-7">
<a href="#Compilazione_ed_installazione"><span class="tocnumber">3</span> <span class="toctext">Compilazione ed installazione</span></a>
<ul>
<li class="toclevel-2 tocsection-8"><a href="#Compilare"><span class="tocnumber">3.1</span> <span class="toctext">Compilare</span></a></li>
<li class="toclevel-2 tocsection-9"><a href="#Installare_i_moduli"><span class="tocnumber">3.2</span> <span class="toctext">Installare i moduli</span></a></li>
<li class="toclevel-2 tocsection-10"><a href="#Copiare_il_kernel_nella_cartella_/boot"><span class="tocnumber">3.3</span> <span class="toctext">Copiare il kernel nella cartella /boot</span></a></li>
<li class="toclevel-2 tocsection-11"><a href="#Creare_un_initial_RAM_disk"><span class="tocnumber">3.4</span> <span class="toctext">Creare un initial RAM disk</span></a></li>
<li class="toclevel-2 tocsection-12"><a href="#Copiare_System.map"><span class="tocnumber">3.5</span> <span class="toctext">Copiare System.map</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-13"><a href="#Configurazione_del_bootloader"><span class="tocnumber">4</span> <span class="toctext">Configurazione del bootloader</span></a></li>
<li class="toclevel-1 tocsection-14"><a href="#Usare_il_driver_video_NVIDIA_con_il_proprio_kernel_personalizzato"><span class="tocnumber">5</span> <span class="toctext">Usare il driver video NVIDIA con il proprio kernel personalizzato</span></a></li>
</ul>
</div>

<h2><span class="mw-headline" id="Recupero_dei_sorgenti">Recupero dei sorgenti</span></h2>
<ul><li>Scaricare i sorgenti del kernel da <code>ftp.xx.kernel.org/pub/linux/kernel/</code>, dove xx è il chiave del tuo paese (per esempio 'it', 'us', 'uk', 'de', ... - Controllare <a rel="nofollow" class="external autonumber" href="http://www.kernel.org/mirrors/">[1]</a><sup>[<a href="https://en.wikipedia.org/wiki/Wikipedia:Link_rot" class="extiw" title="wikipedia:Wikipedia:Link rot">link interrotto</a> 2020-08-02]</sup> per una lista dei mirror completa). Se non si ha alcuna gui ftp, si può utilizzare <code>wget</code>. Per questo esempio si prenderà e compilerà il 3.2.9; dovrebbe essere necessario cambiare solo la versione per ottenere un kernel diverso.</li></ul>
<p>Ad esempio:
</p>
<pre>$ wget -c <a rel="nofollow" class="external free" href="https://www.kernel.org/pub/linux/kernel/v3.0/linux-3.2.9.tar.bz2">https://www.kernel.org/pub/linux/kernel/v3.0/linux-3.2.9.tar.bz2</a>
</pre>
<ul><li>È sempre una buona idea verificare la firma di ogni tarball scaricata. Vedere <a rel="nofollow" class="external text" href="https://kernel.org/signature.html#using-gnupg-to-verify-kernel-signatures">kernel.org/signature</a> sul funzionamento e altri dettagli.</li></ul>
<ul><li>Copiare il sorgente del kernel nella propria cartella di compilazione, ad esempio:</li></ul>
<pre>$ cp linux-3.2.9.tar.bz2 ~/kernelbuild/
</pre>
<ul><li>Estrarlo ed entrare nella cartella del sorgente:</li></ul>
<pre>$ cd ~/kernelbuild
$ tar -xvjf linux-3.2.9.tar.bz2
$ cd linux-3.2.9
</pre>
<p>Preparare la compilazione eseguendo il seguente comando:
</p>
<pre>make mrproper
</pre>
<p>Ciò assicura che l'albero del kernel sia assolutamente pulito. Il kernel team raccomanda che tale comando sia eseguito prima di ogni compilazione del kernel. Non si faccia affidamento sul fatto che l'albero del sorgente sia pulito dopo averlo estratto.
</p>
<h3>
<span id="Riguardo_.2Fusr.2Fsrc.2F"></span><span class="mw-headline" id="Riguardo_/usr/src/">Riguardo /usr/src/</span>
</h3>
<p>Usare la cartella /usr/src/ per la compilazione del kernel da root, insieme alla creazione del symlink corrispondente, è considerata una cattiva pratica da alcuni kernel hacker. Questi ritengono che il metodo più pulito sia usare semplicemente la propria cartella home. Se ci si trova d'accordo con questo punto di vista, compilare e configurare il proprio kernel come utente normale ed installarlo come root, o <a href="../../it/Kernel_(Italiano)/Arch_Build_System.html" class="mw-redirect" title="Kernels/Arch Build System (Italiano)">con makepkg e pacman</a>. 
</p>
<p>Comunque, questo concetto è stato oggetto di dibattito e altri hacker di grande esperienza considerano completamente sicura, accettabile ed addirittura preferibile, la pratica di compilazione da root.
</p>
<p>Si usi qualunque metodo con cui ci si senta a proprio agio.
</p>
<h2><span class="mw-headline" id="Configurazione">Configurazione</span></h2>
<p>Questo è un passo cruciale nella personalizzazione del kernel per riflettere le precise specifiche del proprio computer. Impostando opportunamente le configurazioni in 'menuconfig', il kernel ed il computer funzioneranno più efficientemente.
</p>
<h3><span class="mw-headline" id="Ottenere_un_file_.config">Ottenere un file .config</span></h3>
<p>Opzionale. Copiare il file .config dal kernel in esecuzione, se si vogliono modificare le impostazioni di default di Arch.
</p>
<pre> $ zcat /proc/config.gz &gt; .config
</pre>
<h3><span class="mw-headline" id="Configurare_il_proprio_kernel">Configurare il proprio kernel</span></h3>
<p>Ci sono due scelte:
</p>
<ul><li>Il tradizionale menuconfig</li></ul>
<pre>$ make menuconfig        (Inizierà con un '.config' nuovo. Le dipendenze opzionali sono di solito selezionate automaticamente.)
</pre>
<p>Apportare le proprie modifiche e salvare il file config. È una buona idea fare una copia di backup poichè è facile dover fare ciò diverse volte prima di avere tutte le giuste opzioni. Se non si riesce ad avviare il nuovo kernel compilato, vedere la lista dei config item necessari <a rel="nofollow" class="external text" href="https://archlinux.org/news/users-of-unofficial-kernels-must-enable-devtmpfs-support/">qui</a>. Eseguire $ lspci -k #  da liveCD elencherà i nomi dei moduli del kernel in uso.
</p>
<ul><li>localmodconfig</li></ul>
<p>Dal kernel 2.6.32 viene fornito localmodconfig per facilitare la configurazione del kernel:
</p>
<pre>$ make oldconfig         (Funziona solo con il vecchio file '.config', copiato nella cartella di compilazione. Inoltre marca le opzione precedentemente inutilizzate come 'NEW'.)
$ make localmodconfig    (Prova ad estrarre /proc/config.gz dal kernel in esecuzione. Pre-seleziona opzioni/moduli in uso.)
$ make localyesconfig    (Come sopra, eccetto che vengono compilati nel kernel più moduli possibili.)
$ make xconfig           (Dipende da Qt. Una migliore interfaccia. Controllo delle dipendenze non verificato.)
$ make gconfig           (Dipende da GTK. Come xconfig.)
$ make help              (Elenca TUTTI i target disponibili.)
</pre>
<p>Per ulteriori informazioni riguardo "localmodconfig" fare riferimento alle <a rel="nofollow" class="external text" href="http://kernelnewbies.org/Linux_2_6_32#head-11f54cdac41ad6150ef817fd68597554d9d05a5f">note di rilascio del 2.6.32</a>.<i></i>
</p>
<h4><span class="mw-headline" id="Versione_locale">Versione locale</span></h4>
<p>Se si sta compilando un kernel utilizzanto il file config corrente, non si dimentichi di rinominare la versione del kernel, o si potrebbe sostituire per errore quello esistente.
</p>
<pre>$ make menuconfig
General setup  ---&gt;
 (-ARCH) Local version - append to kernel release '3.n.n-RCn'
</pre>
<h2><span class="mw-headline" id="Compilazione_ed_installazione">Compilazione ed installazione</span></h2>
<p>Per compilare il kernel manualmente, seguire questi passi:
</p>
<h3><span class="mw-headline" id="Compilare">Compilare</span></h3>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Attenzione:</strong>  Non eseguire <code>make all</code> se si usa GRUB e si ha ancora LILO installato; esso configurerà LILO alla fine e non si sarà più in grado di avviare la propria macchina! Rimuovere LILO (pacman -R lilo) prima di lanciare <code>make all</code> se si usa GRUB!</div>
<pre>$ make      (Come make vmlinux &amp;&amp; make modules &amp;&amp; make bzImage - consultare 'make help' per ulteriori informazioni.)
</pre>
<p>oppure
</p>
<pre>$ make -jN   (N = # di processori + 1) (Questo utilizza al 100% tutte le CPU. Un Dual-core[-j3] da 2.8Ghz compila in meno di 15 minuti.)
</pre>
<h3><span class="mw-headline" id="Installare_i_moduli">Installare i moduli</span></h3>
<p>Deve essere fatto da root.
</p>
<pre># make modules_install
</pre>
<p>Questo copia i moduli compilati in una cartella in /lib/modules con lo stesso nome della versione del kernel ed aggiunge la stringa che è stata scelta in menuconfig. In tal modo i moduli sono tenuti separati da quelli usati da altri kernel della propria macchina.
</p>
<h3>
<span id="Copiare_il_kernel_nella_cartella_.2Fboot"></span><span class="mw-headline" id="Copiare_il_kernel_nella_cartella_/boot">Copiare il kernel nella cartella /boot</span>
</h3>
<pre># cp -v arch/x86/boot/bzImage /boot/vmlinuz-NomeTuoKernel
</pre>
<h3><span class="mw-headline" id="Creare_un_initial_RAM_disk">Creare un initial RAM disk</span></h3>
<p>L'initial RAM disk (opzione initrd nel menu GRUB o il file "initramfs-NomeTuoKernel.img") è un root file system iniziale che viene montato prima che il vero root file system sia disponibile. L'initrd è legato al kernel ed è caricato come parte della procedura d'avvio dello stesso. Il kernel quindi monta questo initrd come parte di un processo a due stadi per caricare i moduli per rendere disponibile il file system reale. L'initrd contiene un set minimo di cartelle ed eseguibili per permettere tutto questo, come lo strumento insmod per installare i moduli nel kernel. Nel caso di sistemi Linux desktop o server, l'initrd è un file system di transizione. La sua durata di vita è breve, servendo soltanto come ponte al vero root file system. In sistemi integrati senza memoria mutevole, l'initrd è il root file system permanente.
</p>
<p>Se si necessita di moduli caricati in modo tale da montare il root filesystem, compilare un a ramdisk (la maggior parte degli utenti ne hanno bisogno). Il parametro -k accetta la versione del kernel e la stringa aggiunta che è stata impostata con menuconfig ed è usato per localizzare i moduli in /lib/modules:
</p>
<pre># mkinitcpio -k NomeKernelCompleto -g /boot/initramfs-NomeTuoKernel.img
</pre>
<p>Si è liberi di nominare i file in /boot come si vuole. Tuttavia, usare lo schema [kernel-major-minor-revision] aiuta a mantenere un ordine se si hanno kernel multipli, si usa spesso mkinitcpio, si compilano moduli di terze parti.
</p>
<p>Se si sta usando LILO e questo non riesce a comunicare con il driver device-mapper del kernel, si esegua prima <code>modprobe dm-mod</code>.
</p>
<h3><span class="mw-headline" id="Copiare_System.map">Copiare System.map</span></h3>
<p>Il file System.map non è richiesto per l'avvio di Linux. È una sorta di "elenco telefonico" in cui sono elencate le funzioni si una particolare compilazione del kernel. System.map contiene una lista dei simboli del kernel (per esempio i nomi delle funzioni, i nomi delle variabili ecc...) e i loro indirizzi corrispondenti. Questo "symbol-name to address mapping" è usato da:
</p>
<ul>
<li>Alcuni processi come klogd, ksymoops ecc</li>
<li>Dal OOPS handler quando l'informazione deve essere scaricata su schermo durante un crash del kernel (ad esempio informazioni come in quale funzione è crashato).</li>
</ul>
<p>Copiare System.map in /boot e creare un symlink
</p>
<pre># cp System.map /boot/System.map-NomeTuoKernel
</pre>
<p>Dopo aver completato i passi qui sopra, si dovrebbero avere i 3 file seguenti ed 1 soft symlink nella propria cartella /boot insieme agli altri file già esistenti:
</p>
<pre>vmlinuz-NomeTuoKernel          (Kernel)
initramfs-NomeTuoKernel.img    (Ramdisk)
System.map-NomeTuoKernel       (System Map)
</pre>
<h2><span class="mw-headline" id="Configurazione_del_bootloader">Configurazione del bootloader</span></h2>
<p>Aggiungere una voce per il nuovo kernel nel file di configurazione del proprio bootloader - vedere <a href="../../it/GRUB_Legacy.html" title="GRUB Legacy (Italiano)">GRUB</a>, <a href="../../en/LILO.html" title="LILO">LILO</a>, <a href="../../it/GRUB.html" class="mw-redirect" title="GRUB2 (Italiano)">GRUB2</a> o <a href="../../en/Syslinux.html" title="Syslinux">Syslinux</a> come esempi. Notare che, se si usa LILO, il sorgente del kernel include uno script per automatizzare il processo:
</p>
<pre>$ arch/i386/boot/install.sh
</pre>
<p>Se si usa LILO, ricordarsi di digitare <code>lilo</code> come root al prompt per aggiornarlo.
</p>
<h2><span class="mw-headline" id="Usare_il_driver_video_NVIDIA_con_il_proprio_kernel_personalizzato">Usare il driver video NVIDIA con il proprio kernel personalizzato</span></h2>
<p>Vedere: <a href="../../it/NVIDIA.html#Installazione_alternativa:_kernel_personalizzato" title="NVIDIA (Italiano)">Installazione alternativa: kernel personalizzato</a>. Si possono anche installare i driver NVIDIA da AUR.
</p>
</div>
</div>
<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../../it/Category:Kernel.html" title="Category:Kernel (Italiano)">Kernel (Italiano)</a></li></ul>
</div></div>
	</div>
</div>

<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
		<li>Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Kernel_(Italiano)/Traditional_compilation_(Italiano)&amp;oldid=646873">https://wiki.archlinux.org/index.php?title=Kernel_(Italiano)/Traditional_compilation_(Italiano)&amp;oldid=646873</a>"</li>
		<li id="footer-info-lastmod"> This page was last edited on 26 December 2020, at 12:02.</li>
		<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
	<br>
</ul>
	<ul id="footer-places">
		<li id="footer-places-privacy"><a href="../../en/ArchWiki:Privacy_policy.html" title="ArchWiki:Privacy policy">Privacy policy</a></li>
		<li id="footer-places-about"><a href="../../en/ArchWiki:About.html" title="ArchWiki:About">About ArchWiki</a></li>
		<li id="footer-places-disclaimer"><a href="../../en/ArchWiki:General_disclaimer.html" title="ArchWiki:General disclaimer">Disclaimers</a></li>
	</ul>
	<ul id="footer-icons" class="noprint">
		<li id="footer-copyrightico">
	</ul>
	<div style="clear: both;"></div>
</footer>



</body>
</html>
