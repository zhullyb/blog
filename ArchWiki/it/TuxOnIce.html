<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>TuxOnIce (Italiano) - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.35.0">
<meta name="robots" content="noindex,follow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="http://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-TuxOnIce_Italiano rootpage-TuxOnIce_Italiano skin-vector action-view skin-vector-legacy">
<div id="content" class="mw-body" role="main" style="margin: 0">
	<a id="top"></a>
	<div id="siteNotice" class="mw-body-content"></div>
	<div class="mw-indicators mw-body-content">
	</div>
	<h1 id="firstHeading" class="firstHeading" lang="en">TuxOnIce (Italiano)</h1>
	<div id="bodyContent" class="mw-body-content">
		<div id="siteSub" class="noprint">From ArchWiki</div>
		<div id="contentSub"></div>
		<div id="contentSub2"></div>
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="#searchInput">Jump to search</a>
		<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr">
<div class="warningbox">The printable version is no longer supported and may have rendering errors. Please update your browser bookmarks and please use the default browser print function instead.</div>
<div class="mw-parser-output">
<p>Questa è una guida veloce all'installazione di <a rel="nofollow" class="external text" href="http://www.tuxonice.net">TuxOnIce</a> (conosciuto anche come suspend2), un framework avanzato per la sospensione/ibernazione, che supporta l'ibernazione in una partizione swap o in un normale file con una compressione veloce LZO. Visita il sito di TuxOnIce per una lista completa delle <a rel="nofollow" class="external text" href="http://www.tuxonice.net/features">caratteristiche</a>.
</p>
<div id="toc" class="toc" role="navigation" aria-labelledby="mw-toc-heading">
<input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none"><div class="toctitle" lang="en" dir="ltr">
<h2 id="mw-toc-heading">Contents</h2>
<span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span>
</div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Preparazione_del_kernel"><span class="tocnumber">1</span> <span class="toctext">Preparazione del kernel</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#Ricreare_initramfs"><span class="tocnumber">2</span> <span class="toctext">Ricreare initramfs</span></a></li>
<li class="toclevel-1 tocsection-3">
<a href="#Configurazione_del_Boot_Loader"><span class="tocnumber">3</span> <span class="toctext">Configurazione del Boot Loader</span></a>
<ul>
<li class="toclevel-2 tocsection-4"><a href="#Ibernazione_in_una_partizione_di_Swap"><span class="tocnumber">3.1</span> <span class="toctext">Ibernazione in una partizione di Swap</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="#Ibernazione_su_un_file_di_swap"><span class="tocnumber">3.2</span> <span class="toctext">Ibernazione su un file di swap</span></a></li>
<li class="toclevel-2 tocsection-6"><a href="#Sospensione_su_file"><span class="tocnumber">3.3</span> <span class="toctext">Sospensione su file</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-7"><a href="#Sospensione_e_Resuming"><span class="tocnumber">4</span> <span class="toctext">Sospensione e Resuming</span></a></li>
<li class="toclevel-1 tocsection-8"><a href="#Configurazioni_addizionali_di_pm-utils"><span class="tocnumber">5</span> <span class="toctext">Configurazioni addizionali di pm-utils</span></a></li>
<li class="toclevel-1 tocsection-9"><a href="#Usare_UserUI_-_Un'Interfaccia_Utente_per_TuxOnIce_(Opzionale)"><span class="tocnumber">6</span> <span class="toctext">Usare UserUI - Un'Interfaccia Utente per TuxOnIce (Opzionale)</span></a></li>
<li class="toclevel-1 tocsection-10"><a href="#Riferimenti"><span class="tocnumber">7</span> <span class="toctext">Riferimenti</span></a></li>
</ul>
</div>

<h2><span class="mw-headline" id="Preparazione_del_kernel">Preparazione del kernel</span></h2>
<p>TuxOnIce consiste in una patch del kernel, più un'interfaccia utente aggiuntiva. Solo la patch è necessaria, l'interfaccia utente fornisce un'interfaccia testuale o grafica durante il ciclo di sospensione/ibernazione. 
</p>
<p>È possibile usare il pacchetto <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/linux-ice/">linux-ice</a></span><sup><small>AUR</small></sup><sup>[<a href="../en/Help:Procedures.html#Fix_broken_package_links" title="Help:Procedures">broken link</a>: package not found]</sup> o <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/linux-pf/">linux-pf</a></span><sup><small>AUR</small></sup> presenti su <a href="../it/Arch_User_Repository.html" class="mw-redirect" title="AUR (Italiano)">AUR</a>. Questo automatizza la procedura di patch, compilazione ed installazione del kernel, e la generazione della initramfs con un hook adeguato. In questo modo si ha un buon controllo del processo di installazione e volendo si può personalizzare apportando i cambiamenti voluti.
</p>
<p>Altrimenti, sarà necessario applicare la patch, configurare e compilare il proprio kernel, visitare le pagine <a href="../en/Kernel.html#Compilation" class="mw-redirect" title="Kernel Compilation From Source">Kernel Compilation From Source</a> e <a href="../en/Kernel/Arch_Build_System.html" class="mw-redirect" title="Kernel Compilation with ABS">Kernel Compilation with ABS</a> per maggiori informazioni. Le patch necessarie possono essere ottenute presso il sito TuxOnIce di cui sopra.
</p>
<p>Ora è necessario installare il pacchetto <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/hibernate-script/">hibernate-script</a></span><sup><small>AUR</small></sup><sup>[<a href="../en/Help:Procedures.html#Fix_broken_package_links" title="Help:Procedures">broken link</a>: package not found]</sup> da <a href="../it/Arch_User_Repository.html" class="mw-redirect" title="AUR (Italiano)">AUR</a> che verrà richiamato da TuxOnIce. Questo pacchetto è lo script ufficiale fornito dal team di TuxOnIce.
</p>
<p>I file di configurazione di hibernate-script sono in <code>/etc/hibernate</code>.
</p>
<h2><span class="mw-headline" id="Ricreare_initramfs">Ricreare initramfs</span></h2>
<p>Se si vuole usare un initramfs (cosa che Arch fa di default) è necessario aggiungere "resume" agli HOOKS di <a href="../it/Mkinitcpio.html" title="Mkinitcpio (Italiano)">mkinitcpio</a>. In più, se si vuole usare la compressione veloce LZO aggiungere "lzo" all'array MODULES dello stesso file.
Un esempio di <code>/etc/mkinitcpio.conf</code>:
</p>
<pre>MODULES="lzo"
HOOKS="base udev autodetect block resume filesystems"
</pre>
<p>Ricreare ora l'initramfs:
</p>
<pre># mkinitcpio -p linux-ice
</pre>
<p>o
</p>
<pre># mkinitcpio -p linux-pf
</pre>
<h2><span class="mw-headline" id="Configurazione_del_Boot_Loader">Configurazione del Boot Loader</span></h2>
<p>Prima che si possa usare la funzione di sospensione, bisogna aggiungere il parametro <code>resume</code> ai parametri passati al kernel nel file di configurazione del boot loader (se si sta usando un sistema con una partizione swap "specificata" nella configurazione del kernel questo passaggio non è necessario). Questo punterà alla partizione di swap o al file di ibernazione.
</p>
<h3><span class="mw-headline" id="Ibernazione_in_una_partizione_di_Swap">Ibernazione in una partizione di Swap</span></h3>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> A partire l'ultima versione di TuxOnIce (3.0.99.44), aggiungere il parametro "resume" al kernel non è più necessario, sarà rilevato automaticamente se l'unità di swap contiene un'immagine avviabile. Ci sarà solo bisogno di impostare il metodo di swap adeguatamente. Per maggiori informazioni, visitare <a rel="nofollow" class="external autonumber" href="http://www.tuxonice.net/">[1]</a>.</div>
<p>Quindi configurare il metodo swap (assicurarsi che sia specificata la partizione giusta) in <code> /etc/hibernate/tuxonice.conf</code>
</p>
<pre>SuspendDevice swap:/dev/sda3
</pre>
<h3><span class="mw-headline" id="Ibernazione_su_un_file_di_swap">Ibernazione su un file di swap</span></h3>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> L'autorilevamento, come detto in precedenza, non sembra funzionare con i file di swap; sarà dunque necessario impostare manualmente il parametro "resume" del kernel.</div>
<p>Se si utilizza un file di swap invece di una partizione di swap, sarà necessario passare il percorso dei suoi header a TuxOnIce. TuxOnIce è in grado di elencare tutti gli header di swap disponibile.
</p>
<pre>cat /sys/power/tuxonice/swap/headerlocations
</pre>
<p>Utilizzare la stringa data così com'è in <code>/etc/hibernate/tuxonice.conf</code> e passarla al kernel come parametro "resume". 
</p>
<pre>SuspendDevice swap:/dev/sda7:0x1087070
</pre>
<p>Aggiungere la seguente riga nei parametri del kernel nel file di configurazione del bootloader:
</p>
<pre>resume=swap:/dev/sda7:0x1087070
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Specificare il dispositivo di "resume" per mezzo degli UUID dovrebbe funzionare, ma non è del tutto garantito. Questo potrebbe essere un problema di TuxOnIce o di mkinitcpio. Specificando <code>/dev/sdxx</code> dovrebbe invece funzionare in tutti i casi.</div>
<h3><span class="mw-headline" id="Sospensione_su_file">Sospensione su file</span></h3>
<p>Per l'allocatore di file, si dovrà preparare un file di ibernazione. Questo è diverso dal file di swap standard dato che questo file viene utilizzato SOLO per l'ibernazione e non come file di swap del sistema generale. Il metodo precedente è raccomandata per essere più efficiente in termini di spazio su disco. Configurare il file <code>/etc/hibernate/tuxonice.conf</code> e decommentare l'opzione "FilewriterLocation":
</p>
<pre>FilewriterLocation /suspend_file 1000
</pre>
<p>1000 è la quantità di spazio su disco riservato per il file di ibernazione, in questo caso 1000 megabyte. Di solito un valore pari al 50%-75% della quantità totale di RAM è sufficiente.
</p>
<p>Successivamente, eseguire il seguente comando per creare il file di ibernazione:
</p>
<pre># hibernate --no-suspend
</pre>
<p>Dare un'occhiata a <code>/sys/power/tuxonice/resume</code> per vedere cosa passare al kernel. Si dovrebbe vedere qualche file del genere:<code>file:/dev/hda7:0x10011f</code>, nel qual caso si dovrebbe aggiungere <code>resume=file:/dev/hda7:0x10011f</code> come parametro del kernel nel file <code>/etc/lilo.conf</code> (per <a href="../en/LILO.html" title="LILO">LILO</a>) o <code>/boot/grub/menu.lst</code>  (per <a href="../it/GRUB_Legacy.html" title="GRUB Legacy (Italiano)">GRUB</a>) o <code>/boot/grub/menu.cfg</code> (per <a href="../it/GRUB.html" class="mw-redirect" title="GRUB2 (Italiano)">GRUB2</a>).
</p>
<h2><span class="mw-headline" id="Sospensione_e_Resuming">Sospensione e Resuming</span></h2>
<p>Con gli hibernate-script, il metodo di ibernazione preferito può essere configurato nel file <code>/etc/hibernate/hibernate.conf</code>. Se si elencano diversi metodi, il primo sarà quello utilizzato. Notare che <i>hibernate</i> può essere anche usato con <a href="../en/Power_management/Suspend_and_hibernate.html" class="mw-redirect" title="Suspend to RAM">Suspend to RAM</a> o vanilla swsusp, ma questo non è parte della guida. 
</p>
<p>Per TuxOnIce usare:
</p>
<pre>TryMethod tuxonice.conf
</pre>
<p>Le opzioni specifiche per TuxOnIce sono nel file <code>/etc/hibernate/tuxonice.conf</code>. Assicurarsi che le seguenti righe siano decommentate e configurate adeguatamente:
</p>
<pre>UseTuxOnIce yes
Compressor lzo
</pre>
<p>Ci sono altre opzioni aggiuntive e trucchi che possono essere impostati in <code>/etc/hibernate/tuxonice.conf</code> e <code>/etc/hibernate/common.conf</code>,
informazioni più dettagliate possono essere trovate sul sito ufficiale di <a rel="nofollow" class="external text" href="http://www.tuxonice.net/HOWTO-4.html">TuxOnIce</a> o nella pagina <a href="../en/Power_management/Suspend_and_hibernate.html" class="mw-redirect" title="Suspend to Disk">Suspend to Disk</a> di questo wiki.
</p>
<p>Provare quindi l'ibernazione di TuxOnIce con questo comando:
</p>
<pre># hibernate -F /etc/hibernate/tuxonice.conf
</pre>
<p>Si può uscire dal ciclo di sospensione premendo il pulsante <code>Esc</code>. Premendo <code>Shift + R</code>, si forzerà il sistema a riavviarsi dopo l'ibernazione.
</p>
<p>Se tutto è andato bene, dovresti essere in grado di effettuare il resuming usando la stessa voce del menù di Grub che usi normalmente per avviare il sistema. Se imposti questa opzione come default, effettuerai sempre il resuming se un file di ibernazione è disponibile su disco o sulla swap. È bene testare la sospensione/ibernazione prima da terminale, e dopo essersi assicurati che funziona, provarla da X.
</p>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Attenzione:</strong>  Non usare mai un kernel differente per effettuare il resume da quello che hai usato per l'ibernazione! Se pacman aggiorna il tuo kernel, non ibernare prima che tu abbia riavviato la macchina e avviato il nuovo kernel.</div> 
<p>Si può rendere questa pratica più sicura aggiungendo il demone <i>hibernate-cleanup</i> nella stringa DAEMONS in <code> /etc/rc.conf</code>. Questo script verifica che qualsiasi vecchia immagine per il resume sia cancellata della partizione di swap durante l'avvio. Questo dovrebbe rendere più sicuro il sistema anche nel caso si scelga il kernel sbagliato dal menù di Grub. Il demone hibernate-cleanup è incluso nel pacchetto hibernate-script.
</p>
<h2><span class="mw-headline" id="Configurazioni_addizionali_di_pm-utils">Configurazioni addizionali di pm-utils</span></h2>
<p>Se si usa <a href="../it/GNOME.html" title="GNOME (Italiano)">GNOME</a> come <a href="../it/Desktop_environment.html" title="Desktop environment (Italiano)">DE</a>, o un qualunque altro DE che richieda <a href="../en/ArchWiki:Archive.html" class="mw-redirect" title="Pm-utils (Italiano)">pm-utils</a> per spegnere e sospendere sono necessarie ulteriori configurazioni per TuxOnIce.
</p>
<p>Tali configurazioni vanno fatte in <code>/etc/hibernate/hibernate.conf</code> e dovrebbero funzionare. Alcune configurazioni però possono dare problemi con pm-utils. La compressione, per esempio, è di default lzo a meno che si intervenga manualmente.  Editare il file sotto <code>/etc/pm/sleep.d/</code> è un'ottima alternativa per far si che le configurazioni vengano lette correttamente. 
</p>
<p>Per cambiare la compressione usata da TuxOnIce, per esempio, editare <code>/etc/pm/sleep.d/00doit</code> e aggiungere qualcosa del genere:
</p>
<pre>#!/bin/bash
case $1 in
hibernate)
#Possible compressors include lzo, lzf, and none
echo none &gt; /sys/power/tuxonice/compression/algorithm
;;
</pre>
<p>Linee addizionali possono essere usate per cambiare altre opzioni come ad esempio il logging level di default (in <code>/sys/power/tuxonice/user_interface/default_console_level</code>).
</p>
<h2>
<span id="Usare_UserUI_-_Un.27Interfaccia_Utente_per_TuxOnIce_.28Opzionale.29"></span><span class="mw-headline" id="Usare_UserUI_-_Un'Interfaccia_Utente_per_TuxOnIce_(Opzionale)">Usare UserUI - Un'Interfaccia Utente per TuxOnIce (Opzionale)</span>
</h2>
<p>È anche possibile utilizzare un'interfaccia utente testuale o grafica (<a href="../en/ArchWiki:Archive.html" class="mw-redirect" title="Fbsplash (Italiano)">fbsplash</a>) con una barra di avanzamento. Per fare questo, installare il pacchetto <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/tuxonice-userui/">tuxonice-userui</a></span><sup><small>AUR</small></sup> da <a href="../it/Arch_User_Repository.html" class="mw-redirect" title="AUR (Italiano)">AUR</a>. Questo pacchetto dipende dalla libreria statica freetype2, fornita dal pacchetto <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/freetype2-static/">freetype2-static</a></span><sup><small>AUR</small></sup><sup>[<a href="../en/Help:Procedures.html#Fix_broken_package_links" title="Help:Procedures">broken link</a>: package not found]</sup> (anche questo da AUR).
</p>
<p>Nel file <code> /etc/hibernate/tuxonice.conf</code>, imposta l'interfaccia utente desiderata:
</p>
<pre>ProcSetting user_interface/program "/usr/sbin/tuxoniceui"  #Interfaccia Testuale
</pre>
<p>o
</p>
<pre>ProcSetting user_interface/program "/usr/sbin/tuxoniceui -f"  #Interfaccia Grafica con fbsplash
</pre>
<p>L'interfaccia con fbsplash necessita di un symlink al tema fbsplash, in questo modo:
</p>
<pre># ln -s /etc/splash/arch-banner-noicons/ /etc/splash/tuxonice
</pre>
<p>Senza questo symlink, non ci saranno indicatori di progresso durante il suspend/resume.
</p>
<p>Probabilmente sarà necessario rigenerare l'initramfs dopo aver cambiato il link simbolico sopra.
</p>
<p>L'interfaccia testuale può essere utile per il debug di TuxOnIce, in quanto visualizza alcuni messaggi.
</p>
<p>Non si vedrà un'interfaccia utente durante i primi secondi del processo di ripristino a meno che non si aggiunga l'hook <b>userui</b> alla propria configurazione mkinitcpio (prima dell'hook <b>resume</b>) e si rigeneri l'initramfs, ma anche questo è opzionale. 
</p>
<p>Generate initramfs:
</p>
<pre># mkinitcpio -p linux-ice
</pre>
<p>Per verificare se la userui funziona, da terminale eseguite:
</p>
<pre># tuxoniceui_test --test
</pre>
<p>Per l'interfaccia grafica eseguite:
</p>
<pre># tuxoniceui_fbsplash --test
</pre>
<h2><span class="mw-headline" id="Riferimenti">Riferimenti</span></h2>
<ul>
<li>Il sito di <a rel="nofollow" class="external text" href="http://www.tuxonice.net">TuxOnIce</a> e la sua <a rel="nofollow" class="external text" href="http://wiki.tuxonice.net">wiki</a><sup>[<a href="https://en.wikipedia.org/wiki/Wikipedia:Link_rot" class="extiw" title="wikipedia:Wikipedia:Link rot">link interrotto</a> 2020-08-06]</sup> sono un ottima fonte di informazioni.</li>
<li>Altre informazioni generali sulla sospensione/ibernazione con gli hibernate-script si possono trovare nella pagina <a href="../en/Power_management/Suspend_and_hibernate.html" class="mw-redirect" title="Suspend to Disk">Suspend to Disk</a> di questa wiki. Questa tratta argomenti avanzati come problemi con certe configurazioni hardware.</li>
</ul>
</div>
</div>
<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Categories</a>: <ul>
<li><a href="../it/Category:Power_management.html" title="Category:Power management (Italiano)">Power management (Italiano)</a></li>
<li><a href="../it/Category:Laptops.html" title="Category:Laptops (Italiano)">Laptops (Italiano)</a></li>
</ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden category: <ul><li><a href="../en/Category:Pages_with_broken_package_links.html" title="Category:Pages with broken package links">Pages with broken package links</a></li></ul>
</div>
</div>
	</div>
</div>

<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
		<li>Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=TuxOnIce_(Italiano)&amp;oldid=630069">https://wiki.archlinux.org/index.php?title=TuxOnIce_(Italiano)&amp;oldid=630069</a>"</li>
		<li id="footer-info-lastmod"> This page was last edited on 6 August 2020, at 11:15.</li>
		<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
	<br>
</ul>
	<ul id="footer-places">
		<li id="footer-places-privacy"><a href="../en/ArchWiki:Privacy_policy.html" title="ArchWiki:Privacy policy">Privacy policy</a></li>
		<li id="footer-places-about"><a href="../en/ArchWiki:About.html" title="ArchWiki:About">About ArchWiki</a></li>
		<li id="footer-places-disclaimer"><a href="../en/ArchWiki:General_disclaimer.html" title="ArchWiki:General disclaimer">Disclaimers</a></li>
	</ul>
	<ul id="footer-icons" class="noprint">
		<li id="footer-copyrightico">
	</ul>
	<div style="clear: both;"></div>
</footer>



</body>
</html>
