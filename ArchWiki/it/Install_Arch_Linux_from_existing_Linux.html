<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>Install Arch Linux from existing Linux (Italiano) - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.35.0">
<meta name="robots" content="noindex,follow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="http://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Install_Arch_Linux_from_existing_Linux_Italiano rootpage-Install_Arch_Linux_from_existing_Linux_Italiano skin-vector action-view skin-vector-legacy">
<div id="content" class="mw-body" role="main" style="margin: 0">
	<a id="top"></a>
	<div id="siteNotice" class="mw-body-content"></div>
	<div class="mw-indicators mw-body-content">
	</div>
	<h1 id="firstHeading" class="firstHeading" lang="en">Install Arch Linux from existing Linux (Italiano)</h1>
	<div id="bodyContent" class="mw-body-content">
		<div id="siteSub" class="noprint">From ArchWiki</div>
		<div id="contentSub"></div>
		<div id="contentSub2"></div>
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="#searchInput">Jump to search</a>
		<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr">
<div class="warningbox">The printable version is no longer supported and may have rendering errors. Please update your browser bookmarks and please use the default browser print function instead.</div>
<div class="mw-parser-output">
<div class="noprint archwiki-template-message">
<p><a href="../File:Tango-view-refresh-red.png" class="image"><img alt="Tango-view-refresh-red.png" src="../File:Tango-view-refresh-red.png" decoding="async" width="48" height="48"></a><b>This article or section is out of date.</b><a href="../File:Tango-view-refresh-red.png" class="image"><img alt="Tango-view-refresh-red.png" src="../File:Tango-view-refresh-red.png" decoding="async" width="48" height="48"></a></p>
<div>
<b>Reason:</b>  Questa pagina è in fase di revisione e potrebbe non essere aggiornata. Seguite per ora le istruzioni della versione inglese.  (Discuss in <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php/Talk:ArchWiki_Translation_Team_(Italiano)#Pagine_Marcate_come_">"out_of_date"_e_"Traslateme"  Talk:ArchWiki Translation Team (Italiano)#Pagine Marcate come "out of date" e "Traslateme"</a>)</div>
</div>
<p>Questa guida è destinata a integrare ed aggiornare le tre guide di installazione alternativa già esistenti su questo wiki. È destinata a chiunque voglia installare Arch Linux da qualsiasi altro sistema Linux in esecuzione, al di fuori di un LiveCD o un'installazione pre-esistente di una distribuzione diversa.
</p>
<div id="toc" class="toc" role="navigation" aria-labelledby="mw-toc-heading">
<input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none"><div class="toctitle" lang="en" dir="ltr">
<h2 id="mw-toc-heading">Contents</h2>
<span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span>
</div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Generale"><span class="tocnumber">1</span> <span class="toctext">Generale</span></a></li>
<li class="toclevel-1 tocsection-2">
<a href="#Setup_del_sistema_host"><span class="tocnumber">2</span> <span class="toctext">Setup del sistema host</span></a>
<ul>
<li class="toclevel-2 tocsection-3">
<a href="#Ottenere_i_pacchetti_necessari"><span class="tocnumber">2.1</span> <span class="toctext">Ottenere i pacchetti necessari</span></a>
<ul>
<li class="toclevel-3 tocsection-4"><a href="#Introduzione"><span class="tocnumber">2.1.1</span> <span class="toctext">Introduzione</span></a></li>
<li class="toclevel-3 tocsection-5"><a href="#Scarica_i_binari_di_pacman_e_le_librerie_condivise"><span class="tocnumber">2.1.2</span> <span class="toctext">Scarica i binari di pacman e le librerie condivise</span></a></li>
<li class="toclevel-3 tocsection-6"><a href="#Installare_pacman_nel_sistema_host"><span class="tocnumber">2.1.3</span> <span class="toctext">Installare pacman nel sistema host</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-7"><a href="#Configurare_il_sistema_host"><span class="tocnumber">2.2</span> <span class="toctext">Configurare il sistema host</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-8">
<a href="#Installazione_del_sistema_di_destinazione"><span class="tocnumber">3</span> <span class="toctext">Installazione del sistema di destinazione</span></a>
<ul>
<li class="toclevel-2 tocsection-9"><a href="#Preparare_una_partizione_per_Arch"><span class="tocnumber">3.1</span> <span class="toctext">Preparare una partizione per Arch</span></a></li>
<li class="toclevel-2 tocsection-10"><a href="#Installare_il_core"><span class="tocnumber">3.2</span> <span class="toctext">Installare il core</span></a></li>
<li class="toclevel-2 tocsection-11"><a href="#Preparare_i_/dev_nodes"><span class="tocnumber">3.3</span> <span class="toctext">Preparare i /dev nodes</span></a></li>
<li class="toclevel-2 tocsection-12"><a href="#Chroot"><span class="tocnumber">3.4</span> <span class="toctext">Chroot</span></a></li>
<li class="toclevel-2 tocsection-13"><a href="#Installare_il_resto"><span class="tocnumber">3.5</span> <span class="toctext">Installare il resto</span></a></li>
<li class="toclevel-2 tocsection-14"><a href="#Configurare_il_sistema_di_destinazione"><span class="tocnumber">3.6</span> <span class="toctext">Configurare il sistema di destinazione</span></a></li>
<li class="toclevel-2 tocsection-15">
<a href="#Installazione_di_grub"><span class="tocnumber">3.7</span> <span class="toctext">Installazione di grub</span></a>
<ul>
<li class="toclevel-3 tocsection-16"><a href="#Ripristino_manuale_di_GRUB_libs"><span class="tocnumber">3.7.1</span> <span class="toctext">Ripristino manuale di GRUB libs</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-17"><a href="#Ritocchi_finali"><span class="tocnumber">3.8</span> <span class="toctext">Ritocchi finali</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-18"><a href="#Un_terzo_(e_pi%C3%B9_semplice)_metodo"><span class="tocnumber">4</span> <span class="toctext">Un terzo (e più semplice) metodo</span></a></li>
<li class="toclevel-1 tocsection-19">
<a href="#Risoluzione_dei_problemi"><span class="tocnumber">5</span> <span class="toctext">Risoluzione dei problemi</span></a>
<ul>
<li class="toclevel-2 tocsection-20"><a href="#Kernel_Panic"><span class="tocnumber">5.1</span> <span class="toctext">Kernel Panic</span></a></li>
<li class="toclevel-2 tocsection-21"><a href="#Il_dispositivo_root_%22/dev/sd??%22_non_esiste"><span class="tocnumber">5.2</span> <span class="toctext">Il dispositivo root "/dev/sd??" non esiste</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-22">
<a href="#Un_metodo_alternativo:_Installazione_da_un_sistema_Linux_esistente_con_l'immagine_di_Arch"><span class="tocnumber">6</span> <span class="toctext">Un metodo alternativo: Installazione da un sistema Linux esistente con l'immagine di Arch</span></a>
<ul>
<li class="toclevel-2 tocsection-23"><a href="#Preparare_l'ambiente_di_installazione"><span class="tocnumber">6.1</span> <span class="toctext">Preparare l'ambiente di installazione</span></a></li>
<li class="toclevel-2 tocsection-24"><a href="#Installare_dal_nuovo_ambiente"><span class="tocnumber">6.2</span> <span class="toctext">Installare dal nuovo ambiente</span></a></li>
<li class="toclevel-2 tocsection-25"><a href="#Aggiornamento_e_installazione_dei_pacchetti_dal_sistema_host_via_chroot"><span class="tocnumber">6.3</span> <span class="toctext">Aggiornamento e installazione dei pacchetti dal sistema host via chroot</span></a></li>
</ul>
</li>
</ul>
</div>

<h2><span class="mw-headline" id="Generale">Generale</span></h2>
<p><a href="../en/Pacman.html" title="Pacman">Pacman</a> può essere configurato con l'opzione (-r) per operare in una qualsiasi directory, usandola come contesto di "root" durante l'esecuzione.
</p>
<p>Ciò è utile per creare un nuovo sistema Arch Linux dal disco live di un'altra distro o da un'installazione esistente. È altresì utile per creare nuovi ambienti chroot in un sistema "host", mantenendo una "golden-master" per lo sviluppo e la distribuzione, o altri divertenti motivi come rootfs-over-NFS per macchine senza disco.
</p>
<p>In questa guida il requisito necessario è che il sistema host esistente sia in grado di eseguire i programmi con l'architettura del target Arch Linux. Nel caso di un host x86_64, è comunque possibile usare un pacman i686 per creare un ambiente chroot a 32bit. Consultare <a href="../en/ArchWiki:Archive.html" class="mw-redirect" title="Arch64 Install bundled 32bit system">Arch64 Install bundled 32bit system</a>. Tuttavia non è così facile compilare un ambiente a 64 bit quando l'host supporta in esecuzione solo programmi a 32 bit.
</p>
<p>In questa guida inoltre, ci si riferisce a partizioni come /dev/hdxx o /dev/sdxx, ossia ad una qualunque dev si abbia nel proprio sistema per la partizione in questione. La convenzione è:
</p>
<pre>Drive 1, Partition 1:  /dev/hda1 o /dev/sda1
Drive 1, Partition 2:  /dev/hda2 o /dev/sda2
Drive 2, Partition 1:  /dev/hdb1 o /dev/sdb1
</pre>
<p>ecc...
</p>
<p>In genere verrà utilizzata /dev/sdxx , ma si faccia attenzione che sul proprio sistema quella voce potrebbe essere /dev/hdxx.
</p>
<p>In questo articolo, 
</p>
<dl>
<dt>host</dt>
<dd>si riferisce al computer che è usato per creare l'installazione.</dd>
</dl>
<dl>
<dt>target</dt>
<dd>è il computer dove si vuole installare Arch.</dd>
</dl>
<p>Questi potrebbero essere lo stesso computer. Non è necessario che l'host sia una distribuzione Arch, potrebbe essere Debian o un sistema Redhat. La sezione inititolata "Setup del sistema host" spiega come installare pacman nell'host. La sezione seguente intitolata "Setup del sistema target" spiega come usare pacman dal sistema host per installare Arch Linux nel computer target.
Quindi se il proprio sistema è già Arch Linux, si può procedere alla sezione "Setup del sistema target".
</p>
<h2><span class="mw-headline" id="Setup_del_sistema_host">Setup del sistema host</span></h2>
<p>È necessario installare il pacchetto pacman di Archlinux nel proprio ambiente linux (host).Inoltre si dovrà recuperare la lista dei mirrors site <a rel="nofollow" class="external autonumber" href="https://archlinux.org/mirrorlist/">[1]</a> che pacman utilizzerà per scaricare i pacchetti del sistema. Se sei già utilizzando Arch, saltare questo passaggio e andare a <a href="#Installazione_del_sistema_di_destinazione">#Installazione del sistema di destinazione</a>
</p>
<h3><span class="mw-headline" id="Ottenere_i_pacchetti_necessari">Ottenere i pacchetti necessari</span></h3>
<h4><span class="mw-headline" id="Introduzione">Introduzione</span></h4>
<p>Si devono recuperare i pacchetti richiesti dal proprio ambiente linux ospitante. Nell'esempio si presuppone si stia usando un ambiente i686. <b>Se si sta utilizzando un sistema linux a 64bit si dovrà cambiare a ogni evenienza "i686" con "x86_64".</b>
</p>
<p>Tutte i numeri di versione utilizzati qui possono essere cambiati. Si prega di controllare i numeri di versione in principio e annotarli. I numeri della versione possono essere trovati:
</p>
<ul>
<li>pacman <a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/core/i686/pacman/">32 bit</a><sup>[<a href="https://en.wikipedia.org/wiki/Wikipedia:Link_rot" class="extiw" title="wikipedia:Wikipedia:Link rot">link interrotto</a> 2020-08-02]</sup> e <a rel="nofollow" class="external text" href="https://archlinux.org/packages/core/x86_64/pacman/">64 bit</a>,</li>
<li>pacman-mirrolist per <a rel="nofollow" class="external text" href="https://archlinux.org/packages/core/any/pacman-mirrorlist/">tutte</a> le architetture.</li>
</ul>
<p>Una volta certi dei numeri di versione, si scarichino i pacchetti richiesti (cambiare il valore di ARCH a seconda delle proprie esigenze):
</p>
<pre>ARCH=i686
base_chroot=/tmp
mkdir ${base_chroot}/archlinux
cd ${base_chroot}/archlinux
</pre>
<h4><span class="mw-headline" id="Scarica_i_binari_di_pacman_e_le_librerie_condivise">Scarica i binari di pacman e le librerie condivise</span></h4>
<p>Ora si scarichino i pacchetti richiesti per installare <a href="../en/Pacman.html" title="Pacman">pacman</a>, per essere poi in grado di aggiungere altro software alla nuova directory di base:
</p>
<pre>wget <a rel="nofollow" class="external free" href="https://www.archlinux.org/packages/core/%24ARCH/pacman/download/">https://www.archlinux.org/packages/core/$ARCH/pacman/download/</a><sup>[<a href="https://en.wikipedia.org/wiki/Wikipedia:Link_rot" class="extiw" title="wikipedia:Wikipedia:Link rot">link interrotto</a> 2020-08-02]</sup> --no-check-certificate
wget <a rel="nofollow" class="external free" href="https://archlinux.org/packages/core/any/pacman-mirrorlist/download/">https://archlinux.org/packages/core/any/pacman-mirrorlist/download/</a> --no-check-certificate
</pre>
<p>Note: Se wget non riesce a recuperare i nomi dei file correttamente, riprovare wget con --trust-server-names. Suggerimento: è possibile usare un alias:
</p>
<pre>alias wget='wget --trust-server-names'
</pre>
<p>Permette di scaricare i file con i nomi proposti dal server.
Si veda la <a rel="nofollow" class="external text" href="http://pwet.fr/man/linux/commandes/wget">man page</a> e il <a rel="nofollow" class="external text" href="https://www.gnu.org/software/wget/manual/wget.html">manuale ufficiale</a> di wget per ulteriori approfondimenti.
</p>
<p>Note: In caso di problemi con lo scaricamento di <b>pacman-mirrorlist</b> riprovare con questo modo più diretto con lftp:
</p>
<pre>link_name=<a rel="nofollow" class="external free" href="https://mirrors.kernel.org/archlinux/core/os/x86_64/">https://mirrors.kernel.org/archlinux/core/os/x86_64/</a>
lftp -e "mget pacman-mirrorlist-*.tar.gz" "${link_name}"
</pre>
<p>o in questo modo diretto (prestare attenzione alla stringa "data" nel nome del file) :
</p>
<pre>wget <a rel="nofollow" class="external free" href="http://mirrors.kernel.org/archlinux/core/os/x86_64/pacman-mirrorlist-20110703-1-any.pkg.tar.gz">http://mirrors.kernel.org/archlinux/core/os/x86_64/pacman-mirrorlist-20110703-1-any.pkg.tar.gz</a><sup>[<a href="https://en.wikipedia.org/wiki/Wikipedia:Link_rot" class="extiw" title="wikipedia:Wikipedia:Link rot">link interrotto</a> 2020-08-02]</sup>
</pre>
<p>Potrebbero essere necessarie ulteriori librerie aggiuntive per far funzionare pacman:
</p>
<pre>for software_name in libfetch libarchive openssl xz expat ; do wget <a rel="nofollow" class="external free" href="https://www.archlinux.org/packages/core/%24ARCH/%24%7Bsoftware_name%7D/download/">https://www.archlinux.org/packages/core/$ARCH/${software_name}/download/</a><sup>[<a href="https://en.wikipedia.org/wiki/Wikipedia:Link_rot" class="extiw" title="wikipedia:Wikipedia:Link rot">link interrotto</a> 2020-08-02]</sup> ; done
</pre>
<p>Spacchettare tutti i pacchetti necessari:
</p>
<pre>for f in *.tar.gz ; do tar xzvf $f ; done
</pre>
<p>Prima di usare pacman, ricordarsi di modificare <code>/tmp/archlinux/etc/pacman.conf</code> in modo da puntare a <code>/tmp/archlinux/etc/pacman.d/mirrorlist</code> e selezionare il proprio mirror prescelto.
Per facilitare le cose (presupponendo si stia utilizzando <code>bash</code> o <code>zsh</code>), si può configurare l'ambiente in tal modo
</p>
<pre>export PATH=${base_chroot}/archlinux/usr/bin:$PATH
export LD_LIBRARY_PATH=${base_chroot}/archlinux/usr/lib:$LD_LIBRARY_PATH
alias pacman="pacman --config ${base_chroot}/archlinux/etc/pacman.conf"
</pre>
<h4><span class="mw-headline" id="Installare_pacman_nel_sistema_host">Installare pacman nel sistema host</span></h4>
<p>Se non vi importa mettere in disordine il proprio sistema host, si possono estrarre tutti i tarball scaricati nella propria directory root dando da root questi comandi:
</p>
<pre>cd /
for f in /tmp/archlinux/pacman-*pkg.tar.gz ; do
  tar xzf $f
done
</pre>
<p>Tuttavia, tenere presente che questa operazione potrebbe cancellare alcuni file, e danneggiare il sistema.
</p>
<ol>
<li><div>Se si sta installando da Ubuntu 9.10 LiveCD (o forse anche da altre versioni), saranno necessari non solo i file di pacman (shared libs) per usarlo.  Usare lo script di Lucky descritto in <a rel="nofollow" class="external text" href="https://bbs.archlinux.org/viewtopic.php?pid=759166">questo thread</a> per scaricarli!
</div></li>
<li><div>n alternativa, si possono trasformare questi archivi in pacchetti per la propria distribuzione con il tool <a rel="nofollow" class="external text" href="http://kitenet.net/~joey/code/alien/">alien</a>. Vedere la man page dello strumento per le istruzioni. I pacchetti creati in questo modo possono essere installati nella distribuzione host utilizzando i soliti strumenti di gestione dei pacchetti disponibili. Questo approccio offre una migliore integrazione nell'ambiente Linux host. Per un sistema basato pacchetto debian questo è fatto con i seguenti comandi:
<pre>cd /tmp/archlinux
alien -d pacman-3.3.3-1-i686.pkg.tar.gz
alien -d pacman-mirrorlist-20101223-1-any.pkg.tar.gz
</pre>
<p><br>
Per i sistemi basati su RPM sarà necessario sostituire il parametro "-d" con "-r".
</p>
<p>Questi pacchetti possono quindi venire installati usando il normale gestore pacchetti dell'ambiente Linux host.
</p>
</div></li>
<li><div>
<p>Con Fedora 12, non è stato possibile installare pacman con uno qualsiasi degli altri metodi. Ma con l'ottimo script su <a rel="nofollow" class="external free" href="https://bbs.archlinux.org/viewtopic.php?pid=734336#p734336">https://bbs.archlinux.org/viewtopic.php?pid=734336#p734336</a>, verrà scaricato e installato.
</p>
</div></li>
<li><div>Con <a rel="nofollow" class="external text" href="http://gentoo.org/">Gentoo</a>: basta "smascherare" pacman aggiungendo <tt>sys-apps/pacman</tt> a <tt>/etc/portage/package.keywords</tt>. Ora basta eseguire <tt>emerge -av pacman</tt>.
<p>C'è anche una <a rel="nofollow" class="external text" href="http://ohnopub.net/~ohnobinki/gentoo/arch/">guida ben dettagliata</a>.
</p>
</div></li>
<li><div>
<p>Un metodo più vecchio è <a href="/index.php?title=Quick_Custom_Installation&amp;action=edit&amp;redlink=1" class="new" title="Quick Custom Installation (page does not exist)">discusso qui</a>.
</p>
</div></li>
</ol>
<h3><span class="mw-headline" id="Configurare_il_sistema_host">Configurare il sistema host</span></h3>
<p>L'obiettivo principale di questa operazione è di fare una corretta configurazione di pacman.
</p>
<p>Configurare il file /etc/pacman.conf a proprio gradimento, e rimuovere i mirror non necessari dal file /etc/pacman.d/mirrorlist. Abilitare inoltre come minimo un paio di mirror, necessari per non incorrere in errori, dovuti alla loro mancanza, durante la sincronizzazione. Si consiglia di risolvere manualmente i DNS nel file /etc/pacman.d/mirrorlist, dato che pacman per i686 potrebbe non trovare le informazioni degli indirizzi su sistemi x86_64.
</p>
<p>Se si sta installando da un LiveCD, e si dispone di un sistema con una bassa quantità di RAM e swap (&lt;1 GB), assicurarsi di impostare la cachedir in /etc/pacman.conf nella nuova partizione di Arch (es. <code>/newarch/var/cache/pacman/pkg</code>).   Altrimenti si potrebbe esaurire la memoria tra il sovraccarico della distro esistente e il download dei pacchetti necessari per installare.
</p>
<h2><span class="mw-headline" id="Installazione_del_sistema_di_destinazione">Installazione del sistema di destinazione</span></h2>
<h3><span class="mw-headline" id="Preparare_una_partizione_per_Arch">Preparare una partizione per Arch</span></h3>
<p>Non è <i>necessario</i> installare Arch su una partizione separata. Si potrebbe invece creare un filesystem di root in una directory normale, e quindi creare una tarball master da questa, o trasferirla attraverso la rete.
</p>
<p>Tuttavia, la maggior parte degli utenti preferiranno l'installazione di Arch nella propria partizione.
</p>
<p>Preparare tutte le partizioni e i filesystem necessari per l'installazione. Se il sistema host ha un interfaccia grafica per questo, come gparted, cfdisk, o mandrakes diskdrake, usarli senza problemi. 
</p>
<p>Per formattare una partizione come ext3, si esegue (dove /dev/sdxx è la partizione che si desidera preparare):
</p>
<pre>mkfs.ext3 /dev/sdxx 
</pre>
<p>Per formattare con ext3 con journaling e dir_index: 
</p>
<pre>mkfs.ext3 -j -O dir_index /dev/sdxx 
</pre>
<p>Per formattare con reiserfs: 
</p>
<pre>mkreiserfs /dev/sdxx 
</pre>
<p>Per formattare una partizione di swap, e iniziare ad usarlo: 
</p>
<pre>mkswap /dev/sdxx 
swapon /dev/sdxx
</pre>
<p>La maggior parte degli altri filesystem può essere configurata con la variante mkfs, date uno sguardo con il completamento automatico. I filesystem disponibili dipendono interamente dal proprio sistema host. 
</p>
<p>Una volta completata la configurazione dei file system, montarli. In questa guida, si farà riferimento alla nuova directory root come /newarch,  tuttavia la si può mettere dove si preferisce.
</p>
<pre>new_arch=/newarch
mkdir ${new_arch}
mount /dev/sdxx ${new_arch}
</pre>
<h3><span class="mw-headline" id="Installare_il_core">Installare il core</span></h3>
<p>Aggiornare pacman. Potrebbe essere necessario creare la cartella <code>/newarch/var/lib/pacman</code> per farlo funzionare ("vedere "Setup the host system" di cui sopra):
</p>
<pre>mkdir -p ${new_arch}/var/lib/pacman 
pacman -Sy -r ${new_arch}
</pre>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Attenzione:</strong> Problemi durante l'esecuzione di pacman host a 64 bit: Se l'esecuzione di pacman termina con <b>/tmp/archlinux/usr/bin/pacman: No such file or directory</b> creare un symlink a ld-linux-x86-64.so.2: <b>ln -s /lib64/ld-linux-x86-64.so.2 /lib/</b>
</div>
<p>Installare il gruppo "base" di pacchetti:
</p>
<pre>mkdir -p ${new_arch}/var/cache/pacman/pkg
pacman  -Su base --cachedir ${new_arch}/var/cache/pacman/pkg -r ${new_arch}
</pre>
<h3>
<span id="Preparare_i_.2Fdev_nodes"></span><span class="mw-headline" id="Preparare_i_/dev_nodes">Preparare i /dev nodes</span>
</h3>
<p>In primo luogo, assicurarsi che siano stati creati i /dev nodes corretti per udev:
</p>
<pre>ls -alF ${new_arch}/dev
</pre>
<p>Questo risulta in un elenco contenente delle righe simili alle seguenti (le date saranno diverse per voi):
</p>
<pre>crw-------  1 root root 5, 1 2008-12-27 21:40 console
crw-rw-rw-  1 root root 1, 3 2008-12-27 21:42 null
crw-rw-rw-  1 root root 1, 5 2008-12-27 21:40 zero
</pre>
<p>Eliminare e ricreare qualsiasi dispositivo che abbia un diverso insieme di permessi (i contenuti con crw-... più le due voci di root) e numeri maggiori/minori (i due prima della data).
</p>
<pre>cd ${new_arch}/dev 
rm console ; mknod -m 600 console c 5 1 
rm null ; mknod -m 666 null c 1 3 
rm zero ; mknod -m 666 zero c 1 5
</pre>
<p>Tutti i nodi di dispositivo dovrebbe essere già stati creati con i permessi giusti e non dovrebbe essere necessario ricreare qualsiasi di essi.
</p>
<h3><span class="mw-headline" id="Chroot">Chroot</span></h3>
<p>Ora si effettua il <a href="../en/Chroot.html" class="mw-redirect" title="Change root">chroot into the new Arch system</a>.
</p>
<p>Al fine di far funzionare correttamente i DNS è necessario modificare <code>${new_arch}/etc/resolv.conf</code> or replace it with the resolv.conf from your running distribution 
</p>
<pre>cp /etc/resolv.conf ${new_arch}/etc/
</pre>
<p>C'è noltre bisogno di copiare un'installazione corretta dei mirrorlist nel nuovo sistema:
</p>
<pre>cp /etc/pacman.d/mirrorlist ${new_arch}/etc/pacman.d
</pre>
<p>Infine modificare i files di configurazione di pacman <code>${new_arch}/etc/pacman.conf</code> definendo l'architettura del sistema.
Le impostazioni automatiche di default potrebbero fallire se sono differenti dal sistema ospite.	
</p>
<pre>Architecture = i686 or x86_64
</pre>
<p>Montare vari filesystem nel nuovo sistema Arch: 
</p>
<pre>mount -t proc proc ${new_arch}/proc
mount -t sysfs sys ${new_arch}/sys
mount -o bind /dev ${new_arch}/dev
</pre>
<p>Per una partizione di <code>/boot</code> separata, bisognerà probabilmente montare anche quella. Vedere <a href="../en/Chroot.html" class="mw-redirect" title="Change root">Change root</a> per maggiori informazioni.
</p>
<p>Quando tutto è pronto, effettuare il chroot nel nuovo filesystem:
</p>
<pre>chroot ${new_arch} /bin/bash
</pre>
<h3><span class="mw-headline" id="Installare_il_resto">Installare il resto</span></h3>
<p>Installare il kernel preferito, e tutti gli altri pacchetti di cui si ha bisogno. Per il kernel di default (che è già installato!):
</p>
<pre>pacman -S --needed linux 
</pre>
<p>Se si desidera installare i pacchetti extra ora, si può farlo con: 
</p>
<pre>pacman -S packagename
</pre>
<h3><span class="mw-headline" id="Configurare_il_sistema_di_destinazione">Configurare il sistema di destinazione</span></h3>
<p>Modificare il <code>/etc/fstab</code>, ricordando di aggiungere /, swap e qualsiasi altra partizione si possa voler utilizzare. Assicurarsi di usare il /dev/sd* (sda1, sda2, sdb1, etc) per le partizioni al posto di /dev/hd*, dal momento che Arch utilizza la convenzione sdxx per tutte le unità.
</p>
<p>Modificare i file <code>/etc/rc.conf</code>, <code>/etc/hosts</code> e <code>/etc/mkinitcpio.conf</code> a seconda delle proprie esigenze. Poi rigenerare l'immagine initcpio:
</p>
<pre>mkinitcpio -p linux

</pre>
<p>Modificare <code>/etc/locale.gen</code>, decommentando qualsiasi locale si desideri avere a disposizione, e compilare le versioni locali:
</p>
<pre>locale-gen
</pre>
<h3><span class="mw-headline" id="Installazione_di_grub">Installazione di grub</span></h3>
<p>Per usare <a href="../en/GRUB.html" title="GRUB">GRUB</a> durante il chroot, è necessario che <code>/etc/mtab</code> sia a aggiornato:
</p>
<pre>diff /etc/mtab /proc/mounts
</pre>
<p>Se si ottiene qualsiasi risultato dal precedente comando, inserisci:
</p>
<pre>grep -v rootfs /proc/mounts &gt; /etc/mtab  
</pre>
<p>È ora possibile eseguire: 
</p>
<pre>grub-install /dev/sdx
</pre>
<p>Se grub-install non riesce, è possibile installarlo manualmente:
</p>
<pre>grub 
grub&gt; find /boot/grub/stage1     (You should see some results here if you have done everything right so far.   If not, back up and retrace your steps.)
grub&gt; root (hd0,X) 
grub&gt; setup (hd0) 
grub&gt; quit 
</pre>
<p>Controllare molto attentamente il file <code>/boot/grub/menu.lst</code>. A seconda dell'host, potrebbe essere necessario correggere da hda to sda, oltre al prefisso /boot nel percorso. 
</p>
<h4><span class="mw-headline" id="Ripristino_manuale_di_GRUB_libs">Ripristino manuale di GRUB libs</span></h4>
<p>I file <code>*stage*</code> dovrebbero essere in <code>/boot/grub</code>, ma può non essere il caso se il bootloader non è stato installato durante l'installazione del sistema o se la partizione/filesystem erano danneggiati, cancellati accidentalmente, ecc.  
</p>
<p>Copiare manualmente le librerie grub in questo modo:
</p>
<pre># cp -a /usr/lib/grub/i386-pc/* /boot/grub
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Non dimenticare di montare la partizione di boot se l'installazione del sistema utilizza una separata!  Quanto sopra presuppone che la partizione di boot risieda sul filesystem di root o che sia montata in /boot sul filesystem di root!</div>
<p><br>
Istruzioni dettagliate per <a href="../en/GRUB.html" title="GRUB">GRUB</a> e <a href="../en/LILO.html" title="LILO">LILO</a> sono disponibili in altre sezioni di questo wiki.
</p>
<h3><span class="mw-headline" id="Ritocchi_finali">Ritocchi finali</span></h3>
<p>È possibile ignorare il punto 2.11, ma il resto della guida dovrebbe essere utile nelle configurazioni post-installazione del sistema.
</p>
<p><a href="../en/Chroot.html#Cleaning_up" class="mw-redirect" title="Change root">Uscire da chroot</a><sup>[<a href="../en/Help:Procedures.html#Fix_broken_section_links" title="Help:Procedures">broken link</a>: invalid section]</sup>:
</p>
<pre>exit
umount ${new_arch}/boot   # if you mounted this or any other separate partitions
umount ${new_arch}/{proc,sys,dev}
umount ${new_arch}
</pre>
<p>Riavviare il nuovo sistema Arch!
</p>
<h2>
<span id="Un_terzo_.28e_pi.C3.B9_semplice.29_metodo"></span><span class="mw-headline" id="Un_terzo_(e_più_semplice)_metodo">Un terzo (e più semplice) metodo</span>
</h2>
<p>Questo metodo è stato testato per la versione 1-4-12.
Per questo metodo la situazione migliore è quella dell'ambiente LiveCD (o, nel caso di server, un ambiente di recupero basato su gnu/Linux).
</p>
<p>Prima di tutto c'è bisogno di montare il disco che si vuole usare per l'installazione di Archlinux in /mnt.
In questo esempio viene usato /dev/sda1
</p>
<pre>mnt /dev/sda1 /mnt
cd ~
wget <a rel="nofollow" class="external free" href="http://tokland.googlecode.com/svn/trunk/archlinux/arch-bootstrap.sh">http://tokland.googlecode.com/svn/trunk/archlinux/arch-bootstrap.sh</a><sup>[<a href="https://en.wikipedia.org/wiki/Wikipedia:Link_rot" class="extiw" title="wikipedia:Wikipedia:Link rot">link interrotto</a> 2020-08-02]</sup> &amp;&amp; chmod +x arch-bootstrap.sh
</pre>
<p>Per installare un sistema a 32-bit:
</p>
<pre>./arch-bootstrap.sh /mnt/ i686 "<a rel="nofollow" class="external free" href="ftp://ftp.hosteurope.de/mirror/ftp.archlinux.org">ftp://ftp.hosteurope.de/mirror/ftp.archlinux.org</a>"
</pre>
<p>Per un sistema a 64-bit:
</p>
<pre>./arch-bootstrap.sh /mnt/ x86_64 "<a rel="nofollow" class="external free" href="ftp://ftp.hosteurope.de/mirror/ftp.archlinux.org">ftp://ftp.hosteurope.de/mirror/ftp.archlinux.org</a>"
</pre>
<p>L'avvio richiederà circa 2-5 minuti a seconda della velocità del sistema.	
</p>
<pre>mount -t proc none /mnt/proc
mount -t sysfs none /mnt/sys
mount -o bind /dev /mnt/dev
</pre>
<p>Queste operazioni di mount sono essenziali per l'installazione successiva bootloader.
Adesso viene la parte divertente, chroot dentro la nuova installazione di Arch:
</p>
<pre>chroot /mnt bash
pacman -Sy base
mkinitcpio -p linux
</pre>
<p>Scegliere un bootloader. Si possono trovare le istruzioni di installazione nelle pagine dedicate. (<a href="../en/Syslinux.html" title="Syslinux">Syslinux</a>, <a href="../en/GRUB.html" title="GRUB">GRUB</a>, <a href="../en/GRUB.html" class="mw-redirect" title="Grub2">Grub2</a>, etc.).
</p>
<p><b>Ricorda:</b> C'è ancora bisogno di fare la configurazioni finali come in una normale installazione Arch.
</p>
<p><i>Si ringrazia il sito turco: <a rel="nofollow" class="external text" href="http://raptiye.org/blog/2011/3/27/hetznerde-arch-linux-kurulumu/">Raptiye</a><sup>[<a href="https://en.wikipedia.org/wiki/Wikipedia:Link_rot" class="extiw" title="wikipedia:Wikipedia:Link rot">link interrotto</a> 2020-08-02]</sup> per la guida originale.</i>
</p>
<h2><span class="mw-headline" id="Risoluzione_dei_problemi">Risoluzione dei problemi</span></h2>
<h3><span class="mw-headline" id="Kernel_Panic">Kernel Panic</span></h3>
<p>Se quando si riavvia il nuovo sistema si ottiene un kernel panic dicendo la console non ha potuto aprire: 
</p>
<pre>kinit: couldn't open console, no such file... 
</pre>
<p>Questo significa che non si sono seguite le istruzioni di cui sopra. Seguire la procedura per creare i nodi dei dispositivo di base all'inizio della preparazione.
</p>
<h3>
<span id="Il_dispositivo_root_.22.2Fdev.2Fsd.3F.3F.22_non_esiste"></span><span class="mw-headline" id='Il_dispositivo_root_"/dev/sd??"_non_esiste'>Il dispositivo root "/dev/sd??" non esiste</span>
</h3>
<p>Se quando si riavvia il nuovo sistema si ottiene un messaggio di errore come questo: 
</p>
<pre>Root device '/dev/sda1' doesn't exist, attempting to create it... etc. 
</pre>
<p>Questo significa che le unità vengono visualizzate come "hda1" invece di "sda1" In questo caso modificare le impostazioni di GRUB o LILO per l'uso "hd??" o provare quanto segue. 
</p>
<p>Modificare /etc/mkinitcpio.conf e sostituire "ide" con "pata" nella riga "HOOKS=". Quindi rigenerare il proprio initrd. (Assicurarsi di essere entrati prima in ambiente chroot nel nuovo sistema.)
</p>
<pre>mkinitcpio -p linux
</pre>
<p>Se si usa LVM assicurati di aggiungere "lvm2" nella riga HOOKS. Rigenera l'initrd come sopra.
</p>
<p>Se si sta installando su un dispositivo che ha bisogno dell'hook PATA assicurarsi che sia posizionato prima dell'hook autodetect in mkinitcpio.conf.
</p>
<p>Se la partizione root è su un dispositivo USB, è necessario aggiungere "usb" nella riga "HOOKS="  prima di ogni altra cosa, incluso "base".
</p>
<h1>
<span id="Un_metodo_alternativo:_Installazione_da_un_sistema_Linux_esistente_con_l.27immagine_di_Arch"></span><span class="mw-headline" id="Un_metodo_alternativo:_Installazione_da_un_sistema_Linux_esistente_con_l'immagine_di_Arch">Un metodo alternativo: Installazione da un sistema Linux esistente con l'immagine di Arch</span>
</h1>
<h3>
<span id="Preparare_l.27ambiente_di_installazione"></span><span class="mw-headline" id="Preparare_l'ambiente_di_installazione">Preparare l'ambiente di installazione</span>
</h3>
<p>È possibile procurarsi qualsiasi immagine dalla pagina di download di Arch ed ottenere il contenuto dell'immagine per montare il loopback:
</p>
<p>Immagine CD i686: 
</p>
<pre>$ mkdir -v /mnt/image
$ mount -o loop archlinux-2011.08.19-core-i686.iso /mnt/image
</pre>
<p>creare le directory per l'estrazione dell'immagine e l'ambiente chroot
</p>
<pre>$ mkdir -v /mnt/extract
$ mkdir -pv /mnt/archlinux/lib/modules
$ mkdir -pv /mnt/archlinux/usr/share
$ mkdir -pv /mnt/archlinux/repo/core/{i686,any} 
</pre>
<p>estrarre il contenuto dell'immagine:
</p>
<pre>$ cd /mnt/image/arch/i686/
  
# root-image 
$ unsquashfs -dest /mnt/extract/root root-image.fs.sfs 
$ mount -t ext4 /mnt/extract/root/root-image.fs /mnt/archlinux
 
# lib-modules 
$ unsquashfs -dest /mnt/extract/modules lib-modules.fs.sfs 
$ mount -t ext4 /mnt/extract/modules/lib-modules.fs /mnt/archlinux/lib/modules
  
# repo-core-i686 
$ mount -o loop -t squashfs repo-core-i686.sfs /mnt/archlinux/repo/core/i686
  
$ cd /mnt/image/arch/any/
  
# usr-share 
$ unsquashfs -dest /mnt/extract/share usr-share.fs.sfs 
$ mount -t ext4 /mnt/extract/share/usr-share.fs /mnt/archlinux/usr/share
  
# repo-core-any 
$ mount -o loop -t squashfs repo-core-any.sfs /mnt/archlinux/repo/core/any
</pre>
<p>dopo questa fase, si avrà una nuova cartella archlinux contenente il nuovo sistema Arch.
</p>
<h3><span class="mw-headline" id="Installare_dal_nuovo_ambiente">Installare dal nuovo ambiente</span></h3>
<p>Ora eseguire il <a href="../en/Chroot.html" class="mw-redirect" title="Change root">chroot into the new Arch system</a>: 
</p>
<pre>$ mount -t proc /proc /mnt/archlinux/proc
$ mount -t sysfs /sys /mnt/archlinux/sys
$ mount -o bind /dev /mnt/archlinux/dev 
$ chroot /mnt/archlinux /bin/bash
</pre>
<p>A questo punto, andare avanti e lanciare l'installer aif di Arch!
</p>
<pre>$ aif -p interactive
</pre>
<p>ed è possibile installare Arch normalmente (da CD o da Internet) con il seguente puntatore:
</p>
<ul><li>Your target partition must not be being used by host system</li></ul>
<p><br>
Dopo aver installato Arch dall'ambiente chroot, è necessario smontare le partizioni montate da aif prima di uscire dal chroot:
</p>
<pre>$ umount /mnt/boot,home...
$ exit
$ umount /mnt/archlinux/{dev,sys,proc} 
$ umount /mnt/archlinux/lib/modules
$ umount /mnt/archlinux/usr/share
$ umount /mnt/archlinux/repo/core/{i686,any}
$ umount /mnt/archlinux
$ umount /mnt/image
$ rm -r /mnt/{archlinux,extract} 
</pre>
<p>È indispensabile smontare le partizioni prima di uscire da chroot, altrimenti non si sarà in grado di smontare la directory chroot.
</p>
<h3><span class="mw-headline" id="Aggiornamento_e_installazione_dei_pacchetti_dal_sistema_host_via_chroot">Aggiornamento e installazione dei pacchetti dal sistema host via chroot</span></h3>
<p>Aggiungere una voce al menu.lst del Grub esistente, o se è stato installato un nuovo Grub durante il processo di installazione, aggiungerlo al file /boot/grub/menu.lst del filesystem di Arch.
</p>
<p>Ora riavviare o entrare in <a href="../en/Chroot.html" class="mw-redirect" title="Change root">chroot</a> nella nuova partizione di Arch per installare i pacchetti aggiuntivi:
</p>
<pre>$ mkdir /mnt/arch
$ mount /dev/sdxx /mnt/arch
$ mount -t proc proc /mnt/arch/proc
$ mount -t sysfs sys /mnt/arch/sys
$ mount -o bind /dev /mnt/arch/dev 
$ chroot /mnt/arch /bin/bash
</pre>
<p>Aggiornare e installare nuovi pacchetti:
</p>
<pre># pacman -Syu
</pre>
</div>
</div>
<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../it/Category:Installation_process.html" title="Category:Installation process (Italiano)">Installation process (Italiano)</a></li></ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden categories: <ul>
<li><a href="../en/Category:Pages_or_sections_flagged_with_Template:Out_of_date.html" title="Category:Pages or sections flagged with Template:Out of date">Pages or sections flagged with Template:Out of date</a></li>
<li><a href="../en/Category:Pages_with_broken_section_links.html" title="Category:Pages with broken section links">Pages with broken section links</a></li>
</ul>
</div>
</div>
	</div>
</div>

<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
		<li>Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Install_Arch_Linux_from_existing_Linux_(Italiano)&amp;oldid=646835">https://wiki.archlinux.org/index.php?title=Install_Arch_Linux_from_existing_Linux_(Italiano)&amp;oldid=646835</a>"</li>
		<li id="footer-info-lastmod"> This page was last edited on 26 December 2020, at 12:00.</li>
		<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
	<br>
</ul>
	<ul id="footer-places">
		<li id="footer-places-privacy"><a href="../en/ArchWiki:Privacy_policy.html" title="ArchWiki:Privacy policy">Privacy policy</a></li>
		<li id="footer-places-about"><a href="../en/ArchWiki:About.html" title="ArchWiki:About">About ArchWiki</a></li>
		<li id="footer-places-disclaimer"><a href="../en/ArchWiki:General_disclaimer.html" title="ArchWiki:General disclaimer">Disclaimers</a></li>
	</ul>
	<ul id="footer-icons" class="noprint">
		<li id="footer-copyrightico">
	</ul>
	<div style="clear: both;"></div>
</footer>



</body>
</html>
