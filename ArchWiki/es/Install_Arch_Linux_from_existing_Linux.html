<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>Install Arch Linux from existing Linux (Español) - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.35.0">
<meta name="robots" content="noindex,follow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="http://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Install_Arch_Linux_from_existing_Linux_Español rootpage-Install_Arch_Linux_from_existing_Linux_Español skin-vector action-view skin-vector-legacy">
<div id="content" class="mw-body" role="main" style="margin: 0">
	<a id="top"></a>
	<div id="siteNotice" class="mw-body-content"></div>
	<div class="mw-indicators mw-body-content">
	</div>
	<h1 id="firstHeading" class="firstHeading" lang="en">Install Arch Linux from existing Linux (Español)</h1>
	<div id="bodyContent" class="mw-body-content">
		<div id="siteSub" class="noprint">From ArchWiki</div>
		<div id="contentSub"></div>
		<div id="contentSub2"></div>
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="#searchInput">Jump to search</a>
		<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr">
<div class="warningbox">The printable version is no longer supported and may have rendering errors. Please update your browser bookmarks and please use the default browser print function instead.</div>
<div class="mw-parser-output">
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Estado de la traducción:</strong> este artículo es una traducción de <a href="../en/Install_Arch_Linux_from_existing_Linux.html" class="mw-redirect" title="Install from existing Linux">Install from existing Linux</a> revisada por última vez el <b>2019-11-13</b>. Si advierte que la versión inglesa <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php?title=Install_from_existing_Linux&amp;diff=0&amp;oldid=586812">ha cambiado</a> puede actualizar la traducción <a href="../es/ArchWiki:f6ecee2fb17812f6654b3a6ff807d392.html" class="mw-redirect" title="ArchWiki:Translation Team/Contributing (Español)">usted mismo</a> o avisar al <a href="../es/ArchWiki:Translation_Team.html" title="ArchWiki:Translation Team (Español)">equipo de traducción</a>.</div>
<div class="archwiki-template-meta-related-articles-start">
<p>Artículos relacionados</p>
<ul>
<li><a href="../es/Install_Arch_Linux_via_SSH.html" class="mw-redirect" title="Install from SSH (Español)">Install from SSH (Español)</a></li>
</ul>
</div>
<p>Este documento describe el proceso de <a href="https://en.wikipedia.org/wiki/es:Bootstrapping_(inform%C3%A1tica)" class="extiw" title="wikipedia:es:Bootstrapping (informática)">bootstrapping</a> necesario para instalar Arch Linux desde un sistema anfitrión de Linux en ejecución. Después del bootstrapping, la instalación continúa como se describe en la <a href="../es/Installation_guide.html" title="Installation guide (Español)">guía de instalación</a>.
</p>
<p>La instalación de Arch Linux desde un sistema Linux en ejecución es útil para:
</p>
<ul>
<li>instalar remotamente Arch Linux, por ejemplo, un servidor root (virtual);</li>
<li>sustituir un Linux existente sin un LiveCD (véase <a href="#Reemplazar_el_sistema_existente_sin_un_LiveCD">#Reemplazar el sistema existente sin un LiveCD</a>);</li>
<li>crear un distribución Linux nueva o LiveCD basada en Arch Linux;</li>
<li>crear un entorno chroot de Arch Linux, por ejemplo para un contenedor de base Docker;</li>
<li>
<a href="../en/Diskless_system.html" class="mw-redirect" title="Diskless network boot NFS root">rootfs-sobre-NFS para máquinas sin disco</a>.</li>
</ul>
<p>El objetivo del procedimiento de bootstrapping es configurar un entorno desde el que ejecutar los <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=arch-install-scripts">arch-install-scripts</a></span> (tales como <code>pacstrap</code> y <code>arch-root</code>).
</p>
<p>Si el sistema anfitrión ejecuta Arch Linux, esto se puede lograr simplemente instalando <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=arch-install-scripts">arch-install-scripts</a></span>. Si el sistema anfitrión ejecuta otra distribución de Linux, primero deberá configurar un entorno chroot basado en Arch Linux.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> esta guía requiere que el sistema anfitrión existente sea capaz de ejecutar los nuevos programas de Arch Linux para la arquitectura de destino. Esto significa que tiene que ser un sistema anfitrión x86_64.</div>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Advertencia:</strong> asegúrese de comprender cada paso antes de continuar. Es fácil destruir su sistema o perder datos críticos, y su proveedor de servicios, probablemente, le cobrará mucho para ayudarle a recuperarlo.</div>
<div id="toc" class="toc" role="navigation" aria-labelledby="mw-toc-heading">
<input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none"><div class="toctitle" lang="en" dir="ltr">
<h2 id="mw-toc-heading">Contents</h2>
<span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span>
</div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Realizar_copia_de_seguridad_y_preparaci%C3%B3n"><span class="tocnumber">1</span> <span class="toctext">Realizar copia de seguridad y preparación</span></a></li>
<li class="toclevel-1 tocsection-2">
<a href="#Desde_un_sistema_anfitri%C3%B3n_que_ejecuta_Arch_Linux"><span class="tocnumber">2</span> <span class="toctext">Desde un sistema anfitrión que ejecuta Arch Linux</span></a>
<ul>
<li class="toclevel-2 tocsection-3"><a href="#Crear_una_nueva_instalaci%C3%B3n_de_Arch"><span class="tocnumber">2.1</span> <span class="toctext">Crear una nueva instalación de Arch</span></a></li>
<li class="toclevel-2 tocsection-4"><a href="#Crear_una_copia_de_una_instalaci%C3%B3n_de_Arch_existente"><span class="tocnumber">2.2</span> <span class="toctext">Crear una copia de una instalación de Arch existente</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-5">
<a href="#Desde_un_sistema_anfitri%C3%B3n_que_ejecuta_otra_distribuci%C3%B3n_de_Linux"><span class="tocnumber">3</span> <span class="toctext">Desde un sistema anfitrión que ejecuta otra distribución de Linux</span></a>
<ul>
<li class="toclevel-2 tocsection-6"><a href="#Utilizar_pacman_desde_el_sistema_anfitri%C3%B3n"><span class="tocnumber">3.1</span> <span class="toctext">Utilizar pacman desde el sistema anfitrión</span></a></li>
<li class="toclevel-2 tocsection-7">
<a href="#Crear_un_entorno_chroot"><span class="tocnumber">3.2</span> <span class="toctext">Crear un entorno chroot</span></a>
<ul>
<li class="toclevel-3 tocsection-8"><a href="#M%C3%A9todo_A:_utilizar_una_imagen_de_bootstrap_(recomendado)"><span class="tocnumber">3.2.1</span> <span class="toctext">Método A: utilizar una imagen de bootstrap (recomendado)</span></a></li>
<li class="toclevel-3 tocsection-9"><a href="#M%C3%A9todo_B:_utilizar_una_imagen_LiveCD"><span class="tocnumber">3.2.2</span> <span class="toctext">Método B: utilizar una imagen LiveCD</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-10">
<a href="#Utilizar_un_entorno_chroot"><span class="tocnumber">3.3</span> <span class="toctext">Utilizar un entorno chroot</span></a>
<ul>
<li class="toclevel-3 tocsection-11"><a href="#Inicializar_el_dep%C3%B3sito_de_claves_de_pacman"><span class="tocnumber">3.3.1</span> <span class="toctext">Inicializar el depósito de claves de pacman</span></a></li>
<li class="toclevel-3 tocsection-12"><a href="#Seleccionar_un_servidor_de_r%C3%A9plica_y_descargar_herramientas_b%C3%A1sicas"><span class="tocnumber">3.3.2</span> <span class="toctext">Seleccionar un servidor de réplica y descargar herramientas básicas</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-13">
<a href="#Sugerencias_de_instalaci%C3%B3n"><span class="tocnumber">3.4</span> <span class="toctext">Sugerencias de instalación</span></a>
<ul>
<li class="toclevel-3 tocsection-14">
<a href="#Anfitri%C3%B3n_basado_en_Debian"><span class="tocnumber">3.4.1</span> <span class="toctext">Anfitrión basado en Debian</span></a>
<ul>
<li class="toclevel-4 tocsection-15"><a href="#/dev/shm"><span class="tocnumber">3.4.1.1</span> <span class="toctext">/dev/shm</span></a></li>
<li class="toclevel-4 tocsection-16"><a href="#/dev/pts"><span class="tocnumber">3.4.1.2</span> <span class="toctext">/dev/pts</span></a></li>
<li class="toclevel-4 tocsection-17"><a href="#lvmetad"><span class="tocnumber">3.4.1.3</span> <span class="toctext">lvmetad</span></a></li>
</ul>
</li>
<li class="toclevel-3 tocsection-18"><a href="#Anfitri%C3%B3n_basado_en_Fedora"><span class="tocnumber">3.4.2</span> <span class="toctext">Anfitrión basado en Fedora</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1 tocsection-19"><a href="#Cosas_que_verificar_antes_de_reiniciar"><span class="tocnumber">4</span> <span class="toctext">Cosas que verificar antes de reiniciar</span></a></li>
<li class="toclevel-1 tocsection-20">
<a href="#Reemplazar_el_sistema_existente_sin_un_LiveCD"><span class="tocnumber">5</span> <span class="toctext">Reemplazar el sistema existente sin un LiveCD</span></a>
<ul>
<li class="toclevel-2 tocsection-21"><a href="#Establecer_la_antigua_partici%C3%B3n_de_intercambio_como_nueva_partici%C3%B3n_ra%C3%ADz"><span class="tocnumber">5.1</span> <span class="toctext">Establecer la antigua partición de intercambio como nueva partición raíz</span></a></li>
<li class="toclevel-2 tocsection-22"><a href="#Instalaci%C3%B3n"><span class="tocnumber">5.2</span> <span class="toctext">Instalación</span></a></li>
</ul>
</li>
</ul>
</div>

<h2>
<span id="Realizar_copia_de_seguridad_y_preparaci.C3.B3n"></span><span class="mw-headline" id="Realizar_copia_de_seguridad_y_preparación">Realizar copia de seguridad y preparación</span>
</h2>
<p>Haga una copia de seguridad de todos sus datos, incluidos correos electrónicos, servidores web, etc. Tenga toda la información a su alcance. Preserve todas las configuraciones de su servidor, nombres de equipos, etc.
</p>
<p>Aquí hay una lista de datos que probablemente necesitará:
</p>
<ul>
<li>Direcciones IP.</li>
<li>Nombre(s) de equipo, (nota: los servidores raíces también son en su mayoría parte del dominio de proveedores, verifique o guarde su <code>/etc/hosts</code> antes de eliminar).</li>
<li>Servidores DNS (compruebe <code>/etc/resolv.conf</code>).</li>
<li>Claves SSH (si otras personas trabajan en su servidor, de lo contrario tendrán que aceptar nuevas claves. Esto incluye claves de su Apache, sus servidores de correo, su servidor SSH y otros).</li>
<li>Información de hardware (tarjeta de red, etc. Consulte su preinstalado <code>/etc/modules.conf</code>).</li>
<li>Archivos de configuración de Grub.</li>
</ul>
<p>En general, es una buena idea tener una copia local de su directorio original <code>/etc</code> en su disco duro local.
</p>
<h2>
<span id="Desde_un_sistema_anfitri.C3.B3n_que_ejecuta_Arch_Linux"></span><span class="mw-headline" id="Desde_un_sistema_anfitrión_que_ejecuta_Arch_Linux">Desde un sistema anfitrión que ejecuta Arch Linux</span>
</h2>
<p>Instale el paquete <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=arch-install-scripts">arch-install-scripts</a></span>.
</p>
<p>Siga <a href="../es/Installation_guide.html#Montar_los_sistemas_de_archivos" title="Installation guide (Español)">Installation guide (Español)#Montar los sistemas de archivos</a> para montar el sistema de archivos y todos los puntos de montaje necesarios. Si ya utiliza el directorio <code>/mnt</code> para otra cosa, simplemente cree otro directorio como <code>/mnt/install</code>, y úselo en su lugar como la base del punto de montaje.
</p>
<h3>
<span id="Crear_una_nueva_instalaci.C3.B3n_de_Arch"></span><span class="mw-headline" id="Crear_una_nueva_instalación_de_Arch">Crear una nueva instalación de Arch</span>
</h3>
<p>Siga la <a href="../es/Installation_guide.html#Instalaci%C3%B3n" title="Installation guide (Español)">Installation guide (Español)#Instalación</a>.
</p>
<p>Respecto a la <a href="../es/Installation_guide.html#Seleccionar_los_servidores_de_r%C3%A9plica" title="Installation guide (Español)">Installation guide (Español)#Seleccionar los servidores de réplica</a> se puede omitir ya que el equipo debería tener una lista de servidores de réplica correcta.
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Sugerencia:</strong> para evitar volver a descargar todos los paquetes, considere seguir <a href="../es/de17b6ce88a43214b055e2fd83cd83eb.html#Cach%C3%A9_de_pacman_compartida_en_red" title="Pacman (Español)/Tips and tricks (Español)">Pacman (Español)/Tips and tricks (Español)#Caché de pacman compartida en red</a> o utilizar la opción <code>-c</code> de <i>pacstrap</i>'.</div>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Sugerencia:</strong> cuando se utiliza el cargador de arranque grub, el script <code>grub-mkconfig</code> puede detectar dispositivos incorrectamente. Esto resultará en <code>Error:no such device</code> al intentar arrancar desde el dispositivo. Para resolver este problema, desde el sistema anfitrión que ejecuta Arch Linux, monte las particiones recién instaladas, ejecute <i>arch-chroot</i> en la nueva partición, luego instale y configure grub. El último paso puede requerir desactivar <i>lvmetad</i> en <code>/etc/lvm/lvm.conf</code> configurando <code>use_lvmetad=0</code>.</div>
<h3>
<span id="Crear_una_copia_de_una_instalaci.C3.B3n_de_Arch_existente"></span><span class="mw-headline" id="Crear_una_copia_de_una_instalación_de_Arch_existente">Crear una copia de una instalación de Arch existente</span>
</h3>
<p>Es posible replicar una instalación existente de Arch Linux copiando el sistema de archivos del sistema anfitrión a la nueva partición y hacer algunos ajustes para que sea arrancable y única.
</p>
<p>El primer paso es copiar los archivos del anfitrión en la nueva partición montada, para esto, considere usar el enfoque presentado en <a href="../en/Rsync.html#Full_system_backup" title="Rsync">rsync#Full system backup</a>.
</p>
<p>Luego, siga el procedimiento descrito en <a href="../es/Installation_guide.html#Configuraci%C3%B3n_del_sistema" title="Installation guide (Español)">Installation guide (Español)#Configuración del sistema</a> con algunas salvedades y pasos adicionales:
</p>
<ul>
<li>
<a href="../es/Installation_guide.html#Zona_horaria" title="Installation guide (Español)">Installation guide (Español)#Zona horaria</a>, <a href="../es/Installation_guide.html#Idioma_del_sistema" title="Installation guide (Español)">Installation guide (Español)#Idioma del sistema</a> y  <a href="../es/Installation_guide.html#Contrase%C3%B1a_de_root" title="Installation guide (Español)">Installation guide (Español)#Contraseña de root</a> se pueden omitir.</li>
<li>
<a href="../es/Installation_guide.html#Initramfs" title="Installation guide (Español)">Installation guide (Español)#Initramfs</a> puede ser necesario en particular si se cambia el sistema de archivos, por ejemplo de <a href="../es/Ext4.html" title="Ext4 (Español)">ext4 (Español)</a> a <a href="../en/Btrfs.html" title="Btrfs">Btrfs</a>.</li>
<li>Con respecto a <a href="../es/Installation_guide.html#Instalar_gestor_de_arranque" title="Installation guide (Español)">Installation guide (Español)#Instalar gestor de arranque</a>, es necesario reinstalar el cargador de arranque.</li>
<li>Elimine <code>/etc/machine-id</code> para que se genere un id nuevo y único en el próximo arranque.</li>
</ul>
<p>Si la instalación replicada de Arch se quiere usar dentro de una configuración diferente o con otro hardware, considere las siguientes operaciones adicionales:
</p>
<ul>
<li>Utilice <a href="../es/Microcode.html" title="Microcode (Español)">microcode</a> para la actualización  de la CPU adaptada al sistema de destino durante el paso <a href="../es/Installation_guide.html#Instalar_gestor_de_arranque" title="Installation guide (Español)">Installation guide (Español)#Instalar gestor de arranque</a>.</li>
<li>Si alguna <a href="../es/Xorg.html#Configuraci%C3%B3n" title="Xorg (Español)">Xorg (Español)#Configuración</a> específica estuvo presente en el anfitrión y puede ser incompatible con el sistema de destino, siga <a href="../en/Moving_an_existing_install_into_(or_out_of)_a_virtual_machine.html#Disable_any_Xorg-related_files" title="Moving an existing install into (or out of) a virtual machine">Moving an existing install into (or out of) a virtual machine#Disable any Xorg-related files</a>.</li>
<li>Realice cualquier otro ajuste apropiado para el sistema de destino, como reconfigurar la red o el audio.</li>
</ul>
<h2>
<span id="Desde_un_sistema_anfitri.C3.B3n_que_ejecuta_otra_distribuci.C3.B3n_de_Linux"></span><span class="mw-headline" id="Desde_un_sistema_anfitrión_que_ejecuta_otra_distribución_de_Linux">Desde un sistema anfitrión que ejecuta otra distribución de Linux</span>
</h2>
<p>Existen múltiples herramientas que automatizan una gran parte de los pasos descritos en las siguientes subsecciones. Consulte sus respectivas páginas de inicio para obtener instrucciones detalladas.
</p>
<ul>
<li>
<a rel="nofollow" class="external text" href="https://github.com/tokland/arch-bootstrap">arch-bootstrap</a> (Bash)</li>
<li>
<a rel="nofollow" class="external text" href="https://github.com/gh2o/digitalocean-debian-to-arch">digitalocean-debian-to-arch</a> (disco de reparticionado, específico de DigitalOCean)</li>
<li>
<a rel="nofollow" class="external text" href="https://github.com/hartwork/image-bootstrap">image-bootstrap</a> (Python)</li>
<li>
<a rel="nofollow" class="external text" href="https://gitlab.com/drizzt/vps2arch">vps2arch</a> (Bash)</li>
</ul>
<p>En las siguientes subsecciones se presenta la forma de hacerlo manualmente. La idea es hacer que <a href="../es/Pacman.html" title="Pacman (Español)">pacman</a> trabaje directamente en el sistema anfitrión, o ejecutar un sistema Arch dentro del sistema anfitrión, con la instalación real ejecutada desde el sistema Arch. El sistema anidado estará contenido dentro de un entorno chroot.
</p>
<h3>
<span id="Utilizar_pacman_desde_el_sistema_anfitri.C3.B3n"></span><span class="mw-headline" id="Utilizar_pacman_desde_el_sistema_anfitrión">Utilizar pacman desde el sistema anfitrión</span>
</h3>
<p><a rel="nofollow" class="external text" href="https://git.archlinux.org/pacman.git/">Pacman</a> puede compilarse en la mayoría de las distribuciones de Linux y usarse directamente en el sistema anfitrión para arrancar Arch Linux. El script <a rel="nofollow" class="external text" href="https://git.archlinux.org/arch-install-scripts.git/about/">arch-install-scripts</a> debería ejecutarse sin problemas directamente de las fuentes descargadas en cualquier distribución reciente.
</p>
<p>Algunas distribuciones proporcionan un paquete para <i>pacman</i> y/o <i>arch-install-scripts</i> en sus repositorios oficiales que pueden usarse para este propósito. Desde febrero de 2019, se sabe que «Gentoo» proporciona el paquete <i>pacman</i>, y «Alpine Linux» y «Fedora» se sabe que proporcionan tanto <i>pacman</i> como <i>arch-install-scripts</i>.
</p>
<h3><span class="mw-headline" id="Crear_un_entorno_chroot">Crear un entorno chroot</span></h3>
<p>A continuación se presentan dos métodos para configurar e ingresar en chroot, desde el más fácil hasta el más complicado. Seleccione solo uno de los dos métodos. Luego, continúe en <a href="#Utilizar_un_entorno_chroot">#Utilizar un entorno chroot</a>.
</p>
<h4>
<span id="M.C3.A9todo_A:_utilizar_una_imagen_de_bootstrap_.28recomendado.29"></span><span class="mw-headline" id="Método_A:_utilizar_una_imagen_de_bootstrap_(recomendado)">Método A: utilizar una imagen de bootstrap (recomendado)</span>
</h4>
<p>Descargue la imagen de bootstrap desde un <a rel="nofollow" class="external text" href="https://archlinux.org/download">servidor de réplica</a> en <code>/tmp</code>.
</p>
<p>También puede descargar la firma (misma URL con <code>.sig</code> añadido) y <a href="../en/GnuPG.html#Verify_a_signature" title="GnuPG">verifíquela con GnuPG</a>.
</p>
<p>Extraiga el tarball:
</p>
<pre># tar xzf &lt;path-to-bootstrap-image&gt;/archlinux-bootstrap-*-x86_64.tar.gz
</pre>
<p>Seleccione un servidor de repositorio editando <code>/tmp/root.x86_64/etc/pacman.d/mirrorlist</code>.
</p>
<p>Entre en entorno chroot:
</p>
<ul><li>Si tiene instalado bash 4 o posterior, y la orden unshare admite las opciones --fork y--pid, ejecute:</li></ul>
<pre># /tmp/root.x86_64/bin/arch-chroot /tmp/root.x86_64/
</pre>
<ul><li>De lo contrario, ejecute las siguientes órdenes:</li></ul>
<pre># mount --bind /tmp/root.x86_64 /tmp/root.x86_64
# cd /tmp/root.x86_64
# cp /etc/resolv.conf etc
# mount -t proc /proc proc
# mount --make-rslave --rbind /sys sys
# mount --make-rslave --rbind /dev dev
# mount --make-rslave --rbind /run run    ## (suponiendo que /run existe en el sistema)
# chroot /tmp/root.x86_64 /bin/bash
</pre>
<h4>
<span id="M.C3.A9todo_B:_utilizar_una_imagen_LiveCD"></span><span class="mw-headline" id="Método_B:_utilizar_una_imagen_LiveCD">Método B: utilizar una imagen LiveCD</span>
</h4>
<p>Es posible montar la imagen raíz desde el soporte de instalación de Arch Linux más reciente y luego hacer un chroot en ella. Este método tiene la ventaja de proporcionar una instalación de Arch Linux en funcionamiento dentro del sistema anfitrión sin la necesidad de prepararlo instalando paquetes específicos.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> antes de continuar, asegúrese de que la última versión de <a rel="nofollow" class="external text" href="http://squashfs.sourceforge.net/">squashfs</a> esté instalada en el sistema anfitrión. De lo contrario, obtendrá errores como los siguientes: <code>FATAL ERROR aborting: uncompress_inode_table: failed to read block</code>.</div>
<ul><li>La imagen raíz se puede encontrar en uno de los <a rel="nofollow" class="external text" href="https://archlinux.org/download">servidores de réplicas</a> en <code>arch/x86_64/</code>. El formato squashfs no es editable, por lo que realizamos la descompresión de la imagen raíz con unsquash y la montamos.</li></ul>
<ul><li>Para realizar unsquash de la imagen raíz, ejecute:</li></ul>
<pre># unsquashfs airootfs.sfs
</pre>
<ul><li>Antes de <a href="../es/Chroot.html" title="Chroot (Español)">efectuar chroot</a>, necesitamos configurar algunos puntos de montaje y copiar el archivo resolv.conf a fin tener conexión de red:</li></ul>
<pre># mount --bind squashfs-root squashfs-root
# mount -t proc none squashfs-root/proc
# mount -t sysfs none squashfs-root/sys
# mount -o bind /dev squashfs-root/dev
# mount -o bind /dev/pts squashfs-root/dev/pts   ## importante para pacman (para comprobar la firma)
# cp -L /etc/resolv.conf squashfs-root/etc   ## esto es necesario para usar la red dentro del chroot
</pre>
<ul><li>Ahora, todo está preparado para pasar al entorno chroot en el recién instalado entorno de Arch:</li></ul>
<pre># chroot squashfs-root bash
</pre>
<h3><span class="mw-headline" id="Utilizar_un_entorno_chroot">Utilizar un entorno chroot</span></h3>
<p>El entorno de arranque es realmente básico (sin <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=nano">nano</a></span> o <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=lvm2">lvm2</a></span>). Por lo tanto, necesitamos configurar pacman para descargar otros paquetes necesarios.
</p>
<h4>
<span id="Inicializar_el_dep.C3.B3sito_de_claves_de_pacman"></span><span class="mw-headline" id="Inicializar_el_depósito_de_claves_de_pacman">Inicializar el depósito de claves de pacman</span>
</h4>
<p>Las claves de pacman deben configurarse antes de comenzar la instalación. Antes de ejecutar las siguientes dos órdenes, lea <a href="../es/667cbdbc5a0b0ff5df6f8e9a95a8c788.html#Inicializar_el_dep%C3%B3sito_de_claves" class="mw-redirect" title="Pacman-key (Español)">pacman-key (Español)#Inicializar el depósito de claves</a> para comprender los requisitos de la entropía:
</p>
<pre># pacman-key --init
# pacman-key --populate archlinux
</pre>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Sugerencia:</strong> la instalación y ejecución de <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=haveged">haveged</a></span> debe realizarse en el sistema anfitrión, ya que no es posible instalar paquetes antes de inicializar pacman keyring y porque <i>systemd</i> detectará que se está ejecutando en un entorno chroot e <a rel="nofollow" class="external text" href="https://superuser.com/questions/688733/start-a-systemd-service-inside-chroot">ignorará la solicitud de activación</a>.
Si continúa haciendo <code>ls -Ra /</code> en otra consola (TTY, terminal, SSH session...), no tenga miedo de ejecutarlo en un bucle varias veces: cinco o seis veces de repetición desde el sistema anfitrión será suficiente para generar suficiente entropía en un servidor remoto sin encabezado.</div>
<h4>
<span id="Seleccionar_un_servidor_de_r.C3.A9plica_y_descargar_herramientas_b.C3.A1sicas"></span><span class="mw-headline" id="Seleccionar_un_servidor_de_réplica_y_descargar_herramientas_básicas">Seleccionar un servidor de réplica y descargar herramientas básicas</span>
</h4>
<p>Después de <a href="../es/Mirrors.html#Activar_un_servidor_de_r%C3%A9plica_espec%C3%ADfico" title="Mirrors (Español)">seleccionar un servidor de réplica</a>, <a href="../es/Mirrors.html#Forzar_a_pacman_a_actualizar_las_listas_de_paquetes" title="Mirrors (Español)">actualice la lista de paquetes</a> e <a href="../es/Help:Reading.html#Instalaci%C3%B3n_de_paquetes" class="mw-redirect" title="Install (Español)">instale</a> lo que necesite: <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/groups/x86_64/base-devel/">base-devel</a></span>, <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=parted">parted</a></span>, etc.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> 
<ul>
<li>Como todavía no hay ningún editor de texto, debe salir de arch-chroot y editar la lista de servidores de réplicas utilizando el editor de texto del anfitrión.</li>
<li>Puede que cuando intente instalar paquetes con pacman, obtenga <code><i>error: could not determine cachedir mount point /var/cache/pacman/pkg</i></code>. Para solucionarlo, puede ejecutar: <pre>mount --bind <i>directory-to-livecd-or-bootstrap</i> <i>directory-to-livecd-or-bootstrap</i></pre> antes de realizar chroot. Vea <a rel="nofollow" class="external text" href="https://bugs.archlinux.org/task/46169">FS#46169</a>.</li>
</ul>
</div>
<h3>
<span id="Sugerencias_de_instalaci.C3.B3n"></span><span class="mw-headline" id="Sugerencias_de_instalación">Sugerencias de instalación</span>
</h3>
<p>Ahora puede continuar con <a href="../es/Installation_guide.html#Particionar_el_disco" title="Installation guide (Español)">Installation guide (Español)#Particionar el disco</a> y seguir el resto de la <a href="../es/Installation_guide.html" title="Installation guide (Español)">Installation guide (Español)</a>.
</p>
<p>Algunos sistemas anfitriones o configuraciones pueden requerir ciertos pasos adicionales. Consulte las secciones siguientes para obtener consejos.
</p>
<h5>
<span id="Anfitri.C3.B3n_basado_en_Debian"></span><span class="mw-headline" id="Anfitrión_basado_en_Debian">Anfitrión basado en Debian</span>
</h5>
<h6>
<span id=".2Fdev.2Fshm"></span><span class="mw-headline" id="/dev/shm">/dev/shm</span>
</h6>
<p>En algunos sistemas anfitriones basados en Debian, <i>pacstrap</i> puede producir el siguiente error:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"># pacstrap /mnt base</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">==&gt; Creating install root at /mnt
mount: mount point /mnt/dev/shm is a symbolic link to nowhere
==&gt; ERROR: failed to setup API filesystems in new root
</pre>
<p>Esto se debe a que en algunas versiones de Debian, <code>/dev/shm</code> apunta a <code>/run/shm</code>, mientras que en el entorno chroot basado en Arch, <code>/run/shm</code> no existe y el enlace está roto. Para corregir este error, cree un directorio <code>/run/shm</code>:
</p>
<pre># mkdir /run/shm
</pre>
<h6>
<span id=".2Fdev.2Fpts"></span><span class="mw-headline" id="/dev/pts">/dev/pts</span>
</h6>
<p>Al instalar <code>archlinux-2015.07.01-x86_64</code> desde un sistema anfitrión Debian 7, el siguiente error impidió que tanto <a rel="nofollow" class="external text" href="https://projects.archlinux.org/arch-install-scripts.git/tree/pacstrap.in">pacstrap</a> como <a href="../es/Chroot.html#Usando_arch-chroot" title="Chroot (Español)">arch-chroot</a> funcionasen:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"># pacstrap -i /mnt</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">mount: mount point /mnt/dev/pts does not exist
==&gt; ERROR: failed to setup chroot /mnt
</pre>
<p>Aparentemente, esto se debe a que estos dos scripts usan una característica común. <code>chroot_setup()</code><a rel="nofollow" class="external autonumber" href="https://projects.archlinux.org/arch-install-scripts.git/tree/common#n76">[1]</a> se basa en las nuevas características de <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=util-linux">util-linux</a></span>, que son incompatibles con Debian 7 (vea <a rel="nofollow" class="external text" href="https://bugs.archlinux.org/task/45737">FS#45737</a>).
</p>
<p>La solución para <i>pacstrap</i> consiste en ejecutar manualmente sus <a rel="nofollow" class="external text" href="https://projects.archlinux.org/arch-install-scripts.git/tree/pacstrap.in#n77">diversas tareas</a>, pero utilizando el <a href="../es/Chroot.html#Usando_arch-chroot" title="Chroot (Español)">procedimiento normal</a> para montar los sistemas de archivos del kernel en el directorio de destino (<code>"$newroot"</code>):
</p>
<pre># newroot=/mnt
# mkdir -m 0755 -p "$newroot"/var/{cache/pacman/pkg,lib/pacman,log} "$newroot"/{dev,run,etc}
# mkdir -m 1777 -p "$newroot"/tmp
# mkdir -m 0555 -p "$newroot"/{sys,proc}
# mount --bind "$newroot" "$newroot"
# mount -t proc /proc "$newroot/proc"
# mount --rbind /sys "$newroot/sys"
# mount --rbind /run "$newroot/run"
# mount --rbind /dev "$newroot/dev"
# pacman -r "$newroot" --cachedir="$newroot/var/cache/pacman/pkg" -Sy base base-devel ... ## add the packages you want
# cp -a /etc/pacman.d/gnupg "$newroot/etc/pacman.d/"       ## copy keyring
# cp -a /etc/pacman.d/mirrorlist "$newroot/etc/pacman.d/"  ## copy mirrorlist
</pre>
<p>En lugar de usar <i>arch-chroot</i> para realizar <a href="../es/Installation_guide.html#Chroot" title="Installation guide (Español)">chroot</a>, simplemente utilice:
</p>
<pre># chroot "$newroot"
</pre>
<h6><span class="mw-headline" id="lvmetad">lvmetad</span></h6>
<p>Intentar crear <a href="../es/LVM.html#Vol%C3%BAmenes_l%C3%B3gicos" title="LVM (Español)">volúmenes lógicos</a> desde un entorno <code>archlinux-bootstrap-2015.07.01-x86_64</code> en un sistema anfitrión Debian 7 dará como resultado el siguiente error:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"># lvcreate -L 20G lvm -n root</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">  /run/lvm/lvmetad.socket: connect failed: No such file or directory
  WARNING: Failed to connect to lvmetad. Falling back to internal scanning.
  /dev/lvm/root: not found: device not cleared
  Aborting. Failed to wipe start of new LV.</pre>
<p>(El volumen físico y la creación del grupo de volúmenes funcionaron a pesar del fallo <code>/run/lvm/lvmetad.socket: connect failed: No such file or directory</code> mostrado.)
</p>
<p>Esto podría solucionarse fácilmente creando los volúmenes lógicos fuera de chroot (desde el anfitrión Debian). Luego estarán disponibles una vez que se vuelva a entrar en chroot.
</p>
<p>Además, si el sistema que está utilizando tiene lvm, es posible que obtenga la siguiente salida:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"># grub-install --target=i386-pc --recheck /dev/main/archroot</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Installing for i386-pc platform.
  /run/lvm/lvmetad.socket: connect failed: No such file or directory
  WARNING: Failed to connect to lvmetad. Falling back to internal scanning.
  /run/lvm/lvmetad.socket: connect failed: No such file or directory
  WARNING: Failed to connect to lvmetad. Falling back to internal scanning.
  /run/lvm/lvmetad.socket: connect failed: No such file or directory
  WARNING: Failed to connect to lvmetad. Falling back to internal scanning.
  /run/lvm/lvmetad.socket: connect failed: No such file or directory
  WARNING: Failed to connect to lvmetad. Falling back to internal scanning.
  /run/lvm/lvmetad.socket: connect failed: No such file or directory
  WARNING: Failed to connect to lvmetad. Falling back to internal scanning.</pre>
<p>Esto se debe a que debian no usa lvmetad por defecto. Debe editar <code>/etc/lvm/lvm.conf</code> y establecer <code>use_lvmetad</code> en <code>0</code>:
</p>
<pre>use_lvmetad = 0
</pre>
<p>Esto dará más tarde un error en el arranque en la etapa initrd. Por lo tanto, debe volver a cambiarlo después de la generación de grub. En un RAID por software + LVM, los pasos serían los siguientes:
</p>
<ul>
<li>Después de instalar el sistema, verifique <a href="../es/Mkinitcpio.html" title="Mkinitcpio (Español)">mkinitcpio</a> y la configuración de su gestor de arranque. Consulte <a href="../es/Arch_boot_process.html#Gestor_de_arranque" title="Arch boot process (Español)">Arch boot process (Español)#Gestor de arranque</a> para obtener una lista de cargadores de arranque.</li>
<li>Es posible que deba cambiar <code>/etc/mdadm.conf</code> para que refleje su configuración <a href="../es/RAID.html" title="RAID (Español)">RAID</a> (si corresponde).</li>
<li>Es posible que deba cambiar sus <code>HOOKS</code> y <code>MODULES</code> de acuerdo con sus requisitos <a href="../es/LVM.html" title="LVM (Español)">LVM</a> y <a href="../es/RAID.html" title="RAID (Español)">RAID</a>: <code>MODULES="dm_mod" HOOKS="base udev <b>mdadm_udev</b> ... block <b>lvm2</b> filesystems ..."</code>
</li>
<li>Lo más probable es que necesite generar nuevas imágenes initrd con mkinitcpio. Vea <a href="../es/Mkinitcpio.html#Creaci%C3%B3n_de_la_imagen_y_activaci%C3%B3n" title="Mkinitcpio (Español)">mkinitcpio (Español)#Creación de la imagen y activación</a>.</li>
<li>Establezca <code>use_lvmetad = 0</code> en <code>/etc/lvm/lvm.conf</code>.</li>
<li>Actualice la configuración de tu gestor de arranque. Consulte la página wiki de su gestor de arranque para más detalles.</li>
<li>Establezca <code>use_lvmetad = 1</code> en <code>/etc/lvm/lvm.conf</code>.</li>
</ul>
<h5>
<span id="Anfitri.C3.B3n_basado_en_Fedora"></span><span class="mw-headline" id="Anfitrión_basado_en_Fedora">Anfitrión basado en Fedora</span>
</h5>
<p>En sistemas anfitriones basados en Fedora y USB live, puede encontrar problemas al usar <i>genfstab</i> para generar su <a href="../es/Fstab.html" title="Fstab (Español)">fstab</a>. Elimine las entradas duplicadas y la opción «seclabel» donde aparezca, ya que esto es específico de Fedora y evitará que su sistema arranque normalmente.
</p>
<h2><span class="mw-headline" id="Cosas_que_verificar_antes_de_reiniciar">Cosas que verificar antes de reiniciar</span></h2>
<p>Antes de reiniciar, vuelva a verificar algunos detalles en su instalación para lograr una instalación exitosa. Para hacerlo, primero entre en chroot en el sistema recién instalado y luego:
</p>
<ul>
<li>
<a href="../es/Users_and_groups.html#Administraci%C3%B3n_de_grupos" title="Users and groups (Español)">Cree un usuario con contraseña</a>, para que pueda iniciar sesión a través de <i>sh</i>. Esto es crítico ya que el inicio de sesión raíz está desactivado por defecto desde OpenSSH-7.1p2.</li>
<li>
<a href="../es/Users_and_groups.html#Administraci%C3%B3n_de_grupos" title="Users and groups (Español)">Establezca una contraseña de root</a> para que pueda cambiar a root a través de <i>su</i> más tarde.</li>
<li>
<a href="../es/Help:Reading.html#Instalaci%C3%B3n_de_paquetes" class="mw-redirect" title="Install (Español)">Instale</a> una solución <a href="../en/Secure_Shell.html" class="mw-redirect" title="Ssh">ssh</a> y <a href="../es/Systemd.html#Utilizar_las_unidades" class="mw-redirect" title="Enable (Español)">active</a> su instancia de servidor para iniciarse automáticamente en el arranque.</li>
<li>Configure su <a href="../en/Network_configuration.html" title="Network configuration">conexión de red</a> para que la conexión se inicie automáticamente en el arranque.</li>
<li>Configure un <a href="../es/Arch_boot_process.html#Gestor_de_arranque" class="mw-redirect" title="Boot loader (Español)">gesgtor de arranque</a> y configúrelo para usar la partición de intercambio que se apropió anteriormente como la partición raíz. Es posible que desee configurar su gestor de arranque para poder arrancar en su sistema anterior; es útil reutilizar la partición <code>/boot</code> existente del servidor en el nuevo sistema para este propósito.</li>
</ul>
<h2><span class="mw-headline" id="Reemplazar_el_sistema_existente_sin_un_LiveCD">Reemplazar el sistema existente sin un LiveCD</span></h2>
<p>Encuentre ~700 MB de espacio libre en algún lugar del disco, por ejemplo, formateando una partición de intercambio. Puede desactivar la partición de intercambio y configurar su sistema allí.
</p>
<h3>
<span id="Establecer_la_antigua_partici.C3.B3n_de_intercambio_como_nueva_partici.C3.B3n_ra.C3.ADz"></span><span class="mw-headline" id="Establecer_la_antigua_partición_de_intercambio_como_nueva_partición_raíz">Establecer la antigua partición de intercambio como nueva partición raíz</span>
</h3>
<p>Compruebe <code>cfdisk</code>, <code>/proc/swaps</code> o <code>/etc/fstab</code> para encontrar su partición de intercambio. Suponiendo que su disco duro esté ubicado en <code>sda<i>X</i></code> (<code><i>X</i></code> será un número).
</p>
<p>Haga lo siguiente:
</p>
<p>Desactive el espacio de intercambio:
</p>
<pre># swapoff /dev/sda<i>X</i>
</pre>
<p>Crea un sistema de archivos en él:
</p>
<pre># fdisk /dev/sda
(establezca el campo de identificación de /dev/sda<i>X</i> para "Linux" - Hex 83)
# mke2fs -j /dev/sda<i>X</i>
</pre>
<p>Crea un directorio para montarlo:La instalación de Arch Linux 
</p>
<pre># mkdir /mnt/newsys
</pre>
<p>Finalmente, monte el nuevo directorio para instalar el sistema:
</p>
<pre># mount -t ext4 /dev/sda<i>X</i> /mnt/newsys
</pre>
<h3>
<span id="Instalaci.C3.B3n"></span><span class="mw-headline" id="Instalación">Instalación</span>
</h3>
<p><a href="../es/Installation_guide.html#Instalar_paquetes_esenciales" title="Installation guide (Español)">Instale los paquetes esenciales</a> y cualquier otro paquete requerido para obtener un sistema con conexión a Internet en funcionamiento en la partición temporal, teniendo cuidado con el límite de los ~700 MB de espacio. Cuando especifique paquetes para instalar con <i>pacstrap</i>,  considere agregar el indicador <code>-c</code> para evitar llenar un espacio valioso descargando paquetes al sistema anfitrión.
</p>
<p>Una vez que el nuevo sistema Arch Linux esté instalado, arregle la configuración del cargador de arranque, luego reinicie en el sistema recién creado y realice <a href="../en/Rsync.html#Full_system_backup" title="Rsync">rsync de todo el sistema</a> en la partición primaria.
</p>
</div>
</div>
<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../es/Category:Installation_process.html" title="Category:Installation process (Español)">Installation process (Español)</a></li></ul>
</div></div>
	</div>
</div>

<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
		<li>Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Install_Arch_Linux_from_existing_Linux_(Espa%C3%B1ol)&amp;oldid=646834">https://wiki.archlinux.org/index.php?title=Install_Arch_Linux_from_existing_Linux_(Español)&amp;oldid=646834</a>"</li>
		<li id="footer-info-lastmod"> This page was last edited on 26 December 2020, at 12:00.</li>
		<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
	<br>
</ul>
	<ul id="footer-places">
		<li id="footer-places-privacy"><a href="../en/ArchWiki:Privacy_policy.html" title="ArchWiki:Privacy policy">Privacy policy</a></li>
		<li id="footer-places-about"><a href="../en/ArchWiki:About.html" title="ArchWiki:About">About ArchWiki</a></li>
		<li id="footer-places-disclaimer"><a href="../en/ArchWiki:General_disclaimer.html" title="ArchWiki:General disclaimer">Disclaimers</a></li>
	</ul>
	<ul id="footer-icons" class="noprint">
		<li id="footer-copyrightico">
	</ul>
	<div style="clear: both;"></div>
</footer>



</body>
</html>
