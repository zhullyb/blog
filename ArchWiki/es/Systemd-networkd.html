<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>systemd-networkd (Español) - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.35.0">
<meta name="robots" content="noindex,follow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="http://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Systemd-networkd_Español rootpage-Systemd-networkd_Español skin-vector action-view skin-vector-legacy">
<div id="content" class="mw-body" role="main" style="margin: 0">
	<a id="top"></a>
	<div id="siteNotice" class="mw-body-content"></div>
	<div class="mw-indicators mw-body-content">
	</div>
	<h1 id="firstHeading" class="firstHeading" lang="en">systemd-networkd (Español)</h1>
	<div id="bodyContent" class="mw-body-content">
		<div id="siteSub" class="noprint">From ArchWiki</div>
		<div id="contentSub"></div>
		<div id="contentSub2"></div>
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="#searchInput">Jump to search</a>
		<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr">
<div class="warningbox">The printable version is no longer supported and may have rendering errors. Please update your browser bookmarks and please use the default browser print function instead.</div>
<div class="mw-parser-output">
<p><span></span>
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Estado de la traducción:</strong> este artículo es una traducción de <a href="../en/Systemd-networkd.html" title="Systemd-networkd">systemd-networkd</a> revisada por última vez el <b>2019-10-27</b>. Si advierte que la versión inglesa <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php?title=Systemd-networkd&amp;diff=0&amp;oldid=584270">ha cambiado</a> puede actualizar la traducción <a href="../es/ArchWiki:f6ecee2fb17812f6654b3a6ff807d392.html" class="mw-redirect" title="ArchWiki:Translation Team/Contributing (Español)">usted mismo</a> o avisar al <a href="../es/ArchWiki:Translation_Team.html" title="ArchWiki:Translation Team (Español)">equipo de traducción</a>.</div>
<div class="archwiki-template-meta-related-articles-start">
<p>Artículos relacionados</p>
<ul>
<li><a href="../es/Systemd.html" title="Systemd (Español)">systemd (Español)</a></li>
<li><a href="../en/Systemd-resolved.html" title="Systemd-resolved">systemd-resolved</a></li>
<li><a href="../es/Systemd-nspawn.html" title="Systemd-nspawn (Español)">systemd-nspawn (Español)</a></li>
<li><a href="../en/Network_bridge.html" title="Network bridge">Network bridge</a></li>
<li><a href="../es/Network_configuration.html" title="Network configuration (Español)">Network configuration (Español)</a></li>
<li><a href="../es/e53e66c943c58f62c8606046297cd8b9.html" class="mw-redirect" title="Wireless network configuration (Español)">Wireless network configuration (Español)</a></li>
<li><a href="../es/Category:Network_configuration.html" title="Category:Network configuration (Español)">Category:Network configuration (Español)</a></li>
</ul>
</div>
<p><i>systemd-networkd</i> es un demonio del sistema que gestiona las configuraciones de red. Detecta y configura los dispositivos de red a medida que aparecen; también puede crear dispositivos de red virtuales. Este servicio puede ser especialmente útil para establecer configuraciones complejas de red para un contenedor gestionado por <a href="../es/Systemd-nspawn.html" title="Systemd-nspawn (Español)">systemd-nspawn (Español)</a> o por maquinas virtuales. Además trabaja bien en conexiones simples.
</p>
<div id="toc" class="toc" role="navigation" aria-labelledby="mw-toc-heading">
<input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none"><div class="toctitle" lang="en" dir="ltr">
<h2 id="mw-toc-heading">Contents</h2>
<span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span>
</div>
<ul>
<li class="toclevel-1 tocsection-1">
<a href="#Utilizaci%C3%B3n_b%C3%A1sica"><span class="tocnumber">1</span> <span class="toctext">Utilización básica</span></a>
<ul>
<li class="toclevel-2 tocsection-2"><a href="#Servicios_requeridos_y_configuraci%C3%B3n"><span class="tocnumber">1.1</span> <span class="toctext">Servicios requeridos y configuración</span></a></li>
<li class="toclevel-2 tocsection-3">
<a href="#Ejemplos_de_configuraci%C3%B3n"><span class="tocnumber">1.2</span> <span class="toctext">Ejemplos de configuración</span></a>
<ul>
<li class="toclevel-3 tocsection-4"><a href="#Adaptador_cableado_utilizando_DHCP"><span class="tocnumber">1.2.1</span> <span class="toctext">Adaptador cableado utilizando DHCP</span></a></li>
<li class="toclevel-3 tocsection-5"><a href="#Adaptador_cableado_utilizando_una_IP_est%C3%A1tica"><span class="tocnumber">1.2.2</span> <span class="toctext">Adaptador cableado utilizando una IP estática</span></a></li>
<li class="toclevel-3 tocsection-6"><a href="#Adaptador_inal%C3%A1mbrico"><span class="tocnumber">1.2.3</span> <span class="toctext">Adaptador inalámbrico</span></a></li>
<li class="toclevel-3 tocsection-7"><a href="#Adaptadores_cableados_e_inal%C3%A1mbricos_en_la_misma_m%C3%A1quina"><span class="tocnumber">1.2.4</span> <span class="toctext">Adaptadores cableados e inalámbricos en la misma máquina</span></a></li>
<li class="toclevel-3 tocsection-8"><a href="#Renombrar_una_interfaz"><span class="tocnumber">1.2.5</span> <span class="toctext">Renombrar una interfaz</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1 tocsection-9">
<a href="#Archivos_de_configuraci%C3%B3n"><span class="tocnumber">2</span> <span class="toctext">Archivos de configuración</span></a>
<ul>
<li class="toclevel-2 tocsection-10">
<a href="#Archivos_network"><span class="tocnumber">2.1</span> <span class="toctext">Archivos network</span></a>
<ul>
<li class="toclevel-3 tocsection-11"><a href="#%5BMatch%5D"><span class="tocnumber">2.1.1</span> <span class="toctext">[Match]</span></a></li>
<li class="toclevel-3 tocsection-12"><a href="#%5BLink%5D"><span class="tocnumber">2.1.2</span> <span class="toctext">[Link]</span></a></li>
<li class="toclevel-3 tocsection-13"><a href="#%5BNetwork%5D"><span class="tocnumber">2.1.3</span> <span class="toctext">[Network]</span></a></li>
<li class="toclevel-3 tocsection-14"><a href="#%5BAddress%5D"><span class="tocnumber">2.1.4</span> <span class="toctext">[Address]</span></a></li>
<li class="toclevel-3 tocsection-15"><a href="#%5BRoute%5D"><span class="tocnumber">2.1.5</span> <span class="toctext">[Route]</span></a></li>
<li class="toclevel-3 tocsection-16"><a href="#%5BDHCP%5D"><span class="tocnumber">2.1.6</span> <span class="toctext">[DHCP]</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-17">
<a href="#Archivos_netdev"><span class="tocnumber">2.2</span> <span class="toctext">Archivos netdev</span></a>
<ul>
<li class="toclevel-3 tocsection-18"><a href="#Secci%C3%B3n_%5BMatch%5D"><span class="tocnumber">2.2.1</span> <span class="toctext">Sección [Match]</span></a></li>
<li class="toclevel-3 tocsection-19"><a href="#Secci%C3%B3n_%5BNetDev%5D"><span class="tocnumber">2.2.2</span> <span class="toctext">Sección [NetDev]</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-20">
<a href="#Archivos_link"><span class="tocnumber">2.3</span> <span class="toctext">Archivos link</span></a>
<ul>
<li class="toclevel-3 tocsection-21"><a href="#Secci%C3%B3n_%5BMatch%5D_2"><span class="tocnumber">2.3.1</span> <span class="toctext">Sección [Match]</span></a></li>
<li class="toclevel-3 tocsection-22"><a href="#Secci%C3%B3n_%5BLink%5D"><span class="tocnumber">2.3.2</span> <span class="toctext">Sección [Link]</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1 tocsection-23">
<a href="#Utilizaci%C3%B3n_de_contenedores"><span class="tocnumber">3</span> <span class="toctext">Utilización de contenedores</span></a>
<ul>
<li class="toclevel-2 tocsection-24"><a href="#Red_b%C3%A1sica_con_DHCP"><span class="tocnumber">3.1</span> <span class="toctext">Red básica con DHCP</span></a></li>
<li class="toclevel-2 tocsection-25">
<a href="#DHCP_con_dos_IP_distintas"><span class="tocnumber">3.2</span> <span class="toctext">DHCP con dos IP distintas</span></a>
<ul>
<li class="toclevel-3 tocsection-26"><a href="#Interfaz_del_puente_de_red"><span class="tocnumber">3.2.1</span> <span class="toctext">Interfaz del puente de red</span></a></li>
<li class="toclevel-3 tocsection-27"><a href="#Vincular_ethernet_al_puente_de_red"><span class="tocnumber">3.2.2</span> <span class="toctext">Vincular ethernet al puente de red</span></a></li>
<li class="toclevel-3 tocsection-28"><a href="#Conectar_el_puente_de_red"><span class="tocnumber">3.2.3</span> <span class="toctext">Conectar el puente de red</span></a></li>
<li class="toclevel-3 tocsection-29"><a href="#A%C3%B1adir_opci%C3%B3n_para_arrancar_el_contenedor"><span class="tocnumber">3.2.4</span> <span class="toctext">Añadir opción para arrancar el contenedor</span></a></li>
<li class="toclevel-3 tocsection-30"><a href="#Resultado"><span class="tocnumber">3.2.5</span> <span class="toctext">Resultado</span></a></li>
<li class="toclevel-3 tocsection-31"><a href="#Aviso"><span class="tocnumber">3.2.6</span> <span class="toctext">Aviso</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-32"><a href="#Red_IP_est%C3%A1tica"><span class="tocnumber">3.3</span> <span class="toctext">Red IP estática</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-33"><a href="#Integraci%C3%B3n_de_interfaz_y_escritorio"><span class="tocnumber">4</span> <span class="toctext">Integración de interfaz y escritorio</span></a></li>
<li class="toclevel-1 tocsection-34">
<a href="#Soluci%C3%B3n_de_problemas"><span class="tocnumber">5</span> <span class="toctext">Solución de problemas</span></a>
<ul>
<li class="toclevel-2 tocsection-35"><a href="#Los_servicios_de_montaje_fallan_al_arranque"><span class="tocnumber">5.1</span> <span class="toctext">Los servicios de montaje fallan al arranque</span></a></li>
<li class="toclevel-2 tocsection-36"><a href="#systemd-resolve_no_busca_en_el_dominio_local"><span class="tocnumber">5.2</span> <span class="toctext">systemd-resolve no busca en el dominio local</span></a></li>
<li class="toclevel-2 tocsection-37"><a href="#El_segundo_ordenador_conectado_no_puede_usar_la_LAN_puenteada"><span class="tocnumber">5.3</span> <span class="toctext">El segundo ordenador conectado no puede usar la LAN puenteada</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-38"><a href="#V%C3%A9ase_tambi%C3%A9n"><span class="tocnumber">6</span> <span class="toctext">Véase también</span></a></li>
</ul>
</div>

<h2>
<span id="Utilizaci.C3.B3n_b.C3.A1sica"></span><span class="mw-headline" id="Utilización_básica">Utilización básica</span>
</h2>
<p>El paquete <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=systemd">systemd</a></span> es parte de la instalación de Arch por defecto y contiene todos los archivos necesarios para operar con redes cableadas. Los adaptadores inalámbricos pueden configurarse por otros servicios, como <a href="../en/Wpa_supplicant.html" title="Wpa supplicant">wpa_supplicant</a> o <a href="../en/Iwd.html" title="Iwd">iwd</a>, los cuales serán vistos más adelante en este articulo.
</p>
<h3>
<span id="Servicios_requeridos_y_configuraci.C3.B3n"></span><span class="mw-headline" id="Servicios_requeridos_y_configuración">Servicios requeridos y configuración</span>
</h3>
<p>Para usar <i>systemd-networkd</i>, <a href="../en/Systemd.html#Using_units" class="mw-redirect" title="Start/enable">inicie/active</a> <code>systemd-networkd.service</code>.
</p>
<p>Es opcional también <a href="../en/Systemd.html#Using_units" class="mw-redirect" title="Start/enable">iniciar/activar</a> <code>systemd-resolved.service</code>, que es un servicio de resolución de nombres de red para aplicaciones locales, considerando los siguientes puntos:
</p>
<ul>
<li>el servicio <a href="../en/Systemd-resolved.html" title="Systemd-resolved">systemd-resolved</a> es necesario si las entradas DNS se especifican en archivos <i>.network</i>;</li>
<li>se puede usar para obtener automáticamente direcciones DNS del cliente de red DHCP;</li>
<li>es importante entender cómo <a href="../en/Domain_name_resolution.html" class="mw-redirect" title="Resolv.conf">resolv.conf</a> y <i>systemd-resolved</i> interactúan para configurar correctamente el DNS que se utilizará, algunas explicaciones se proporcionan en el artículo <a href="../en/Systemd-resolved.html" title="Systemd-resolved">systemd-resolved</a>;</li>
<li>advierta que <i>systemd-resolved</i> también se puede usar sin <i>systemd-networkd</i>.</li>
</ul>
<h3>
<span id="Ejemplos_de_configuraci.C3.B3n"></span><span class="mw-headline" id="Ejemplos_de_configuración">Ejemplos de configuración</span>
</h3>
<p>Todas las configuraciones estan almacenadas como <code>foo.network</code> en <code>/etc/systemd/network</code>. Para una lista completa de opciones y orden de procesamiento, consulte los <a href="#Archivos_de_configuraci%C3%B3n">#Archivos de configuración</a> y <span class="plainlinks archwiki-template-man" title="$ man 5 systemd.network"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/systemd.network.5">systemd.network(5)</a></span>.
</p>
<p>Systemd/udev asigna automaticamente nombres previsibles, nombres de intefaces de red estables para todo las interfaces de Ethernet local, WLAN y WWAN. Utilice <code>networkctl list</code> para listar los dispositivos presentes en el sistema.
</p>
<p>Después de realizar cambios en los archivos de configuración, <a href="../en/Systemd.html#Using_units" class="mw-redirect" title="Restart">reinicie</a> <code>systemd-networkd.service</code>.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> 
<ul>
<li>Las opciones especificadas en los archivos de configuración distinguen entre mayúsculas y minúsculas.</li>
<li>En los ejemplos de abajo, <code>enp1s0</code> es el adaptador de cable y <code>wlp2s0</code> es el adaptador inalámbrico. Estos nombres pueden ser diferentes en sistemas distintos. También es posible usar un comodín, por ejemplo, <code>Name=en*</code>.</li>
<li>Si desea desactivar IPv6, consulte <a href="../en/IPv6.html#systemd-networkd_2" title="IPv6">IPv6#systemd-networkd</a>.</li>
<li>Establezca <code>DHCP=yes</code> en la sección <code>[Network]</code> para aceptar una solicitud IPv4 <b>y</b> IPv6 de DHCP.</li>
</ul>
</div>
<h4><span class="mw-headline" id="Adaptador_cableado_utilizando_DHCP">Adaptador cableado utilizando DHCP</span></h4>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/network/<i>wired</i>.network</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Match]
Name=enp1s0

[Network]
DHCP=ipv4
</pre>
<h4>
<span id="Adaptador_cableado_utilizando_una_IP_est.C3.A1tica"></span><span class="mw-headline" id="Adaptador_cableado_utilizando_una_IP_estática">Adaptador cableado utilizando una IP estática</span>
</h4>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/network/20-wired.network</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Match]
Name=enp1s0

[Network]
Address=10.1.10.9/24
Gateway=10.1.10.1
DNS=10.1.10.1
#DNS=8.8.8.8</pre>
<p><code>Address=</code> se puede usar más de una vez para configurar múltiples direcciones IPv4 o IPv6. Consulte <a href="#Archivos_network">#Archivos network</a> o <span class="plainlinks archwiki-template-man" title="$ man 5 systemd.network"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/systemd.network.5">systemd.network(5)</a></span> para obtener más opciones.
</p>
<h4>
<span id="Adaptador_inal.C3.A1mbrico"></span><span class="mw-headline" id="Adaptador_inalámbrico">Adaptador inalámbrico</span>
</h4>
<p>A fin de conectarse a una red inalámbrica con <i>systemd-networkd</i>, es necesario un adaptador inalámbrico configurado con otro servicio como <a href="../en/Wpa_supplicant.html" title="Wpa supplicant">wpa_supplicant</a> o <a href="../en/Iwd.html" title="Iwd">Iwd</a>
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/network/25-wireless.network</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Match]
Name=wlp2s0

[Network]
DHCP=ipv4
</pre>
<p>Si el adaptador inalámbrico tiene una dirección IP estática, la configuración es la misma (excepto por el nombre de la interfaz) como con la de un <a href="#Adaptador_cableado_utilizando_una_IP_est%C3%A1tica">adaptador cableado</a>.
</p>
<h4>
<span id="Adaptadores_cableados_e_inal.C3.A1mbricos_en_la_misma_m.C3.A1quina"></span><span class="mw-headline" id="Adaptadores_cableados_e_inalámbricos_en_la_misma_máquina">Adaptadores cableados e inalámbricos en la misma máquina</span>
</h4>
<p>Esta instalación activará una IP con el cliente DHCP para ambas conexiones haciendo uso de la directiva métrica que permite al kernel la desición sobre cúal conexión utilizar sobre la marcha. De esta forma, no se observará ningún salto de desconexión cuando la conexión cableada se desconecte.
</p>
<p>La métrica de ruta del kernel (misma que la configurada con <i>ip</i>) decide qué ruta utilizar para los paquetes salientes, en casos de muchas coincidencias. Esto se dará en el caso de que ambos adaptadores del sistema, cableados e inalámbricos, tengan conexiones activas. Para romper la cola, el kernel usa la métrica. Si una de las conexiones se apaga, la otra automaticamente se conecta sin que sea necesario un filtro con algo configurado (las transferencias en curso pueden aún no lidiar con esto apropiadamente, pero para eso hay otra capa diferente del <a href="https://en.wikipedia.org/wiki/es:Modelo_OSI" class="extiw" title="wikipedia:es:Modelo OSI">OSI</a>).
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> la opción <code>Metric</code> es para rutas estáticas, mientras la opción <code>RouteMetric</code> es para instalaciones que no usan rutas estáticas. Consulte <span class="plainlinks archwiki-template-man" title="$ man 5 systemd.network"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/systemd.network.5">systemd.network(5)</a></span> para obtener más detalles.</div>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/network/20-wired.network</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Match]
Name=enp1s0

[Network]
DHCP=ipv4

[DHCP]
RouteMetric=10</pre>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/network/25-wireless.network</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Match]
Name=wlp2s0

[Network]
DHCP=ipv4

[DHCP]
RouteMetric=20</pre>
<h4><span class="mw-headline" id="Renombrar_una_interfaz">Renombrar una interfaz</span></h4>
<p>En lugar de <a href="../en/Network_configuration.html#Change_interface_name" title="Network configuration">editar reglas udev</a>, se puede usar un archivo <i>.link</i> para cambiar el nombre de una interfaz. Un ejemplo útil es establecer un nombre de interfaz predecible para un adaptador USB de Ethernet en función de su dirección MAC, ya que a esos adaptadores, generalmente, obtienen diferentes nombres según el puerto USB en el que estén conectados.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/network/10-ethusb0.link</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Match]
MACAddress=12:34:56:78:90:ab

[Link]
Description=Adaptador USB a Ethernet
Name=ethusb0</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> cualquier archivo <i>.link </i> proporcionado por el usuario <b>debe</b> tener un nombre de archivo léxicamente anterior al de la configuración predeterminada <code>99-default.link</code> para ser considerado antes del predeterminado. Por ejemplo, nombre el archivo <code>10-ethusb0.link</code> y no <code>ethusb0.link</code>.</div>
<h2>
<span id="Archivos_de_configuraci.C3.B3n"></span><span class="mw-headline" id="Archivos_de_configuración">Archivos de configuración</span>
</h2>
<p>Los archivos de configuración se encuentran en <code>/usr/lib/systemd/network</code>, el volátil directorio de red <code>/run/systemd/network</code> y el directorio de red de administración local <code>/etc/systemd/network</code>. Los archivos en <code>/etc/systemd/network</code> tienen la máxima prioridad.
</p>
<p>Hay tres tipos de archivos de configuración. Todos usan un formato similar a los <a href="../en/Systemd.html#Writing_unit_files" title="Systemd">archivos de unidad de systemd</a>. 
</p>
<ul>
<li>Archivos <i><b>.network</b></i>. Aplicarán una configuración de red para un dispositivo <i>coincidente</i>
</li>
<li>Archivos <i><b>.netdev</b></i>. Crearán un «dispositivo de red virtual» para un entorno <i>coincidente</i>
</li>
<li>Archivos <i><b>.link</b></i>. Cuando aparece un dispositivo de red, <a href="../en/Udev.html" title="Udev">udev</a> buscará el primer archivo <i>.link</i> <i>coincidente</i>
</li>
</ul>
<p>Todos siguen las mismas reglas:
</p>
<ul>
<li>si <b>todas</b> las condiciones en la sección <code>[Match]</code> coinciden, el perfil se activará;</li>
<li>una sección vacía <code>[Match]</code> significa que el perfil se aplicará en cualquier caso (se puede comparar al comodín <code>*</code>);</li>
<li>todos los archivos de configuración se ordenan y procesan colectivamente en orden léxico, independientemente del directorio en el que se alojen;</li>
<li>los archivos con el mismo nombre se reemplazan entre sí.</li>
</ul>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Sugerencia:</strong> 
<ul>
<li>Para anular un archivo proporcionado por el sistema en <code>/usr/lib/systemd/network</code> de forma permanente (es decir, incluso después de la actualización), coloque un archivo con el mismo nombre en <code>/etc/systemd/network</code> y cree un enlace simbólico a <code>/dev/null</code>
</li>
<li>El comodín <code>*</code> se puede usar en <code>VALUE</code> (por ejemplo, <code>en*</code> coincidirá con cualquier dispositivo Ethernet), una función <a href="https://en.wikipedia.org/wiki/es:Funci%C3%B3n_booleana" class="extiw" title="wikipedia:es:Función booleana">booleana</a> puede escribirse simplemente como <code>yes</code> o <code>no</code>.</li>
<li>Siguiendo este <a rel="nofollow" class="external text" href="https://mailman.archlinux.org/pipermail/arch-general/2014-March/035381.html">hilo de Arch-general</a>, la mejor práctica es establecer configuraciones de red de contenedor específicas <i>dentro del contenedor</i> con archivos de configuración <b>networkd</b>.</li>
<li>Systemd acepta los valores <code>1, true, yes, on</code> para indicar una función booleana verdadera, y los valores <code>0, false, no, off</code> para un booleano falso.</li>
</ul>
</div>
<h3><span class="mw-headline" id="Archivos_network">Archivos network</span></h3>
<p>Estos archivos están destinados a establecer variables de configuración de red, especialmente para servidores y contenedores.
</p>
<p>Los archivos <i>.network</i> tienen las siguientes secciones: <code>[Match]</code>, <code>[Link]</code>, <code>[Network]</code>, <code>[Address]</code>, <code>[Route]</code>, y <code>[DHCP]</code>.  A continuación se muestran las claves configuradas comúnmente para cada sección. Consulte <span class="plainlinks archwiki-template-man" title="$ man 5 systemd.network"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/systemd.network.5">systemd.network(5)</a></span> para obtener más información y ejemplos.
</p>
<h4>
<span id=".5BMatch.5D"></span><span class="mw-headline" id="[Match]">[Match]</span>
</h4>
<table class="wikitable">
<tbody>
<tr>
<th>Parámetros</th>
<th>Descripción</th>
<th>Valores aceptados</th>
<th>Valores predeterminados
</th>
</tr>
<tr>
<td><code>Name=</code></td>
<td>Hacer coincidir los nombres de los dispositivos, por ejemplo <code>en*</code>. Al anteponer el prefijo <code>!</code>, la lista se invierte.</td>
<td>nombres de dispositivos separados por espacios en blanco con patrones <a href="https://en.wikipedia.org/wiki/es:glob_(programming)" class="extiw" title="wikipedia:es:glob (programming)">globs</a>, negación lógica (<code>!</code>)</td>
<td>
</td>
</tr>
<tr>
<td><code>MACAddress=</code></td>
<td>Hacer coincidir las direcciones MAC, por ejemplo <code>MACAddress=01:23:45:67:89:ab 00-11-22-33-44-55 AABB.CCDD.EEFF</code>
</td>
<td>direcciones MAC separadas por espacios en blanco en formato hexadecimal delimitado por dos puntos, guiones o puntos</td>
<td>
</td>
</tr>
<tr>
<td><code>Host=</code></td>
<td>Hacer coincidir el nombre del equipo o la ID de máquina del sistema.</td>
<td>cadena de nombre del equipo con globs, <span class="plainlinks archwiki-template-man" title="$ man 5 machine-id"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/machine-id.5">machine-id(5)</a></span>
</td>
<td>
</td>
</tr>
<tr>
<td><code>Virtualization=</code></td>
<td>Comprobar si el sistema se ejecuta en un entorno virtualizado. <code>Virtualization=false</code> solo coincidirá con su máquina del equipo, mientras que <code>Virtualization=true</code> coincide con cualquier contenedor o máquina virtual. Es posible verificar un tipo o implementación de virtualización específica.</td>
<td>booleano, negación lógica (<code>!</code>), tipo (<code>vm</code>, <code>container</code>), implementación (<code>qemu</code>, <code>kvm</code>, <code>zvm</code>, <code>vmware</code>, <code>microsoft</code>, <code>oracle</code>, <code>xen</code>, <code>bochs</code>, <code>uml</code>, <code>bhyve</code>, <code>qnx</code>, <code>openvz</code>, <code>lxc</code>, <code>lxc-libvirt</code>, <code>systemd-nspawn</code>, <code>docker</code>, <code>podman</code>, <code>rkt</code>, <code>wsl</code>, <code>acrn</code>)</td>
<td>
</td>
</tr>
</tbody>
</table>
<h4>
<span id=".5BLink.5D"></span><span class="mw-headline" id="[Link]">[Link]</span>
</h4>
<ul>
<li>
<code>MACAddress=</code> útil para <a href="../es/MAC_address_spoofing.html#systemd-networkd" title="MAC address spoofing (Español)">suplantación de direcciones MAC</a>.</li>
<li>
<code>MTUBytes=</code> establecer un valor de MTU mayor (por ejemplo, cuando se usa <a href="../en/Jumbo_frames.html" title="Jumbo frames">jumbo frames</a>) puede acelerar significativamente sus transferencias de red.</li>
<li>
<code>Multicast</code>  permite el uso de <a href="https://en.wikipedia.org/wiki/es:Multidifusi%C3%B3n" class="extiw" title="wikipedia:es:Multidifusión">multidifusión</a> en interfaz(ces).</li>
</ul>
<h4>
<span id=".5BNetwork.5D"></span><span class="mw-headline" id="[Network]">[Network]</span>
</h4>
<table class="wikitable">
<tbody>
<tr>
<th>Parámetros</th>
<th>Descripción</th>
<th>Valores aceptados</th>
<th>Valores predeterminados
</th>
</tr>
<tr>
<td><code>DHCP=</code></td>
<td>Controla el soporte de cliente DHCPv4 y/o DHCPv6.</td>
<td>booleano, <code>ipv4</code>, <code>ipv6</code>
</td>
<td>
<code>false</code>
</td>
</tr>
<tr>
<td><code>DHCPServer=</code></td>
<td>Si está activado, se iniciará un servidor DHCPv4.</td>
<td>booleano</td>
<td>
<code>false</code>
</td>
</tr>
<tr>
<td><code>MulticastDNS=</code></td>
<td>Activa el soporte <a rel="nofollow" class="external text" href="https://tools.ietf.org/html/rfc6762">DNS multidifusión</a>. Cuando se establece en <code>resolve</code>, solo se activa la resolución, pero no el registro y anuncio del equipo o servicio.</td>
<td>booleano, <code>resolve</code>
</td>
<td>
<code>false</code>
</td>
</tr>
<tr>
<td><code>DNSSEC=</code></td>
<td>Controla el soporte de validación DNSSEC DNS en el enlace. Cuando se establece en <code>allow-downgrade</code>, la compatibilidad con redes que no son compatibles con DNSSEC aumenta, al desactivar automáticamente DNSSEC en este caso.</td>
<td>booleano, <code>allow-downgrade</code>
</td>
<td>
<code>false</code>
</td>
</tr>
<tr>
<td><code>DNS=</code></td>
<td>Configura las direcciones <a href="../en/Domain_name_resolution.html" class="mw-redirect" title="DNS">DNS</a> estáticas. Se puede especificar más de una vez.</td>
<td><a rel="nofollow" class="external text" href="http://man7.org/linux/man-pages/man3/inet_pton.3.html"><code>inet_pton</code></a></td>
<td>
</td>
</tr>
<tr>
<td><code>Domains=</code></td>
<td>Una lista de dominios que deben resolverse utilizando los servidores DNS sobre este enlace. <a rel="nofollow" class="external text" href="https://www.freedesktop.org/software/systemd/man/systemd.network.html#Domains=">más información</a>
</td>
<td>nombre de dominio, opcionalmente prefijado con un signo (<code>~</code>)</td>
<td>
</td>
</tr>
<tr>
<td><code>IPForward=</code></td>
<td>Si está activado, los paquetes entrantes en cualquier interfaz de red se enviarán a cualquier otra interfaz de acuerdo con la tabla de enrutamiento.</td>
<td>booleano,  <code>ipv4</code>, <code>ipv6</code>
</td>
<td>
<code>false</code>
</td>
</tr>
<tr>
<td><code>IPv6PrivacyExtensions=</code></td>
<td>Configura el uso de direcciones temporales sin estado que cambian con el tiempo (consulte <a rel="nofollow" class="external text" href="https://tools.ietf.org/html/rfc4941">RFC 4941</a>). Cuando se fija <code>prefer-public</code>, activa las extensiones de privacidad, pero prefiere las direcciones públicas sobre las direcciones temporales. Cuando se fija <code>kernel</code>, la configuración predeterminada del kernel se mantendrá en su lugar.</td>
<td>booleano, <code>prefer-public</code>, <code>kernel</code>
</td>
<td>
<code>false</code>
</td>
</tr>
</tbody>
</table>
<h4>
<span id=".5BAddress.5D"></span><span class="mw-headline" id="[Address]">[Address]</span>
</h4>
<ul><li>
<code>Address=</code> esta opción es <b>obligatoria</b> a menos que se use DHCP.</li></ul>
<h4>
<span id=".5BRoute.5D"></span><span class="mw-headline" id="[Route]">[Route]</span>
</h4>
<ul>
<li>
<code>Gateway=</code> esta opción es <b>obligatoria</b> a menos que se utilice DHCP.</li>
<li>
<code>Destination=</code> el prefijo de destino de la ruta, posiblemente seguido de una barra diagonal y la longitud del prefijo.</li>
</ul>
<p>Si <code>Destination</code> no está presente en la sección <code>[Route]</code>, esta sección se trata como una ruta predeterminada.
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Sugerencia:</strong> puede poner las claves <code>Address=</code> y <code>Gateway=</code> en la sección <code>[Network]</code> como una abreviatura si <code>[Address]</code> contiene solo una clave de «Dirección» y la sección <code>[Route]</code> contiene solo una clave de «Puerta de enlace».</div>
<h4>
<span id=".5BDHCP.5D"></span><span class="mw-headline" id="[DHCP]">[DHCP]</span>
</h4>
<table class="wikitable">
<tbody>
<tr>
<th>Parámetros</th>
<th>Descripción</th>
<th>Valores aceptados</th>
<th>Valores predeterminados
</th>
</tr>
<tr>
<td><code>UseDNS=</code></td>
<td>controla si se utilizan los servidores DNS anunciados por el servidor DHCP</td>
<td>booleano</td>
<td>
<code>true</code>
</td>
</tr>
<tr>
<td><code>Anonymize=</code></td>
<td>cuando es verdadero, las opciones enviadas al servidor DHCP seguirán el <a rel="nofollow" class="external text" href="https://tools.ietf.org/html/rfc7844">RFC7844</a> (perfiles de anonimato para clientes DHCP) para minimizar la divulgación de información de identificación</td>
<td>booleano</td>
<td>
<code>false</code>
</td>
</tr>
<tr>
<td><code>UseDomains=</code></td>
<td>controla si el nombre de dominio recibido del servidor DHCP se usará como dominio de búsqueda DNS. Si se establece en <code>route</code>, el nombre de dominio recibido del servidor DHCP se usará solo para enrutar consultas DNS, pero no para buscar. Esta opción a veces puede arreglar la resolución de nombres locales cuando se utiliza <a href="../en/Systemd-resolved.html" title="Systemd-resolved">systemd-resolved</a>
</td>
<td>booleano, <code>route</code>
</td>
<td>
<code>false</code>
</td>
</tr>
</tbody>
</table>
<h3><span class="mw-headline" id="Archivos_netdev">Archivos netdev</span></h3>
<p>Estos archivos crearán dispositivos de red virtuales. Tienen dos secciones: <code>[Match]</code> y <code>[NetDev]</code>. A continuación se muestran las claves configuradas comúnmente para cada sección. Consulte <span class="plainlinks archwiki-template-man" title="$ man 5 systemd.netdev"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/systemd.netdev.5">systemd.netdev(5)</a></span> para obtener más información y ejemplos.
</p>
<h4>
<span id="Secci.C3.B3n_.5BMatch.5D"></span><span class="mw-headline" id="Sección_[Match]">Sección [Match]</span>
</h4>
<ul>
<li>
<code>Host=</code> el nombre del equipo.</li>
<li>
<code>Virtualization=</code> comprueba si se ejecuta en una máquina virtual.</li>
</ul>
<h4>
<span id="Secci.C3.B3n_.5BNetDev.5D"></span><span class="mw-headline" id="Sección_[NetDev]">Sección [NetDev]</span>
</h4>
<p>Las claves más comunes son:
</p>
<ul>
<li>
<code>Name=</code> el nombre de la interfaz. <b>Obligatorio</b>.</li>
<li>
<code>Kind=</code> por ejemplo, <i>bridge</i>, <i>bond</i>, <i>vlan</i>, <i>veth</i>, <i>sit</i>, etc. <b>Obligatorio</b>.</li>
</ul>
<h3><span class="mw-headline" id="Archivos_link">Archivos link</span></h3>
<p>Estos archivos son una alternativa a las reglas de udev personalizadas y serán aplicados por <a href="../en/Udev.html" title="Udev">udev</a> a medida que aparezca el dispositivo. Tienen dos secciones: <code>[Match]</code> y <code>[Link]</code>. A continuación se encuentran las claves configuradas comúnmente para cada sección. Consulte <span class="plainlinks archwiki-template-man" title="$ man 5 systemd.link"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/systemd.link.5">systemd.link(5)</a></span> para obtener más información y ejemplos.
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Sugerencia:</strong> utilice <code># udevadm test-builtin net_setup_link /sys/path/to/network/device</code> para diagnosticar problemas con archivos <i>.link</i>.</div>
<h4>
<span id="Secci.C3.B3n_.5BMatch.5D_2"></span><span class="mw-headline" id="Sección_[Match]_2">Sección [Match]</span>
</h4>
<ul>
<li>
<code>MACAddress=</code> la dirección MAC.</li>
<li>
<code>Host=</code> el nombre del equipo.</li>
<li><code>Virtualization=</code></li>
<li>
<code>Type=</code> el tipo de dispositivo, por ejemplo, vlan.</li>
</ul>
<h4>
<span id="Secci.C3.B3n_.5BLink.5D"></span><span class="mw-headline" id="Sección_[Link]">Sección [Link]</span>
</h4>
<ul>
<li>
<code>MACAddressPolicy=</code>  direcciones persistentes o aleatorias, o,</li>
<li>
<code>MACAddress=</code> una dirección específica.</li>
</ul>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> el sistema de <code>/usr/lib/systemd/network/99-default.link</code> es generalmente suficiente para la mayoría de los casos básicos.</div>
<h2>
<span id="Utilizaci.C3.B3n_de_contenedores"></span><span class="mw-headline" id="Utilización_de_contenedores">Utilización de contenedores</span>
</h2>
<p>El servicio está disponible con <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=systemd">systemd</a></span>. Querrá <a href="../es/Systemd.html#Utilizar_las_unidades" class="mw-redirect" title="Enable (Español)">activar</a> e <a href="../es/Systemd.html#Utilizar_las_unidades" class="mw-redirect" title="Start (Español)">iniciar</a> la unidad <code>systemd-networkd.service</code> tanto en el equipo como en el contenedor.
</p>
<p>Para fines de depuración, se recomienda encarecidamente <a href="../es/Help:Reading.html#Instalaci%C3%B3n_de_paquetes" class="mw-redirect" title="Install (Español)">instalar</a> los paquetes <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=bridge-utils">bridge-utils</a></span>, <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=net-tools">net-tools</a></span> y <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=iproute2">iproute2</a></span>.
</p>
<p>Si está utilizando <a href="../en/Systemd-nspawn.html" title="Systemd-nspawn">systemd-nspawn</a>, es posible que deba modificar <code>systemd-nspawn@.service</code> y añadir opciones de arranque a la línea <code>ExecStart</code>. Remítase a <span class="plainlinks archwiki-template-man" title="$ man 1 systemd-nspawn"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/systemd-nspawn.1">systemd-nspawn(1)</a></span> para obtener una lista exhaustiva de opciones.
</p>
<p>Tenga en cuenta que si desea aprovechar la configuración automática de DNS desde DHCP, debe activar <code>systemd-resolved</code> y crear el enlace simbólico <code>/run/systemd/resolve/resolv.conf</code> a <code>/etc/resolv.conf</code>. Consulte <span class="plainlinks archwiki-template-man" title="$ man 8 systemd-resolved.service"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/systemd-resolved.service.8">systemd-resolved.service(8)</a></span> para obtener más detalles.
</p>
<p>Antes de comenzar a configurar su red de contenedores, es útil:
</p>
<ul>
<li>desactivar todos sus servicios <a href="../en/Netctl.html" title="Netctl">netctl</a> (en equipo y contenedor), <a href="../en/Dhcpcd.html" title="Dhcpcd">dhcpcd</a> (en equipo y contenedor), <a href="../en/Systemd-networkd.html" title="Systemd-networkd">systemd-networkd</a> (solo en contenedor) y <code>systemd-nspawn@.service</code> (solo en equipo) para evitar posibles conflictos y facilitar la depuración;</li>
<li>asegurarse de que el <a href="../en/Internet_sharing.html#Enable_packet_forwarding" title="Internet sharing">reenvío de paquetes</a> esté activado si desea permitir que los contenedores accedan a Internet. Asegúrese de que su archivo <i>.network</i> no desactive accidentalmente el reenvío, porque si no tiene una configuración <code>IPForward=1</code> en él, <code>systemd-networkd</code> desactivará el reenvío en esa interfaz, incluso si la tiene activada globalmente;</li>
<li>asegurarse de no tener ninguna regla <a href="../es/Iptables.html" title="Iptables (Español)">iptables</a> que pueda bloquear el tráfico;</li>
<li>cuando el demonio está iniciado, la orden <code>networkctl</code> de systemd  mostrará el estado de las interfaces de red.</li>
</ul>
<p>Para completar la configuración que se describe a continuación:
</p>
<ul>
<li>limitaremos la salida de la orden <code>ip a</code> a las interfaces correspondientes;</li>
<li>asumiremos que el «equipo» es su sistema operativo principal en el que está arrancando y el «contenedor» es su máquina virtual invitada;</li>
<li>todos los nombres de interfaces y direcciones IP son solo ejemplos.</li>
</ul>
<h3>
<span id="Red_b.C3.A1sica_con_DHCP"></span><span class="mw-headline" id="Red_básica_con_DHCP">Red básica con DHCP</span>
</h3>
<p>Esta configuración activará una IP obtenida con DHCP para el equipo y el contenedor. En este caso, ambos sistemas compartirán tanto la misma IP como las mismas interfaces.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/network/<i>MyDhcp</i>.network</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Match]
Name=en*

[Network]
DHCP=ipv4
</pre>
<p>Luego, <a href="../es/Systemd.html#Utilizar_las_unidades" class="mw-redirect" title="Enable (Español)">active</a> e inicie <code>systemd-networkd.service</code> en su contenedor.
</p>
<p>Por supuesto, puede reemplazar <code>en*</code> por el nombre completo de su dispositivo Ethernet dado por la salida de la orden <code>ip link</code>.
</p>
<ul><li>en el equipo y en el contenedor:</li></ul>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ ip a</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">2: enp7s0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc pfifo_fast state UP group default qlen 1000
    link/ether 14:da:e9:b5:7a:88 brd ff:ff:ff:ff:ff:ff
    inet 192.168.1.72/24 brd 192.168.1.255 scope global enp7s0
       valid_lft forever preferred_lft forever
    inet6 fe80::16da:e9ff:feb5:7a88/64 scope link 
       valid_lft forever preferred_lft forever
</pre>
<p>Por defecto, el nombre del equipo recibido del servidor DHCP se utilizará como nombre de equipo transitorio.
</p>
<p>Para cambiarlo, añada <code>UseHostname=false</code> en la sección <code>[DHCPv4]</code>
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/network/<i>MyDhcp</i>.network</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[DHCPv4]
UseHostname=false
</pre>
<p>Si no desea configurar un DNS en <code>/etc/resolv.conf</code> y desea confiar en DHCP para definirlo, debe <a href="../es/Systemd.html#Utilizar_las_unidades" class="mw-redirect" title="Enable (Español)">activar</a> <code>systemd-resolved.service</code> y crear el enlace simbólico <code>/run/systemd/resolve/resolv.conf</code> a <code>/etc/resolv.conf</code>
</p>
<pre># ln -sf /run/systemd/resolve/resolv.conf /etc/resolv.conf
</pre>
<p>Consulte <code>systemd-resolved.service(8)</code> para obtener más detalles.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> los usuarios que accedan a una partición del sistema a través de <code>/usr/bin/arch-chroot</code> desde <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=arch-install-scripts">arch-install-scripts</a></span>, deberán crear el enlace simbólico fuera de chroot, en la partición montada. Esto se debe a que arch-chroot vincula el archivo al entorno live.</div>
<h3><span class="mw-headline" id="DHCP_con_dos_IP_distintas">DHCP con dos IP distintas</span></h3>
<h4><span class="mw-headline" id="Interfaz_del_puente_de_red">Interfaz del puente de red</span></h4>
<p>Primero, cree una interfaz del puente de red virtual. Le decimos a systemd que cree un dispositivo llamado <i>br0</i> que funcione como un puente de ethernet.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/network/<i>MyBridge</i>.netdev</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[NetDev]
Name=br0
Kind=bridge</pre>
<p><a href="../en/Systemd.html#Using_units" class="mw-redirect" title="Restart">Reinicie</a> <code>systemd-networkd.service</code> para que systemd puede tener conocimiento del puente de red creado.
</p>
<p>En el equipo y en el contenedor:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ ip a</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">3: br0: &lt;BROADCAST,MULTICAST&gt; mtu 1500 qdisc noop state DOWN group default 
    link/ether ae:bd:35:ea:0c:c9 brd ff:ff:ff:ff:ff:ff
</pre>
<p>Advierta que la interfaz br0 esté en la lista, pero está «DOWN» en esta etapa.
</p>
<h4><span class="mw-headline" id="Vincular_ethernet_al_puente_de_red">Vincular ethernet al puente de red</span></h4>
<p>El siguiente paso es añadir al puente de red recién creado una interfaz de red. En el siguiente ejemplo, añadimos cualquier interfaz que coincida con el nombre <i>en*</i> en el puente de red <i>br0</i>.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/network/<i>bind</i>.network</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Match]
Name=en*

[Network]
Bridge=br0</pre>
<p>La interfaz de ethernet no debe tener servicio DHCP o una dirección IP asociada, ya que el puente de red requiere una interfaz a la que se pueda vincular sin IP: modifique el archivo <code>/etc/systemd/network/<i>MyEth</i>.network</code> correspondiente para eliminar el direccionamiento.
</p>
<h4><span class="mw-headline" id="Conectar_el_puente_de_red">Conectar el puente de red</span></h4>
<p>Ahora que se ha creado el puente de red y se ha vinculado a una interfaz de red existente, se debe especificar la configuración IP de la interfaz del puente. Esto se define en un tercer archivo <i>.network</i>, el siguiente ejemplo utiliza DHCP.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/network/<i>mybridge</i>.network</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Match]
Name=br0

[Network]
DHCP=ipv4</pre>
<h4>
<span id="A.C3.B1adir_opci.C3.B3n_para_arrancar_el_contenedor"></span><span class="mw-headline" id="Añadir_opción_para_arrancar_el_contenedor">Añadir opción para arrancar el contenedor</span>
</h4>
<p>Como queremos dar una IP separada para el equipo y otra para el contenedor, necesitamos «<i>Desconectar</i>» la red del contenedor de la del equipo. Para hacer esto, añada esta opción <code>--network-bridge=br0</code> a la orden de arranque del contenedor.
</p>
<pre># systemd-nspawn --network-bridge=br0 -bD /path_to/my_container
</pre>
<h4><span class="mw-headline" id="Resultado">Resultado</span></h4>
<ul><li>en el equipo:</li></ul>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ ip a</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">3: br0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue state UP group default 
    link/ether 14:da:e9:b5:7a:88 brd ff:ff:ff:ff:ff:ff
    inet 192.168.1.87/24 brd 192.168.1.255 scope global br0
       valid_lft forever preferred_lft forever
    inet6 fe80::16da:e9ff:feb5:7a88/64 scope link 
       valid_lft forever preferred_lft forever
6: vb-<i>MyContainer</i>: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc pfifo_fast master br0 state UP group default qlen 1000
    link/ether d2:7c:97:97:37:25 brd ff:ff:ff:ff:ff:ff
    inet6 fe80::d07c:97ff:fe97:3725/64 scope link 
       valid_lft forever preferred_lft forever
</pre>
<ul><li>en el contenedor:</li></ul>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ ip a</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">2: host0: &lt;BROADCAST,MULTICAST,ALLMULTI,AUTOMEDIA,NOTRAILERS,UP,LOWER_UP&gt; mtu 1500 qdisc pfifo_fast state UP group default qlen 1000
    link/ether 5e:96:85:83:a8:5d brd ff:ff:ff:ff:ff:ff
    inet 192.168.1.73/24 brd 192.168.1.255 scope global host0
       valid_lft forever preferred_lft forever
    inet6 fe80::5c96:85ff:fe83:a85d/64 scope link 
       valid_lft forever preferred_lft forever
</pre>
<h4><span class="mw-headline" id="Aviso">Aviso</span></h4>
<ul>
<li>ahora tenemos una dirección IP para <code>br0</code> en el equipo, y otra para <code>host0</code> en el contenedor;</li>
<li>han aparecido dos nuevas interfaces: <code>vb-<i>MyContainer</i></code> en el equipo y <code>host0</code> en el contenedor. Esto viene como resultado de la opción <code>--network-bridge=br0</code>. Esta opción <i>implica</i> otra opción, <code>--network-veth</code>. Esto significa que se ha creado un <i>enlace virtual de Ethernet</i> entre el equipo y el contenedor;</li>
<li>la dirección DHCP en <code>host0</code> proviene del archivo del sistema <code>/usr/lib/systemd/network/80-container-host0.network</code>.</li>
</ul>
<ul><li>en el equipo:</li></ul>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ brctl show</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">bridge name	bridge id		STP enabled	interfaces
br0		8000.14dae9b57a88	no		enp7s0
							vb-<i>MyContainer</i>
</pre>
<p>La salida de la orden anterior confirma que tenemos un puente de red con dos interfaces vinculadas.
</p>
<ul><li>en el equipo:</li></ul>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ ip route</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">default via 192.168.1.254 dev br0 
192.168.1.0/24 dev br0  proto kernel  scope link  src 192.168.1.87
</pre>
<ul><li>en el contenedor:</li></ul>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ ip route</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">default via 192.168.1.254 dev host0 
192.168.1.0/24 dev host0  proto kernel  scope link  src 192.168.1.73
</pre>
<p>Las salidas de las órdenes anteriores confirman que hemos activado las interfaces <code>br0</code> y <code>host0</code> con una dirección IP y puerta de enlace 192.168.1.254. La dirección de la puerta de enlace ha sido tomada automáticamente por <i>systemd-networkd</i>.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ cat /run/systemd/resolve/resolv.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">nameserver 192.168.1.254
</pre>
<h3>
<span id="Red_IP_est.C3.A1tica"></span><span class="mw-headline" id="Red_IP_estática">Red IP estática</span>
</h3>
<p>Establecer una IP estática para cada dispositivo puede ser útil en caso de servicios web implementados (por ejemplo, FTP, http, SSH). Cada dispositivo mantendrá la misma dirección MAC en todos los reinicios si su archivo del sistema <code>/usr/lib/systemd/network/99-default.link</code>  tiene la opción <code>MACAddressPolicy=persistent</code> (que viene por defecto). Por lo tanto, enrutará fácilmente cualquier servicio en su puerta de enlace al dispositivo deseado.
</p>
<p>La siguiente configuración debe hacerse para esta:
</p>
<ul><li>en el equipo:</li></ul>
<p>La configuración es muy similar a la de <a href="#DHCP_con_dos_IP_distintas">#DHCP con dos IP distintas</a>. Primero, se debe crear una interfaz del puente de red virtual y la interfaz física principal debe estar vinculada a ella. Esta tarea se puede lograr con los siguientes dos archivos, con contenidos iguales a los disponibles en la sección DHCP.
</p>
<pre>/etc/systemd/network/<i>MyBridge</i>.netdev
/etc/systemd/network/<i>MyEth</i>.network
</pre>
<p>A continuación, debe configurar la IP y el DNS de la interfaz del puente de red virtual recién creada. El siguiente archivo <i>MyBridge</i>.network proporciona un ejemplo de configuración:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/network/<i>MyBridge</i>.network</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Match]
Name=br0

[Network]
DNS=192.168.1.254
Address=192.168.1.87/24
Gateway=192.168.1.254
</pre>
<ul><li>en el contenedor:</li></ul>
<p>Primero, eliminaremos el archivo del sistema <code>/usr/lib/systemd/network/80-container-host0.network</code> que proporciona una configuración DHCP para la interfaz de red predeterminada del contenedor. Para hacerlo de forma permanente (por ejemplo, incluso después de las actualizaciones de <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=systemd">systemd</a></span>), haga lo siguiente en el contenedor. Esto enmascarará el archivo <code>/usr/lib/systemd/network/80-container-host0.network</code> ya que los archivos con el mismo nombre en <code>/etc/systemd/network</code> tienen prioridad sobre <code>/usr/lib/systemd/network</code>. Tenga en cuenta que este archivo puede mantenerse solo si desea una IP estática en el equipo y desea que la dirección IP de sus contenedores se asigne a través de DHCP.
</p>
<pre># ln -sf /dev/null /etc/systemd/network/80-container-host0.network
</pre>
<p>Luego, configure una IP estática para la interfaz de red predeterminada <code>host0</code> y <a href="../en/Systemd.html#Basic_systemctl_usage" title="Systemd">active e inicie</a> <code>systemd-networkd.service</code> en su contenedor. Seguidamente se proporciona una configuración de ejemplo:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/network/<i>MyVeth</i>.network</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Match]
Name=host0

[Network]
DNS=192.168.1.254
Address=192.168.1.94/24
Gateway=192.168.1.254
</pre>
<h2>
<span id="Integraci.C3.B3n_de_interfaz_y_escritorio"></span><span class="mw-headline" id="Integración_de_interfaz_y_escritorio">Integración de interfaz y escritorio</span>
</h2>
<p><i>systemd-networkd</i> no tiene una interfaz de gestión interactiva adecuada ni a través de línea de órdenes ni gráfica. Aún así, algunas herramientas están disponibles para mostrar el estado actual de la red, recibir notificaciones o interactuar con la configuración inalámbrica:
</p>
<ul><li>
<i>networkctl</i> (a través de CLI) ofrece un simple volcado de los estados de la interfaz de red.</li></ul>
<ul><li>Cuando <i>networkd</i> está configurado con <a href="../en/Wpa_supplicant.html" title="Wpa supplicant">wpa_supplicant</a>, tanto <i>wpa_cli</i> como <i>wpa_gui</i> ofrecen la posibilidad de asociar y configurar interfaces WLAN dinámicamente.</li></ul>
<ul><li>
<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/networkd-notify-git/">networkd-notify-git</a></span><sup><small>AUR</small></sup> puede generar notificaciones simples en respuesta a los cambios de estado de la interfaz de red (como conexión/desconexión y nueva asociación).</li></ul>
<ul><li>El demonio <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/networkd-dispatcher/">networkd-dispatcher</a></span><sup><small>AUR</small></sup> permite ejecutar scripts en respuesta a cambios en el estado de la interfaz de red, similar a <i>NetworkManager-dispatcher</i>.</li></ul>
<ul><li>En cuanto a la resolución de DNS de <i>systemd-resolved</i>, la información sobre los servidores DNS actuales se puede visualizar con <code>resolvectl status</code>.</li></ul>
<h2>
<span id="Soluci.C3.B3n_de_problemas"></span><span class="mw-headline" id="Solución_de_problemas">Solución de problemas</span>
</h2>
<h3><span class="mw-headline" id="Los_servicios_de_montaje_fallan_al_arranque">Los servicios de montaje fallan al arranque</span></h3>
<p>Si ejecuta servicios como <a href="../en/Samba.html" title="Samba">Samba</a>/<a href="../en/NFS.html" title="NFS">NFS</a> que fallan si se inician antes de que la red esté activa, puede <a href="../es/Systemd.html#Utilizar_las_unidades" class="mw-redirect" title="Enable (Español)">activar</a> el servicio <code>systemd-networkd-wait-online.service</code>. Sin embargo, esto rara vez es necesario porque la mayoría de los demonios de red comienzan bien, incluso si la red aún no se ha configurado.
</p>
<h3><span class="mw-headline" id="systemd-resolve_no_busca_en_el_dominio_local">systemd-resolve no busca en el dominio local</span></h3>
<p><a href="../en/Systemd-resolved.html" title="Systemd-resolved">systemd-resolved</a> puede no buscar el dominio local cuando se le da solo el nombre del equipo, incluso cuando <code>UseDomains=yes</code> o <code>Domains=[domain-list]</code> está presente en el archivo <i>.network</i> apropiadamente, y ese archivo produce la esperada <code>search [domain-list]</code> en <code>resolv.conf</code>. Puede ejecutar <code>networkctl status</code> o <code>resolvectl status</code> para verificar si la búsqueda de dominios se está recogiendo bien.
</p>
<p>Posibles soluciones:
</p>
<ul>
<li>Desactive <a href="../en/Systemd-resolved.html#LLMNR" title="Systemd-resolved">LLMNR</a> para permitir que  <i>systemd-resolved</i> continúe inmediatamente agregando los sufijos DNS.</li>
<li>Recorte la base de datos de <code>hosts</code> para <code>/etc/nsswitch.conf</code> (por ejemplo, eliminando la opción <code>[!UNAVAIL=return]</code> después del servicio <code>resolve</code>).</li>
<li>Alterne con el uso de nombres de dominio totalmente calificados.</li>
<li>Utilice <code>/etc/hosts</code> para resolver nombres de equipo.</li>
<li>Recurra al uso de <code>dns</code> de glibc en lugar de utilizar <code>resolve</code> de systemd.</li>
</ul>
<h3><span class="mw-headline" id="El_segundo_ordenador_conectado_no_puede_usar_la_LAN_puenteada">El segundo ordenador conectado no puede usar la LAN puenteada</span></h3>
<p>El primer ordenador tiene dos LAN. El segundo tiene una LAN y está conectado al primero. Vayamos al segundo ordenador para dar acceso completo a la LAN después de superar la interfaz puenteada:
</p>
<pre># sysctl net.bridge.bridge-nf-filter-pppoe-tagged=0
# sysctl net.bridge.bridge-nf-filter-vlan-tagged=0
# sysctl net.bridge.bridge-nf-call-ip6tables=0
# sysctl net.bridge.bridge-nf-call-iptables=0
# sysctl net.bridge.bridge-nf-call-arptables=0
</pre>
<h2>
<span id="V.C3.A9ase_tambi.C3.A9n"></span><span class="mw-headline" id="Véase_también">Véase también</span>
</h2>
<ul>
<li><a rel="nofollow" class="external text" href="https://www.freedesktop.org/software/systemd/man/systemd-networkd.service.html">systemd.networkd man page</a></li>
<li><a rel="nofollow" class="external text" href="https://plus.google.com/u/0/+TomGundersen/posts">Tom Gundersen, main systemd-networkd developer, G+ home page</a></li>
<li><a rel="nofollow" class="external text" href="https://coreos.com/blog/intro-to-systemd-networkd/">Tom Gundersen posts on Core OS blog</a></li>
<li>
<a rel="nofollow" class="external text" href="https://bbs.archlinux.org/viewtopic.php?pid=1393759#p1393759">How to set up systemd-networkd with wpa_supplicant</a> (WonderWoofy's walkthrough on Arch forums)</li>
</ul>
</div>
</div>
<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Categories</a>: <ul>
<li><a href="../es/Category:Network_managers.html" title="Category:Network managers (Español)">Network managers (Español)</a></li>
<li><a href="../es/Category:Virtualization.html" title="Category:Virtualization (Español)">Virtualization (Español)</a></li>
</ul>
</div></div>
	</div>
</div>

<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
		<li>Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Systemd-networkd_(Espa%C3%B1ol)&amp;oldid=649046">https://wiki.archlinux.org/index.php?title=Systemd-networkd_(Español)&amp;oldid=649046</a>"</li>
		<li id="footer-info-lastmod"> This page was last edited on 16 January 2021, at 16:58.</li>
		<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
	<br>
</ul>
	<ul id="footer-places">
		<li id="footer-places-privacy"><a href="../en/ArchWiki:Privacy_policy.html" title="ArchWiki:Privacy policy">Privacy policy</a></li>
		<li id="footer-places-about"><a href="../en/ArchWiki:About.html" title="ArchWiki:About">About ArchWiki</a></li>
		<li id="footer-places-disclaimer"><a href="../en/ArchWiki:General_disclaimer.html" title="ArchWiki:General disclaimer">Disclaimers</a></li>
	</ul>
	<ul id="footer-icons" class="noprint">
		<li id="footer-copyrightico">
	</ul>
	<div style="clear: both;"></div>
</footer>



</body>
</html>
