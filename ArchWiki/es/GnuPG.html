<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>GnuPG (Español) - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.35.0">
<meta name="robots" content="noindex,follow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="http://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-GnuPG_Español rootpage-GnuPG_Español skin-vector action-view skin-vector-legacy">
<div id="content" class="mw-body" role="main" style="margin: 0">
	<a id="top"></a>
	<div id="siteNotice" class="mw-body-content"></div>
	<div class="mw-indicators mw-body-content">
	</div>
	<h1 id="firstHeading" class="firstHeading" lang="en">GnuPG (Español)</h1>
	<div id="bodyContent" class="mw-body-content">
		<div id="siteSub" class="noprint">From ArchWiki</div>
		<div id="contentSub"></div>
		<div id="contentSub2"></div>
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="#searchInput">Jump to search</a>
		<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr">
<div class="warningbox">The printable version is no longer supported and may have rendering errors. Please update your browser bookmarks and please use the default browser print function instead.</div>
<div class="mw-parser-output">
<div class="noprint archwiki-template-message">
<p><a href="../File:Tango-preferences-desktop-locale.png" class="image"><img alt="Tango-preferences-desktop-locale.png" src="../File:Tango-preferences-desktop-locale.png" decoding="async" width="48" height="48"></a><b>Este artículo o sección necesita ser <a href="../es/ArchWiki:Contributing.html#Traducir_contenido" title="ArchWiki:Contributing (Español)">traducido</a>.</b><a href="../File:Tango-preferences-desktop-locale.png" class="image"><img alt="Tango-preferences-desktop-locale.png" src="../File:Tango-preferences-desktop-locale.png" decoding="async" width="48" height="48"></a></p>
<div>
<b>Notas:</b> Traducción desactualizada en algunas secciones (Discusión en <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php/Talk:GnuPG_(Espa%C3%B1ol)">Talk:GnuPG (Español)#</a>)</div>
</div>
<div class="archwiki-template-meta-related-articles-start">
<p>Artículos relacionados</p>
<ul>
<li><a href="../es/667cbdbc5a0b0ff5df6f8e9a95a8c788.html" class="mw-redirect" title="Pacman/Package signing (Español)">pacman/Package signing (Español)</a></li>
<li><a href="../es/Data-at-rest_encryption.html" class="mw-redirect" title="Disk encryption (Español)">Disk encryption (Español)</a></li>
</ul>
</div>
<p><a rel="nofollow" class="external text" href="http://www.gnupg.org">GnuPG</a> permite cifrar y firmar tus datos y comunicaciones, incluye un sistema versátil de gestión de claves, así como módulos de acceso para toda clase de directorios de claves públicas.
</p>
<div id="toc" class="toc" role="navigation" aria-labelledby="mw-toc-heading">
<input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none"><div class="toctitle" lang="en" dir="ltr">
<h2 id="mw-toc-heading">Contents</h2>
<span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span>
</div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Instalaci%C3%B3n"><span class="tocnumber">1</span> <span class="toctext">Instalación</span></a></li>
<li class="toclevel-1 tocsection-2">
<a href="#Variables_de_Entorno"><span class="tocnumber">2</span> <span class="toctext">Variables de Entorno</span></a>
<ul>
<li class="toclevel-2 tocsection-3"><a href="#GNUPGHOME"><span class="tocnumber">2.1</span> <span class="toctext">GNUPGHOME</span></a></li>
<li class="toclevel-2 tocsection-4"><a href="#GPG_AGENT_INFO"><span class="tocnumber">2.2</span> <span class="toctext">GPG_AGENT_INFO</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-5"><a href="#Archivo_de_configuraci%C3%B3n"><span class="tocnumber">3</span> <span class="toctext">Archivo de configuración</span></a></li>
<li class="toclevel-1 tocsection-6">
<a href="#Gesti%C3%B3n_b%C3%A1sica_de_claves"><span class="tocnumber">4</span> <span class="toctext">Gestión básica de claves</span></a>
<ul>
<li class="toclevel-2 tocsection-7"><a href="#Crear_una_clave"><span class="tocnumber">4.1</span> <span class="toctext">Crear una clave</span></a></li>
<li class="toclevel-2 tocsection-8"><a href="#Gestionar_una_clave"><span class="tocnumber">4.2</span> <span class="toctext">Gestionar una clave</span></a></li>
<li class="toclevel-2 tocsection-9"><a href="#Rotar_subclaves"><span class="tocnumber">4.3</span> <span class="toctext">Rotar subclaves</span></a></li>
<li class="toclevel-2 tocsection-10"><a href="#Importar_una_clave"><span class="tocnumber">4.4</span> <span class="toctext">Importar una clave</span></a></li>
<li class="toclevel-2 tocsection-11"><a href="#Listar_claves"><span class="tocnumber">4.5</span> <span class="toctext">Listar claves</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-12">
<a href="#Cifrar_y_descifrar"><span class="tocnumber">5</span> <span class="toctext">Cifrar y descifrar</span></a>
<ul>
<li class="toclevel-2 tocsection-13"><a href="#Asim%C3%A9trico"><span class="tocnumber">5.1</span> <span class="toctext">Asimétrico</span></a></li>
<li class="toclevel-2 tocsection-14"><a href="#Sim%C3%A9trico"><span class="tocnumber">5.2</span> <span class="toctext">Simétrico</span></a></li>
<li class="toclevel-2 tocsection-15"><a href="#Cifrar_una_contrase%C3%B1a"><span class="tocnumber">5.3</span> <span class="toctext">Cifrar una contraseña</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-16">
<a href="#Firmas"><span class="tocnumber">6</span> <span class="toctext">Firmas</span></a>
<ul>
<li class="toclevel-2 tocsection-17">
<a href="#Crear_una_firma"><span class="tocnumber">6.1</span> <span class="toctext">Crear una firma</span></a>
<ul>
<li class="toclevel-3 tocsection-18"><a href="#Firmar_un_documento"><span class="tocnumber">6.1.1</span> <span class="toctext">Firmar un documento</span></a></li>
<li class="toclevel-3 tocsection-19"><a href="#Firma_sencilla_de_un_archivo_o_mensaje"><span class="tocnumber">6.1.2</span> <span class="toctext">Firma sencilla de un archivo o mensaje</span></a></li>
<li class="toclevel-3 tocsection-20"><a href="#Crear_una_firma_independiente"><span class="tocnumber">6.1.3</span> <span class="toctext">Crear una firma independiente</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-21"><a href="#Verificaci%C3%B3n_de_firmas"><span class="tocnumber">6.2</span> <span class="toctext">Verificación de firmas</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-22">
<a href="#gpg-agent"><span class="tocnumber">7</span> <span class="toctext">gpg-agent</span></a>
<ul>
<li class="toclevel-2 tocsection-23"><a href="#Configuraci%C3%B3n"><span class="tocnumber">7.1</span> <span class="toctext">Configuración</span></a></li>
<li class="toclevel-2 tocsection-24"><a href="#Recargar_el_agente"><span class="tocnumber">7.2</span> <span class="toctext">Recargar el agente</span></a></li>
<li class="toclevel-2 tocsection-25"><a href="#pinentry"><span class="tocnumber">7.3</span> <span class="toctext">pinentry</span></a></li>
<li class="toclevel-2 tocsection-26"><a href="#Iniciar_gpg-agent_con_el_usuario_systemd"><span class="tocnumber">7.4</span> <span class="toctext">Iniciar gpg-agent con el usuario systemd</span></a></li>
<li class="toclevel-2 tocsection-27"><a href="#Frase_de_acceso_desatendida"><span class="tocnumber">7.5</span> <span class="toctext">Frase de acceso desatendida</span></a></li>
<li class="toclevel-2 tocsection-28"><a href="#Agente_SSH"><span class="tocnumber">7.6</span> <span class="toctext">Agente SSH</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-29">
<a href="#Reuniones_de_firmado_de_claves"><span class="tocnumber">8</span> <span class="toctext">Reuniones de firmado de claves</span></a>
<ul>
<li class="toclevel-2 tocsection-30"><a href="#caff"><span class="tocnumber">8.1</span> <span class="toctext">caff</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-31">
<a href="#Smartcards"><span class="tocnumber">9</span> <span class="toctext">Smartcards</span></a>
<ul>
<li class="toclevel-2 tocsection-32"><a href="#Instalaciones_solo_con_GnuPG"><span class="tocnumber">9.1</span> <span class="toctext">Instalaciones solo con GnuPG</span></a></li>
<li class="toclevel-2 tocsection-33"><a href="#GnuPG_junto_con_OpenSC"><span class="tocnumber">9.2</span> <span class="toctext">GnuPG junto con OpenSC</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-34">
<a href="#Resoluci%C3%B3n_de_problemas"><span class="tocnumber">10</span> <span class="toctext">Resolución de problemas</span></a>
<ul>
<li class="toclevel-2 tocsection-35"><a href="#su"><span class="tocnumber">10.1</span> <span class="toctext">su</span></a></li>
<li class="toclevel-2 tocsection-36"><a href="#El_agente_se_queja_del_final_del_archivo"><span class="tocnumber">10.2</span> <span class="toctext">El agente se queja del final del archivo</span></a></li>
<li class="toclevel-2 tocsection-37"><a href="#Permisos_de_configuraci%C3%B3n_de_KGpg"><span class="tocnumber">10.3</span> <span class="toctext">Permisos de configuración de KGpg</span></a></li>
<li class="toclevel-2 tocsection-38"><a href="#Conflictos_entre_gnome-keyring_y_gpg-agent"><span class="tocnumber">10.4</span> <span class="toctext">Conflictos entre gnome-keyring y gpg-agent</span></a></li>
<li class="toclevel-2 tocsection-39"><a href="#mutt_y_gpg"><span class="tocnumber">10.5</span> <span class="toctext">mutt y gpg</span></a></li>
<li class="toclevel-2 tocsection-40"><a href="#Llaves_%22perdidas%22,_actualizando_a_gnupg_versi%C3%B3n_2.1"><span class="tocnumber">10.6</span> <span class="toctext">Llaves "perdidas", actualizando a <span>gnupg</span> versión 2.1</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-41"><a href="#Ver_tambi%C3%A9n"><span class="tocnumber">11</span> <span class="toctext">Ver también</span></a></li>
</ul>
</div>

<h2>
<span id="Instalaci.C3.B3n"></span><span class="mw-headline" id="Instalación">Instalación</span>
</h2>
<p><a href="../es/Help:Reading.html#Instalaci%C3%B3n_de_paquetes" title="Help:Reading (Español)">Instala</a> <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=gnupg">gnupg</a></span>, disponible en los <a href="../es/Official_repositories.html" title="Official repositories (Español)">repositorios oficiales</a>.
</p>
<p>Esto instalará también <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=pinentry">pinentry</a></span>, una colección de diálogos sencillos para introducción de PINs o contraseñas que GnuPG utiliza para la introducción de frases de acceso. <i>pinenetry</i> está señalado por el enlace simbólico <code>/usr/bin/pinentry</code>, que por defecto apunta a <code>/usr/bin/pinentry-gtk-2</code>.
</p>
<h2><span class="mw-headline" id="Variables_de_Entorno">Variables de Entorno</span></h2>
<h3><span class="mw-headline" id="GNUPGHOME">GNUPGHOME</span></h3>
<p>GnuPG usa <code>$GNUPGHOME</code> para localizar el directorio donde se almacenan todos los archivos de configuración. Por defecto <code>$GNUPGHOME</code> no está establecida y en su lugar se usa tu <code>$HOME</code>, por lo que encontrarás un directorio <code>~/.gnupg</code> inmediatamente después de la instalación de GnuPG. Puedes cambiar esta configuración por defecto añadiendo esta línea a uno de tus <a href="../es/Autostarting.html" title="Autostarting (Español)">archivos de inicio</a>:
</p>
<pre>export GNUPGHOME="<i>/path/to/directory</i>"
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> Por defecto, el directorio gnupg tiene sus permisos establecidos en <i>700</i> y los archivos que contiene tienen sus permisos establecidos en <i>600</i>. Solo el propietario del directorio tiene permiso para leer, escribir y acceder a los archivos (<i>r</i>,<i>w</i>,<i>x</i>). Esto es así por razones de seguridad y no debería cambiarse. En el caso de que este directorio o cualquiera de los archivos en su interior no siga esta medida de seguridad, recibirás advertencias sobre un archivo inseguro y sobre los permisos del directorio de inicio.</div>
<h3><span class="mw-headline" id="GPG_AGENT_INFO">GPG_AGENT_INFO</span></h3>
<p>Se usa <code>GPG_AGENT_INFO</code> para localizar el <i>agente gpg</i>. Está compuesto de tres campos delimitados por dos puntos:
</p>
<ol>
<li>ruta al Socket de Dominio Unix</li>
<li>PID de gpg-agent</li>
<li>versión de protocolo establecida en 1</li>
</ol>
<p>Ejemplo: <code>GPG_AGENT_INFO=/tmp/gpg-eFqmSC/S.gpg-agent:7795:1</code>. Cuando se inicia gpg-agent, esta variable se establece al valor correcto.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> Según el <a rel="nofollow" class="external text" href="https://www.gnupg.org/faq/whats-new-in-2.1.html">anuncio de GnuPG 2.1</a>: Con GnuPG 2.1 la necesidad de <code>GPG_AGENT_INFO</code> se ha eliminado por completo y esta variable se ignora. En su lugar, se usa un socket de dominio Unix con el nombre fijo <code>$GNUPGHOME/S.gpg-agent</code>. El agente también se inicia respondiendo a la petición de cualquier herramienta que requiera los servicios del agente.</div>
<h2>
<span id="Archivo_de_configuraci.C3.B3n"></span><span class="mw-headline" id="Archivo_de_configuración">Archivo de configuración</span>
</h2>
<p>Por defecto es <code>~/.gnupg/gpg.conf</code>. Si deseas cambiar la ubicación por defecto, ejecuta gpg mediante <code>$ gpg --homedir <i>ruta/al/archivo</i></code> o usa la variable <code>$GNUPGHOME</code>.
</p>
<p>Añade a este archivo todas las opciones que quieras. Encontrarás un archivo de muestra en <code>usr/share/gnupg/gpg-conf.skel</code>.
</p>
<p>El siguiente es un archivo de configuración básico:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.gnupg/gpg.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">default-key <i>nombre</i>      # útil en caso de que gestiones varias claves y quieras usar una por defecto
keyring <i>archivo</i>         # añadirá <i>archivo</i> a la lista actual de anillos de claves
trustdb-name <i>archivo</i>    # usa <i>archivo</i> en lugar de la base de datos de confianza por defecto
homedir <i>dir</i>             # establece el nombre del directorio de inicio de gnupg en <i>dir</i> en lugar de ~/.gnupg
display-charset utf-8       # ignora las traducciones y supone que el SO usa una codificación nativa UTF-8
keyserver <i>nombre</i>        # usa <i>nombre</i> como tu servidor de claves
no-greeting                 # suprime el mensaje inicial de copyright
armor                       # crea una salida ASCII blindada. Por defecto se usa el formato binario OpenPGP
</pre>
<p>Si deseas configurar algunas opciones por defecto para usuarios nuevos, coloca los archivos de configuración en <code>/etc/skel/.gnupg/</code>. Cuando se añada un nuevo usuario al sistema, los archivos de este directorio se copiarán a su directorio de inicio de GnuPG. También hay un sencillo <i>script</i> llamado <i>addgnupghome</i> que puedes usar para crear nuevos directorios de inicio de GnuPG para los usuarios ya existentes:
</p>
<pre># addgnupghome usuario1 usuario2
</pre>
<p>Esto añadirá los respectivos <code>/home/user1/.gnupg</code> y <code>/home/user2/.gnupg</code> y copiará los archivos del directorio <code>/etc/skel/.gnupg/</code>. El script ignora a los usuarios que ya tengan un directorio de inicio de GnuPG.
</p>
<h2>
<span id="Gesti.C3.B3n_b.C3.A1sica_de_claves"></span><span class="mw-headline" id="Gestión_básica_de_claves">Gestión básica de claves</span>
</h2>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> Siempre que se requiera un <i><code>&lt;user-id&gt;</code></i> en un comando, este se puede especificar mediante el ID de la clave, la huella, una parte del nombre o del correo electrónico, etc. GnuPG es flexible con esto.</div>
<h3><span class="mw-headline" id="Crear_una_clave">Crear una clave</span></h3>
<p>Configura GnuPG para que use en primer lugar los algoritmos más fuertes:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.gnupg/gpg.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">personal-digest-preferences SHA512
cert-digest-algo SHA512
default-preference-list SHA512 SHA384 SHA256 SHA224 AES256 AES192 AES CAST5 ZLIB BZIP2 ZIP Uncompressed
personal-cipher-preferences TWOFISH CAMELLIA256 AES 3DES
</pre>
<p>Genera una clave privada escribiendo en un terminal:
</p>
<pre>$ gpg --full-gen-key
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> La opción <code>--full-gen-key</code> está disponible desde <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=gnupg">gnupg</a></span>-2.1.0.</div>
<p>Se te harán varias preguntas. En general, la mayoría de usuarios querrán tanto una clave RSA (solo firma) como una clave RSA (solo cifrado). Un tamaño de clave de 2048 es suficiente. El uso de 4096 <a rel="nofollow" class="external text" href="https://www.gnupg.org/faq/gnupg-faq.html#no_default_of_rsa4096">"no nos da casi nada, pero nos cuesta mucho."</a>
</p>
<p>Aunque tener una fecha de caducidad para las subclaves no es necesario técnicamente, se considera una buena práctica. Un periodo de un año normalmente es suficientemente bueno para un usuario medio. De esta forma, incluso aunque pierdas acceso a tu anillo de claves, otros usuarios podrán saber que este ya no es válido. Ten en cuenta que puedes extender la fecha de caducidad después de la creación de la clave sin tener que crear una nueva clave.
</p>
<h3><span class="mw-headline" id="Gestionar_una_clave">Gestionar una clave</span></h3>
<ul><li>La ejecución del comando <code>gpg --edit-key <i>&lt;user-id&gt;</i></code> te mostrará un menú que te permite hacer la mayoría de las tareas relacionadas con la gestión de una clave. El siguiente es un ejemplo de como establecer una fecha de caducidad:</li></ul>
<pre>$ gpg --edit-key <i>&lt;user-id&gt;</i>
&gt; key <i>number</i>
&gt; expire <i>yyyy-mm-dd</i>
&gt; save
&gt; quit
</pre>
<p>Algunos comandos útiles:
</p>
<pre>&gt; passwd       # cambiar la frase de acceso
&gt; clean        # compactar cualquier ID de usuario que ya no sea utilizable (p.ej. revocado o caducado)
&gt; revkey       # revocar una clave
&gt; addkey       # añadir una subclave a esta clave
&gt; expire       # cambiar la fecha de caducidad
</pre>
<ul><li>Generar una versión ASCII de tu clave pública (p.ej. para distribuirla por e-mail):</li></ul>
<pre>$ gpg --armor --output public.key --export <i>&lt;user-id&gt;</i>
</pre>
<ul><li>Registrar tu clave en un servidor de claves PGP público, para que otros puedan obtener tu clave sin tener que contactarte directamente:</li></ul>
<pre>$ gpg  --keyserver pgp.mit.edu --send-keys <i>&lt;user-id&gt;</i>
</pre>
<ul><li>Firmar y cifrar para el usuario Bob.</li></ul>
<pre>$ gpg -se -r Bob <i>file</i>
</pre>
<ul><li>hacer una firma de texto plano.</li></ul>
<pre>$ gpg --clearsign <i>file</i>
</pre>
<h3><span class="mw-headline" id="Rotar_subclaves">Rotar subclaves</span></h3>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Advertencia:</strong> <b>Nunca</b> borres tus claves caducadas o revocadas a menos que tengas una buena razón. Hacer esto impediría que pudieras descifrar archivos cifrados con la vieja subclave. Por favor, borra <b>solo</b> claves caducadas o revocadas de otros usuarios para mantener limpio tu anillo de claves.</div>
<p>Si has configurado tus subclaves para que caduquen después de un tiempo, puedes crear subclaves nuevas. Haz esto unas cuantas semanas antes de la caducidad para permitir a otros que actualicen su anillo de claves.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> No necesitas crear una nueva clave solo porque haya caducado. Puedes alargar la fecha de caducidad.</div>
<ul><li>Crear una nueva subclave (repetir tanto para la clave de firma como para la de cifrado).</li></ul>
<pre>$ gpg --edit-key <i>&lt;user-id&gt;</i>
&gt; addkey
</pre>
<p>Y responde a las preguntas que te haga a continuación (ver la sección anterior para más información).
</p>
<ul><li>Guardar los cambios.</li></ul>
<pre>&gt; save
</pre>
<ul><li>Subir la clave a un servidor de claves.</li></ul>
<pre>$ gpg  --keyserver pgp.mit.edu --send-keys <i>&lt;user-id&gt;</i>
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> Revocar subclaves caducadas es innecesario y podría decirse que una mala costumbre. Si revocas claves frecuentemente, es posible que otros pierdan la confianza en ti.</div>
<h3><span class="mw-headline" id="Importar_una_clave">Importar una clave</span></h3>
<ul><li>Importar una clave pública a tu anillo de claves públicas:</li></ul>
<pre>$ gpg --import public.key
</pre>
<ul><li>Importar una clave privada a tu anillo de claves secretas:</li></ul>
<pre>$ gpg --import private.key
</pre>
<ul><li>Importar una clave de un servidor de claves (si se omite '--keyserver', se usa el servidor por defecto):</li></ul>
<pre>$ gpg --recv-keys &lt;keyid&gt; --keyserver pgp.mit.edu
</pre>
<h3><span class="mw-headline" id="Listar_claves">Listar claves</span></h3>
<ul><li>Claves en tu anillo claves públicas:</li></ul>
<pre>$ gpg --list-keys
</pre>
<ul><li>Claves en tu anillo de claves secretas:</li></ul>
<pre>$ gpg --list-secret-keys
</pre>
<h2><span class="mw-headline" id="Cifrar_y_descifrar">Cifrar y descifrar</span></h2>
<p>Cuando se cifra y se descifra es posible tener en uso más de una clave privada. Si esto ocurre necesitas seleccionar la clave activa. Esto se puede hacer usando la opción <code>-u <i>&lt;user-id&gt;</i></code> o la opción <code>--local-user <i>&lt;user-id&gt;</i></code>. Esto hace que se use la clave especificada en lugar de la clave por defecto.
</p>
<p>Existen dos métodos convencionales de cifrado/descifrado, <a rel="nofollow" class="external text" href="https://es.wikipedia.org/wiki/Cifrado_(criptograf%C3%ADa)#Tipos_de_cifrado_seg%C3%BAn_sus_claves">asimétrico y simétrico</a>. Los usos principales van a ser explicados en las siguientes secciones.
</p>
<h4>
<span id="Asim.C3.A9trico"></span><span class="mw-headline" id="Asimétrico">Asimétrico</span>
</h4>
<p>Necesita <a href="#Importar_una_clave">importar la clave</a> del recipiente antes de cifrar (opción <code>--encrypt</code> o <code>-e</code>) un archivo o un mensaje a este (opción <code>--recipient</code> o <code>-r</code>). Adicionalmente se necesita <a href="#Crear_una_clave">#Crear una clave</a> si no lo ha hecho.
</p>
<p>Para cifrar un archivo con el nombre <i>doc</i>, ejecute:
</p>
<pre>$ gpg --recipient <i>user-id</i> --encrypt <i>doc</i>
</pre>
<p>Para descifrar un archivo con el nombre <i>doc</i>.gpg con su clave pública, use el parámetro <code>--decrypt</code> o <code>-d</code>:
</p>
<pre>$ gpg --output <i>doc</i> --decrypt <i>doc</i>.gpg
</pre>
<p><i>gpg</i> le preguntará por su contraseña y después descifrara y escribirá la información de <i>doc</i>.gpg a <i>doc</i>. Si el parámetro <code>-o</code> (<code>--output</code>) se omite, <i>gpg</i> escribirá la información a  stdout.
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Sugerencia:</strong> 
<ul>
<li>Agregue <code>--armor</code> para cifrar un archivo usando ASCII armor (apropiado para copiar y pegar el mensaje en formato de texto)</li>
<li>Use <code>-R <i>user-id</i></code> o <code>--hidden-recipient <i>user-id</i></code> en lugar de <code>-r</code> para no poner la clave del recipiente en el mensaje cifrado. Esto ayuda a ocultar el recipiente del mensaje y es una medida limitada de protección contra el análisis de trafico.</li>
<li>Agregue <code>--no-emit-version</code> para prevenir la impresión de la versión, también se puede modificar este parámetro en el archivo de configuración.</li>
<li>Es posible usar gnupg para cifrar documentos delicados con su propio <i>user-id</i> como recipiente o usando el parametro <code>--default-recipient-self</code>; de cualquier manera, esto solo se puede hacer un archivo a la vez, aunque se pueden comprimir varios archivos en un tarball y después cifrar el tarball. Vea tambien <a href="../es/Data-at-rest_encryption.html#M%C3%A9todos_disponibles" class="mw-redirect" title="Disk encryption (Español)">Disk encryption (Español)#Métodos disponibles</a> si quiere cifrar directorios enteros o incluso todo sus sistema de archivos.</li>
</ul>
</div>
<h4>
<span id="Sim.C3.A9trico"></span><span class="mw-headline" id="Simétrico">Simétrico</span>
</h4>
<p>Cifrado simétrico no requiere la generación de claves y puede ser usada para cifrar datos con una contraseña. Simplemente use <code>--symmetric</code> o <code>-c</code> para efectuar el cifrado:
</p>
<pre>$ gpg -c <i>doc</i>
</pre>
<p>Por ejemplo:
</p>
<ul>
<li>Para cifrar <code><i>doc</i></code> de manera simétrica con una contraseña</li>
<li>Usando el algoritmo AES-256 para cifrar la contraseña</li>
<li>Usando el algoritmo SHA-512 para ofuscar la contraseña</li>
<li>Ofusca la contraseña en 65536 iteraciones</li>
</ul>
<pre>$ gpg -c --s2k-cipher-algo AES256 --s2k-digest-algo SHA512 --s2k-count 65536 <i>doc</i>
</pre>
<p>Para descifrar un archivo <code><i>doc</i>.gpg</code> simetricamente cifrado usando una contrasena y para poner los archivos resultantes <code><i>doc</i></code> en el mismo directorio, ejecute:
</p>
<pre>$ gpg --output <i>doc</i> --decrypt <i>doc</i>.gpg
</pre>
<p>Al descifrar un archivo en la misma sesión en la cual se hizo el cifrado, es posible que no pida la contraseña porque la misma queda almacenada en caché, para borrar el caché ejecute:
</p>
<pre>$ gpg-connect-agent reloadagent /bye
</pre>
<h3>
<span id="Cifrar_una_contrase.C3.B1a"></span><span class="mw-headline" id="Cifrar_una_contraseña">Cifrar una contraseña</span>
</h3>
<p>Puede ser útil cifrar una contraseña, de forma que no quede escrita en texto plano en un archivo de configuración. Un buen ejemplo es la contraseña de tu correo electrónico.
</p>
<p>Primero crea un archivo con tu contraseña. <b>Necesitas</b> dejar <b>una</b> línea en blanco después de la contraseña, ya que si no GnuPG devolverá un mensaje de error cuando evalúe el archivo.
</p>
<p>Después ejecuta:
</p>
<pre>$ gpg -e -a -r <i>&lt;user-id&gt;</i> <i>tu_archivo_de_contraseña</i>
</pre>
<p><code>-e</code> es para cifrar, <code>-a</code> para una salida blindada (salida ASCII), <code>-r</code> para el ID de usuario del destinatario.
</p>
<p>Tras hacer esto tendrás un nuevo archivo <code><i>tu_archivo_de_contraseña</i>.asc</code>.
</p>
<h2><span class="mw-headline" id="Firmas">Firmas</span></h2>
<p>Firmas certifican y marcan el tiempo en documentos. Si el documento es modificado, la verificación de la firma fallará. A diferencia de criptografía regular que usa claves públicas para cifrar un documento, firmas son creadas con la clave privada del usuario. El recipiente de un documento firmado verifica dicha firma con la clave publica del remitente.
</p>
<h3><span class="mw-headline" id="Crear_una_firma">Crear una firma</span></h3>
<h4><span class="mw-headline" id="Firmar_un_documento">Firmar un documento</span></h4>
<p>Para firmar un documento use el parámetro <code>--sign</code> o <code>-s</code>:
</p>
<pre> $ gpg --output <i>doc</i>.sig --sign <i>doc</i>
</pre>
<p><code><i>doc</i>.sig</code> contiene una versión comprimida del documento original <code><i>doc</i></code> y la firma en formato binario, pero el archivo no esta cifrado. Es posible combinar la firma con <a href="#Cifrar_y_descifrar">cifrado</a>.
</p>
<h4><span class="mw-headline" id="Firma_sencilla_de_un_archivo_o_mensaje">Firma sencilla de un archivo o mensaje</span></h4>
<p>Para firmar un archivo sin comprimirlo en formato binario ejecute:
</p>
<pre> $ gpg --output <i>doc</i>.sig --clearsign <i>doc</i>
</pre>
<p>En este caso el documento original <code><i>doc</i></code> y la firma son guardados en de la forma <code><i>doc</i>.sig</code>, la cual es simple de leer.
</p>
<h4><span class="mw-headline" id="Crear_una_firma_independiente">Crear una firma independiente</span></h4>
<p>Para crear una firma que puede ser distribuida de manera separada al archivo, use el parámetro <code>--detach-sig</code>:
</p>
<pre> $ gpg --output <i>doc</i>.sig --detach-sig <i>doc</i>
</pre>
<p>En este caso la firma es guardada en <code><i>doc</i>.sig</code>, pero el contenido de <code><i>doc</i></code> no es guardado allí. Este método es usado generalmente en la distribución de proyectos de software, permitiendo a los usuarios verificar que el programa no ha sido modificado por un tercero.
</p>
<h3>
<span id="Verificaci.C3.B3n_de_firmas"></span><span class="mw-headline" id="Verificación_de_firmas">Verificación de firmas</span>
</h3>
<p>Para verificar una firma use el parámetro <code>--verify</code>:
</p>
<pre> $ gpg --verify <i>doc</i>.sig
</pre>
<p>Donde <code><i>doc</i>.sig</code> es el documento firmado conteniendo la firma que se quiere verificar.
</p>
<p>Si se esta verificando una firma independiente, la firma y el documento tiene que estar presentes para la verificación. Por ejemplo, para verificar el ISO de Arch Linux ejecute:
</p>
<pre> $ gpg --verify archlinux-<i>version</i>.iso.sig
</pre>
<p>donde <code>archlinux-<i>version</i>.iso</code> debe estar ubicado en el mismo directorio.
</p>
<p>También se puede especificar el archivo fuente en el segundo argumento del comando:
</p>
<pre> $ gpg --verify archlinux-<i>version</i>.iso.sig <i>/ruta/a/</i>archlinux-<i>version</i>.iso
</pre>
<p>Si un archivo ha sido cifrado ademas de ser firmado, simplemente <a href="#Cifrar_y_descifrar">descifre</a> el archivo y su firma será verificada.
</p>
<h2><span class="mw-headline" id="gpg-agent">gpg-agent</span></h2>
<p><i>gpg-agent</i> se usa principalmente como demonio para solicitar y almacenar en cache la contraseña de la llave. Esto es útil si se usa GnuPG desde un programa externo como un cliente de correo.
<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=gnupg">gnupg</a></span> viene con <a href="../es/5550997cc5ada0a5896f2c3682902872.html" class="mw-redirect" title="Systemd/User (Español)">systemd/user</a> sockets, los cuales estan activados por defecto. Estos sockets son <code>gpg-agent.socket</code>, <code>gpg-agent-extra.socket</code>, <code>gpg-agent-browser.socket</code>, <code>gpg-agent-ssh.socket</code>, y <code>dirmngr.socket</code>.
</p>
<ul>
<li>El socket pricipal <code>gpg-agent.socket</code> es usado por <i>gpg</i> para conectar al demonio de <i>gpg-agent</i>.</li>
<li>EL uso recomendado de <code>gpg-agent-extra.socket</code> en un sistema local es habilitar un socket de dominio Unix que reenvía desde un sistema remoto. Esto habilita el uso de <i>gpg</i> en el sistema remoto sin exponer las llaves privadas al sistema remoto. Vea <span class="plainlinks archwiki-template-man" title="$ man 1 gpg-agent"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/gpg-agent.1">gpg-agent(1)</a></span> para más detalles.</li>
<li>El socket <code>gpg-agent-ssh.socket</code> puede ser usado por <a href="../es/OpenSSH.html" class="mw-redirect" title="Secure Shell (Español)">SSH</a> para guardar las <a href="../es/SSH_keys.html" title="SSH keys (Español)">Llaves SSH</a> que han sido agregadas con <i>ssh-add</i> en cache. Consulte <a href="#Agente_SSH">#Agente SSH</a> para la configuración necesaria.</li>
<li>El socket <code>dirmngr.socket</code> inicia un demonio de GnuGP que maneja conexiones con servidores de llaves.</li>
</ul>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> Si se usa una configuración diferente a la usada por defecto <a href="#Variables_de_Entorno">#Variables de Entorno</a>, necesitara  <a href="../en/Systemd.html#Editing_provided_units" class="mw-redirect" title="Edit">editar</a> los archivos de los sockets para usar los valores de <code>gpgconf --list-dirs</code>.</div>
<h3>
<span id="Configuraci.C3.B3n"></span><span class="mw-headline" id="Configuración">Configuración</span>
</h3>
<p>Se puede configurar <b>gpg-agent</b> mediante el archivo <code>~/.gnupg/gpg-agent.conf</code>. Las opciones de configuración están listadas en <span class="plainlinks archwiki-template-man" title="$ man 1 gpg-agent"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/gpg-agent.1">gpg-agent(1)</a></span>. Por ejemplo puedes cambiar el tiempo de vida de la caché para las claves no usadas:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.gnupg/gpg-agent.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">default-cache-ttl 3600
</pre>
<h3><span class="mw-headline" id="Recargar_el_agente">Recargar el agente</span></h3>
<p>Después de cambiar la configuración, recarga el agente redirigiendo la cadena <code>RELOADAGENT</code> a <code>gpg-connect-agent</code>:
</p>
<pre>$ echo RELOADAGENT | gpg-connect-agent
</pre>
<p>El terminal debería mostrar <code>OK</code>.
</p>
<h3><span class="mw-headline" id="pinentry">pinentry</span></h3>
<p>Finalmente, el agente necesita saber cómo solicitar la contraseña al usuario. Esto se puede establecer en el archivo de configuración de gpg-agent.
</p>
<p>Por defecto se usa un diálogo gtk. Hay otras opciones (ver <code>info pinentry</code>). Para cambiar la implementación del diálogo, usa la opción de configuración <code>pinentry-program</code>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.gnupg/gpg-agent.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">

# PIN entry program
# pinentry-program /usr/bin/pinentry-curses
# pinentry-program /usr/bin/pinentry-qt4
# pinentry-program /usr/bin/pinentry-kwallet

pinentry-program /usr/bin/pinentry-gtk-2
</pre>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Sugerencia:</strong> Para usar <code>/usr/bin/pinentry-kwallet</code> tienes que instalar el paquete <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/kwalletcli/">kwalletcli</a></span><sup><small>AUR</small></sup>
</div>
<p>Después de hacer este cambio regarga el gpg-agent.
</p>
<h3><span class="mw-headline" id="Iniciar_gpg-agent_con_el_usuario_systemd">Iniciar gpg-agent con el usuario systemd</span></h3>
<p>Es posible usar el <a href="../es/5550997cc5ada0a5896f2c3682902872.html" class="mw-redirect" title="Systemd/User (Español)">Systemd/User</a> para iniciar el agente.
</p>
<p>Crea un archivo de unidad de systemd:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.config/systemd/user/gpg-agent.service</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Unit]
Description=GnuPG private key agent
IgnoreOnIsolate=true

[Service]
Type=forking
ExecStart=/usr/bin/gpg-agent --daemon --homedir=%h/.config/gnupg 
ExecStop=/usr/bin/pkill gpg-agent
Restart=on-abort

[Install]
WantedBy=<i>MyTarget</i>.target</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> 
<ul>
<li>Puedes necesitar establecer algunas variables de entorno para el servicio, por ejemplo <code>GNUPGHOME</code>. Ver <a href="../es/5550997cc5ada0a5896f2c3682902872.html" class="mw-redirect" title="Systemd/User (Español)">Systemd/User</a> para más detalles.</li>
<li>Si tu directorio de inicio de GnuPG es ~/.gnupg, no es necesario especificar su ruta.</li>
<li>
<code>gpg -agent</code> no usará el socket estándar, sino que escuchará a un socket llamado <code>S.gpg-agent</code> ubicado en tu directorio de inicio de GnuPG. De esta forma nos podemos olvidar de cualquier script para leer una archivo de entorno y obtener la ruta del socket aleatorio creado en <code>/tmp</code>.</li>
</ul>
</div>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Sugerencia:</strong> 
<p>Para asegurarte de que gpg-agent está ejecutándose y esperando una conexión, simplemente ejecuta este comando: <code>$ gpg-connect-agent</code>. Si tu configuración es válida, aparecerá un <i>prompt</i> (escribe <i>bye</i> y <i>quit</i> para cerrar la conexión y salir)
</p>
</div>
<h3><span class="mw-headline" id="Frase_de_acceso_desatendida">Frase de acceso desatendida</span></h3>
<p>A partir de GnuPG 2.1.0 se requiere el uso de gpg-agent y pinentry; esto puede romper la compatibilidad hacia atrás para frases de acceso redirigidas desde STDIN usando la opción <code>--passphrase-fd 0</code>. Para tener la misma funcionalidad que en versiones anteriores, se deben hacer dos cosas:
</p>
<p>Primero, editar la configuración de gpg-agent para permitir el modo <i>loopback</i> de pinentry:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.gnupg/gpg-agent.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">allow-loopback-pinentry</pre>
<p>Reinicia el proceso gpg-agent si está en ejecución para que el cambio tenga efecto.
</p>
<p>Segundo, la aplicación debe ser actualizada para incluir un parámetro para usar el modo <i>loopback</i>, como este:
</p>
<pre>$ gpg --pinentry-mode loopback ...
</pre>
<p>...o, si esto no es posible, añadir la opción en la configuración:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.gnupg/gpg.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">pinentry-mode loopback</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> Es posible que establecer la configuración <b>pinentry-mode loopback</b> en <i>gpg.conf</i> pueda afectar a otras funcionalidades. Por ello se recomienda usar la opción de la línea de comandos siempre que sea posible. <a rel="nofollow" class="external autonumber" href="https://bugs.g10code.com/gnupg/issue1772">[1]</a><sup>[<a href="https://en.wikipedia.org/wiki/Wikipedia:Link_rot" class="extiw" title="wikipedia:Wikipedia:Link rot">enlace roto</a> 2020-12-26]</sup> </div>
<h3><span class="mw-headline" id="Agente_SSH">Agente SSH</span></h3>
<p><i> gpg-agent </i> tiene una emulación de agente OpenSSH. Si ya usa el paquete GnuPG, podría considerar usar su agente para almacenar también sus <a href="../es/SSH_keys.html" title="SSH keys (Español)">claves SSH</a>. Además, algunos usuarios pueden preferir la ventana para introducir el PIN que el agente GnuPG proporciona como parte de su administración de contraseña.
</p>
<h2><span class="mw-headline" id="Reuniones_de_firmado_de_claves">Reuniones de firmado de claves</span></h2>
<p>Para permitir a los usuarios validar claves en los servidores y en sus anillos de claves (es decir, asegurarse de que sus propietarios son quienes dicen ser), PGP/GPG usa la conocida como "Red de Confianza". Se celebran eventos de hackers que pretenden mantener esta Red de Confianza, incluyendo reuniones de firmado de claves.
</p>
<p>El protocolo de firmado de claves <a href="https://en.wikipedia.org/wiki/Zimmermann%E2%80%93Sassaman_key-signing_protocol" class="extiw" title="wikipedia:Zimmermann–Sassaman key-signing protocol">Zimmermann-Sassaman</a> es una forma muy efectiva de hacer esto. <a rel="nofollow" class="external text" href="http://www.cryptnet.net/fdp/crypto/keysigning_party/en/keysigning_party.html">Aquí</a> encontrarás un artículo que explica cómo hacerlo.
</p>
<h3><span class="mw-headline" id="caff">caff</span></h3>
<p>Para un proceso más fácil de firmado de claves y envío de firmas a los propietarios después de una reunión de firmado de claves, puedes usar la herramienta <i>caff</i>. Se puede instalar desde el AUR mediante el paquete <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/caff-svn/">caff-svn</a></span><sup><small>AUR</small></sup>, pero habrá muchas dependencias al instalarla desde el AUR. En su lugar, puedes instalarla desde CPAN con
</p>
<pre>cpanm Any::Moose
cpanm GnuPG::Interface
</pre>
<p>Para enviar las firmas a sus propietarios necesitas un <a href="https://en.wikipedia.org/wiki/Message_transfer_agent" class="extiw" title="wikipedia:Message transfer agent">MTA</a>. Si no tienes ya uno, instala <a href="../en/Msmtp.html" title="Msmtp">msmtp</a>.
</p>
<h2><span class="mw-headline" id="Smartcards">Smartcards</span></h2>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=pcsclite">pcsclite</a></span> y <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=libusb-compat">libusb-compat</a></span> tienen que estar instalados, y el servicio <a href="../es/Systemd.html" title="Systemd (Español)">systemd</a> incluído <code>pcscd.service</code> tiene que estar arrancado.</div>
<p>GnuPG usa <i>scdaemon</i> como interfaz para tu lector de <i>smartcard</i>. Por favor, consulta la página del manual para más detalles.
</p>
<h3><span class="mw-headline" id="Instalaciones_solo_con_GnuPG">Instalaciones solo con GnuPG</span></h3>
<p>Si no prevés utilizar otras tarjetas aparte de las basadas en GnuPG, deberías comprobar el parámetro <code>reader-port</code> en <code>~/.gnupg/scdaemon.conf</code>. El valor '0' se refiere al primer puerto serie disponible y el valor '32768' (por defecto) se refiere al primer lector USB.
</p>
<h3><span class="mw-headline" id="GnuPG_junto_con_OpenSC">GnuPG junto con OpenSC</span></h3>
<p>Si vas a usar cualquier smartcard con un driver opensc (p.ej. los lectores de DNI electrónico de algunos países) deberías prestar atención a la configuración de GnuPG. Recién instalado podrías recibir un mensaje como este cuando uses <code>gpg --card-status</code>
</p>
<pre>gpg: selecting openpgp failed: ec=6.108
</pre>
<p>Por defecto, scdaemon intentará contectar directamente con el dispositivo. Esta conexión fallará si el lector está siendo usado por otro proceso. Por ejemplo: el demonio pcscd usado por OpenSC. Para hacer frente a esta situación deberíamos usar le mismo driver subyacente que opensc de forma que puedan trabajar bien juntos. Para indicarle a scdaemon que use pcscd deberías quitar <code>reader-port</code> de <code>~/.gnupg/scdaemon.conf</code>, especificar la ubicación de la librería <code>libpcsclite.so</code> y desactivar ccid para asegurarnos de que se usa pcscd:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.gnupg/scdaemon.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">pcsc-driver /usr/lib/libpcsclite.so
card-timeout 5
disable-ccid
</pre>
<p>Por favor, comprueba <span class="plainlinks archwiki-template-man" title="$ man 1 scdaemon"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/scdaemon.1">scdaemon(1)</a></span> si no usas OpenSC.
</p>
<h2>
<span id="Resoluci.C3.B3n_de_problemas"></span><span class="mw-headline" id="Resolución_de_problemas">Resolución de problemas</span>
</h2>
<h3><span class="mw-headline" id="su">su</span></h3>
<p>Cuando usas <code>pinentry</code>, debes tener los permisos adecuados en el dispositivo terminal que uses (p.ej. <code>/dev/tty1</code>). Sin embargo, con <i>su</i> (o <i>sudo</i>), la propiedad sigue siendo del usuario original, y no del nuevo. Esto significa que pinentry fallará, incluso como root. La solución es cambiar los permisos del dispositivo en algún momento antes del uso de pinentry (es decir, usar gpg con un agente). Si usas gpg como root, simplemente cambia la propiedad a root justo antes de usar gpg:
</p>
<pre>chown root /dev/ttyN  # donde N es el tty actual
</pre>
<p>y después cámbialo de nuevo tras usar gpg la primera vez. Es probable que haya que hacer lo mismo con <code>/dev/pts/</code>.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> El propietario de tty <i>debe</i> corresponderse con el usuario para el cual se ejecuta pinentry. Ser parte del grupo <code>tty</code> <b>no es</b> suficiente.</div>
<h3><span class="mw-headline" id="El_agente_se_queja_del_final_del_archivo">El agente se queja del final del archivo</span></h3>
<p>El programa pinentry por defecto es pinentry-gtk-2, que necesita una sesión de DBus para funcionar correctamente. Ver <a href="../es/General_troubleshooting.html#Permisos_de_sesi%C3%B3n" title="General troubleshooting (Español)">permisos de sesión</a> para más detalles.
</p>
<p>En su lugar, puedes usar <code>pinentry-qt</code>. Consulte <a href="#pinentry">#pinentry</a>.
</p>
<h3>
<span id="Permisos_de_configuraci.C3.B3n_de_KGpg"></span><span class="mw-headline" id="Permisos_de_configuración_de_KGpg">Permisos de configuración de KGpg</span>
</h3>
<p>Ha habido problemas para que <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=kgpg">kgpg</a></span> sea capaz de acceder a las opciones de <code>~/.gnupg/</code>. Un problema puede estar originado por un archivo de opciones obsoleto. Ver este <a rel="nofollow" class="external text" href="https://bugs.kde.org/show_bug.cgi?id=290221">informe de error</a>.
</p>
<p>Otro usuario informó de que <i>KGpg</i> no conseguía arrancar hasta que se cambiaron los permisos de  <code>~/.gnupg</code> a <code>drwxr-xr-x</code>. Si necesitas esta solución provisional, asegúrate de que los contenidos del directorio mantienen los permisos <code>-rw-------</code>. Mejor aún, envía un informe de error a los <a rel="nofollow" class="external text" href="https://bugs.kde.org/buglist.cgi?quicksearch=kgpg">desarrolladores</a>.
</p>
<h3><span class="mw-headline" id="Conflictos_entre_gnome-keyring_y_gpg-agent">Conflictos entre gnome-keyring y gpg-agent</span></h3>
<p>Mientras que el anillo de claves de Gnome implementa un componente de agente GPG, desde la versión 2.1 de GnuPG, se ignora la variable de entorno <code>GPG_AGENT_INFO</code>, de forma que el anillo de claves de Gnome ya no se puede usar como agente GPG.
</p>
<h3><span class="mw-headline" id="mutt_y_gpg">mutt y gpg</span></h3>
<p>Para que solo se te pida la contraseña de GnuPG una vez por sesión, desde GnuPG 2.1., ver <a rel="nofollow" class="external text" href="https://bbs.archlinux.org/viewtopic.php?pid=1490821#p1490821">este hilo del foro</a>.
</p>
<h3>
<span id="Llaves_.22perdidas.22.2C_actualizando_a_gnupg_versi.C3.B3n_2.1"></span><span class="mw-headline" id='Llaves_"perdidas",_actualizando_a_gnupg_versión_2.1'>Llaves "perdidas", actualizando a <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=gnupg">gnupg</a></span> versión 2.1</span>
</h3>
<p>Cuando <code>$ gpg --list-keys</code> no consigue mostrar las claves que solía mostrar, y las aplicaciones se quejan de claves inexistentes o no válidas, algunas claves pueden no haberse migrado al nuevo formato.
</p>
<p>Por favor, lee <a rel="nofollow" class="external text" href="http://jo-ke.name/wp/?p=111">"GnuPG invalid packet workaround"</a><sup>[<a href="https://en.wikipedia.org/wiki/Wikipedia:Link_rot" class="extiw" title="wikipedia:Wikipedia:Link rot">enlace roto</a> 2020-08-02]</sup>. Básicamente, dice que hay un error con las claves en los viejos archivos <code>pubring.gpg</code> y <code>secring.gpg</code>, que ahora se han sustituido por el nuevo archivo <code>pubring.kbx</code> y el subdirectorio <code>private-keys-v1.d/</code> y sus archivos. Tus claves perdidas se pueden recuperar con las siguientes órdenes:
</p>
<pre>$ cd
$ cp -r .gnupg gnupgOLD
$ gpg --export-ownertrust &gt; otrust.txt
$ gpg --import .gnupg/pubring.gpg
$ gpg --import-ownertrust otrust.txt
$ gpg --list-keys
</pre>
<h2>
<span id="Ver_tambi.C3.A9n"></span><span class="mw-headline" id="Ver_también">Ver también</span>
</h2>
<ul>
<li><a rel="nofollow" class="external text" href="http://gnupg.org/gph/es/manual.html">La guía de GNU Privacy Guard</a></li>
<li>
<a rel="nofollow" class="external text" href="http://blog.sanctum.geek.nz/series/linux-crypto/">Un tutorial de GnuPG más exhaustivo</a> (en inglés).</li>
<li>
<a rel="nofollow" class="external text" href="https://www.gnupg.org/faq/gnupg-faq.html">Preguntas frecuentes de GnuPG</a> (en inglés).</li>
<li>
<a rel="nofollow" class="external text" href="https://help.riseup.net/en/security/message-security/openpgp/gpg-best-practices">recomendaciones y mejores prácticas para gpg.conf</a> (en inglés).</li>
<li><a rel="nofollow" class="external text" href="https://github.com/ioerror/torbirdy/blob/master/gpg.conf">Torbirdy gpg.conf</a></li>
</ul>
</div>
</div>
<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Categories</a>: <ul>
<li><a href="../es/Category:Encryption.html" title="Category:Encryption (Español)">Encryption (Español)</a></li>
<li><a href="../es/Category:Email.html" title="Category:Email (Español)">Email (Español)</a></li>
<li><a href="../es/Category:GNU.html" title="Category:GNU (Español)">GNU (Español)</a></li>
</ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden categories: <ul>
<li><a href="../es/Category:Pages_or_sections_flagged_with_Template:Translateme.html" title="Category:Pages or sections flagged with Template:Translateme (Español)">Pages or sections flagged with Template:Translateme (Español)</a></li>
<li><a href="../en/Category:Pages_with_dead_links.html" title="Category:Pages with dead links">Pages with dead links</a></li>
</ul>
</div>
</div>
	</div>
</div>

<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
		<li>Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=GnuPG_(Espa%C3%B1ol)&amp;oldid=647226">https://wiki.archlinux.org/index.php?title=GnuPG_(Español)&amp;oldid=647226</a>"</li>
		<li id="footer-info-lastmod"> This page was last edited on 26 December 2020, at 21:51.</li>
		<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
	<br>
</ul>
	<ul id="footer-places">
		<li id="footer-places-privacy"><a href="../en/ArchWiki:Privacy_policy.html" title="ArchWiki:Privacy policy">Privacy policy</a></li>
		<li id="footer-places-about"><a href="../en/ArchWiki:About.html" title="ArchWiki:About">About ArchWiki</a></li>
		<li id="footer-places-disclaimer"><a href="../en/ArchWiki:General_disclaimer.html" title="ArchWiki:General disclaimer">Disclaimers</a></li>
	</ul>
	<ul id="footer-icons" class="noprint">
		<li id="footer-copyrightico">
	</ul>
	<div style="clear: both;"></div>
</footer>



</body>
</html>
